<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MySQL-ç¬¬13ç« _çº¦æŸ | AngusğŸ¥</title><meta name="keywords" content="MySQL"><meta name="author" content="AngusğŸ¥"><meta name="copyright" content="AngusğŸ¥"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="ã€çº¦æŸ(constraint)æ¦‚è¿°ã€éç©ºçº¦æŸã€å”¯ä¸€æ€§çº¦æŸã€PRIMARY KEY çº¦æŸã€è‡ªå¢åˆ—ï¼šAUTO_INCREMENTã€FOREIGN KEY çº¦æŸã€CHECK çº¦æŸã€DEFAULTçº¦æŸã€é¢è¯•ã€‘">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL-ç¬¬13ç« _çº¦æŸ">
<meta property="og:url" content="https://angus9823.github.io/posts/c2e8ac61.html">
<meta property="og:site_name" content="AngusğŸ¥">
<meta property="og:description" content="ã€çº¦æŸ(constraint)æ¦‚è¿°ã€éç©ºçº¦æŸã€å”¯ä¸€æ€§çº¦æŸã€PRIMARY KEY çº¦æŸã€è‡ªå¢åˆ—ï¼šAUTO_INCREMENTã€FOREIGN KEY çº¦æŸã€CHECK çº¦æŸã€DEFAULTçº¦æŸã€é¢è¯•ã€‘">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0128.WEBP">
<meta property="article:published_time" content="2023-04-07T07:32:52.000Z">
<meta property="article:modified_time" content="2024-08-30T03:31:53.742Z">
<meta property="article:author" content="AngusğŸ¥">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0128.WEBP"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://angus9823.github.io/posts/c2e8ac61"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"var(--theme-color)","bgDark":"#191919","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL-ç¬¬13ç« _çº¦æŸ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-30 11:31:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="AngusğŸ¥" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/favicon.jpg" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">18</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">AngusğŸ¥</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">MySQL-ç¬¬13ç« _çº¦æŸ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2023-04-07T07:32:52.000Z" title="å‘è¡¨äº 2023-04-07 15:32:52">2023-04-07</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-08-30T03:31:53.742Z" title="æ›´æ–°äº 2024-08-30 11:31:53">2024-08-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/MySQL%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/">MySQLåŸºç¡€ç¬”è®°</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.3w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>56åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL-ç¬¬13ç« _çº¦æŸ"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>ç¬¬ 13 ç« _çº¦æŸ</h1>
<p>è®²å¸ˆï¼šå°šç¡…è°·-å®‹çº¢åº·ï¼ˆæ±Ÿæ¹–äººç§°ï¼šåº·å¸ˆå‚…ï¼‰</p>
<hr>
<h2 id="1-çº¦æŸ-constraint-æ¦‚è¿°">1. çº¦æŸ(constraint)æ¦‚è¿°</h2>
<h3 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ">1.1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ</h3>
<p>æ•°æ®å®Œæ•´æ€§ï¼ˆData Integrityï¼‰æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®æ€§ï¼ˆAccuracyï¼‰å’Œå¯é æ€§ï¼ˆReliabilityï¼‰ã€‚å®ƒæ˜¯é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸ç¬¦åˆè¯­ä¹‰è§„å®šçš„æ•°æ®å’Œé˜²æ­¢å› é”™è¯¯ä¿¡æ¯çš„è¾“å…¥è¾“å‡ºé€ æˆæ— æ•ˆæ“ä½œæˆ–é”™è¯¯ä¿¡æ¯è€Œæå‡ºçš„ã€‚</p>
<p>ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒSQL è§„èŒƒä»¥çº¦æŸçš„æ–¹å¼å¯¹<strong>è¡¨æ•°æ®è¿›è¡Œé¢å¤–çš„æ¡ä»¶é™åˆ¶</strong>ã€‚ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<ul>
<li><code>å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªè¡¨ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡å®Œå…¨ç›¸åŒæ— æ³•åŒºåˆ†çš„è®°å½•</li>
<li><code>åŸŸå®Œæ•´æ€§ï¼ˆDomain Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šå¹´é¾„èŒƒå›´ 0-120ï¼Œæ€§åˆ«èŒƒå›´â€œç”·/å¥³â€</li>
<li><code>å¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šå‘˜å·¥æ‰€åœ¨éƒ¨é—¨ï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è¦èƒ½æ‰¾åˆ°è¿™ä¸ªéƒ¨é—¨</li>
<li><code>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆUser-defined Integrityï¼‰</code>ï¼šä¾‹å¦‚ï¼šç”¨æˆ·åå”¯ä¸€ã€å¯†ç ä¸èƒ½ä¸ºç©ºç­‰ï¼Œæœ¬éƒ¨é—¨ç»ç†çš„å·¥èµ„ä¸å¾—é«˜äºæœ¬éƒ¨é—¨èŒå·¥çš„å¹³å‡å·¥èµ„çš„ 5 å€ã€‚</li>
</ul>
<h3 id="1-2-ä»€ä¹ˆæ˜¯çº¦æŸ">1.2 ä»€ä¹ˆæ˜¯çº¦æŸ</h3>
<p>çº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®šã€‚</p>
<p>å¯ä»¥åœ¨<strong>åˆ›å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰</strong>ï¼Œæˆ–è€…åœ¨<strong>è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE è¯­å¥è§„å®šçº¦æŸ</strong>ã€‚</p>
<h3 id="1-3-çº¦æŸçš„åˆ†ç±»">1.3 çº¦æŸçš„åˆ†ç±»</h3>
<ul>
<li>**æ ¹æ®çº¦æŸæ•°æ®åˆ—çš„é™åˆ¶ï¼Œ**çº¦æŸå¯åˆ†ä¸ºï¼š
<ul>
<li><strong>å•åˆ—çº¦æŸ</strong>ï¼šæ¯ä¸ªçº¦æŸåªçº¦æŸä¸€åˆ—</li>
<li><strong>å¤šåˆ—çº¦æŸ</strong>ï¼šæ¯ä¸ªçº¦æŸå¯çº¦æŸå¤šåˆ—æ•°æ®</li>
</ul>
</li>
<li><strong>æ ¹æ®çº¦æŸçš„ä½œç”¨èŒƒå›´</strong>ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š
<ul>
<li><strong>åˆ—çº§çº¦æŸ</strong>ï¼šåªèƒ½ä½œç”¨åœ¨ä¸€ä¸ªåˆ—ä¸Šï¼Œè·Ÿåœ¨åˆ—çš„å®šä¹‰åé¢</li>
<li><strong>è¡¨çº§çº¦æŸ</strong>ï¼šå¯ä»¥ä½œç”¨åœ¨å¤šä¸ªåˆ—ä¸Šï¼Œä¸ä¸åˆ—ä¸€èµ·ï¼Œè€Œæ˜¯å•ç‹¬å®šä¹‰</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">			ä½ç½®			æ”¯æŒçš„çº¦æŸç±»å‹					æ˜¯å¦å¯ä»¥èµ·çº¦æŸå</span><br><span class="line">åˆ—çº§çº¦æŸï¼š	åˆ—çš„åé¢		è¯­æ³•éƒ½æ”¯æŒï¼Œä½†å¤–é”®æ²¡æœ‰æ•ˆæœ		ä¸å¯ä»¥</span><br><span class="line">è¡¨çº§çº¦æŸï¼š	æ‰€æœ‰åˆ—çš„ä¸‹é¢	   é»˜è®¤å’Œéç©ºä¸æ”¯æŒï¼Œå…¶ä»–æ”¯æŒ	   å¯ä»¥ï¼ˆä¸»é”®æ²¡æœ‰æ•ˆæœï¼‰</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>æ ¹æ®çº¦æŸèµ·çš„ä½œç”¨</strong>ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š
<ul>
<li><strong>NOT NULL</strong> <strong>éç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º</strong></li>
<li><strong>UNIQUE</strong> <strong>å”¯ä¸€çº¦æŸ</strong>ï¼Œ<strong>è§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„</strong></li>
<li><strong>PRIMARY KEY ä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ</strong></li>
<li><strong>FOREIGN KEY</strong> <strong>å¤–é”®çº¦æŸ</strong></li>
<li><strong>CHECK</strong> <strong>æ£€æŸ¥çº¦æŸ</strong></li>
<li><strong>DEFAULT</strong> <strong>é»˜è®¤å€¼çº¦æŸ</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š MySQL ä¸æ”¯æŒ check çº¦æŸï¼Œä½†å¯ä»¥ä½¿ç”¨ check çº¦æŸï¼Œè€Œæ²¡æœ‰ä»»ä½•æ•ˆæœ</p>
</blockquote>
<ul>
<li>æŸ¥çœ‹æŸä¸ªè¡¨å·²æœ‰çš„çº¦æŸ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#information_schemaæ•°æ®åº“åï¼ˆç³»ç»Ÿåº“ï¼‰</span><br><span class="line">#table_constraintsè¡¨åç§°ï¼ˆä¸“é—¨å­˜å‚¨å„ä¸ªè¡¨çš„çº¦æŸï¼‰</span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;è¡¨åç§°&#x27;;</span><br></pre></td></tr></table></figure>
<h2 id="2-éç©ºçº¦æŸ">2. éç©ºçº¦æŸ</h2>
<h3 id="2-1-ä½œç”¨">2.1 ä½œç”¨</h3>
<p>é™å®šæŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸å…è®¸ä¸ºç©º</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1555426972098.png" alt="1555426972098"></p>
<h3 id="2-2-å…³é”®å­—">2.2 å…³é”®å­—</h3>
<p>NOT NULL</p>
<h3 id="2-3-ç‰¹ç‚¹">2.3 ç‰¹ç‚¹</h3>
<ul>
<li>
<p>é»˜è®¤ï¼Œæ‰€æœ‰çš„ç±»å‹çš„å€¼éƒ½å¯ä»¥æ˜¯ NULLï¼ŒåŒ…æ‹¬ INTã€FLOAT ç­‰æ•°æ®ç±»å‹</p>
</li>
<li>
<p>éç©ºçº¦æŸåªèƒ½å‡ºç°åœ¨è¡¨å¯¹è±¡çš„åˆ—ä¸Šï¼Œåªèƒ½æŸä¸ªåˆ—å•ç‹¬é™å®šéç©ºï¼Œä¸èƒ½ç»„åˆéç©º</p>
</li>
<li>
<p>ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¾ˆå¤šåˆ—éƒ½åˆ†åˆ«é™å®šäº†éç©º</p>
</li>
<li>
<p>ç©ºå­—ç¬¦ä¸²â€™'ä¸ç­‰äº NULLï¼Œ0 ä¹Ÿä¸ç­‰äº NULL</p>
</li>
</ul>
<h3 id="2-4-æ·»åŠ éç©ºçº¦æŸ">2.4 æ·»åŠ éç©ºçº¦æŸ</h3>
<p>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">id INT(10) NOT NULL,</span><br><span class="line">NAME VARCHAR(20) NOT NULL,</span><br><span class="line">sex CHAR NULL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student(</span><br><span class="line">	sid int,</span><br><span class="line">    sname varchar(20) not null,</span><br><span class="line">    tel char(11) ,</span><br><span class="line">    cardid char(18) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into student values(1,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;110222198912032545&#x27;); #æˆåŠŸ</span><br><span class="line"></span><br><span class="line">insert into student values(2,&#x27;æå››&#x27;,&#x27;13710011002&#x27;,null);#èº«ä»½è¯å·ä¸ºç©º</span><br><span class="line">ERROR 1048 (23000): Column &#x27;cardid&#x27; cannot be null</span><br><span class="line"></span><br><span class="line">insert into student values(2,&#x27;æå››&#x27;,null,&#x27;110222198912032546&#x27;);#æˆåŠŸï¼Œtelå…è®¸ä¸ºç©º</span><br><span class="line"></span><br><span class="line">insert into student values(3,null,null,&#x27;110222198912032547&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1048 (23000): Column &#x27;sname&#x27; cannot be null</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å»ºè¡¨å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null;</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR(30) NOT NULL;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table student modify sname varchar(20) not null;</span><br></pre></td></tr></table></figure>
<h3 id="2-5-åˆ é™¤éç©ºçº¦æŸ">2.5 åˆ é™¤éç©ºçº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ NULL;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º</span><br><span class="line"></span><br><span class="line">æˆ–</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY sex VARCHAR(30) NULL;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp</span><br><span class="line">MODIFY NAME VARCHAR(15) DEFAULT &#x27;abc&#x27; NULL;</span><br></pre></td></tr></table></figure>
<h2 id="3-å”¯ä¸€æ€§çº¦æŸ">3. å”¯ä¸€æ€§çº¦æŸ</h2>
<h3 id="3-1-ä½œç”¨">3.1 ä½œç”¨</h3>
<p>ç”¨æ¥é™åˆ¶æŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸èƒ½é‡å¤ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1555427198811.png" alt="1555427198811"></p>
<h3 id="3-2-å…³é”®å­—">3.2 å…³é”®å­—</h3>
<p>UNIQUE</p>
<h3 id="3-3-ç‰¹ç‚¹">3.3 ç‰¹ç‚¹</h3>
<ul>
<li>åŒä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€çº¦æŸã€‚</li>
<li>å”¯ä¸€çº¦æŸå¯ä»¥æ˜¯æŸä¸€ä¸ªåˆ—çš„å€¼å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªåˆ—ç»„åˆçš„å€¼å”¯ä¸€ã€‚</li>
<li>å”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚</li>
<li>åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚</li>
<li><strong>MySQL ä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚</strong></li>
</ul>
<h3 id="3-4-æ·»åŠ å”¯ä¸€çº¦æŸ">3.4 æ·»åŠ å”¯ä¸€çº¦æŸ</h3>
<p>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique key,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    [constraint çº¦æŸå] unique key(å­—æ®µå)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">	sid int,</span><br><span class="line">    sname varchar(20),</span><br><span class="line">    tel char(11) unique,</span><br><span class="line">    cardid char(18) unique key</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t_course(</span><br><span class="line">	cid INT UNIQUE,</span><br><span class="line">	cname VARCHAR(100) UNIQUE,</span><br><span class="line">	description VARCHAR(200)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE USER(</span><br><span class="line"> id INT NOT NULL,</span><br><span class="line"> NAME VARCHAR(25),</span><br><span class="line"> PASSWORD VARCHAR(16),</span><br><span class="line"> -- ä½¿ç”¨è¡¨çº§çº¦æŸè¯­æ³•</span><br><span class="line"> CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç ç»„åˆä¸èƒ½é‡å¤</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values(1,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);</span><br><span class="line">insert into student values(2,&#x27;æå››&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| sid | sname | tel         | cardid             |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 |</span><br><span class="line">|   2 | æå››  | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into student values(3,&#x27;ç‹äº”&#x27;,&#x27;13710011004&#x27;,&#x27;101223199012015624&#x27;); #èº«ä»½è¯å·é‡å¤</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;101223199012015624&#x27; for key &#x27;cardid&#x27;</span><br><span class="line"></span><br><span class="line">insert into student values(3,&#x27;ç‹äº”&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015625&#x27;);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;13710011003&#x27; for key &#x27;tel&#x27;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å»ºè¡¨åæŒ‡å®šå”¯ä¸€é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#å­—æ®µåˆ—è¡¨ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè¯¥åˆ—çš„å€¼å”¯ä¸€ã€‚å¦‚æœæ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„</span><br><span class="line">#æ–¹å¼1ï¼š</span><br><span class="line">alter table è¡¨åç§° add unique key(å­—æ®µåˆ—è¡¨);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#æ–¹å¼2ï¼š</span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå å­—æ®µç±»å‹ unique;</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">ADD UNIQUE(NAME,PASSWORD);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">ADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">MODIFY NAME VARCHAR(20) UNIQUE;</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">	sid int primary key,</span><br><span class="line">    sname varchar(20),</span><br><span class="line">    tel char(11) ,</span><br><span class="line">    cardid char(18)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table student add unique key(tel);</span><br><span class="line">alter table student add unique key(cardid);</span><br></pre></td></tr></table></figure>
<h3 id="3-5-å…³äºå¤åˆå”¯ä¸€çº¦æŸ">3.5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    unique key(å­—æ®µåˆ—è¡¨) #å­—æ®µåˆ—è¡¨ä¸­å†™çš„æ˜¯å¤šä¸ªå­—æ®µåï¼Œå¤šä¸ªå­—æ®µåç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºé‚£ä¹ˆæ˜¯å¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#å­¦ç”Ÿè¡¨</span><br><span class="line">create table student(</span><br><span class="line">	sid int,	#å­¦å·</span><br><span class="line">    sname varchar(20),			#å§“å</span><br><span class="line">    tel char(11) unique key,  #ç”µè¯</span><br><span class="line">    cardid char(18) unique key #èº«ä»½è¯å·</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#è¯¾ç¨‹è¡¨</span><br><span class="line">create table course(</span><br><span class="line">	cid int,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">    cname varchar(20)     #è¯¾ç¨‹åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#é€‰è¯¾è¡¨</span><br><span class="line">create table student_course(</span><br><span class="line">    id int,</span><br><span class="line">	sid int,</span><br><span class="line">    cid int,</span><br><span class="line">    score int,</span><br><span class="line">    unique key(sid,cid)  #å¤åˆå”¯ä¸€</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into student values(1,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);#æˆåŠŸ</span><br><span class="line">insert into student values(2,&#x27;æå››&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);#æˆåŠŸ</span><br><span class="line">insert into course values(1001,&#x27;Java&#x27;),(1002,&#x27;MySQL&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">| sid | sname | tel         | cardid             |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 |</span><br><span class="line">|   2 | æå››  | 13710011003 | 101223199012015624 |</span><br><span class="line">+-----+-------+-------------+--------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid  | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java  |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values</span><br><span class="line">(1, 1, 1001, 89),</span><br><span class="line">(2, 1, 1002, 90),</span><br><span class="line">(3, 2, 1001, 88),</span><br><span class="line">(4, 2, 1002, 56);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">| id | sid  | cid  | score |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">|  1 |    1 | 1001 |    89 |</span><br><span class="line">|  2 |    1 | 1002 |    90 |</span><br><span class="line">|  3 |    2 | 1001 |    88 |</span><br><span class="line">|  4 |    2 | 1002 |    56 |</span><br><span class="line">+----+------+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values (5, 1, 1001, 88);#å¤±è´¥</span><br><span class="line"></span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;1-1001&#x27; for key &#x27;sid&#x27;   è¿åsid-cidçš„å¤åˆå”¯ä¸€</span><br></pre></td></tr></table></figure>
<h3 id="3-5-åˆ é™¤å”¯ä¸€çº¦æŸ">3.5 åˆ é™¤å”¯ä¸€çº¦æŸ</h3>
<ul>
<li>æ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</li>
<li>åˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚</li>
<li>åˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚</li>
<li>å¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;è¡¨å&#x27;; #æŸ¥çœ‹éƒ½æœ‰å“ªäº›çº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE USER</span><br><span class="line">DROP INDEX uk_name_pwd;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šå¯ä»¥é€šè¿‡ <code>show index from è¡¨åç§°; </code>æŸ¥çœ‹è¡¨çš„ç´¢å¼•</p>
</blockquote>
<h2 id="4-PRIMARY-KEY-çº¦æŸ">4. PRIMARY KEY çº¦æŸ</h2>
<h3 id="4-1-ä½œç”¨">4.1 ä½œç”¨</h3>
<p>ç”¨æ¥å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚</p>
<h3 id="4-2-å…³é”®å­—">4.2 å…³é”®å­—</h3>
<p>primary key</p>
<h3 id="4-3-ç‰¹ç‚¹">4.3 ç‰¹ç‚¹</h3>
<ul>
<li>ä¸»é”®çº¦æŸç›¸å½“äº<strong>å”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆ</strong>ï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1555427492244.png" alt="1555427492244"></p>
<ul>
<li>
<p>ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå»ºç«‹ä¸»é”®çº¦æŸå¯ä»¥åœ¨åˆ—çº§åˆ«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨çº§åˆ«ä¸Šåˆ›å»ºã€‚</p>
</li>
<li>
<p>ä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰</p>
</li>
<li>
<p>å¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚</p>
</li>
<li>
<p><strong>MySQL çš„ä¸»é”®åæ€»æ˜¯ PRIMARY</strong>ï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚</p>
</li>
<li>
<p>å½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„<strong>ä¸»é”®ç´¢å¼•</strong>ï¼ˆèƒ½å¤Ÿæ ¹æ®ä¸»é”®æŸ¥è¯¢çš„ï¼Œå°±æ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ã€‚å¦‚æœåˆ é™¤ä¸»é”®çº¦æŸäº†ï¼Œä¸»é”®çº¦æŸå¯¹åº”çš„ç´¢å¼•å°±è‡ªåŠ¨åˆ é™¤äº†ã€‚</p>
</li>
<li>
<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸è¦ä¿®æ”¹ä¸»é”®å­—æ®µçš„å€¼ã€‚å› ä¸ºä¸»é”®æ˜¯æ•°æ®è®°å½•çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœä¿®æ”¹äº†ä¸»é”®çš„å€¼ï¼Œå°±æœ‰å¯èƒ½ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ã€‚</p>
</li>
</ul>
<h3 id="4-4-æ·»åŠ ä¸»é”®çº¦æŸ">4.4 æ·»åŠ ä¸»é”®çº¦æŸ</h3>
<p>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹  primary key, #åˆ—çº§æ¨¡å¼</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    [constraint çº¦æŸå] primary key(å­—æ®µå) #è¡¨çº§æ¨¡å¼</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table temp(</span><br><span class="line">	id int primary key,</span><br><span class="line">    name varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc temp;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| id    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values(1,&#x27;å¼ ä¸‰&#x27;);#æˆåŠŸ</span><br><span class="line">insert into temp values(2,&#x27;æå››&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | å¼ ä¸‰ |</span><br><span class="line">|  2 | æå›› |</span><br><span class="line">+----+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values(1,&#x27;å¼ ä¸‰&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1062 (23000): Duplicateï¼ˆé‡å¤ï¼‰ entryï¼ˆé”®å…¥ï¼Œè¾“å…¥ï¼‰ &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into temp values(1,&#x27;ç‹äº”&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">insert into temp values(3,&#x27;å¼ ä¸‰&#x27;);#æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | å¼ ä¸‰ |</span><br><span class="line">|  2 | æå›› |</span><br><span class="line">|  3 | å¼ ä¸‰ |</span><br><span class="line">+----+------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into temp values(4,null);#æˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into temp values(null,&#x27;æç¦&#x27;);#å¤±è´¥</span><br><span class="line">ERROR 1048 (23000): Column &#x27;id&#x27; cannot be null</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from temp;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | å¼ ä¸‰ |</span><br><span class="line">|  2 | æå›› |</span><br><span class="line">|  3 | å¼ ä¸‰ |</span><br><span class="line">|  4 | NULL |</span><br><span class="line">+----+------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æ¼”ç¤ºä¸€ä¸ªè¡¨å»ºç«‹ä¸¤ä¸ªä¸»é”®çº¦æŸ</span><br><span class="line">create table temp(</span><br><span class="line">	id int primary key,</span><br><span class="line">    name varchar(20) primary key</span><br><span class="line">);</span><br><span class="line">ERROR 1068 (42000): Multipleï¼ˆå¤šé‡çš„ï¼‰ primary key definedï¼ˆå®šä¹‰ï¼‰</span><br></pre></td></tr></table></figure>
<p>å†ä¸¾ä¾‹ï¼š</p>
<ul>
<li>åˆ—çº§çº¦æŸ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp4(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT ,</span><br><span class="line">NAME VARCHAR(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>è¡¨çº§çº¦æŸ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp5(</span><br><span class="line">id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">NAME VARCHAR(20),</span><br><span class="line">pwd VARCHAR(15),</span><br><span class="line">CONSTRAINT emp5_id_pk PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å»ºè¡¨åå¢åŠ ä¸»é”®çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE è¡¨åç§° ADD PRIMARY KEY(å­—æ®µåˆ—è¡¨); #å­—æ®µåˆ—è¡¨å¯ä»¥æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæ˜¯å¤šä¸ªå­—æ®µçš„è¯ï¼Œæ˜¯å¤åˆä¸»é”®</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student ADD PRIMARY KEY (sid);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 ADD PRIMARY KEY(NAME,pwd);</span><br></pre></td></tr></table></figure>
<h3 id="4-5-å…³äºå¤åˆä¸»é”®">4.5 å…³äºå¤åˆä¸»é”®</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹,</span><br><span class="line">    primary key(å­—æ®µå1,å­—æ®µå2)  #è¡¨ç¤ºå­—æ®µ1å’Œå­—æ®µ2çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šä¸ªå­—æ®µ</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#å­¦ç”Ÿè¡¨</span><br><span class="line">create table student(</span><br><span class="line">	sid int primary key,  #å­¦å·</span><br><span class="line">    sname varchar(20)     #å­¦ç”Ÿå§“å</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#è¯¾ç¨‹è¡¨</span><br><span class="line">create table course(</span><br><span class="line">	cid int primary key,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">    cname varchar(20)     #è¯¾ç¨‹åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#é€‰è¯¾è¡¨</span><br><span class="line">create table student_course(</span><br><span class="line">	sid int,</span><br><span class="line">    cid int,</span><br><span class="line">    score int,</span><br><span class="line">    primary key(sid,cid)  #å¤åˆä¸»é”®</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student values(1,&#x27;å¼ ä¸‰&#x27;),(2,&#x27;æå››&#x27;);</span><br><span class="line">insert into course values(1001,&#x27;Java&#x27;),(1002,&#x27;MySQL&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student;</span><br><span class="line">+-----+-------+</span><br><span class="line">| sid | sname |</span><br><span class="line">+-----+-------+</span><br><span class="line">|   1 | å¼ ä¸‰  |</span><br><span class="line">|   2 | æå››  |</span><br><span class="line">+-----+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from course;</span><br><span class="line">+------+-------+</span><br><span class="line">| cid  | cname |</span><br><span class="line">+------+-------+</span><br><span class="line">| 1001 | Java  |</span><br><span class="line">| 1002 | MySQL |</span><br><span class="line">+------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values(1, 1001, 89),(1,1002,90),(2,1001,88),(2,1002,56);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from student_course;</span><br><span class="line">+-----+------+-------+</span><br><span class="line">| sid | cid  | score |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">|   1 | 1001 |    89 |</span><br><span class="line">|   1 | 1002 |    90 |</span><br><span class="line">|   2 | 1001 |    88 |</span><br><span class="line">|   2 | 1002 |    56 |</span><br><span class="line">+-----+------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student_course values(1, 1001, 100);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1-1001&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc student_course;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| sid   | int(11) | NO   | PRI | NULL    |       |</span><br><span class="line">| cid   | int(11) | NO   | PRI | NULL    |       |</span><br><span class="line">| score | int(11) | YES  |     | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>å†ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE emp6(</span><br><span class="line">id INT NOT NULL,</span><br><span class="line">NAME VARCHAR(20),</span><br><span class="line">pwd VARCHAR(15),</span><br><span class="line">CONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="4-6-åˆ é™¤ä¸»é”®çº¦æŸ">4.6 åˆ é™¤ä¸»é”®çº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° drop primary key;</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp5 DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šåˆ é™¤ä¸»é”®çº¦æŸï¼Œä¸éœ€è¦æŒ‡å®šä¸»é”®åï¼Œå› ä¸ºä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œåˆ é™¤ä¸»é”®çº¦æŸåï¼Œéç©ºè¿˜å­˜åœ¨ã€‚</p>
</blockquote>
<h2 id="5-è‡ªå¢åˆ—ï¼šAUTO-INCREMENT">5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT</h2>
<h3 id="5-1-ä½œç”¨">5.1 ä½œç”¨</h3>
<p>æŸä¸ªå­—æ®µçš„å€¼è‡ªå¢</p>
<h3 id="5-2-å…³é”®å­—">5.2 å…³é”®å­—</h3>
<p>auto_increment</p>
<h3 id="5-3-ç‰¹ç‚¹å’Œè¦æ±‚">5.3 ç‰¹ç‚¹å’Œè¦æ±‚</h3>
<p>ï¼ˆ1ï¼‰ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—</p>
<p>ï¼ˆ2ï¼‰å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿</p>
<p>ï¼ˆ3ï¼‰è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰</p>
<p>ï¼ˆ4ï¼‰è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹</p>
<p>ï¼ˆ5ï¼‰å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ nullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚</p>
<p>é”™è¯¯æ¼”ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int auto_increment,</span><br><span class="line">    ename varchar(20)</span><br><span class="line">);</span><br><span class="line"># ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key,</span><br><span class="line">    ename varchar(20) unique key auto_increment</span><br><span class="line">);</span><br><span class="line"># ERROR 1063 (42000): Incorrect column specifier for column &#x27;ename&#x27;  å› ä¸ºenameä¸æ˜¯æ•´æ•°ç±»å‹</span><br></pre></td></tr></table></figure>
<h3 id="5-4-å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ">5.4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ</h3>
<p><strong>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹  primary key auto_increment,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique key,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ unique key auto_increment,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,,</span><br><span class="line">    primary key(å­—æ®µå)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key auto_increment,</span><br><span class="line">    ename varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid   | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| ename | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å»ºè¡¨å</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key ,</span><br><span class="line">    ename varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int auto_increment;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| eid   | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| ename | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="5-5-å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ">5.5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;#ç»™è¿™ä¸ªå­—æ®µå¢åŠ è‡ªå¢çº¦æŸ</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; #å»æ‰auto_incrementç›¸å½“äºåˆ é™¤</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify eid int;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid   | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="5-6-MySQL-8-0-æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–">5.6 MySQL 8.0 æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–</h3>
<p>åœ¨ MySQL 8.0 ä¹‹å‰ï¼Œè‡ªå¢ä¸»é”® AUTO_INCREMENT çš„å€¼å¦‚æœå¤§äº max(primary key)+1ï¼Œåœ¨ MySQL é‡å¯åï¼Œä¼šé‡ç½® AUTO_INCREMENT=max(primary key)+1ï¼Œè¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚<br>
ä¸‹é¢é€šè¿‡æ¡ˆä¾‹æ¥å¯¹æ¯”ä¸åŒçš„ç‰ˆæœ¬ä¸­è‡ªå¢å˜é‡æ˜¯å¦æŒä¹…åŒ–ã€‚<br>
åœ¨ MySQL 5.7 ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š<br>
åˆ›å»ºçš„æ•°æ®è¡¨ä¸­åŒ…å«è‡ªå¢ä¸»é”®çš„ id å­—æ®µï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test1(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æ’å…¥ 4 ä¸ªç©ºå€¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1</span><br><span class="line">VALUES(0),(0),(0),(0);</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢æ•°æ®è¡¨ test1 ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ id ä¸º 4 çš„è®°å½•ï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 WHERE id = 4;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æ’å…¥ä¸€ä¸ªç©ºå€¼ï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 VALUES(0);</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢æ­¤æ—¶æ•°æ®è¡¨ test1 ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  5 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤äº† id ä¸º 4 çš„è®°å½•ï¼Œä½†æ˜¯å†æ¬¡æ’å…¥ç©ºå€¼æ—¶ï¼Œå¹¶æ²¡æœ‰é‡ç”¨è¢«åˆ é™¤çš„ 4ï¼Œè€Œæ˜¯åˆ†é…äº† 5ã€‚<br>
åˆ é™¤ id ä¸º 5 çš„è®°å½•ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM test1 where id=5;</span><br></pre></td></tr></table></figure>
<p><strong>é‡å¯æ•°æ®åº“</strong>ï¼Œé‡æ–°æ’å…¥ä¸€ä¸ªç©ºå€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO test1 values(0);</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æŸ¥è¯¢æ•°æ®è¡¨ test1 ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  4 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ–°æ’å…¥çš„ 0 å€¼åˆ†é…çš„æ˜¯ 4ï¼ŒæŒ‰ç…§é‡å¯å‰çš„æ“ä½œé€»è¾‘ï¼Œæ­¤å¤„åº”è¯¥åˆ†é… 6ã€‚å‡ºç°ä¸Šè¿°ç»“æœçš„ä¸»è¦åŸå› æ˜¯è‡ªå¢ä¸»é”®æ²¡æœ‰æŒä¹…åŒ–ã€‚<br>
åœ¨ MySQL 5.7 ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”± InnoDB æ•°æ®å­—å…¸å†…éƒ¨ä¸€ä¸ª<code>è®¡æ•°å™¨</code>æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨<code>å†…å­˜ä¸­ç»´æŠ¤</code>ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ–ã€‚</p>
<p>åœ¨ MySQL 8.0 ç‰ˆæœ¬ä¸­ï¼Œä¸Šè¿°æµ‹è¯•æ­¥éª¤æœ€åä¸€æ­¥çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test1;</span><br><span class="line">+----+</span><br><span class="line">| id |</span><br><span class="line">+----+</span><br><span class="line">|  1 |</span><br><span class="line">|  2 |</span><br><span class="line">|  3 |</span><br><span class="line">|  6 |</span><br><span class="line">+----+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè‡ªå¢å˜é‡å·²ç»æŒä¹…åŒ–äº†ã€‚</p>
<p>MySQL 8.0 å°†è‡ªå¢ä¸»é”®çš„è®¡æ•°å™¨æŒä¹…åŒ–åˆ°<code>é‡åšæ—¥å¿—</code>ä¸­ã€‚æ¯æ¬¡è®¡æ•°å™¨å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå°†å…¶å†™å…¥é‡åšæ—¥å¿—ä¸­ã€‚å¦‚æœæ•°æ®åº“é‡å¯ï¼ŒInnoDB ä¼šæ ¹æ®é‡åšæ—¥å¿—ä¸­çš„ä¿¡æ¯æ¥åˆå§‹åŒ–è®¡æ•°å™¨çš„å†…å­˜å€¼ã€‚</p>
<h2 id="6-FOREIGN-KEY-çº¦æŸ">6. FOREIGN KEY çº¦æŸ</h2>
<h3 id="6-1-ä½œç”¨">6.1 ä½œç”¨</h3>
<p>é™å®šæŸä¸ªè¡¨çš„æŸä¸ªå­—æ®µçš„å¼•ç”¨å®Œæ•´æ€§ã€‚</p>
<p>æ¯”å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„é€‰æ‹©ï¼Œå¿…é¡»åœ¨éƒ¨é—¨è¡¨èƒ½æ‰¾åˆ°å¯¹åº”çš„éƒ¨åˆ†ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1555428214706.png" alt="1555428214706"></p>
<h3 id="6-2-å…³é”®å­—">6.2 å…³é”®å­—</h3>
<p>FOREIGN KEY</p>
<h3 id="6-3-ä¸»è¡¨å’Œä»è¡¨-çˆ¶è¡¨å’Œå­è¡¨">6.3 ä¸»è¡¨å’Œä»è¡¨/çˆ¶è¡¨å’Œå­è¡¨</h3>
<p>ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨</p>
<p>ä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨</p>
<p>ä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚</p>
<p>ä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚</p>
<h3 id="6-4-ç‰¹ç‚¹">6.4 ç‰¹ç‚¹</h3>
<p>ï¼ˆ1ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨/å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ—</p>
<p>â€‹ ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¢«ä¾èµ–/è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„</p>
<p>ï¼ˆ2ï¼‰åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œ<strong>é»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®å</strong>ï¼ˆä¾‹å¦‚ student_ibfk_1;ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚</p>
<p>ï¼ˆ3ï¼‰åˆ›å»º(CREATE)è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨</p>
<p>ï¼ˆ4ï¼‰åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆåˆ é™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨</p>
<p>ï¼ˆ5ï¼‰å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ï¼Œå¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ®</p>
<p>ï¼ˆ6ï¼‰åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ</p>
<p>ï¼ˆ7ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ›å»ºå­è¡¨æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯â€œERROR 1005 (HY000): Canâ€™t create tableâ€™database.tablenameâ€™(errno: 150)â€ã€‚</p>
<p>â€‹ ä¾‹å¦‚ï¼šéƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ½æ˜¯ int ç±»å‹ã€‚</p>
<p>ï¼ˆ8ï¼‰<strong>å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼•</strong>ã€‚ä½†æ˜¯ç´¢å¼•åæ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰</p>
<p>ï¼ˆ9ï¼‰åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»<code>æ‰‹åŠ¨</code>åˆ é™¤å¯¹åº”çš„ç´¢å¼•</p>
<h3 id="6-5-æ·»åŠ å¤–é”®çº¦æŸ">6.5 æ·»åŠ å¤–é”®çº¦æŸ</h3>
<p>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table ä¸»è¡¨åç§°(</span><br><span class="line">	å­—æ®µ1  æ•°æ®ç±»å‹  primary key,</span><br><span class="line">    å­—æ®µ2  æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table ä»è¡¨åç§°(</span><br><span class="line">	å­—æ®µ1  æ•°æ®ç±»å‹  primary key,</span><br><span class="line">    å­—æ®µ2  æ•°æ®ç±»å‹,</span><br><span class="line">    [CONSTRAINT &lt;å¤–é”®çº¦æŸåç§°&gt;] FOREIGN KEYï¼ˆä»è¡¨çš„æŸä¸ªå­—æ®µ) references ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)</span><br><span class="line">);</span><br><span class="line">#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œé€»è¾‘æ„ä¹‰ä¹Ÿä¸€æ ·</span><br><span class="line">#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„å­—æ®µåå¯ä»¥ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„å­—æ®µåä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€æ ·</span><br><span class="line"></span><br><span class="line">-- FOREIGN KEY: åœ¨è¡¨çº§æŒ‡å®šå­è¡¨ä¸­çš„åˆ—</span><br><span class="line">-- REFERENCES: æ ‡ç¤ºåœ¨çˆ¶è¡¨ä¸­çš„åˆ—</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">create table dept( #ä¸»è¡¨</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(#ä»è¡¨</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)   #åœ¨ä»è¡¨ä¸­æŒ‡å®šå¤–é”®çº¦æŸ</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼š</span><br><span class="line">ï¼ˆ1ï¼‰ä¸»è¡¨deptå¿…é¡»å…ˆåˆ›å»ºæˆåŠŸï¼Œç„¶åæ‰èƒ½åˆ›å»ºempè¡¨ï¼ŒæŒ‡å®šå¤–é”®æˆåŠŸã€‚</span><br><span class="line">ï¼ˆ2ï¼‰åˆ é™¤è¡¨æ—¶ï¼Œå…ˆåˆ é™¤ä»è¡¨empï¼Œå†åˆ é™¤ä¸»è¡¨dept</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å»ºè¡¨å</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¡¨ä¸è¡¨çš„å…³è”éƒ½æ˜¯æå‰è®¾è®¡å¥½äº†çš„ï¼Œå› æ­¤ï¼Œä¼šåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±æŠŠå¤–é”®çº¦æŸå®šä¹‰å¥½ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¡¨çš„è®¾è®¡ï¼ˆæ¯”å¦‚æ·»åŠ æ–°çš„å­—æ®µï¼Œå¢åŠ æ–°çš„å…³è”å…³ç³»ï¼‰ï¼Œä½†æ²¡æœ‰é¢„å…ˆå®šä¹‰å¤–é”®çº¦æŸï¼Œé‚£ä¹ˆï¼Œå°±è¦ç”¨ä¿®æ”¹è¡¨çš„æ–¹å¼æ¥è¡¥å……å®šä¹‰ã€‚</p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE ä»è¡¨å ADD [CONSTRAINT çº¦æŸå] FOREIGN KEY (ä»è¡¨çš„å­—æ®µ) REFERENCES ä¸»è¡¨å(è¢«å¼•ç”¨å­—æ®µ) [on update xx][on delete xx];</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE emp1</span><br><span class="line">ADD [CONSTRAINT emp_dept_id_fk] FOREIGN KEY(dept_id) REFERENCES dept(dept_id);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">);</span><br><span class="line">#è¿™ä¸¤ä¸ªè¡¨åˆ›å»ºæ—¶ï¼Œæ²¡æœ‰æŒ‡å®šå¤–é”®çš„è¯ï¼Œé‚£ä¹ˆåˆ›å»ºé¡ºåºæ˜¯éšæ„</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table emp add foreign key (deptid) references dept(did);</span><br></pre></td></tr></table></figure>
<h3 id="6-6-æ¼”ç¤ºé—®é¢˜">6.6 æ¼”ç¤ºé—®é¢˜</h3>
<p>ï¼ˆ1ï¼‰å¤±è´¥ï¼šä¸æ˜¯é”®åˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int ,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯deptçš„didä¸æ˜¯é”®åˆ—</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å¤±è´¥ï¼šæ•°æ®ç±»å‹ä¸ä¸€è‡´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid char,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">);</span><br><span class="line">#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯ä»è¡¨çš„deptidå­—æ®µå’Œä¸»è¡¨çš„didå­—æ®µçš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œå¹¶ä¸”è¦å®ƒä¿©çš„é€»è¾‘æ„ä¹‰ä¸€è‡´</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰æˆåŠŸï¼Œä¸¤ä¸ªè¡¨å­—æ®µåä¸€æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    did int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (did) references dept(did)</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">    #æ˜¯å¦é‡åæ²¡é—®é¢˜ï¼Œå› ä¸ºä¸¤ä¸ªdidåœ¨ä¸åŒçš„è¡¨ä¸­</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹é—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values(1001,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1003, &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values(1,&#x27;å¼ ä¸‰&#x27;,1001); #æ·»åŠ ä»è¡¨è®°å½•æˆåŠŸï¼Œåœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line"></span><br><span class="line">insert into emp values(2,&#x27;æå››&#x27;,1005);#æ·»åŠ ä»è¡¨è®°å½•å¤±è´¥</span><br><span class="line">ERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child row: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) ä»è¡¨empæ·»åŠ è®°å½•å¤±è´¥ï¼Œå› ä¸ºä¸»è¡¨deptæ²¡æœ‰1005éƒ¨é—¨</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨  |</span><br><span class="line">| 1003 | è´¢åŠ¡éƒ¨  |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰   |   1001 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">update emp set deptid = 1002 where eid = 1;#ä¿®æ”¹ä»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child rowï¼ˆå­è¡¨çš„è®°å½•ï¼‰: a foreign key constraint failsï¼ˆå¤–é”®çº¦æŸå¤±è´¥ï¼‰ (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #éƒ¨é—¨è¡¨didå­—æ®µç°åœ¨æ²¡æœ‰1002çš„å€¼ï¼Œæ‰€ä»¥å‘˜å·¥è¡¨ä¸­ä¸èƒ½ä¿®æ”¹å‘˜å·¥æ‰€åœ¨éƒ¨é—¨deptidä¸º1002</span><br><span class="line"></span><br><span class="line">update dept set did = 1002 where did = 1001;#ä¿®æ”¹ä¸»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨çš„è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) #éƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå°±ä¸èƒ½ä¿®æ”¹äº†ã€‚</span><br><span class="line"></span><br><span class="line">update dept set did = 1002 where did = 1003;#ä¿®æ”¹ä¸»è¡¨æˆåŠŸ  å› ä¸ºéƒ¨é—¨è¡¨çš„1003éƒ¨é—¨æ²¡æœ‰è¢«empè¡¨å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from dept where did=1001; #åˆ é™¤ä¸»è¡¨å¤±è´¥</span><br><span class="line">ERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #å› ä¸ºéƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå¯¹åº”çš„è®°å½•å°±ä¸èƒ½è¢«åˆ é™¤</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼šçº¦æŸå…³ç³»æ˜¯é’ˆå¯¹åŒæ–¹çš„</p>
<ul>
<li>
<p>æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä¸»è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ•°æ®å—çº¦æŸ</p>
</li>
<li>
<p>æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä»è¡¨çš„æ·»åŠ å’Œä¿®æ”¹æ•°æ®å—çº¦æŸ</p>
</li>
<li>
<p>åœ¨ä»è¡¨ä¸Šå»ºç«‹å¤–é”®ï¼Œè¦æ±‚ä¸»è¡¨å¿…é¡»å­˜åœ¨</p>
</li>
<li>
<p>åˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦æ±‚ä»è¡¨ä»è¡¨å…ˆåˆ é™¤ï¼Œæˆ–å°†ä»è¡¨ä¸­å¤–é”®å¼•ç”¨è¯¥ä¸»è¡¨çš„å…³ç³»å…ˆåˆ é™¤</p>
</li>
</ul>
<h3 id="6-7-çº¦æŸç­‰çº§">6.7 çº¦æŸç­‰çº§</h3>
<ul>
<li>
<p><code>Cascadeæ–¹å¼</code>ï¼šåœ¨çˆ¶è¡¨ä¸Š update/delete è®°å½•æ—¶ï¼ŒåŒæ­¥ update/delete æ‰å­è¡¨çš„åŒ¹é…è®°å½•</p>
</li>
<li>
<p><code>Set nullæ–¹å¼</code>ï¼šåœ¨çˆ¶è¡¨ä¸Š update/delete è®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸º nullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸º not null</p>
</li>
<li>
<p><code>No actionæ–¹å¼</code>ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œ update/delete æ“ä½œ</p>
</li>
<li>
<p><code>Restrictæ–¹å¼</code>ï¼šåŒ no actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ</p>
</li>
<li>
<p><code>Set defaultæ–¹å¼</code>ï¼ˆåœ¨å¯è§†åŒ–å·¥å…· SQLyog ä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½† Innodb ä¸èƒ½è¯†åˆ«</p>
</li>
</ul>
<p>å¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äº Restrict æ–¹å¼ã€‚</p>
<p>å¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: <code>ON UPDATE CASCADE ON DELETE RESTRICT</code> çš„æ–¹å¼ã€‚</p>
<p>ï¼ˆ1ï¼‰æ¼”ç¤º 1ï¼šon update cascade on delete set null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update cascade on delete set null</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values(1001,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1002, &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1003, &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into emp values(1,&#x27;å¼ ä¸‰&#x27;,1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">insert into emp values(2,&#x27;æå››&#x27;,1001);</span><br><span class="line">insert into emp values(3,&#x27;ç‹äº”&#x27;,1002);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ä¸»è¡¨æˆåŠŸï¼Œä»è¡¨ä¹Ÿè·Ÿç€ä¿®æ”¹ï¼Œä¿®æ”¹äº†ä¸»è¡¨è¢«å¼•ç”¨çš„å­—æ®µ1002ä¸º1004ï¼Œä»è¡¨çš„å¼•ç”¨å­—æ®µå°±è·Ÿç€ä¿®æ”¹ä¸º1004äº†</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥æ˜¯1002ï¼Œä¿®æ”¹ä¸º1004</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   1001 |</span><br><span class="line">|   2 | æå››  |   1001 |</span><br><span class="line">|   3 | ç‹äº”  |   1004 | #åŸæ¥æ˜¯1002ï¼Œè·Ÿç€ä¿®æ”¹ä¸º1004</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µçš„å€¼è¢«ä¿®æ”¹ä¸ºnull</span><br><span class="line">mysql&gt; delete from dept where did = 1001;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  | #è®°å½•1001éƒ¨é—¨è¢«åˆ é™¤äº†</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨  |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨  |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   NULL | #åŸæ¥å¼•ç”¨1001éƒ¨é—¨çš„å‘˜å·¥ï¼Œdeptidå­—æ®µå˜ä¸ºnull</span><br><span class="line">|   2 | æå››  |   NULL |</span><br><span class="line">|   3 | ç‹äº”  |   1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰æ¼”ç¤º 2ï¼šon update set null on delete cascade</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update set null on delete cascade</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values(1001,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1002, &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1003, &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values(1,&#x27;å¼ ä¸‰&#x27;,1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">insert into emp values(2,&#x27;æå››&#x27;,1001);</span><br><span class="line">insert into emp values(3,&#x27;ç‹äº”&#x27;,1002);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1002 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   1001 |</span><br><span class="line">|   2 | æå››  |   1001 |</span><br><span class="line">|   3 | ç‹äº”  |   1002 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè®¾ç½®ä¸ºnull</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥didæ˜¯1002</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   1001 |</span><br><span class="line">|   2 | æå››  |   1001 |</span><br><span class="line">|   3 | ç‹äº”  |   NULL | #åŸæ¥deptidæ˜¯1002ï¼Œå› ä¸ºéƒ¨é—¨è¡¨1002è¢«ä¿®æ”¹äº†ï¼Œ1002æ²¡æœ‰å¯¹åº”çš„äº†ï¼Œå°±è®¾ç½®ä¸ºnull</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">mysql&gt; delete from dept where did=1001;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  | #éƒ¨é—¨è¡¨ä¸­1001éƒ¨é—¨è¢«åˆ é™¤</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |#åŸæ¥1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   3 | ç‹äº”  |   NULL |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰æ¼”ç¤ºï¼šon update cascade on delete cascade</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table dept(</span><br><span class="line">	did int primary key,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line">	eid int primary key,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid int,				#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did)  on update cascade on delete cascade</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œä¹Ÿè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">insert into dept values(1001,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1002, &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">insert into dept values(1003, &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line">insert into emp values(1,&#x27;å¼ ä¸‰&#x27;,1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">insert into emp values(2,&#x27;æå››&#x27;,1001);</span><br><span class="line">insert into emp values(3,&#x27;ç‹äº”&#x27;,1002);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1002 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   1001 |</span><br><span class="line">|   2 | æå››  |   1001 |</span><br><span class="line">|   3 | ç‹äº”  |   1002 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè‡ªåŠ¨ä¿®æ”¹</span><br><span class="line">mysql&gt; update dept set did = 1004 where did = 1002;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  |</span><br><span class="line">+------+--------+</span><br><span class="line">| 1001 | æ•™å­¦éƒ¨ |</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ | #éƒ¨é—¨1002ä¿®æ”¹ä¸º1004</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰  |   1001 |</span><br><span class="line">|   2 | æå››  |   1001 |</span><br><span class="line">|   3 | ç‹äº”  |   1004 | #çº§è”ä¿®æ”¹</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">mysql&gt; delete from dept where did=1001;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from dept;</span><br><span class="line">+------+--------+</span><br><span class="line">| did  | dname  | #1001éƒ¨é—¨è¢«åˆ é™¤äº†</span><br><span class="line">+------+--------+</span><br><span class="line">| 1003 | å’¨è¯¢éƒ¨ |</span><br><span class="line">| 1004 | è´¢åŠ¡éƒ¨ |</span><br><span class="line">+------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | deptid |  #1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   3 | ç‹äº”  |   1004 |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="6-8-åˆ é™¤å¤–é”®çº¦æŸ">6.8 åˆ é™¤å¤–é”®çº¦æŸ</h3>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(1)ç¬¬ä¸€æ­¥å…ˆæŸ¥çœ‹çº¦æŸåå’Œåˆ é™¤å¤–é”®çº¦æŸ</span><br><span class="line">SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;è¡¨åç§°&#x27;;#æŸ¥çœ‹æŸä¸ªè¡¨çš„çº¦æŸå</span><br><span class="line"></span><br><span class="line">ALTER TABLE ä»è¡¨å DROP FOREIGN KEY å¤–é”®çº¦æŸå;</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰ç¬¬äºŒæ­¥æŸ¥çœ‹ç´¢å¼•åå’Œåˆ é™¤ç´¢å¼•ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼‰</span><br><span class="line">SHOW INDEX FROM è¡¨åç§°; #æŸ¥çœ‹æŸä¸ªè¡¨çš„ç´¢å¼•å</span><br><span class="line"></span><br><span class="line">ALTER TABLE ä»è¡¨å DROP INDEX ç´¢å¼•å;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = &#x27;emp&#x27;;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table emp drop foreign key emp_ibfk_1;</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show index from emp;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table emp drop index deptid;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt;  show index from emp;</span><br></pre></td></tr></table></figure>
<h3 id="6-9-å¼€å‘åœºæ™¯">6.9 å¼€å‘åœºæ™¯</h3>
<p><strong>é—®é¢˜ 1ï¼šå¦‚æœä¸¤ä¸ªè¡¨ä¹‹é—´æœ‰å…³ç³»ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼‰ï¼Œæ¯”å¦‚ï¼šå‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ï¼ˆä¸€å¯¹å¤šï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å¦ä¸€å®šè¦å»ºå¤–é”®çº¦æŸï¼Ÿ</strong></p>
<p>ç­”ï¼šä¸æ˜¯çš„</p>
<p><strong>é—®é¢˜ 2ï¼šå»ºå’Œä¸å»ºå¤–é”®çº¦æŸæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>ç­”ï¼šå»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¼šå—åˆ°é™åˆ¶ï¼Œä»è¯­æ³•å±‚é¢å—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ä¸å¯èƒ½æ·»åŠ ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨çš„å€¼åœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°ã€‚</p>
<p>ä¸å»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¸å—é™åˆ¶ï¼Œè¦ä¿è¯æ•°æ®çš„<code>å¼•ç”¨å®Œæ•´æ€§</code>ï¼Œåªèƒ½ä¾<code>é ç¨‹åºå‘˜çš„è‡ªè§‰</code>ï¼Œæˆ–è€…æ˜¯<code>åœ¨Javaç¨‹åºä¸­è¿›è¡Œé™å®š</code>ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå‘˜å·¥çš„ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨æŒ‡å®šä¸ºä¸€ä¸ªå®Œå…¨ä¸å­˜åœ¨çš„éƒ¨é—¨ã€‚</p>
<p><strong>é—®é¢˜ 3ï¼šé‚£ä¹ˆå»ºå’Œä¸å»ºå¤–é”®çº¦æŸå’ŒæŸ¥è¯¢æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ</strong></p>
<p>ç­”ï¼šæ²¡æœ‰</p>
<blockquote>
<p>åœ¨ MySQL é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL æ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼š<code>å› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢</code>ã€‚æ‰€ä»¥ï¼Œ MySQL å…è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨<code>åº”ç”¨å±‚é¢</code>å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h3 id="6-10-é˜¿é‡Œå¼€å‘è§„èŒƒ">6.10 é˜¿é‡Œå¼€å‘è§„èŒƒ</h3>
<p>ã€<code>å¼ºåˆ¶</code>ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚</p>
<p>è¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„ student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„ student_id æ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äº<code>å•æœºä½å¹¶å‘</code>ï¼Œä¸é€‚åˆ<code>åˆ†å¸ƒå¼</code>ã€<code>é«˜å¹¶å‘é›†ç¾¤</code>ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“<code>æ›´æ–°é£æš´</code>çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„<code>æ’å…¥é€Ÿåº¦</code>ã€‚</p>
<h2 id="7-CHECK-çº¦æŸ">7. CHECK çº¦æŸ</h2>
<h3 id="7-1-ä½œç”¨">7.1 ä½œç”¨</h3>
<p>æ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦å· xx è¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´</p>
<h3 id="2ã€å…³é”®å­—">2ã€å…³é”®å­—</h3>
<p>CHECK</p>
<h3 id="3ã€è¯´æ˜ï¼šMySQL-5-7-ä¸æ”¯æŒ">3ã€è¯´æ˜ï¼šMySQL 5.7 ä¸æ”¯æŒ</h3>
<p>MySQL5.7 å¯ä»¥ä½¿ç”¨ check çº¦æŸï¼Œä½† check çº¦æŸå¯¹æ•°æ®éªŒè¯æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚æ·»åŠ æ•°æ®æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦å‘Š</p>
<p>ä½†æ˜¯<strong>MySQL 8.0 ä¸­å¯ä»¥ä½¿ç”¨ check çº¦æŸäº†</strong>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key,</span><br><span class="line">    ename varchar(5),</span><br><span class="line">    gender char check (&#x27;ç”·&#x27; or &#x27;å¥³&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values(1,&#x27;å¼ ä¸‰&#x27;,&#x27;å¦–&#x27;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">| eid | ename | gender |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">|   1 | å¼ ä¸‰   | å¦–     |</span><br><span class="line">+-----+-------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>å†ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE temp(</span><br><span class="line">id INT AUTO_INCREMENT,</span><br><span class="line">NAME VARCHAR(20),</span><br><span class="line">age INT CHECK(age &gt; 20),</span><br><span class="line">PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<ul>
<li>å†ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age tinyint check(age &gt;20) æˆ– sex char(2) check(sex in(â€˜ç”·â€™,â€™å¥³â€™))</span><br></pre></td></tr></table></figure>
<ul>
<li>å†ä¸¾ä¾‹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHECK(height&gt;=0 AND height&lt;3)</span><br></pre></td></tr></table></figure>
<h2 id="8-DEFAULT-çº¦æŸ">8. DEFAULT çº¦æŸ</h2>
<h3 id="8-1-ä½œç”¨">8.1 ä½œç”¨</h3>
<p>ç»™æŸä¸ªå­—æ®µ/æŸåˆ—æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸€æ—¦è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ­¤å­—æ®µæ²¡æœ‰æ˜¾å¼èµ‹å€¼ï¼Œåˆ™èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚</p>
<h3 id="8-2-å…³é”®å­—">8.2 å…³é”®å­—</h3>
<p>DEFAULT</p>
<h3 id="8-3-å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼">8.3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼</h3>
<p>ï¼ˆ1ï¼‰å»ºè¡¨æ—¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹  primary key,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  unique key,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line">create table è¡¨åç§°(</span><br><span class="line">	å­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">    primary key(å­—æ®µå),</span><br><span class="line">    unique key(å­—æ®µå)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">è¯´æ˜ï¼šé»˜è®¤å€¼çº¦æŸä¸€èˆ¬ä¸åœ¨å”¯ä¸€é”®å’Œä¸»é”®åˆ—ä¸ŠåŠ </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key,</span><br><span class="line">    ename varchar(20) not null,</span><br><span class="line">    gender char default &#x27;ç”·&#x27;,</span><br><span class="line">    tel char(11) not null default &#x27;&#x27; #é»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename  | varchar(20) | NO   |     | NULL    |       |</span><br><span class="line">| gender | char(1)     | YES  |     | ç”·      |       |</span><br><span class="line">| tel    | char(11)    | NO   |     |         |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee values(1,&#x27;æ±ªé£&#x27;,&#x27;ç”·&#x27;,&#x27;13700102535&#x27;); #æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel         |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">|   1 | æ±ªé£  | ç”·     | 13700102535 |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values(2,&#x27;å¤©çª&#x27;); #æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from employee;</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">| eid | ename | gender | tel         |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">|   1 | æ±ªé£  | ç”·     | 13700102535 |</span><br><span class="line">|   2 | å¤©çª  | ç”·     |             |</span><br><span class="line">+-----+-------+--------+-------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into employee(eid,ename) values(3,&#x27;äºŒè™&#x27;);</span><br><span class="line">#ERROR 1062 (23000): Duplicate entry &#x27;&#x27; for key &#x27;tel&#x27;</span><br><span class="line">#å¦‚æœtelæœ‰å”¯ä¸€æ€§çº¦æŸçš„è¯ä¼šæŠ¥é”™ï¼Œå¦‚æœtelæ²¡æœ‰å”¯ä¸€æ€§çº¦æŸï¼Œå¯ä»¥æ·»åŠ æˆåŠŸ</span><br></pre></td></tr></table></figure>
<p>å†ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myemp(</span><br><span class="line">id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">NAME VARCHAR(15),</span><br><span class="line">salary DOUBLE(10,2) DEFAULT 2000</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰å»ºè¡¨å</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼;</span><br><span class="line"></span><br><span class="line">#å¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰éç©ºçº¦æŸï¼Œä½ è¿˜ä¿ç•™éç©ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨åŠ é»˜è®¤å€¼çº¦æŸæ—¶ï¼Œè¿˜å¾—ä¿ç•™éç©ºçº¦æŸï¼Œå¦åˆ™éç©ºçº¦æŸå°±è¢«åˆ é™¤äº†</span><br><span class="line">#åŒç†ï¼Œåœ¨ç»™æŸä¸ªå­—æ®µåŠ éç©ºçº¦æŸä¹Ÿä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰é»˜è®¤å€¼çº¦æŸï¼Œä½ æƒ³ä¿ç•™ï¼Œä¹Ÿè¦åœ¨modifyè¯­å¥ä¸­ä¿ç•™é»˜è®¤å€¼çº¦æŸï¼Œå¦åˆ™å°±åˆ é™¤äº†</span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ not null;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">	eid int primary key,</span><br><span class="line">    ename varchar(20),</span><br><span class="line">    gender char,</span><br><span class="line">    tel char(11) not null</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| gender | char(1)     | YES  |     | NULL    |       |</span><br><span class="line">| tel    | char(11)    | NO   |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char default &#x27;ç”·&#x27;;  #ç»™genderå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ</span><br><span class="line">alter table employee modify tel char(11) default &#x27;&#x27;; #ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| gender | char(1)     | YES  |     | ç”·      |       |</span><br><span class="line">| tel    | char(11)    | YES  |     |         |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify tel char(11) default &#x27;&#x27;  not null;#ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸï¼Œå¹¶ä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| gender | char(1)     | YES  |     | ç”·      |       |</span><br><span class="line">| tel    | char(11)    | NO   |     |         |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="8-4-å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ">8.4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ ;#åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¹Ÿä¸ä¿ç•™éç©ºçº¦æŸ</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹  not null; #åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table employee modify gender char; #åˆ é™¤genderå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œå¦‚æœæœ‰éç©ºçº¦æŸï¼Œä¹Ÿä¸€å¹¶åˆ é™¤</span><br><span class="line">alter table employee modify tel char(11)  not null;#åˆ é™¤telå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc employee;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| eid    | int(11)     | NO   | PRI | NULL    |       |</span><br><span class="line">| ename  | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| gender | char(1)     | YES  |     | NULL    |       |</span><br><span class="line">| tel    | char(11)    | NO   |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="9-é¢è¯•">9. é¢è¯•</h2>
<p><strong>é¢è¯• 1ã€ä¸ºä»€ä¹ˆå»ºè¡¨æ—¶ï¼ŒåŠ  not null default â€˜â€™ æˆ– default 0</strong></p>
<p>ç­”ï¼šä¸æƒ³è®©è¡¨ä¸­å‡ºç° null å€¼ã€‚</p>
<p><strong>é¢è¯• 2ã€ä¸ºä»€ä¹ˆä¸æƒ³è¦ null çš„å€¼</strong></p>
<p>ç­”:ï¼ˆ1ï¼‰ä¸å¥½æ¯”è¾ƒã€‚null æ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„ is null å’Œ is not null æ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€šå¸¸è¿”å› nullã€‚</p>
<p>â€‹ ï¼ˆ2ï¼‰æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null default â€˜â€™ æˆ– default 0</p>
<p><strong>é¢è¯• 3ã€å¸¦ AUTO_INCREMENT çº¦æŸçš„å­—æ®µå€¼æ˜¯ä» 1 å¼€å§‹çš„å—ï¼Ÿ</strong><br>
åœ¨ MySQL ä¸­ï¼Œé»˜è®¤ AUTO_INCREMENT çš„åˆå§‹å€¼æ˜¯ 1ï¼Œæ¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œå­—æ®µå€¼è‡ªåŠ¨åŠ  1ã€‚è®¾ç½®è‡ªå¢å±æ€§ï¼ˆAUTO_INCREMENTï¼‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸€æ¡æ’å…¥è®°å½•çš„è‡ªå¢å­—æ®µçš„å€¼ï¼Œè¿™æ ·æ–°æ’å…¥çš„è®°å½•çš„è‡ªå¢å­—æ®µå€¼ä»åˆå§‹å€¼å¼€å§‹é€’å¢ï¼Œå¦‚åœ¨è¡¨ä¸­æ’å…¥ç¬¬ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æŒ‡å®š id å€¼ä¸º 5ï¼Œåˆ™ä»¥åæ’å…¥çš„è®°å½•çš„ id å€¼å°±ä¼šä» 6 å¼€å§‹å¾€ä¸Šå¢åŠ ã€‚æ·»åŠ ä¸»é”®çº¦æŸæ—¶ï¼Œå¾€å¾€éœ€è¦è®¾ç½®å­—æ®µè‡ªåŠ¨å¢åŠ å±æ€§ã€‚</p>
<p><strong>é¢è¯• 4ã€å¹¶ä¸æ˜¯æ¯ä¸ªè¡¨éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ</strong><br>
å¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ä¸èƒ½è·¨å¼•æ“ä½¿ç”¨ã€‚</p>
<p>MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤–é”®çº¦æŸæ˜¯ç”¨æ¥ä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§çš„ï¼Œå¦‚æœè¡¨ä¹‹é—´éœ€è¦å…³è”å¤–é”®ï¼Œå´æŒ‡å®šäº†ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆè¿™äº›è¡¨ä¹‹é—´æ˜¯ä¸èƒ½åˆ›å»ºå¤–é”®çº¦æŸçš„ã€‚æ‰€ä»¥è¯´ï¼Œå­˜å‚¨å¼•æ“çš„é€‰æ‹©ä¹Ÿä¸å®Œå…¨æ˜¯éšæ„çš„ã€‚</p>
<hr>
<p>ä»¥ä¸‹æ˜¯ç»ƒä¹ ï¼ï¼ï¼</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_202304041721321.jpg" alt="å¾®ä¿¡å›¾ç‰‡_202304041721321" style="zoom:25%;" />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_202304041721061.jpg" alt="å¾®ä¿¡å›¾ç‰‡_202304041721061" style="zoom:50%;" />
<h3 id="ç¬¬-13-ç« -çº¦æŸ">ç¬¬ 13 ç« _çº¦æŸ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br></pre></td><td class="code"><pre><span class="line">#ç¬¬13ç« _çº¦æŸ</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">1. åŸºç¡€çŸ¥è¯†</span><br><span class="line">1.1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸï¼Ÿ ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼</span><br><span class="line"></span><br><span class="line">1.2 ä»€ä¹ˆå«çº¦æŸï¼Ÿå¯¹è¡¨ä¸­å­—æ®µçš„é™åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">1.3 çº¦æŸçš„åˆ†ç±»ï¼š</span><br><span class="line"></span><br><span class="line">è§’åº¦1ï¼šçº¦æŸçš„å­—æ®µçš„ä¸ªæ•°</span><br><span class="line">å•åˆ—çº¦æŸ vs å¤šåˆ—çº¦æŸ</span><br><span class="line"></span><br><span class="line">è§’åº¦2ï¼šçº¦æŸçš„ä½œç”¨èŒƒå›´</span><br><span class="line"></span><br><span class="line">åˆ—çº§çº¦æŸï¼šå°†æ­¤çº¦æŸå£°æ˜åœ¨å¯¹åº”å­—æ®µçš„åé¢</span><br><span class="line">è¡¨çº§çº¦æŸï¼šåœ¨è¡¨ä¸­æ‰€æœ‰å­—æ®µéƒ½å£°æ˜å®Œï¼Œåœ¨æ‰€æœ‰å­—æ®µçš„åé¢å£°æ˜çš„çº¦æŸ</span><br><span class="line"></span><br><span class="line">è§’åº¦3ï¼šçº¦æŸçš„ä½œç”¨ï¼ˆæˆ–åŠŸèƒ½ï¼‰</span><br><span class="line"></span><br><span class="line">â‘  not null (éç©ºçº¦æŸ)</span><br><span class="line">â‘¡ unique  (å”¯ä¸€æ€§çº¦æŸ)</span><br><span class="line">â‘¢ primary key (ä¸»é”®çº¦æŸ)</span><br><span class="line">â‘£ foreign key (å¤–é”®çº¦æŸ)</span><br><span class="line">â‘¤ check (æ£€æŸ¥çº¦æŸ)</span><br><span class="line">â‘¥ default (é»˜è®¤å€¼çº¦æŸ)</span><br><span class="line"></span><br><span class="line">1.4 å¦‚ä½•æ·»åŠ /åˆ é™¤çº¦æŸï¼Ÿ</span><br><span class="line"></span><br><span class="line">CREATE TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line"></span><br><span class="line">ALTER TABLE æ—¶å¢åŠ çº¦æŸã€åˆ é™¤çº¦æŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#2. å¦‚ä½•æŸ¥çœ‹è¡¨ä¸­çš„çº¦æŸ</span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;test1&#x27;;</span><br><span class="line"></span><br><span class="line">CREATE DATABASE dbtest13;</span><br><span class="line">USE dbtest13;</span><br><span class="line">#3. not null (éç©ºçº¦æŸ)</span><br><span class="line">#3.1 åœ¨CREATE TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line"></span><br><span class="line">CREATE TABLE test1(</span><br><span class="line">id INT NOT NULL,</span><br><span class="line">last_name VARCHAR(15) NOT NULL,</span><br><span class="line">email VARCHAR(25),</span><br><span class="line">salary DECIMAL(10,2)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test1;</span><br><span class="line"></span><br><span class="line">INSERT INTO test1(id,last_name,email,salary)</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,&#x27;tom@126.com&#x27;,3400);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šColumn &#x27;last_name&#x27; cannot be null</span><br><span class="line">INSERT INTO test1(id,last_name,email,salary)</span><br><span class="line">VALUES(2,NULL,&#x27;tom1@126.com&#x27;,3400);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šColumn &#x27;id&#x27; cannot be null</span><br><span class="line">INSERT INTO test1(id,last_name,email,salary)</span><br><span class="line">VALUES(NULL,&#x27;Jerry&#x27;,&#x27;jerry@126.com&#x27;,3400);</span><br><span class="line"></span><br><span class="line">INSERT INTO test1(id,email)</span><br><span class="line">VALUES(2,&#x27;abc@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">UPDATE test1</span><br><span class="line">SET last_name = NULL</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">UPDATE test1</span><br><span class="line">SET email = &#x27;tom@126.com&#x27;</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">#3.2 åœ¨ALTER TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line">SELECT * FROM test1;</span><br><span class="line"></span><br><span class="line">DESC test1;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test1</span><br><span class="line">MODIFY email VARCHAR(25) NOT NULL;</span><br><span class="line"></span><br><span class="line">#3.3 åœ¨ALTER TABLEæ—¶åˆ é™¤çº¦æŸ</span><br><span class="line">ALTER TABLE test1</span><br><span class="line">MODIFY email VARCHAR(25) NULL;</span><br><span class="line"></span><br><span class="line">#4. unique  (å”¯ä¸€æ€§çº¦æŸ)</span><br><span class="line"></span><br><span class="line">#4.1 åœ¨CREATE TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line">CREATE TABLE test2(</span><br><span class="line">id INT UNIQUE, #åˆ—çº§çº¦æŸ</span><br><span class="line">last_name VARCHAR(15) ,</span><br><span class="line">email VARCHAR(25),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">#è¡¨çº§çº¦æŸ</span><br><span class="line">CONSTRAINT uk_test2_email UNIQUE(email)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;test2&#x27;;</span><br><span class="line"></span><br><span class="line">#åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚</span><br><span class="line"></span><br><span class="line">INSERT INTO test2(id,last_name,email,salary)</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,&#x27;tom@126.com&#x27;,4500);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šDuplicate entry &#x27;1&#x27; for key &#x27;test2.id&#x27;</span><br><span class="line">INSERT INTO test2(id,last_name,email,salary)</span><br><span class="line">VALUES(1,&#x27;Tom1&#x27;,&#x27;tom1@126.com&#x27;,4600);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šDuplicate entry &#x27;tom@126.com&#x27; for key &#x27;test2.uk_test2_email&#x27;</span><br><span class="line">INSERT INTO test2(id,last_name,email,salary)</span><br><span class="line">VALUES(2,&#x27;Tom1&#x27;,&#x27;tom@126.com&#x27;,4600);</span><br><span class="line"></span><br><span class="line">#å¯ä»¥å‘å£°æ˜ä¸ºuniqueçš„å­—æ®µä¸Šæ·»åŠ nullå€¼ã€‚è€Œä¸”å¯ä»¥å¤šæ¬¡æ·»åŠ null</span><br><span class="line">INSERT INTO test2(id,last_name,email,salary)</span><br><span class="line">VALUES(2,&#x27;Tom1&#x27;,NULL,4600);</span><br><span class="line"></span><br><span class="line">INSERT INTO test2(id,last_name,email,salary)</span><br><span class="line">VALUES(3,&#x27;Tom2&#x27;,NULL,4600);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test2;</span><br><span class="line"></span><br><span class="line">#4.2 åœ¨ALTER TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line"></span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line">UPDATE test2</span><br><span class="line">SET salary = 5000</span><br><span class="line">WHERE id = 3;</span><br><span class="line">#æ–¹å¼1ï¼š</span><br><span class="line">ALTER TABLE test2</span><br><span class="line">ADD CONSTRAINT uk_test2_sal UNIQUE(salary);</span><br><span class="line">#æ–¹å¼2ï¼š</span><br><span class="line">ALTER TABLE test2</span><br><span class="line">MODIFY last_name VARCHAR(15) UNIQUE;</span><br><span class="line"></span><br><span class="line">#4.3 å¤åˆçš„å”¯ä¸€æ€§çº¦æŸ</span><br><span class="line">CREATE TABLE USER(</span><br><span class="line">id INT,</span><br><span class="line">`name` VARCHAR(15),</span><br><span class="line">`password` VARCHAR(25),</span><br><span class="line"></span><br><span class="line">#è¡¨çº§çº¦æŸ</span><br><span class="line">CONSTRAINT uk_user_name_pwd UNIQUE(`name`,`password`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO USER</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,&#x27;abc&#x27;);</span><br><span class="line">#å¯ä»¥æˆåŠŸçš„ï¼š</span><br><span class="line">INSERT INTO USER</span><br><span class="line">VALUES(1,&#x27;Tom1&#x27;,&#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT *</span><br><span class="line">FROM USER;</span><br><span class="line"></span><br><span class="line">#æ¡ˆä¾‹ï¼šå¤åˆçš„å”¯ä¸€æ€§çº¦æŸçš„æ¡ˆä¾‹</span><br><span class="line">#å­¦ç”Ÿè¡¨</span><br><span class="line">CREATE TABLE student(</span><br><span class="line">    sid INT,	#å­¦å·</span><br><span class="line">    sname VARCHAR(20),	#å§“å</span><br><span class="line">    tel CHAR(11) UNIQUE KEY,  #ç”µè¯</span><br><span class="line">    cardid CHAR(18) UNIQUE KEY #èº«ä»½è¯å·</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#è¯¾ç¨‹è¡¨</span><br><span class="line">CREATE TABLE course(</span><br><span class="line">    cid INT,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">    cname VARCHAR(20)     #è¯¾ç¨‹åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#é€‰è¯¾è¡¨</span><br><span class="line">CREATE TABLE student_course(</span><br><span class="line">    id INT,</span><br><span class="line">    sid INT,  #å­¦å·</span><br><span class="line">    cid INT,  #è¯¾ç¨‹ç¼–å·</span><br><span class="line">    score INT,</span><br><span class="line">    UNIQUE KEY(sid,cid)  #å¤åˆå”¯ä¸€</span><br><span class="line">);</span><br><span class="line">INSERT INTO student VALUES(1,&#x27;å¼ ä¸‰&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);#æˆåŠŸ</span><br><span class="line">INSERT INTO student VALUES(2,&#x27;æå››&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);#æˆåŠŸ</span><br><span class="line">INSERT INTO course VALUES(1001,&#x27;Java&#x27;),(1002,&#x27;MySQL&#x27;);#æˆåŠŸ</span><br><span class="line"></span><br><span class="line">SELECT * FROM student;</span><br><span class="line"></span><br><span class="line">SELECT * FROM course;</span><br><span class="line"></span><br><span class="line">INSERT INTO student_course VALUES</span><br><span class="line">(1, 1, 1001, 89),</span><br><span class="line">(2, 1, 1002, 90),</span><br><span class="line">(3, 2, 1001, 88),</span><br><span class="line">(4, 2, 1002, 56);#æˆåŠŸ</span><br><span class="line"></span><br><span class="line">SELECT * FROM student_course;</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šDuplicate entry &#x27;2-1002&#x27; for key &#x27;student_course.sid&#x27;</span><br><span class="line">INSERT INTO student_course VALUES</span><br><span class="line">(5,2,1002,67);</span><br><span class="line"></span><br><span class="line">#4.4 åˆ é™¤å”¯ä¸€æ€§çº¦æŸ</span><br><span class="line">-- æ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</span><br><span class="line">-- åˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚</span><br><span class="line">-- åˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚</span><br><span class="line">-- å¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;student_course&#x27;;</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;test2&#x27;;</span><br><span class="line"></span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line">#å¦‚ä½•åˆ é™¤å”¯ä¸€æ€§ç´¢å¼•</span><br><span class="line">ALTER TABLE test2</span><br><span class="line">DROP INDEX last_name;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test2</span><br><span class="line">DROP INDEX uk_test2_sal;</span><br><span class="line"></span><br><span class="line">#5. primary key (ä¸»é”®çº¦æŸ)</span><br><span class="line">#5.1 åœ¨CREATE TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line"></span><br><span class="line">#ä¸€ä¸ªè¡¨ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸã€‚</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šMultiple primary key defined</span><br><span class="line">CREATE TABLE test3(</span><br><span class="line">id INT PRIMARY KEY, #åˆ—çº§çº¦æŸ</span><br><span class="line">last_name VARCHAR(15) PRIMARY KEY,</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># ä¸»é”®çº¦æŸç‰¹å¾ï¼šéç©ºä¸”å”¯ä¸€ï¼Œç”¨äºå”¯ä¸€çš„æ ‡è¯†è¡¨ä¸­çš„ä¸€æ¡è®°å½•ã€‚</span><br><span class="line">CREATE TABLE test4(</span><br><span class="line">id INT PRIMARY KEY, #åˆ—çº§çº¦æŸ</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#MySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARYï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚</span><br><span class="line">CREATE TABLE test5(</span><br><span class="line">id INT ,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25),</span><br><span class="line">#è¡¨çº§çº¦æŸ</span><br><span class="line">CONSTRAINT pk_test5_id PRIMARY KEY(id)  #æ²¡æœ‰å¿…è¦èµ·åå­—ã€‚</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;test5&#x27;;</span><br><span class="line"></span><br><span class="line">INSERT INTO test4(id,last_name,salary,email)</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,4500,&#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šDuplicate entry &#x27;1&#x27; for key &#x27;test4.PRIMARY&#x27;</span><br><span class="line">INSERT INTO test4(id,last_name,salary,email)</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,4500,&#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šColumn &#x27;id&#x27; cannot be null</span><br><span class="line">INSERT INTO test4(id,last_name,salary,email)</span><br><span class="line">VALUES(NULL,&#x27;Tom&#x27;,4500,&#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test4;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CREATE TABLE user1(</span><br><span class="line">id INT,</span><br><span class="line">NAME VARCHAR(15),</span><br><span class="line">PASSWORD VARCHAR(25),</span><br><span class="line"></span><br><span class="line">PRIMARY KEY (NAME,PASSWORD)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">#å¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚</span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,&#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES(1,&#x27;Tom1&#x27;,&#x27;abc&#x27;);</span><br><span class="line">#é”™è¯¯ï¼šColumn &#x27;name&#x27; cannot be null</span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES(1,NULL,&#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM user1;</span><br><span class="line"></span><br><span class="line">#5.2 åœ¨ALTER TABLEæ—¶æ·»åŠ çº¦æŸ</span><br><span class="line"></span><br><span class="line">CREATE TABLE test6(</span><br><span class="line">id INT ,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test6;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test6</span><br><span class="line">ADD PRIMARY KEY (id);</span><br><span class="line"></span><br><span class="line">#5.3 å¦‚ä½•åˆ é™¤ä¸»é”®çº¦æŸ (åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ä¼šå»åˆ é™¤è¡¨ä¸­çš„ä¸»é”®çº¦æŸï¼)</span><br><span class="line">ALTER TABLE test6</span><br><span class="line">DROP PRIMARY KEY;</span><br><span class="line"></span><br><span class="line">#6. è‡ªå¢é•¿åˆ—:AUTO_INCREMENT</span><br><span class="line"># 6.1 åœ¨CREATE TABLEæ—¶æ·»åŠ </span><br><span class="line">CREATE TABLE test7(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">last_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line">#å¼€å‘ä¸­ï¼Œä¸€æ—¦ä¸»é”®ä½œç”¨çš„å­—æ®µä¸Šå£°æ˜æœ‰AUTO_INCREMENTï¼Œåˆ™æˆ‘ä»¬åœ¨æ·»åŠ æ•°æ®æ—¶ï¼Œå°±ä¸è¦ç»™ä¸»é”®</span><br><span class="line">#å¯¹åº”çš„å­—æ®µå»èµ‹å€¼äº†ã€‚</span><br><span class="line">INSERT INTO test7(last_name)</span><br><span class="line">VALUES(&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test7;</span><br><span class="line"></span><br><span class="line">#å½“æˆ‘ä»¬å‘ä¸»é”®ï¼ˆå«AUTO_INCREMENTï¼‰çš„å­—æ®µä¸Šæ·»åŠ 0 æˆ– nullæ—¶ï¼Œå®é™…ä¸Šä¼šè‡ªåŠ¨çš„å¾€ä¸Šæ·»åŠ æŒ‡å®šçš„å­—æ®µçš„æ•°å€¼</span><br><span class="line">INSERT INTO test7(id,last_name)</span><br><span class="line">VALUES(0,&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO test7(id,last_name)</span><br><span class="line">VALUES(NULL,&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO test7(id,last_name)</span><br><span class="line">VALUES(10,&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO test7(id,last_name)</span><br><span class="line">VALUES(-10,&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">#6.2 åœ¨ALTER TABLE æ—¶æ·»åŠ </span><br><span class="line">CREATE TABLE test8(</span><br><span class="line">id INT PRIMARY KEY ,</span><br><span class="line">last_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test8;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test8</span><br><span class="line">MODIFY id INT AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line">#6.3 åœ¨ALTER TABLE æ—¶åˆ é™¤</span><br><span class="line"></span><br><span class="line">ALTER TABLE test8</span><br><span class="line">MODIFY id INT ;</span><br><span class="line"></span><br><span class="line">#6.4 MySQL 8.0æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–</span><br><span class="line"></span><br><span class="line">#åœ¨MySQL 5.7ä¸­æ¼”ç¤º</span><br><span class="line">CREATE TABLE test9(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0),(0),(0),(0);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test9;</span><br><span class="line"></span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 4;</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0);</span><br><span class="line"></span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 5;</span><br><span class="line"></span><br><span class="line">#é‡å¯æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">SELECT * FROM test9;</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#åœ¨MySQL 8.0ä¸­æ¼”ç¤º</span><br><span class="line">CREATE TABLE test9(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0),(0),(0),(0);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test9;</span><br><span class="line"></span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 4;</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0);</span><br><span class="line"></span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 5;</span><br><span class="line"></span><br><span class="line">#é‡å¯æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">SELECT * FROM test9;</span><br><span class="line"></span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES(0);</span><br><span class="line"></span><br><span class="line">#7.foreign key (å¤–é”®çº¦æŸ)</span><br><span class="line">#7.1 åœ¨CREATE TABLE æ—¶æ·»åŠ </span><br><span class="line"></span><br><span class="line">#ä¸»è¡¨å’Œä»è¡¨ï¼›çˆ¶è¡¨å’Œå­è¡¨</span><br><span class="line"></span><br><span class="line">#â‘ å…ˆåˆ›å»ºä¸»è¡¨</span><br><span class="line">CREATE TABLE dept1(</span><br><span class="line">dept_id INT,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line">#â‘¡å†åˆ›å»ºä»è¡¨</span><br><span class="line">CREATE TABLE emp1(</span><br><span class="line">emp_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">department_id INT,</span><br><span class="line"></span><br><span class="line">#è¡¨çº§çº¦æŸ</span><br><span class="line">CONSTRAINT fk_emp1_dept_id FOREIGN KEY (department_id) REFERENCES dept1(dept_id)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#ä¸Šè¿°æ“ä½œæŠ¥é”™ï¼Œå› ä¸ºä¸»è¡¨ä¸­çš„dept_idä¸Šæ²¡æœ‰ä¸»é”®çº¦æŸæˆ–å”¯ä¸€æ€§çº¦æŸã€‚</span><br><span class="line">#â‘¢ æ·»åŠ </span><br><span class="line">ALTER TABLE dept1</span><br><span class="line">ADD PRIMARY KEY (dept_id);</span><br><span class="line"></span><br><span class="line">DESC dept1;</span><br><span class="line"></span><br><span class="line">#â‘£ å†åˆ›å»ºä»è¡¨</span><br><span class="line">CREATE TABLE emp1(</span><br><span class="line">emp_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">department_id INT,</span><br><span class="line"></span><br><span class="line">#è¡¨çº§çº¦æŸ</span><br><span class="line">CONSTRAINT fk_emp1_dept_id FOREIGN KEY (department_id) REFERENCES dept1(dept_id)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC emp1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;emp1&#x27;;</span><br><span class="line"></span><br><span class="line">#7.2 æ¼”ç¤ºå¤–é”®çš„æ•ˆæœ</span><br><span class="line">#æ·»åŠ å¤±è´¥</span><br><span class="line">INSERT INTO emp1</span><br><span class="line">VALUES(1001,&#x27;Tom&#x27;,10);</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line">INSERT INTO dept1</span><br><span class="line">VALUES(10,&#x27;IT&#x27;);</span><br><span class="line">#åœ¨ä¸»è¡¨dept1ä¸­æ·»åŠ äº†10å·éƒ¨é—¨ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»è¡¨ä¸­æ·»åŠ 10å·éƒ¨é—¨çš„å‘˜å·¥</span><br><span class="line">INSERT INTO emp1</span><br><span class="line">VALUES(1001,&#x27;Tom&#x27;,10);</span><br><span class="line"></span><br><span class="line">#åˆ é™¤å¤±è´¥</span><br><span class="line">DELETE FROM dept1</span><br><span class="line">WHERE dept_id = 10;</span><br><span class="line"></span><br><span class="line">#æ›´æ–°å¤±è´¥</span><br><span class="line">UPDATE dept1</span><br><span class="line">SET dept_id = 20</span><br><span class="line">WHERE dept_id = 10;</span><br><span class="line"></span><br><span class="line">#7.3 åœ¨ALTER TABLEæ—¶æ·»åŠ å¤–é”®çº¦æŸ</span><br><span class="line">CREATE TABLE dept2(</span><br><span class="line">dept_id INT PRIMARY KEY,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp2(</span><br><span class="line">emp_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">department_id INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD CONSTRAINT fk_emp2_dept_id FOREIGN KEY(department_id) REFERENCES dept2(dept_id);</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;emp2&#x27;;</span><br><span class="line"></span><br><span class="line">#7.4 ###  çº¦æŸç­‰çº§</span><br><span class="line"></span><br><span class="line">-- `Cascadeæ–¹å¼`ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update/deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½•</span><br><span class="line"></span><br><span class="line">-- `Set nullæ–¹å¼`ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot null</span><br><span class="line"></span><br><span class="line">-- `No actionæ–¹å¼`ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate/deleteæ“ä½œ</span><br><span class="line"></span><br><span class="line">-- `Restrictæ–¹å¼`ï¼šåŒno actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ</span><br><span class="line"></span><br><span class="line">-- `Set defaultæ–¹å¼`ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«</span><br><span class="line"></span><br><span class="line">#æ¼”ç¤ºï¼š</span><br><span class="line"># on update cascade on delete set null</span><br><span class="line">CREATE TABLE dept(</span><br><span class="line">    did INT PRIMARY KEY,		#éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname VARCHAR(50)			#éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp(</span><br><span class="line">    eid INT PRIMARY KEY,  #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename VARCHAR(5),     #å‘˜å·¥å§“å</span><br><span class="line">    deptid INT,		  #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    FOREIGN KEY (deptid) REFERENCES dept(did)  ON UPDATE CASCADE ON DELETE SET NULL</span><br><span class="line">    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO dept VALUES(1001,&#x27;æ•™å­¦éƒ¨&#x27;);</span><br><span class="line">INSERT INTO dept VALUES(1002, &#x27;è´¢åŠ¡éƒ¨&#x27;);</span><br><span class="line">INSERT INTO dept VALUES(1003, &#x27;å’¨è¯¢éƒ¨&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO emp VALUES(1,&#x27;å¼ ä¸‰&#x27;,1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨</span><br><span class="line">INSERT INTO emp VALUES(2,&#x27;æå››&#x27;,1001);</span><br><span class="line">INSERT INTO emp VALUES(3,&#x27;ç‹äº”&#x27;,1002);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UPDATE dept</span><br><span class="line">SET did = 1004</span><br><span class="line">WHERE did = 1002;</span><br><span class="line"></span><br><span class="line">DELETE FROM dept</span><br><span class="line">WHERE did = 1004;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM dept;</span><br><span class="line"></span><br><span class="line">SELECT * FROM emp;</span><br><span class="line"></span><br><span class="line">#ç»“è®ºï¼šå¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: `ON UPDATE CASCADE ON DELETE RESTRICT` çš„æ–¹å¼ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#7.5 åˆ é™¤å¤–é”®çº¦æŸ</span><br><span class="line"></span><br><span class="line">#ä¸€ä¸ªè¡¨ä¸­å¯ä»¥å£°æ˜æœ‰å¤šä¸ªå¤–é”®çº¦æŸ</span><br><span class="line">USE atguigudb;</span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;employees&#x27;;</span><br><span class="line"></span><br><span class="line">USE dbtest13;</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table_name = &#x27;emp1&#x27;;</span><br><span class="line"></span><br><span class="line">#åˆ é™¤å¤–é”®çº¦æŸ</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp1</span><br><span class="line">DROP FOREIGN KEY fk_emp1_dept_id;</span><br><span class="line"></span><br><span class="line">#å†æ‰‹åŠ¨çš„åˆ é™¤å¤–é”®çº¦æŸå¯¹åº”çš„æ™®é€šç´¢å¼•</span><br><span class="line">SHOW INDEX FROM emp1;</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp1</span><br><span class="line">DROP INDEX fk_emp1_dept_id;</span><br><span class="line"></span><br><span class="line">#8. check çº¦æŸ</span><br><span class="line"># MySQL5.7 ä¸æ”¯æŒCHECKçº¦æŸï¼ŒMySQL8.0æ”¯æŒCHECKçº¦æŸã€‚</span><br><span class="line"></span><br><span class="line">CREATE TABLE test10(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2) CHECK(salary &gt; 2000)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO test10</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,2500);</span><br><span class="line"></span><br><span class="line">#æ·»åŠ å¤±è´¥</span><br><span class="line">INSERT INTO test10</span><br><span class="line">VALUES(2,&#x27;Tom1&#x27;,1500);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test10;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#9.DEFAULTçº¦æŸ</span><br><span class="line">#9.1 åœ¨CREATE TABLEæ·»åŠ çº¦æŸ</span><br><span class="line">CREATE TABLE test11(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2) DEFAULT 2000</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test11;</span><br><span class="line"></span><br><span class="line">INSERT INTO test11(id,last_name,salary)</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,3000);</span><br><span class="line"></span><br><span class="line">INSERT INTO test11(id,last_name)</span><br><span class="line">VALUES(2,&#x27;Tom1&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT *</span><br><span class="line">FROM test11;</span><br><span class="line"></span><br><span class="line">#9.2 åœ¨ALTER TABLEæ·»åŠ çº¦æŸ</span><br><span class="line">CREATE TABLE test12(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test12;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test12</span><br><span class="line">MODIFY salary DECIMAL(8,2) DEFAULT 2500;</span><br><span class="line"></span><br><span class="line">#9.3 åœ¨ALTER TABLEåˆ é™¤çº¦æŸ</span><br><span class="line">ALTER TABLE test12</span><br><span class="line">MODIFY salary DECIMAL(8,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SHOW CREATE TABLE test12;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬-13-ç« -çº¦æŸçš„è¯¾åç»ƒä¹ ">ç¬¬ 13 ç« _çº¦æŸçš„è¯¾åç»ƒä¹ </h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">#ç¬¬13ç« _çº¦æŸçš„è¯¾åç»ƒä¹ </span><br><span class="line"></span><br><span class="line">#ç»ƒä¹ 1ï¼š</span><br><span class="line">CREATE DATABASE test04_emp;</span><br><span class="line"></span><br><span class="line">USE test04_emp;</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp2(</span><br><span class="line">id INT,</span><br><span class="line">emp_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE dept2(</span><br><span class="line">id INT,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#1.å‘è¡¨emp2çš„idåˆ—ä¸­æ·»åŠ PRIMARY KEYçº¦æŸ</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD CONSTRAINT pk_emp2_id PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.å‘è¡¨dept2çš„idåˆ—ä¸­æ·»åŠ PRIMARY KEYçº¦æŸ</span><br><span class="line"></span><br><span class="line">ALTER TABLE dept2</span><br><span class="line">ADD PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.å‘è¡¨emp2ä¸­æ·»åŠ åˆ—dept_idï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰FOREIGN KEYçº¦æŸï¼Œä¸ä¹‹ç›¸å…³è”çš„åˆ—æ˜¯dept2è¡¨ä¸­çš„idåˆ—ã€‚</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD dept_id INT;</span><br><span class="line"></span><br><span class="line">DESC emp2;</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD CONSTRAINT fk_emp2_deptid FOREIGN KEY(dept_id) REFERENCES dept2(id);</span><br><span class="line"></span><br><span class="line">#ç»ƒä¹ 2ï¼š</span><br><span class="line">#æ‰¿æ¥ã€Šç¬¬11ç« _æ•°æ®å¤„ç†ä¹‹å¢åˆ æ”¹ã€‹çš„ç»¼åˆæ¡ˆä¾‹ã€‚</span><br><span class="line">USE test01_library;</span><br><span class="line"></span><br><span class="line">DESC books;</span><br><span class="line"></span><br><span class="line">#æ ¹æ®é¢˜ç›®è¦æ±‚ç»™booksè¡¨ä¸­çš„å­—æ®µæ·»åŠ çº¦æŸ</span><br><span class="line">#æ–¹å¼1ï¼š</span><br><span class="line">ALTER TABLE books</span><br><span class="line">ADD PRIMARY KEY (id);</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY id INT AUTO_INCREMENT;</span><br><span class="line">#æ–¹å¼2ï¼š</span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY id INT PRIMARY KEY AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#é’ˆå¯¹äºéidå­—æ®µçš„æ“ä½œ</span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY NAME VARCHAR(50) NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY AUTHORS VARCHAR(100) NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY price FLOAT NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY pubdate YEAR NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY num INT NOT NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ç»ƒä¹ 3ï¼š</span><br><span class="line"></span><br><span class="line">#1. åˆ›å»ºæ•°æ®åº“test04_company</span><br><span class="line">CREATE DATABASE IF NOT EXISTS test04_company CHARACTER SET &#x27;utf8&#x27;;</span><br><span class="line"></span><br><span class="line">USE test04_company;</span><br><span class="line"></span><br><span class="line">#2. æŒ‰ç…§ä¸‹è¡¨ç»™å‡ºçš„è¡¨ç»“æ„åœ¨test04_companyæ•°æ®åº“ä¸­åˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨officeså’Œemployees</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS offices(</span><br><span class="line">officeCode INT(10) PRIMARY KEY ,</span><br><span class="line">city VARCHAR(50) NOT NULL,</span><br><span class="line">address VARCHAR(50) ,</span><br><span class="line">country VARCHAR(50) NOT NULL,</span><br><span class="line">postalCode VARCHAR(15),</span><br><span class="line">CONSTRAINT uk_off_poscode UNIQUE(postalCode)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC offices;</span><br><span class="line"></span><br><span class="line">CREATE TABLE employees(</span><br><span class="line">employeeNumber INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">lastName VARCHAR(50) NOT NULL,</span><br><span class="line">firstName VARCHAR(50) NOT NULL,</span><br><span class="line">mobile VARCHAR(25) UNIQUE,</span><br><span class="line">officeCode INT(10) NOT NULL,</span><br><span class="line">jobTitle VARCHAR(50) NOT NULL,</span><br><span class="line">birth DATETIME NOT NULL,</span><br><span class="line">note VARCHAR(255),</span><br><span class="line">sex VARCHAR(5),</span><br><span class="line">CONSTRAINT fk_emp_offcode FOREIGN KEY (officeCode) REFERENCES offices(officeCode)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC employees;</span><br><span class="line"></span><br><span class="line">#3. å°†è¡¨employeesçš„mobileå­—æ®µä¿®æ”¹åˆ°officeCodeå­—æ®µåé¢</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">MODIFY mobile VARCHAR(25) AFTER officeCode;</span><br><span class="line"></span><br><span class="line">#4. å°†è¡¨employeesçš„birthå­—æ®µæ”¹åä¸ºemployee_birth</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">CHANGE birth employee_birth DATETIME;</span><br><span class="line"></span><br><span class="line">#5. ä¿®æ”¹sexå­—æ®µï¼Œæ•°æ®ç±»å‹ä¸ºCHAR(1)ï¼Œéç©ºçº¦æŸ</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">MODIFY sex CHAR(1) NOT NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#6. åˆ é™¤å­—æ®µnote</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">DROP COLUMN note;</span><br><span class="line"></span><br><span class="line">#7. å¢åŠ å­—æ®µåfavoriate_activityï¼Œæ•°æ®ç±»å‹ä¸ºVARCHAR(100)</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">ADD favoriate_activity VARCHAR(100);</span><br><span class="line"></span><br><span class="line">#8. å°†è¡¨employeesåç§°ä¿®æ”¹ä¸ºemployees_info</span><br><span class="line">RENAME TABLE employees</span><br><span class="line">TO employees_info;</span><br><span class="line"></span><br><span class="line">#é”™è¯¯ï¼šTable &#x27;test04_company.employees&#x27; doesn&#x27;t exist</span><br><span class="line">DESC employees;</span><br><span class="line"></span><br><span class="line">DESC employees_info;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>MySQL-ç¬¬13ç« _çº¦æŸ</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://angus9823.github.io/posts/c2e8ac61.html">https://angus9823.github.io/posts/c2e8ac61.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>AngusğŸ¥</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2023-04-07</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2024-08-30</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>MySQL</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/iOne/weixinshoukuan.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/iOne/weixinshoukuan.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/iOne/zfbshoukuan.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/iOne/zfbshoukuan.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3ab2febb.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0294.WEBP" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">MySQL-ç¬¬14ç« _è§†å›¾</div></div></a></div><div class="next-post pull-right"><a href="/posts/9013891d.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0185.WEBP" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">MySQL-ç¬¬12ç« _MySQLæ•°æ®ç±»å‹ç²¾è®²</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/37833df0.html" title="MySQLå†™åœ¨å‰é¢"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0233.WEBP" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-04-07</div><div class="title">MySQLå†™åœ¨å‰é¢</div></div></a></div><div><a href="/posts/c0256873.html" title="MySQLæœ€å"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/TheCoverOfTheArticle/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230323110250.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-08-30</div><div class="title">MySQLæœ€å</div></div></a></div><div><a href="/posts/e8f69ccb.html" title="MySQL-ç¬¬01ç« _æ•°æ®åº“æ¦‚è¿°"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0112.WEBP" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-08-30</div><div class="title">MySQL-ç¬¬01ç« _æ•°æ®åº“æ¦‚è¿°</div></div></a></div><div><a href="/posts/908665b0.html" title="MySQL-ç¬¬02ç« _MySQLç¯å¢ƒæ­å»º"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/TheCoverOfTheArticle/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230323110133.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-08-30</div><div class="title">MySQL-ç¬¬02ç« _MySQLç¯å¢ƒæ­å»º</div></div></a></div><div><a href="/posts/59b183d4.html" title="MySQL-ç¬¬03ç« _åŸºæœ¬çš„SELECTè¯­å¥"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-15--IMG_0043.WEBP" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-08-30</div><div class="title">MySQL-ç¬¬03ç« _åŸºæœ¬çš„SELECTè¯­å¥</div></div></a></div><div><a href="/posts/e328cb9c.html" title="MySQL-ç¬¬04ç« _è¿ç®—ç¬¦"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/TheCoverOfTheArticle/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20230323110444.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-08-30</div><div class="title">MySQL-ç¬¬04ç« _è¿ç®—ç¬¦</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">ç¬¬ 13 ç« _çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BA%A6%E6%9D%9F-constraint-%E6%A6%82%E8%BF%B0"><span class="toc-text">1. çº¦æŸ(constraint)æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.2 ä»€ä¹ˆæ˜¯çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">1.3 çº¦æŸçš„åˆ†ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">2. éç©ºçº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">2.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%89%B9%E7%82%B9"><span class="toc-text">2.3 ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%B7%BB%E5%8A%A0%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">2.4 æ·»åŠ éç©ºçº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%88%A0%E9%99%A4%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">2.5 åˆ é™¤éç©ºçº¦æŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-text">3. å”¯ä¸€æ€§çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">3.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">3.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%89%B9%E7%82%B9"><span class="toc-text">3.3 ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.4 æ·»åŠ å”¯ä¸€çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%85%B3%E4%BA%8E%E5%A4%8D%E5%90%88%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.5 å…³äºå¤åˆå”¯ä¸€çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.5 åˆ é™¤å”¯ä¸€çº¦æŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-PRIMARY-KEY-%E7%BA%A6%E6%9D%9F"><span class="toc-text">4. PRIMARY KEY çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">4.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">4.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E7%89%B9%E7%82%B9"><span class="toc-text">4.3 ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">4.4 æ·»åŠ ä¸»é”®çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%85%B3%E4%BA%8E%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE"><span class="toc-text">4.5 å…³äºå¤åˆä¸»é”®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">4.6 åˆ é™¤ä¸»é”®çº¦æŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%87%AA%E5%A2%9E%E5%88%97%EF%BC%9AAUTO-INCREMENT"><span class="toc-text">5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">5.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">5.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E7%89%B9%E7%82%B9%E5%92%8C%E8%A6%81%E6%B1%82"><span class="toc-text">5.3 ç‰¹ç‚¹å’Œè¦æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%A6%82%E4%BD%95%E6%8C%87%E5%AE%9A%E8%87%AA%E5%A2%9E%E7%BA%A6%E6%9D%9F"><span class="toc-text">5.4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E8%87%AA%E5%A2%9E%E7%BA%A6%E6%9D%9F"><span class="toc-text">5.5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-MySQL-8-0-%E6%96%B0%E7%89%B9%E6%80%A7%E2%80%94%E8%87%AA%E5%A2%9E%E5%8F%98%E9%87%8F%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">5.6 MySQL 8.0 æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-FOREIGN-KEY-%E7%BA%A6%E6%9D%9F"><span class="toc-text">6. FOREIGN KEY çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">6.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">6.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E4%B8%BB%E8%A1%A8%E5%92%8C%E4%BB%8E%E8%A1%A8-%E7%88%B6%E8%A1%A8%E5%92%8C%E5%AD%90%E8%A1%A8"><span class="toc-text">6.3 ä¸»è¡¨å’Œä»è¡¨&#x2F;çˆ¶è¡¨å’Œå­è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E7%89%B9%E7%82%B9"><span class="toc-text">6.4 ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.5 æ·»åŠ å¤–é”®çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E6%BC%94%E7%A4%BA%E9%97%AE%E9%A2%98"><span class="toc-text">6.6 æ¼”ç¤ºé—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-%E7%BA%A6%E6%9D%9F%E7%AD%89%E7%BA%A7"><span class="toc-text">6.7 çº¦æŸç­‰çº§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.8 åˆ é™¤å¤–é”®çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF"><span class="toc-text">6.9 å¼€å‘åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-10-%E9%98%BF%E9%87%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-text">6.10 é˜¿é‡Œå¼€å‘è§„èŒƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-CHECK-%E7%BA%A6%E6%9D%9F"><span class="toc-text">7. CHECK çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">7.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2ã€å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%AF%B4%E6%98%8E%EF%BC%9AMySQL-5-7-%E4%B8%8D%E6%94%AF%E6%8C%81"><span class="toc-text">3ã€è¯´æ˜ï¼šMySQL 5.7 ä¸æ”¯æŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-DEFAULT-%E7%BA%A6%E6%9D%9F"><span class="toc-text">8. DEFAULT çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E4%BD%9C%E7%94%A8"><span class="toc-text">8.1 ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">8.2 å…³é”®å­—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%A6%82%E4%BD%95%E7%BB%99%E5%AD%97%E6%AE%B5%E5%8A%A0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">8.3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="toc-text">8.4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E9%9D%A2%E8%AF%95"><span class="toc-text">9. é¢è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-13-%E7%AB%A0-%E7%BA%A6%E6%9D%9F"><span class="toc-text">ç¬¬ 13 ç« _çº¦æŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC-13-%E7%AB%A0-%E7%BA%A6%E6%9D%9F%E7%9A%84%E8%AF%BE%E5%90%8E%E7%BB%83%E4%B9%A0"><span class="toc-text">ç¬¬ 13 ç« _çº¦æŸçš„è¯¾åç»ƒä¹ </span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://angus9823.github.io/assets/loading3.gif" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://angus9823.github.io/assets/loading3.gif" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://angus9823.github.io/assets/loading3.gif" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/gaoxiao.gif" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/gaoxiao.gif" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/gaoxiao.gif" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2023-2025</b></span><span><b>&nbsp;&nbsp;By AngusğŸ¥</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/08/30-14--hexo.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/08/30-14--butterfly.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/08/30-14--github.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.iife.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><script defer src="/js/emoji.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/canvas-nest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async="async" mobile="false"></script><script id="click-show-text" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-show-text.min.js" data-mobile="false" data-text="è‡­,å®" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://angus9823.github.io/categories/ç®—æ³•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ å°è¢ã®ç®—æ³•å­¦ä¹ ç¬”è®° (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://angus9823.github.io/categories/é­”æ”¹æ•™ç¨‹/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ å°è¢ã®åšå®¢é­”æ”¹æ•™ç¨‹ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://angus9823.github.io/categories/Javaåç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ å°è¢ã®Javaåç«¯ç¬”è®° (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://angus9823.github.io/categories/æ¼”ç¤º/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ å°è¢ã®æ¡ˆä¾‹æ¼”ç¤ºç¬”è®° (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://angus9823.github.io/categories/åŸºç¡€è¯­æ³•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ å°è¢ã®åŸºç¡€è¯­æ³•ç¬”è®° (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://angus9823.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/undefined.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0188.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/undefined.html&quot;);" href="javascript:void(0);" alt="">é»‘é©¬å‡½æ•°å¼ç¼–ç¨‹</a><div class="blog-slider__text">ã€Lambdaè¡¨è¾¾å¼ã€Streamæµã€å‡½æ•°å¼ç¼–ç¨‹ã€‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/undefined.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/13756432.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0129.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/13756432.html&quot;);" href="javascript:void(0);" alt="">C++æé«˜ç¼–ç¨‹</a><div class="blog-slider__text">ã€æ¨¡æ¿ã€STLã€‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/13756432.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/218758f6.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0291.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/218758f6.html&quot;);" href="javascript:void(0);" alt="">C++æ ¸å¿ƒç¼–ç¨‹</a><div class="blog-slider__text">ã€å¼•ç”¨ã€ç±»å’Œå¯¹è±¡ã€å‡½æ•°ã€æ–‡ä»¶æ“ä½œã€‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/218758f6.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/dacacf22.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0230.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/dacacf22.html&quot;);" href="javascript:void(0);" alt="">CPP_åŸºç¡€å…¥é—¨</a><div class="blog-slider__text">ã€è®°å½•ä¸€ä¸‹23/5/18,å…¥èŒæ¾ä¸‹ã€åŠªåŠ›å·CPPã€‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/dacacf22.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/b44ebf5e.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0049.EBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/b44ebf5e.html&quot;);" href="javascript:void(0);" alt="">Javaé«˜çº§ç¼–ç¨‹</a><div class="blog-slider__text">Javaã€åŸºç¡€ä¸ç¨³ åœ°åŠ¨å±±æ‘‡ï¼ï¼ï¼ã€å¤šçº¿ç¨‹ã€Javaå¸¸ç”¨ç±»ã€æšä¸¾ç±»å’Œæ³¨è§£ã€Javaé›†åˆã€æ³›å‹ã€IOæµã€ç½‘ç»œç¼–ç¨‹ã€Javaåå°„æœºåˆ¶ã€Java8çš„å…¶ä»–æ–°ç‰¹æ€§ã€‘</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/b44ebf5e.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/499433c3.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0258.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-23</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/499433c3.html&quot;);" href="javascript:void(0);" alt="">JavaåŸºç¡€ç¼–ç¨‹</a><div class="blog-slider__text">Javaã€åŸºç¡€ä¸ç¨³ åœ°åŠ¨å±±æ‘‡ï¼ï¼ï¼</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/499433c3.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/4b0178e0.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0294.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-24</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/4b0178e0.html&quot;);" href="javascript:void(0);" alt="">æ•°æ®ç»“æ„ä¸ç®—æ³•</a><div class="blog-slider__text">ç§ƒå¤´å°å®è´ã€å¿«æ¥å§ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/4b0178e0.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/37833df0.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-16--IMG_0233.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-21</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/37833df0.html&quot;);" href="javascript:void(0);" alt="">MySQLå†™åœ¨å‰é¢</a><div class="blog-slider__text">MySQLå‚è€ƒã€å­¦ä¹ å»ºè®®</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/37833df0.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-pic-rep.oss-cn-beijing.aliyuncs.com/2023/img/avatarOne.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">æµ‹è¯• Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</a><div class="blog-slider__text">æµ‹è¯•åšå®¢ ğŸ¥§æœ¬æ–‡æ±‡æ€»Markdownæ ¼å¼ä»¥åŠå¤–æŒ‚æ ‡ç­¾åœ¨ç½‘é¡µç«¯çš„æ¸²æŸ“æ•ˆæœï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/924b0f3b.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://typora-picgo-repo.oss-cn-hangzhou.aliyuncs.com/uPicForMyBlog/2024/09/01-15--IMG_0210.WEBP" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-20</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/924b0f3b.html&quot;);" href="javascript:void(0);" alt="">æµ‹è¯•first æ–‡ç« </a><div class="blog-slider__text">æµ‹è¯•first æ–‡ç« </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/924b0f3b.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>