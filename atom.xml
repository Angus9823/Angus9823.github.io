<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AngusğŸ¥</title>
  
  
  <link href="https://angus9823.github.io/atom.xml" rel="self"/>
  
  <link href="https://angus9823.github.io/"/>
  <updated>2024-08-30T03:31:53.829Z</updated>
  <id>https://angus9823.github.io/</id>
  
  <author>
    <name>AngusğŸ¥</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>C++æé«˜ç¼–ç¨‹</title>
    <link href="https://angus9823.github.io/posts/13756432.html"/>
    <id>https://angus9823.github.io/posts/13756432.html</id>
    <published>2023-07-09T12:06:20.000Z</published>
    <updated>2024-08-30T03:31:53.829Z</updated>
    
    <content type="html"><![CDATA[<h1>C++æé«˜ç¼–ç¨‹</h1><ul><li>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹ C++==æ³›å‹ç¼–ç¨‹==å’Œ==STL==æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨ C++æ›´æ·±å±‚çš„ä½¿ç”¨</li></ul><h2 id="1-æ¨¡æ¿">1 æ¨¡æ¿</h2><h3 id="1-1-æ¨¡æ¿çš„æ¦‚å¿µ">1.1 æ¨¡æ¿çš„æ¦‚å¿µ</h3><p>æ¨¡æ¿å°±æ˜¯å»ºç«‹<strong>é€šç”¨çš„æ¨¡å…·</strong>ï¼Œå¤§å¤§<strong>æé«˜å¤ç”¨æ€§</strong></p><p>ä¾‹å¦‚ç”Ÿæ´»ä¸­çš„æ¨¡æ¿</p><p>ä¸€å¯¸ç…§ç‰‡æ¨¡æ¿ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230709204625095.png" alt="image-20230709204625095"></p><p>PPT æ¨¡æ¿ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230709204643596.png" alt="image-20230709204643596"></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230709204710210.png" alt="image-20230709204710210"></p><p>æ¨¡æ¿çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¨¡æ¿ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¡†æ¶</li><li>æ¨¡æ¿çš„é€šç”¨å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><h3 id="1-2-å‡½æ•°æ¨¡æ¿">1.2 å‡½æ•°æ¨¡æ¿</h3><ul><li><p>C++å¦ä¸€ç§ç¼–ç¨‹æ€æƒ³ç§°ä¸º ==æ³›å‹ç¼–ç¨‹== ï¼Œä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯å°±æ˜¯æ¨¡æ¿</p></li><li><p>C++æä¾›ä¸¤ç§æ¨¡æ¿æœºåˆ¶:<strong>å‡½æ•°æ¨¡æ¿</strong>å’Œ<strong>ç±»æ¨¡æ¿</strong></p></li></ul><h4 id="1-2-1-å‡½æ•°æ¨¡æ¿è¯­æ³•">1.2.1 å‡½æ•°æ¨¡æ¿è¯­æ³•</h4><p>å‡½æ•°æ¨¡æ¿ä½œç”¨ï¼š</p><p>å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå…¶å‡½æ•°è¿”å›å€¼ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">å‡½æ•°å£°æ˜æˆ–å®šä¹‰</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template â€” å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨ class ä»£æ›¿</p><p>T â€” é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢æ•´å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapInt</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢æµ®ç‚¹å‹å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swapDouble</span><span class="params">(<span class="type">double</span>&amp; a, <span class="type">double</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">double</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//swapInt(a, b);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿å®ç°äº¤æ¢</span></span><br><span class="line"><span class="comment">//1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line"><span class="built_in">mySwap</span>(a, b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</span></span><br><span class="line"><span class="built_in">mySwap</span>&lt;<span class="type">int</span>&gt;(a, b);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å‡½æ•°æ¨¡æ¿åˆ©ç”¨å…³é”®å­— template</li><li>ä½¿ç”¨å‡½æ•°æ¨¡æ¿æœ‰ä¸¤ç§æ–¹å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ã€æ˜¾ç¤ºæŒ‡å®šç±»å‹</li><li>æ¨¡æ¿çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å¤ç”¨æ€§ï¼Œå°†ç±»å‹å‚æ•°åŒ–</li></ul><h4 id="1-2-2-å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹">1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹</h4><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹ T,æ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡º T çš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ©ç”¨æ¨¡æ¿æä¾›é€šç”¨çš„äº¤æ¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap</span>(a, b); <span class="comment">// æ­£ç¡®ï¼Œå¯ä»¥æ¨å¯¼å‡ºä¸€è‡´çš„T</span></span><br><span class="line"><span class="comment">//mySwap(a, c); // é”™è¯¯ï¼Œæ¨å¯¼ä¸å‡ºä¸€è‡´çš„Tç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºTçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//func(); //é”™è¯¯ï¼Œæ¨¡æ¿ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå¿…é¡»ç¡®å®šå‡ºTçš„ç±»å‹</span></span><br><span class="line"><span class="built_in">func</span>&lt;<span class="type">int</span>&gt;(); <span class="comment">//åˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œç»™Tä¸€ä¸ªç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨è¯¥æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä½¿ç”¨æ¨¡æ¿æ—¶å¿…é¡»ç¡®å®šå‡ºé€šç”¨æ•°æ®ç±»å‹ Tï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¨å¯¼å‡ºä¸€è‡´çš„ç±»å‹</li></ul><h4 id="1-2-3-å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹">1.2.3 å‡½æ•°æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><ul><li>åˆ©ç”¨å‡½æ•°æ¨¡æ¿å°è£…ä¸€ä¸ªæ’åºçš„å‡½æ•°ï¼Œå¯ä»¥å¯¹<strong>ä¸åŒæ•°æ®ç±»å‹æ•°ç»„</strong>è¿›è¡Œæ’åº</li><li>æ’åºè§„åˆ™ä»å¤§åˆ°å°ï¼Œæ’åºç®—æ³•ä¸º<strong>é€‰æ‹©æ’åº</strong></li><li>åˆ†åˆ«åˆ©ç”¨<strong>char æ•°ç»„</strong>å’Œ<strong>int æ•°ç»„</strong>è¿›è¡Œæµ‹è¯•</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº¤æ¢çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap</span><span class="params">(T &amp;a, T&amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">T temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="comment">// ä¹Ÿå¯ä»¥æ›¿æ¢æˆtypename</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨é€‰æ‹©æ’åºï¼Œè¿›è¡Œå¯¹æ•°ç»„ä»å¤§åˆ°å°çš„æ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySort</span><span class="params">(T arr[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> max = i; <span class="comment">//æœ€å¤§æ•°çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; len; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[max] &lt; arr[j])</span><br><span class="line">&#123;</span><br><span class="line">max = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (max != i) <span class="comment">//å¦‚æœæœ€å¤§æ•°çš„ä¸‹æ ‡ä¸æ˜¯iï¼Œäº¤æ¢ä¸¤è€…</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">mySwap</span>(arr[max], arr[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printArray</span><span class="params">(T arr[], <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•charæ•°ç»„</span></span><br><span class="line"><span class="type">char</span> charArr[] = <span class="string">&quot;bdcfeagh&quot;</span>;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(charArr) / <span class="built_in">sizeof</span>(<span class="type">char</span>);</span><br><span class="line"><span class="built_in">mySort</span>(charArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(charArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æµ‹è¯•intæ•°ç»„</span></span><br><span class="line"><span class="type">int</span> intArr[] = &#123; <span class="number">7</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> &#125;;</span><br><span class="line"><span class="type">int</span> num = <span class="built_in">sizeof</span>(intArr) / <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"><span class="built_in">mySort</span>(intArr, num);</span><br><span class="line"><span class="built_in">printArray</span>(intArr, num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ¨¡æ¿å¯ä»¥æé«˜ä»£ç å¤ç”¨ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="1-2-4-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«">1.2.4 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h4><p><strong>æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ï¼š</strong></p><ul><li>æ™®é€šå‡½æ•°è°ƒç”¨æ—¶å¯ä»¥å‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰</li><li>å‡½æ•°æ¨¡æ¿è°ƒç”¨æ—¶ï¼Œå¦‚æœåˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li><li>å¦‚æœåˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">myAdd01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">myAdd02</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°æ¨¡æ¿æ—¶ï¼Œå¦‚æœç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢,å³éšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd01</span>(a, c) &lt;&lt; endl; <span class="comment">//æ­£ç¡®ï¼Œå°†charç±»å‹çš„&#x27;c&#x27;éšå¼è½¬æ¢ä¸ºintç±»å‹  &#x27;c&#x27; å¯¹åº” ASCIIç  99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//myAdd02(a, c); // æŠ¥é”™ï¼Œä½¿ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼æ—¶ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">myAdd02</span>&lt;<span class="type">int</span>&gt;(a, c); <span class="comment">//æ­£ç¡®ï¼Œå¦‚æœç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼Œå› ä¸ºå¯ä»¥è‡ªå·±ç¡®å®šé€šç”¨ç±»å‹ T</p><h4 id="1-2-5-æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™">1.2.5 æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿çš„è°ƒç”¨è§„åˆ™</h4><p>è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</li><li>å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</li><li>å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</li><li>å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿è°ƒç”¨è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ™®é€šå‡½æ•°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(T a, T b, T c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è°ƒç”¨é‡è½½çš„æ¨¡æ¿&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="comment">// æ³¨æ„ å¦‚æœå‘Šè¯‰ç¼–è¯‘å™¨  æ™®é€šå‡½æ•°æ˜¯æœ‰çš„ï¼Œä½†åªæ˜¯å£°æ˜æ²¡æœ‰å®ç°ï¼Œæˆ–è€…ä¸åœ¨å½“å‰æ–‡ä»¶å†…å®ç°ï¼Œå°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b); <span class="comment">//è°ƒç”¨æ™®é€šå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">myPrint&lt;&gt;(a, b); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</span></span><br><span class="line"><span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(a, b, c); <span class="comment">//è°ƒç”¨é‡è½½çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€ å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…,ä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">char</span> c1 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span> c2 = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="built_in">myPrint</span>(c1, c2); <span class="comment">//è°ƒç”¨å‡½æ•°æ¨¡æ¿</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šæ—¢ç„¶æä¾›äº†å‡½æ•°æ¨¡æ¿ï¼Œæœ€å¥½å°±ä¸è¦æä¾›æ™®é€šå‡½æ•°ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§</p><h4 id="1-2-6-æ¨¡æ¿çš„å±€é™æ€§">1.2.6 æ¨¡æ¿çš„å±€é™æ€§</h4><p><strong>å±€é™æ€§ï¼š</strong></p><ul><li>æ¨¡æ¿çš„é€šç”¨æ€§å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><p><strong>ä¾‹å¦‚ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   a = b;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­æä¾›çš„èµ‹å€¼æ“ä½œï¼Œå¦‚æœä¼ å…¥çš„ a å’Œ b æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå°±æ— æ³•å®ç°äº†</p><p>å†ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T a, T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(a &gt; b) &#123; ... &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœ T çš„æ•°æ®ç±»å‹ä¼ å…¥çš„æ˜¯åƒ Person è¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ</p><p>å› æ­¤ C++ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæä¾›æ¨¡æ¿çš„é‡è½½ï¼Œå¯ä»¥ä¸ºè¿™äº›<strong>ç‰¹å®šçš„ç±»å‹</strong>æä¾›<strong>å…·ä½“åŒ–çš„æ¨¡æ¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(T&amp; a, T&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ï¼Œæ˜¾ç¤ºå…·ä½“åŒ–çš„åŸå‹å’Œå®šæ„æ€ä»¥template&lt;&gt;å¼€å¤´ï¼Œå¹¶é€šè¿‡åç§°æ¥æŒ‡å‡ºç±»å‹</span></span><br><span class="line"><span class="comment">//å…·ä½“åŒ–ä¼˜å…ˆäºå¸¸è§„æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(Person &amp;p1, Person &amp;p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> ( p<span class="number">1.</span>m_Name  == p<span class="number">2.</span>m_Name &amp;&amp; p<span class="number">1.</span>m_Age == p<span class="number">2.</span>m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨é€šç”¨çš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(a, b);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a == b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a != b &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¸ä¼šè°ƒç”¨æ™®é€šçš„å‡½æ•°æ¨¡æ¿</span></span><br><span class="line"><span class="comment">//å¯ä»¥åˆ›å»ºå…·ä½“åŒ–çš„Personæ•°æ®ç±»å‹çš„æ¨¡æ¿ï¼Œç”¨äºç‰¹æ®Šå¤„ç†è¿™ä¸ªç±»å‹</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">myCompare</span>(p1, p2);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 == p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1 != p2 &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨å…·ä½“åŒ–çš„æ¨¡æ¿ï¼Œå¯ä»¥è§£å†³è‡ªå®šä¹‰ç±»å‹çš„é€šç”¨åŒ–</li><li>å­¦ä¹ æ¨¡æ¿å¹¶ä¸æ˜¯ä¸ºäº†å†™æ¨¡æ¿ï¼Œè€Œæ˜¯åœ¨ STL èƒ½å¤Ÿè¿ç”¨ç³»ç»Ÿæä¾›çš„æ¨¡æ¿</li></ul><h3 id="1-3-ç±»æ¨¡æ¿">1.3 ç±»æ¨¡æ¿</h3><h4 id="1-3-1-ç±»æ¨¡æ¿è¯­æ³•">1.3.1 ç±»æ¨¡æ¿è¯­æ³•</h4><p>ç±»æ¨¡æ¿ä½œç”¨ï¼š</p><ul><li>å»ºç«‹ä¸€ä¸ªé€šç”¨ç±»ï¼Œç±»ä¸­çš„æˆå‘˜ æ•°æ®ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ª<strong>è™šæ‹Ÿçš„ç±»å‹</strong>æ¥ä»£è¡¨ã€‚</li></ul><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ç±»</span><br></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><p>template â€” å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename â€” è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨ class ä»£æ›¿</p><p>T â€” é€šç”¨çš„æ•°æ®ç±»å‹ï¼Œåç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// æŒ‡å®šNameType ä¸ºstringç±»å‹ï¼ŒAgeType ä¸º intç±»å‹</span></span><br><span class="line">Person&lt;string, <span class="type">int</span>&gt;<span class="built_in">P1</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">999</span>);</span><br><span class="line">P<span class="number">1.</span><span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿å’Œå‡½æ•°æ¨¡æ¿è¯­æ³•ç›¸ä¼¼ï¼Œåœ¨å£°æ˜æ¨¡æ¿ template åé¢åŠ ç±»ï¼Œæ­¤ç±»ç§°ä¸ºç±»æ¨¡æ¿</p><h4 id="1-3-2-ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«">1.3.2 ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«</h4><p>ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</li><li>ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// Person p(&quot;å­™æ‚Ÿç©º&quot;, 1000); // é”™è¯¯ ç±»æ¨¡æ¿ä½¿ç”¨æ—¶å€™ï¼Œä¸å¯ä»¥ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼</span></span><br><span class="line">Person &lt;string ,<span class="type">int</span>&gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>); <span class="comment">//å¿…é¡»ä½¿ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œä½¿ç”¨ç±»æ¨¡æ¿</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string&gt; <span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">999</span>); <span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨ å¯ä»¥æŒ‡å®šé»˜è®¤å‚æ•°</span></span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç±»æ¨¡æ¿ä½¿ç”¨åªèƒ½ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹æ–¹å¼</li><li>ç±»æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°åˆ—è¡¨å¯ä»¥æœ‰é»˜è®¤å‚æ•°</li></ul><h4 id="1-3-3-ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº">1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœº</h4><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°å’Œæ™®é€šç±»ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><ul><li>æ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°ä¸€å¼€å§‹å°±å¯ä»¥åˆ›å»º</li><li>ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person1 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Person2 show&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œè€Œæ˜¯åœ¨æ¨¡æ¿è°ƒç”¨æ—¶å†ç”Ÿæˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun1</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson1</span>(); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">()</span> </span>&#123; obj.<span class="built_in">showPerson2</span>(); &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyClass&lt;Person1&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">fun1</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//m.fun2();//ç¼–è¯‘ä¼šå‡ºé”™ï¼Œè¯´æ˜å‡½æ•°è°ƒç”¨æ‰ä¼šå»åˆ›å»ºæˆå‘˜å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±åˆ›å»ºçš„ï¼Œåœ¨è°ƒç”¨æ—¶æ‰å»åˆ›å»º</p><h4 id="1-3-4-ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°">1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>ç±»æ¨¡æ¿å®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ï¼Œå‘å‡½æ•°ä¼ å‚çš„æ–¹å¼</li></ul><p>ä¸€å…±æœ‰ä¸‰ç§ä¼ å…¥æ–¹å¼ï¼š</p><ol><li>æŒ‡å®šä¼ å…¥çš„ç±»å‹ â€” ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„æ•°æ®ç±»å‹</li><li>å‚æ•°æ¨¡æ¿åŒ– â€” å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’</li><li>æ•´ä¸ªç±»æ¨¡æ¿åŒ– â€” å°†è¿™ä¸ªå¯¹è±¡ç±»å‹ æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">NameType</span>, <span class="keyword">class</span> <span class="title class_">AgeType</span> = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> Person</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(NameType name, AgeType age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;mName = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mName &lt;&lt; <span class="string">&quot; age: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">NameType mName;</span><br><span class="line">AgeType mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€æŒ‡å®šä¼ å…¥çš„ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson1</span><span class="params">(Person&lt;string, <span class="type">int</span>&gt; &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printPerson1</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‚æ•°æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt;&amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T1çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;T2çš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">90</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ•´ä¸ªç±»æ¨¡æ¿åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson3</span><span class="params">(T &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Tçš„ç±»å‹ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson3</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é€šè¿‡ç±»æ¨¡æ¿åˆ›å»ºçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸‰ç§æ–¹å¼å‘å‡½æ•°ä¸­è¿›è¡Œä¼ å‚</li><li>ä½¿ç”¨æ¯”è¾ƒå¹¿æ³›æ˜¯ç¬¬ä¸€ç§ï¼šæŒ‡å®šä¼ å…¥çš„ç±»å‹</li></ul><h4 id="1-3-5-ç±»æ¨¡æ¿ä¸ç»§æ‰¿">1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿</h4><p>å½“ç±»æ¨¡æ¿ç¢°åˆ°ç»§æ‰¿æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å½“å­ç±»ç»§æ‰¿çš„çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»åœ¨å£°æ˜çš„æ—¶å€™ï¼Œè¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­ T çš„ç±»å‹</li><li>å¦‚æœä¸æŒ‡å®šï¼Œç¼–è¯‘å™¨æ— æ³•ç»™å­ç±»åˆ†é…å†…å­˜</li><li>å¦‚æœæƒ³çµæ´»æŒ‡å®šå‡ºçˆ¶ç±»ä¸­ T çš„ç±»å‹ï¼Œå­ç±»ä¹Ÿéœ€å˜ä¸ºç±»æ¨¡æ¿</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line">T m;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//class Son:public Base  //é”™è¯¯ï¼Œc++ç¼–è¯‘éœ€è¦ç»™å­ç±»åˆ†é…å†…å­˜ï¼Œå¿…é¡»çŸ¥é“çˆ¶ç±»ä¸­Tçš„ç±»å‹æ‰å¯ä»¥å‘ä¸‹ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base&lt;<span class="type">int</span>&gt; <span class="comment">//å¿…é¡»æŒ‡å®šä¸€ä¸ªç±»å‹</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ç»§æ‰¿ç±»æ¨¡æ¿ ,å¯ä»¥ç”¨T2æŒ‡å®šçˆ¶ç±»ä¸­çš„Tç±»å‹</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span> :<span class="keyword">public</span> Base&lt;T2&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son2</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">typeid</span>(T2).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2&lt;<span class="type">int</span>, <span class="type">char</span>&gt; child1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœçˆ¶ç±»æ˜¯ç±»æ¨¡æ¿ï¼Œå­ç±»éœ€è¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­ T çš„æ•°æ®ç±»å‹</p><h4 id="1-3-6-ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°">1.3.6 ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</h4><p>å­¦ä¹ ç›®æ ‡ï¼šèƒ½å¤ŸæŒæ¡ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°ç±»å†…å£°æ˜</span></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°ç±»å¤–å®ç°æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°åˆ—è¡¨</p><h4 id="1-3-7-ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™">1.3.7 ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™äº§ç”Ÿçš„é—®é¢˜ä»¥åŠè§£å†³æ–¹å¼</li></ul><p>é—®é¢˜ï¼š</p><ul><li>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´åˆ†æ–‡ä»¶ç¼–å†™æ—¶é“¾æ¥ä¸åˆ°</li></ul><p>è§£å†³ï¼š</p><ul><li>è§£å†³æ–¹å¼ 1ï¼šç›´æ¥åŒ…å«.cpp æºæ–‡ä»¶</li><li>è§£å†³æ–¹å¼ 2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º.hppï¼Œhpp æ˜¯çº¦å®šçš„åç§°ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>person.hpp ä¸­ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age);</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showPerson</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">Person&lt;T1, T2&gt;::<span class="built_in">Person</span>(T1 name, T2 age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">void</span> Person&lt;T1, T2&gt;::<span class="built_in">showPerson</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“å: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿åˆ†æ–‡ä»¶ç¼–å†™.cpp ä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//#include &quot;person.h&quot;</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.cpp&quot;</span> <span class="comment">//è§£å†³æ–¹å¼1ï¼ŒåŒ…å«cppæºæ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£å†³æ–¹å¼2ï¼Œå°†å£°æ˜å’Œå®ç°å†™åˆ°ä¸€èµ·ï¼Œæ–‡ä»¶åç¼€åæ”¹ä¸º.hpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;person.hpp&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">showPerson</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä¸»æµçš„è§£å†³æ–¹å¼æ˜¯ç¬¬äºŒç§ï¼Œå°†ç±»æ¨¡æ¿æˆå‘˜å‡½æ•°å†™åˆ°ä¸€èµ·ï¼Œå¹¶å°†åç¼€åæ”¹ä¸º.hpp</p><h4 id="1-3-8-ç±»æ¨¡æ¿ä¸å‹å…ƒ">1.3.8 ç±»æ¨¡æ¿ä¸å‹å…ƒ</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡ç±»æ¨¡æ¿é…åˆå‹å…ƒå‡½æ•°çš„ç±»å†…å’Œç±»å¤–å®ç°</li></ul><p>å…¨å±€å‡½æ•°ç±»å†…å®ç° - ç›´æ¥åœ¨ç±»å†…å£°æ˜å‹å…ƒå³å¯</p><p>å…¨å±€å‡½æ•°ç±»å¤–å®ç° - éœ€è¦æå‰è®©ç¼–è¯‘å™¨çŸ¥é“å…¨å±€å‡½æ•°çš„å­˜åœ¨</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç° - å…ˆåšå‡½æ•°æ¨¡æ¿å£°æ˜ï¼Œä¸‹æ–¹åœ¨åšå‡½æ•°æ¨¡æ¿å®šä¹‰ï¼Œåœ¨åšå‹å…ƒ</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt; <span class="keyword">class</span> <span class="title class_">Person</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå£°æ˜äº†å‡½æ•°æ¨¡æ¿ï¼Œå¯ä»¥å°†å®ç°å†™åˆ°åé¢ï¼Œå¦åˆ™éœ€è¦å°†å®ç°ä½“å†™åˆ°ç±»çš„å‰é¢è®©ç¼–è¯‘å™¨æå‰çœ‹åˆ°</span></span><br><span class="line"><span class="comment">//template&lt;class T1, class T2&gt; void printPerson2(Person&lt;T1, T2&gt; &amp; p);</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T1, <span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPerson2</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç±»å¤–å®ç° ---- å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°é…åˆå‹å…ƒ   ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">printPerson</span><span class="params">(Person&lt;T1, T2&gt; &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°é…åˆå‹å…ƒ  ç±»å¤–å®ç°</span></span><br><span class="line"><span class="keyword">friend</span> <span class="type">void</span> printPerson2&lt;&gt;(Person&lt;T1, T2&gt; &amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(T1 name, T2 age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T1 m_Name;</span><br><span class="line">T2 m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å…¨å±€å‡½æ•°åœ¨ç±»å†…å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="built_in">printPerson</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å…¨å±€å‡½æ•°åœ¨ç±»å¤–å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person &lt;string, <span class="type">int</span> &gt;<span class="built_in">p</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="built_in">printPerson2</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå»ºè®®å…¨å±€å‡½æ•°åšç±»å†…å®ç°ï¼Œç”¨æ³•ç®€å•ï¼Œè€Œä¸”ç¼–è¯‘å™¨å¯ä»¥ç›´æ¥è¯†åˆ«</p><h4 id="1-3-9-ç±»æ¨¡æ¿æ¡ˆä¾‹">1.3.9 ç±»æ¨¡æ¿æ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°: å®ç°ä¸€ä¸ªé€šç”¨çš„æ•°ç»„ç±»ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>å¯ä»¥å¯¹å†…ç½®æ•°æ®ç±»å‹ä»¥åŠè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æ•°æ®è¿›è¡Œå­˜å‚¨</li><li>å°†æ•°ç»„ä¸­çš„æ•°æ®å­˜å‚¨åˆ°å †åŒº</li><li>æ„é€ å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥æ•°ç»„çš„å®¹é‡</li><li>æä¾›å¯¹åº”çš„æ‹·è´æ„é€ å‡½æ•°ä»¥åŠ operator=é˜²æ­¢æµ…æ‹·è´é—®é¢˜</li><li>æä¾›å°¾æ’æ³•å’Œå°¾åˆ æ³•å¯¹æ•°ç»„ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ å’Œåˆ é™¤</li><li>å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ </li><li>å¯ä»¥è·å–æ•°ç»„ä¸­å½“å‰å…ƒç´ ä¸ªæ•°å’Œæ•°ç»„çš„å®¹é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>myArray.hpp ä¸­ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">int</span> capacity)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">MyArray</span>(<span class="type">const</span> MyArray &amp; arr)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = arr.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = arr.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å¦‚æœTä¸ºå¯¹è±¡ï¼Œè€Œä¸”è¿˜åŒ…å«æŒ‡é’ˆï¼Œå¿…é¡»éœ€è¦é‡è½½ = æ“ä½œç¬¦ï¼Œå› ä¸ºè¿™ä¸ªç­‰å·ä¸æ˜¯ æ„é€  è€Œæ˜¯èµ‹å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">// æ™®é€šç±»å‹å¯ä»¥ç›´æ¥= ä½†æ˜¯æŒ‡é’ˆç±»å‹éœ€è¦æ·±æ‹·è´</span></span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = arr.pAddress[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½= æ“ä½œç¬¦  é˜²æ­¢æµ…æ‹·è´é—®é¢˜</span></span><br><span class="line">MyArray&amp; <span class="keyword">operator</span>=(<span class="type">const</span> MyArray&amp; myarray) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = myarray.m_Capacity;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = myarray.m_Size;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="keyword">new</span> T[<span class="keyword">this</span>-&gt;m_Capacity];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;m_Size; i++) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[i] = myarray[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½[] æ“ä½œç¬¦  arr[0]</span></span><br><span class="line">T&amp; <span class="keyword">operator</span> [](<span class="type">int</span> index)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;pAddress[index]; <span class="comment">//ä¸è€ƒè™‘è¶Šç•Œï¼Œç”¨æˆ·è‡ªå·±å»å¤„ç†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾æ’æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push_back</span><span class="params">(<span class="type">const</span> T &amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Capacity == <span class="keyword">this</span>-&gt;m_Size)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress[<span class="keyword">this</span>-&gt;m_Size] = val;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Pop_back</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Size == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å®¹é‡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getCapacity</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">int</span><span class="title">getSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_Size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„</span></span><br><span class="line">~<span class="built_in">MyArray</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;pAddress != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span>[] <span class="keyword">this</span>-&gt;pAddress;</span><br><span class="line"><span class="keyword">this</span>-&gt;pAddress = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Capacity = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">T * pAddress;  <span class="comment">//æŒ‡å‘ä¸€ä¸ªå †ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´å­˜å‚¨çœŸæ­£çš„æ•°æ®</span></span><br><span class="line"><span class="type">int</span> m_Capacity; <span class="comment">//å®¹é‡</span></span><br><span class="line"><span class="type">int</span> m_Size;   <span class="comment">// å¤§å°</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç±»æ¨¡æ¿æ¡ˆä¾‹â€”æ•°ç»„ç±»å°è£….cpp ä¸­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myArray.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printIntArray</span><span class="params">(MyArray&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; arr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">array<span class="number">1.</span><span class="built_in">Push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array<span class="number">1.</span><span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array1çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array<span class="number">1.</span><span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">MyArray&lt;<span class="type">int</span>&gt; <span class="title">array2</span><span class="params">(array1)</span></span>;</span><br><span class="line">array<span class="number">2.</span><span class="built_in">Pop_back</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2æ‰“å°è¾“å‡ºï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printIntArray</span>(array2);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å¤§å°ï¼š&quot;</span> &lt;&lt; array<span class="number">2.</span><span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;array2çš„å®¹é‡ï¼š&quot;</span> &lt;&lt; array<span class="number">2.</span><span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125;</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printPersonArray</span><span class="params">(MyArray&lt;Person&gt;&amp; personArr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; personArr.<span class="built_in">getSize</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; personArr[i].m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; personArr[i].m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°ç»„</span></span><br><span class="line"><span class="function">MyArray&lt;Person&gt; <span class="title">pArray</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;éŸ©ä¿¡&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¦²å·±&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ç‹æ˜­å›&quot;</span>, <span class="number">15</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">24</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p1);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p2);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p3);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p4);</span><br><span class="line">pArray.<span class="built_in">Push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printPersonArray</span>(pArray);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å¤§å°ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getSize</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pArrayçš„å®¹é‡ï¼š&quot;</span> &lt;&lt; pArray.<span class="built_in">getCapacity</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>èƒ½å¤Ÿåˆ©ç”¨æ‰€å­¦çŸ¥è¯†ç‚¹å®ç°é€šç”¨çš„æ•°ç»„</p><h2 id="2-STL-åˆè¯†">2 STL åˆè¯†</h2><h3 id="2-1-STL-çš„è¯ç”Ÿ">2.1 STL çš„è¯ç”Ÿ</h3><ul><li><p>é•¿ä¹…ä»¥æ¥ï¼Œè½¯ä»¶ç•Œä¸€ç›´å¸Œæœ›å»ºç«‹ä¸€ç§å¯é‡å¤åˆ©ç”¨çš„ä¸œè¥¿</p></li><li><p>C++çš„<strong>é¢å‘å¯¹è±¡</strong>å’Œ<strong>æ³›å‹ç¼–ç¨‹</strong>æ€æƒ³ï¼Œç›®çš„å°±æ˜¯<strong>å¤ç”¨æ€§çš„æå‡</strong></p></li><li><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•éƒ½æœªèƒ½æœ‰ä¸€å¥—æ ‡å‡†,å¯¼è‡´è¢«è¿«ä»äº‹å¤§é‡é‡å¤å·¥ä½œ</p></li><li><p>ä¸ºäº†å»ºç«‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸€å¥—æ ‡å‡†,è¯ç”Ÿäº†<strong>STL</strong></p></li></ul><h3 id="2-2-STL-åŸºæœ¬æ¦‚å¿µ">2.2 STL åŸºæœ¬æ¦‚å¿µ</h3><ul><li>STL(Standard Template Library,<strong>æ ‡å‡†æ¨¡æ¿åº“</strong>)</li><li>STL ä»å¹¿ä¹‰ä¸Šåˆ†ä¸º: <strong>å®¹å™¨(container) ç®—æ³•(algorithm) è¿­ä»£å™¨(iterator)</strong></li><li><strong>å®¹å™¨</strong>å’Œ<strong>ç®—æ³•</strong>ä¹‹é—´é€šè¿‡<strong>è¿­ä»£å™¨</strong>è¿›è¡Œæ— ç¼è¿æ¥ã€‚</li><li>STL å‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°</li></ul><h3 id="2-3-STL-å…­å¤§ç»„ä»¶">2.3 STL å…­å¤§ç»„ä»¶</h3><p>STL å¤§ä½“åˆ†ä¸ºå…­å¤§ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯:<strong>å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ï¼ˆé…æ¥å™¨ï¼‰ã€ç©ºé—´é…ç½®å™¨</strong></p><ol><li>å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚ vectorã€listã€dequeã€setã€map ç­‰,ç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</li><li>ç®—æ³•ï¼šå„ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå¦‚ sortã€findã€copyã€for_each ç­‰</li><li>è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ã€‚</li><li>ä»¿å‡½æ•°ï¼šè¡Œä¸ºç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥ã€‚</li><li>é€‚é…å™¨ï¼šä¸€ç§ç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–è€…ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚</li><li>ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´çš„é…ç½®ä¸ç®¡ç†ã€‚</li></ol><h3 id="2-4-STL-ä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨">2.4 STL ä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨</h3><p>**å®¹å™¨ï¼š**ç½®ç‰©ä¹‹æ‰€ä¹Ÿ</p><p>STL<strong>å®¹å™¨</strong>å°±æ˜¯å°†è¿ç”¨<strong>æœ€å¹¿æ³›çš„ä¸€äº›æ•°æ®ç»“æ„</strong>å®ç°å‡ºæ¥</p><p>å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„, é“¾è¡¨,æ ‘, æ ˆ, é˜Ÿåˆ—, é›†åˆ, æ˜ å°„è¡¨ ç­‰</p><p>è¿™äº›å®¹å™¨åˆ†ä¸º<strong>åºåˆ—å¼å®¹å™¨</strong>å’Œ<strong>å…³è”å¼å®¹å™¨</strong>ä¸¤ç§:</p><p>â€‹ <strong>åºåˆ—å¼å®¹å™¨</strong>:å¼ºè°ƒå€¼çš„æ’åºï¼Œåºåˆ—å¼å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šçš„ä½ç½®ã€‚<br>â€‹ <strong>å…³è”å¼å®¹å™¨</strong>:äºŒå‰æ ‘ç»“æ„ï¼Œå„å…ƒç´ ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„ç‰©ç†ä¸Šçš„é¡ºåºå…³ç³»</p><p>**ç®—æ³•ï¼š**é—®é¢˜ä¹‹è§£æ³•ä¹Ÿ</p><p>æœ‰é™çš„æ­¥éª¤ï¼Œè§£å†³é€»è¾‘æˆ–æ•°å­¦ä¸Šçš„é—®é¢˜ï¼Œè¿™ä¸€é—¨å­¦ç§‘æˆ‘ä»¬å«åšç®—æ³•(Algorithms)</p><p>ç®—æ³•åˆ†ä¸º:<strong>è´¨å˜ç®—æ³•</strong>å’Œ<strong>éè´¨å˜ç®—æ³•</strong>ã€‚</p><p>è´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ çš„å†…å®¹ã€‚ä¾‹å¦‚æ‹·è´ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ç­‰ç­‰</p><p>éè´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¸ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œä¾‹å¦‚æŸ¥æ‰¾ã€è®¡æ•°ã€éå†ã€å¯»æ‰¾æå€¼ç­‰ç­‰</p><p>**è¿­ä»£å™¨ï¼š**å®¹å™¨å’Œç®—æ³•ä¹‹é—´ç²˜åˆå‰‚</p><p>æä¾›ä¸€ç§æ–¹æ³•ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¾åºå¯»è®¿æŸä¸ªå®¹å™¨æ‰€å«çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— éœ€æš´éœ²è¯¥å®¹å™¨çš„å†…éƒ¨è¡¨ç¤ºæ–¹å¼ã€‚</p><p>æ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±ä¸“å±çš„è¿­ä»£å™¨</p><p>è¿­ä»£å™¨ä½¿ç”¨éå¸¸ç±»ä¼¼äºæŒ‡é’ˆï¼Œåˆå­¦é˜¶æ®µæˆ‘ä»¬å¯ä»¥å…ˆç†è§£è¿­ä»£å™¨ä¸ºæŒ‡é’ˆ</p><p>è¿­ä»£å™¨ç§ç±»ï¼š</p><table><thead><tr><th>ç§ç±»</th><th>åŠŸèƒ½</th><th>æ”¯æŒè¿ç®—</th></tr></thead><tbody><tr><td>è¾“å…¥è¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªè¯»è®¿é—®</td><td>åªè¯»ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>è¾“å‡ºè¿­ä»£å™¨</td><td>å¯¹æ•°æ®çš„åªå†™è®¿é—®</td><td>åªå†™ï¼Œæ”¯æŒ++</td></tr><tr><td>å‰å‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰æ¨è¿›è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€==ã€ï¼=</td></tr><tr><td>åŒå‘è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¹¶èƒ½å‘å‰å’Œå‘åæ“ä½œ</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ï¼Œ</td></tr><tr><td>éšæœºè®¿é—®è¿­ä»£å™¨</td><td>è¯»å†™æ“ä½œï¼Œå¯ä»¥ä»¥è·³è·ƒçš„æ–¹å¼è®¿é—®ä»»æ„æ•°æ®ï¼ŒåŠŸèƒ½æœ€å¼ºçš„è¿­ä»£å™¨</td><td>è¯»å†™ï¼Œæ”¯æŒ++ã€â€“ã€[n]ã€-nã€&lt;ã€&lt;=ã€&gt;ã€&gt;=</td></tr></tbody></table><p>å¸¸ç”¨çš„å®¹å™¨ä¸­è¿­ä»£å™¨ç§ç±»ä¸ºåŒå‘è¿­ä»£å™¨ï¼Œå’Œéšæœºè®¿é—®è¿­ä»£å™¨</p><h3 id="2-5-å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†">2.5 å®¹å™¨ç®—æ³•è¿­ä»£å™¨åˆè¯†</h3><p>äº†è§£ STL ä¸­å®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬åˆ©ç”¨ä»£ç æ„Ÿå— STL çš„é­…åŠ›</p><p>STL ä¸­æœ€å¸¸ç”¨çš„å®¹å™¨ä¸º Vectorï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å‘è¿™ä¸ªå®¹å™¨ä¸­æ’å…¥æ•°æ®ã€å¹¶éå†è¿™ä¸ªå®¹å™¨</p><h4 id="2-5-1-vector-å­˜æ”¾å†…ç½®æ•°æ®ç±»å‹">2.5.1 vector å­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</h4><p>å®¹å™¨ï¼š <code>vector</code></p><p>ç®—æ³•ï¼š <code>for_each</code></p><p>è¿­ä»£å™¨ï¼š <code>vector&lt;int&gt;::iterator</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºvectorå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡æ¨¡æ¿å‚æ•°æŒ‡å®šå®¹å™¨ä¸­å­˜æ”¾çš„æ•°æ®çš„ç±»å‹</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="comment">//å‘å®¹å™¨ä¸­æ”¾æ•°æ®</span></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ˜¯ç”¨æ¥éå†å®¹å™¨ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//v.begin()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="comment">//v.end()è¿”å›è¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨æŒ‡å‘å®¹å™¨å…ƒç´ çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line"><span class="comment">//vector&lt;int&gt;::iterator æ‹¿åˆ°vector&lt;int&gt;è¿™ç§å®¹å™¨çš„è¿­ä»£å™¨ç±»å‹</span></span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pBegin = v.<span class="built_in">begin</span>();</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator pEnd = v.<span class="built_in">end</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">while</span> (pBegin != pEnd) &#123;</span><br><span class="line">cout &lt;&lt; *pBegin &lt;&lt; endl;</span><br><span class="line">pBegin++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨STLæä¾›æ ‡å‡†éå†ç®—æ³•  å¤´æ–‡ä»¶ algorithm</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), MyPrint);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-2-Vector-å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹">2.5.2 Vector å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</h4><p>å­¦ä¹ ç›®æ ‡ï¼švector ä¸­å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¹¶æ‰“å°è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age) &#123;</span><br><span class="line">mName = name;</span><br><span class="line">mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string mName;</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å­˜æ”¾å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; (*it).mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it).mAge &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¾å¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person*&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;eee&quot;</span>, <span class="number">50</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(&amp;p5);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person*&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">Person * p = (*it);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Name:&quot;</span> &lt;&lt; p-&gt;mName &lt;&lt; <span class="string">&quot; Age:&quot;</span> &lt;&lt; (*it)-&gt;mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5-3-Vector-å®¹å™¨åµŒå¥—å®¹å™¨">2.5.3 Vector å®¹å™¨åµŒå¥—å®¹å™¨</h4><p>å­¦ä¹ ç›®æ ‡ï¼šå®¹å™¨ä¸­åµŒå¥—å®¹å™¨ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ•°æ®è¿›è¡Œéå†è¾“å‡º</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®¹å™¨åµŒå¥—å®¹å™¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt; vector&lt;<span class="type">int</span>&gt; &gt;  v;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v3;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i + <span class="number">2</span>);</span><br><span class="line">v<span class="number">3.</span><span class="built_in">push_back</span>(i + <span class="number">3</span>);</span><br><span class="line">v<span class="number">4.</span><span class="built_in">push_back</span>(i + <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨å…ƒç´ æ’å…¥åˆ°vector vä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(v1);</span><br><span class="line">v.<span class="built_in">push_back</span>(v2);</span><br><span class="line">v.<span class="built_in">push_back</span>(v3);</span><br><span class="line">v.<span class="built_in">push_back</span>(v4);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator vit = (*it).<span class="built_in">begin</span>(); vit != (*it).<span class="built_in">end</span>(); vit++) &#123;</span><br><span class="line">cout &lt;&lt; *vit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-STL-å¸¸ç”¨å®¹å™¨">3 STL- å¸¸ç”¨å®¹å™¨</h2><h3 id="3-1-string-å®¹å™¨">3.1 string å®¹å™¨</h3><h4 id="3-1-1-string-åŸºæœ¬æ¦‚å¿µ">3.1.1 string åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>string æ˜¯ C++é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œ string æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»</li></ul><p><strong>string å’Œ char * åŒºåˆ«ï¼š</strong></p><ul><li>char * æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li><li>string æ˜¯ä¸€ä¸ªç±»ï¼Œç±»å†…éƒ¨å°è£…äº† char*ï¼Œç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ª char*å‹çš„å®¹å™¨ã€‚</li></ul><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p>string ç±»å†…éƒ¨å°è£…äº†å¾ˆå¤šæˆå‘˜æ–¹æ³•</p><p>ä¾‹å¦‚ï¼šæŸ¥æ‰¾ findï¼Œæ‹·è´ copyï¼Œåˆ é™¤ delete æ›¿æ¢ replaceï¼Œæ’å…¥ insert</p><p>string ç®¡ç† char*æ‰€åˆ†é…çš„å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒå¤åˆ¶è¶Šç•Œå’Œå–å€¼è¶Šç•Œç­‰ï¼Œç”±ç±»å†…éƒ¨è¿›è¡Œè´Ÿè´£</p><h4 id="3-1-2-string-æ„é€ å‡½æ•°">3.1.2 string æ„é€ å‡½æ•°</h4><p>æ„é€ å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string();</code> //åˆ›å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² ä¾‹å¦‚: string str;<br><code>string(const char* s);</code> //ä½¿ç”¨å­—ç¬¦ä¸² s åˆå§‹åŒ–</li><li><code>string(const string&amp; str);</code> //ä½¿ç”¨ä¸€ä¸ª string å¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ª string å¯¹è±¡</li><li><code>string(int n, char c);</code> //ä½¿ç”¨ n ä¸ªå­—ç¬¦ c åˆå§‹åŒ–</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//stringæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string s1; <span class="comment">//åˆ›å»ºç©ºå­—ç¬¦ä¸²ï¼Œè°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; s1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="function">string <span class="title">s2</span><span class="params">(str)</span></span>; <span class="comment">//æŠŠc_stringè½¬æ¢æˆäº†string</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; s2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s3</span><span class="params">(s2)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">s4</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;a&#x27;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; s3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstring çš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-1-3-string-èµ‹å€¼æ“ä½œ">3.1.3 string èµ‹å€¼æ“ä½œ</h4><p>åŠŸèƒ½æè¿°ï¼š</p><ul><li>ç»™ string å­—ç¬¦ä¸²è¿›è¡Œèµ‹å€¼</li></ul><p>èµ‹å€¼çš„å‡½æ•°åŸå‹ï¼š</p><ul><li><code>string&amp; operator=(const char* s);</code> //char*ç±»å‹å­—ç¬¦ä¸² èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(const string &amp;s);</code> //æŠŠå­—ç¬¦ä¸² s èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; operator=(char c);</code> //å­—ç¬¦èµ‹å€¼ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s);</code> //æŠŠå­—ç¬¦ä¸² s èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const char *s, int n);</code> //æŠŠå­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦èµ‹ç»™å½“å‰çš„å­—ç¬¦ä¸²</li><li><code>string&amp; assign(const string &amp;s);</code> //æŠŠå­—ç¬¦ä¸² s èµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li><li><code>string&amp; assign(int n, char c);</code> //ç”¨ n ä¸ªå­—ç¬¦ c èµ‹ç»™å½“å‰å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1;</span><br><span class="line">str1 = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2;</span><br><span class="line">str2 = str1;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str2 = &quot;</span> &lt;&lt; str2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3;</span><br><span class="line">str3 = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str4;</span><br><span class="line">str<span class="number">4.</span><span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str4 = &quot;</span> &lt;&lt; str4 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str5;</span><br><span class="line">str<span class="number">5.</span><span class="built_in">assign</span>(<span class="string">&quot;hello c++&quot;</span>,<span class="number">5</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str5 = &quot;</span> &lt;&lt; str5 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">string str6;</span><br><span class="line">str<span class="number">6.</span><span class="built_in">assign</span>(str5);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str6 = &quot;</span> &lt;&lt; str6 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str7;</span><br><span class="line">str<span class="number">7.</span><span class="built_in">assign</span>(<span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str7 = &quot;</span> &lt;&lt; str7 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹ string çš„èµ‹å€¼æ–¹å¼å¾ˆå¤šï¼Œ<code>operator=</code> è¿™ç§æ–¹å¼æ˜¯æ¯”è¾ƒå®ç”¨çš„</p><h4 id="3-1-4-string-å­—ç¬¦ä¸²æ‹¼æ¥">3.1.4 string å­—ç¬¦ä¸²æ‹¼æ¥</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°åœ¨å­—ç¬¦ä¸²æœ«å°¾æ‹¼æ¥å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; operator+=(const char* str);</code> //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const char c);</code> //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; operator+=(const string&amp; str);</code> //é‡è½½+=æ“ä½œç¬¦</li><li><code>string&amp; append(const char *s); </code> //æŠŠå­—ç¬¦ä¸² s è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const char *s, int n);</code> //æŠŠå­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦è¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²ç»“å°¾</li><li><code>string&amp; append(const string &amp;s);</code> //åŒ operator+=(const string&amp; str)</li><li><code>string&amp; append(const string &amp;s, int pos, int n);</code>//å­—ç¬¦ä¸² s ä¸­ä» pos å¼€å§‹çš„ n ä¸ªå­—ç¬¦è¿æ¥åˆ°å­—ç¬¦ä¸²ç»“å°¾</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str1 = <span class="string">&quot;æˆ‘&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&quot;çˆ±ç©æ¸¸æˆ&quot;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str1 += <span class="string">&#x27;:&#x27;</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str2 = <span class="string">&quot;LOL DNF&quot;</span>;</span><br><span class="line"></span><br><span class="line">str1 += str2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string str3 = <span class="string">&quot;I&quot;</span>;</span><br><span class="line">str<span class="number">3.</span><span class="built_in">append</span>(<span class="string">&quot; love &quot;</span>);</span><br><span class="line">str<span class="number">3.</span><span class="built_in">append</span>(<span class="string">&quot;game abcde&quot;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//str3.append(str2);</span></span><br><span class="line">str<span class="number">3.</span><span class="built_in">append</span>(str2, <span class="number">4</span>, <span class="number">3</span>); <span class="comment">// ä»ä¸‹æ ‡4ä½ç½®å¼€å§‹ ï¼Œæˆªå–3ä¸ªå­—ç¬¦ï¼Œæ‹¼æ¥åˆ°å­—ç¬¦ä¸²æœ«å°¾</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str3 = &quot;</span> &lt;&lt; str3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²æ‹¼æ¥çš„é‡è½½ç‰ˆæœ¬å¾ˆå¤šï¼Œåˆå­¦é˜¶æ®µè®°ä½å‡ ç§å³å¯</p><h4 id="3-1-5-string-æŸ¥æ‰¾å’Œæ›¿æ¢">3.1.5 string æŸ¥æ‰¾å’Œæ›¿æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ï¼šæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨</li><li>æ›¿æ¢ï¼šåœ¨æŒ‡å®šçš„ä½ç½®æ›¿æ¢å­—ç¬¦ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int find(const string&amp; str, int pos = 0) const;</code> //æŸ¥æ‰¾ str ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä» pos å¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos = 0) const; </code> //æŸ¥æ‰¾ s ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®,ä» pos å¼€å§‹æŸ¥æ‰¾</li><li><code>int find(const char* s, int pos, int n) const; </code> //ä» pos ä½ç½®æŸ¥æ‰¾ s çš„å‰ n ä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡ä½ç½®</li><li><code>int find(const char c, int pos = 0) const; </code> //æŸ¥æ‰¾å­—ç¬¦ c ç¬¬ä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>int rfind(const string&amp; str, int pos = npos) const;</code> //æŸ¥æ‰¾ str æœ€åä¸€æ¬¡ä½ç½®,ä» pos å¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos = npos) const;</code> //æŸ¥æ‰¾ s æœ€åä¸€æ¬¡å‡ºç°ä½ç½®,ä» pos å¼€å§‹æŸ¥æ‰¾</li><li><code>int rfind(const char* s, int pos, int n) const;</code> //ä» pos æŸ¥æ‰¾ s çš„å‰ n ä¸ªå­—ç¬¦æœ€åä¸€æ¬¡ä½ç½®</li><li><code>int rfind(const char c, int pos = 0) const;  </code> //æŸ¥æ‰¾å­—ç¬¦ c æœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li><li><code>string&amp; replace(int pos, int n, const string&amp; str); </code> //æ›¿æ¢ä» pos å¼€å§‹ n ä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸² str</li><li><code>string&amp; replace(int pos, int n,const char* s); </code> //æ›¿æ¢ä» pos å¼€å§‹çš„ n ä¸ªå­—ç¬¦ä¸ºå­—ç¬¦ä¸² s</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œæ›¿æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> pos = str<span class="number">1.f</span>ind(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pos = str<span class="number">1.</span><span class="built_in">rfind</span>(<span class="string">&quot;de&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;pos = &quot;</span> &lt;&lt; pos &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ›¿æ¢</span></span><br><span class="line">string str1 = <span class="string">&quot;abcdefgde&quot;</span>;</span><br><span class="line">str<span class="number">1.</span><span class="built_in">replace</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="string">&quot;1111&quot;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;str1 = &quot;</span> &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>find æŸ¥æ‰¾æ˜¯ä»å·¦å¾€åï¼Œrfind ä»å³å¾€å·¦</li><li>find æ‰¾åˆ°å­—ç¬¦ä¸²åè¿”å›æŸ¥æ‰¾çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</li><li>replace åœ¨æ›¿æ¢æ—¶ï¼Œè¦æŒ‡å®šä»å“ªä¸ªä½ç½®èµ·ï¼Œå¤šå°‘ä¸ªå­—ç¬¦ï¼Œæ›¿æ¢æˆä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²</li></ul><h4 id="3-1-6-string-å­—ç¬¦ä¸²æ¯”è¾ƒ">3.1.6 string å­—ç¬¦ä¸²æ¯”è¾ƒ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²ä¹‹é—´çš„æ¯”è¾ƒ</li></ul><p><strong>æ¯”è¾ƒæ–¹å¼ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—ç¬¦çš„ ASCII ç è¿›è¡Œå¯¹æ¯”</li></ul><p>= è¿”å› 0</p><p>&gt; è¿”å› 1</p><p>&lt; è¿”å› -1</p><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>int compare(const string &amp;s) const; </code> //ä¸å­—ç¬¦ä¸² s æ¯”è¾ƒ</li><li><code>int compare(const char *s) const;</code> //ä¸å­—ç¬¦ä¸² s æ¯”è¾ƒ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ¯”è¾ƒ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string s1 = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">string s2 = <span class="string">&quot;aello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = s<span class="number">1.</span><span class="built_in">compare</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (ret == <span class="number">0</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 ç­‰äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (ret &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å¤§äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1 å°äº s2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå­—ç¬¦ä¸²å¯¹æ¯”ä¸»è¦æ˜¯ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­è°å¤§è°å°çš„æ„ä¹‰å¹¶ä¸æ˜¯å¾ˆå¤§</p><h4 id="3-1-7-string-å­—ç¬¦å­˜å–">3.1.7 string å­—ç¬¦å­˜å–</h4><p>string ä¸­å•ä¸ªå­—ç¬¦å­˜å–æ–¹å¼æœ‰ä¸¤ç§</p><ul><li><code>char&amp; operator[](int n); </code> //é€šè¿‡[]æ–¹å¼å–å­—ç¬¦</li><li><code>char&amp; at(int n);   </code> //é€šè¿‡ at æ–¹æ³•è·å–å­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; str.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¿®æ”¹</span></span><br><span class="line">str[<span class="number">0</span>] = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">str.<span class="built_in">at</span>(<span class="number">1</span>) = <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šstring å­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦å­˜å–æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ©ç”¨ [ ] æˆ– at</p><h4 id="3-1-8-string-æ’å…¥å’Œåˆ é™¤">3.1.8 string æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ string å­—ç¬¦ä¸²è¿›è¡Œæ’å…¥å’Œåˆ é™¤å­—ç¬¦æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string&amp; insert(int pos, const char* s);  </code> //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, const string&amp; str); </code> //æ’å…¥å­—ç¬¦ä¸²</li><li><code>string&amp; insert(int pos, int n, char c);</code> //åœ¨æŒ‡å®šä½ç½®æ’å…¥ n ä¸ªå­—ç¬¦ c</li><li><code>string&amp; erase(int pos, int n = npos);</code> //åˆ é™¤ä» Pos å¼€å§‹çš„ n ä¸ªå­—ç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">str.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">str.<span class="built_in">erase</span>(<span class="number">1</span>, <span class="number">3</span>);  <span class="comment">//ä»1å·ä½ç½®å¼€å§‹3ä¸ªå­—ç¬¦</span></span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æ’å…¥å’Œåˆ é™¤çš„èµ·å§‹ä¸‹æ ‡éƒ½æ˜¯ä» 0 å¼€å§‹</p><h4 id="3-1-9-string-å­ä¸²">3.1.9 string å­ä¸²</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä»å­—ç¬¦ä¸²ä¸­è·å–æƒ³è¦çš„å­ä¸²</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>string substr(int pos = 0, int n = npos) const;</code> //è¿”å›ç”± pos å¼€å§‹çš„ n ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ä¸²</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">string str = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line">string subStr = str.<span class="built_in">substr</span>(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;subStr = &quot;</span> &lt;&lt; subStr &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">string email = <span class="string">&quot;hello@sina.com&quot;</span>;</span><br><span class="line"><span class="type">int</span> pos = email.<span class="built_in">find</span>(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">string username = email.<span class="built_in">substr</span>(<span class="number">0</span>, pos);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;username: &quot;</span> &lt;&lt; username &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**çµæ´»çš„è¿ç”¨æ±‚å­ä¸²åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å®é™…å¼€å‘ä¸­è·å–æœ‰æ•ˆçš„ä¿¡æ¯</p><h3 id="3-2-vector-å®¹å™¨">3.2 vector å®¹å™¨</h3><h4 id="3-2-1-vector-åŸºæœ¬æ¦‚å¿µ">3.2.1 vector åŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>vector æ•°æ®ç»“æ„å’Œ<strong>æ•°ç»„éå¸¸ç›¸ä¼¼</strong>ï¼Œä¹Ÿç§°ä¸º<strong>å•ç«¯æ•°ç»„</strong></li></ul><p><strong>vector ä¸æ™®é€šæ•°ç»„åŒºåˆ«ï¼š</strong></p><ul><li>ä¸åŒä¹‹å¤„åœ¨äºæ•°ç»„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œ vector å¯ä»¥<strong>åŠ¨æ€æ‰©å±•</strong></li></ul><p><strong>åŠ¨æ€æ‰©å±•ï¼š</strong></p><ul><li>å¹¶ä¸æ˜¯åœ¨åŸç©ºé—´ä¹‹åç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†åŸæ•°æ®æ‹·è´æ–°ç©ºé—´ï¼Œé‡Šæ”¾åŸç©ºé—´</li></ul><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230709204849232.png" alt="image-20230709204849232"></p><ul><li>vector å®¹å™¨çš„è¿­ä»£å™¨æ˜¯æ”¯æŒéšæœºè®¿é—®çš„è¿­ä»£å™¨</li></ul><h4 id="3-2-2-vector-æ„é€ å‡½æ•°">3.2.2 vector æ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»º vector å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>vector&lt;T&gt; v; </code> //é‡‡ç”¨æ¨¡æ¿å®ç°ç±»å®ç°ï¼Œé»˜è®¤æ„é€ å‡½æ•°</li><li><code>vector(v.begin(), v.end());   </code> //å°† v[begin(), end())åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(n, elem);</code> //æ„é€ å‡½æ•°å°† n ä¸ª elem æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>vector(const vector &amp;vec);</code> //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(v<span class="number">1.</span>begin(), v<span class="number">1.</span>end())</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">10</span>, <span class="number">100</span>)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v4</span><span class="params">(v3)</span></span>;</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**vector çš„å¤šç§æ„é€ æ–¹å¼æ²¡æœ‰å¯æ¯”æ€§ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-2-3-vector-èµ‹å€¼æ“ä½œ">3.2.3 vector èµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™ vector å®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>vector&amp; operator=(const vector &amp;vec);</code>//é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code> //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code> //å°† n ä¸ª elem æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1; <span class="comment">//æ— å‚æ„é€ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line">v2 = v1;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v3;</span><br><span class="line">v<span class="number">3.</span><span class="built_in">assign</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v3);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v4;</span><br><span class="line">v<span class="number">4.</span><span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š vector èµ‹å€¼æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨ operator=ï¼Œæˆ–è€… assign éƒ½å¯ä»¥</p><h4 id="3-2-4-vector-å®¹é‡å’Œå¤§å°">3.2.4 vector å®¹é‡å’Œå¤§å°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ vector å®¹å™¨çš„å®¹é‡å’Œå¤§å°æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>empty(); </code> //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>capacity();</code> //å®¹å™¨çš„å®¹é‡</p></li><li><p><code>size();</code> //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>resize(int num);</code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º numï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹ //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(int num, elem);</code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º numï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥ elem å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹ //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="keyword">if</span> (v<span class="number">1.</span><span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å®¹é‡ = &quot;</span> &lt;&lt; v<span class="number">1.</span><span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„å¤§å° = &quot;</span> &lt;&lt; v<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å¤§ï¼Œé»˜è®¤ç”¨0å¡«å……æ–°ä½ç½®ï¼Œå¯ä»¥åˆ©ç”¨é‡è½½ç‰ˆæœ¬æ›¿æ¢é»˜è®¤å¡«å……</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">15</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//resize é‡æ–°æŒ‡å®šå¤§å° ï¼Œè‹¥æŒ‡å®šçš„æ›´å°ï¼Œè¶…å‡ºéƒ¨åˆ†å…ƒç´ è¢«åˆ é™¤</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•° â€” size</li><li>è¿”å›å®¹å™¨å®¹é‡ â€” capacity</li><li>é‡æ–°æŒ‡å®šå¤§å° â€” resize</li></ul><h4 id="3-2-5-vector-æ’å…¥å’Œåˆ é™¤">3.2.5 vector æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ vector å®¹å™¨è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>push_back(ele);</code> //å°¾éƒ¨æ’å…¥å…ƒç´  ele</li><li><code>pop_back();</code> //åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>insert(const_iterator pos, ele);</code> //è¿­ä»£å™¨æŒ‡å‘ä½ç½® pos æ’å…¥å…ƒç´  ele</li><li><code>insert(const_iterator pos, int count,ele);</code>//è¿­ä»£å™¨æŒ‡å‘ä½ç½® pos æ’å…¥ count ä¸ªå…ƒç´  ele</li><li><code>erase(const_iterator pos);</code> //åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ </li><li><code>erase(const_iterator start, const_iterator end);</code>//åˆ é™¤è¿­ä»£å™¨ä» start åˆ° end ä¹‹é—´çš„å…ƒç´ </li><li><code>clear();</code> //åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">insert</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">v<span class="number">1.</span><span class="built_in">insert</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), <span class="number">2</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">erase</span>(v<span class="number">1.</span><span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">v<span class="number">1.</span><span class="built_in">erase</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line">v<span class="number">1.</span><span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’ â€” push_back</li><li>å°¾åˆ  â€” pop_back</li><li>æ’å…¥ â€” insert (ä½ç½®è¿­ä»£å™¨)</li><li>åˆ é™¤ â€” erase ï¼ˆä½ç½®è¿­ä»£å™¨ï¼‰</li><li>æ¸…ç©º â€” clear</li></ul><h4 id="3-2-6-vector-æ•°æ®å­˜å–">3.2.6 vector æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ vector ä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code> //è¿”å›ç´¢å¼• idx æ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code> //è¿”å›ç´¢å¼• idx æ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code> //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code> //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">1.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v1[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; v<span class="number">1.</span><span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; v<span class="number">1.</span><span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v<span class="number">1.f</span>ront() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1çš„æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; v<span class="number">1.</span><span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å– vector å®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œ at ä¹Ÿå¯ä»¥</li><li>front è¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>back è¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-2-7-vector-äº’æ¢å®¹å™¨">3.2.7 vector äº’æ¢å®¹å™¨</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°ä¸¤ä¸ªå®¹å™¨å†…å…ƒç´ è¿›è¡Œäº’æ¢</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>swap(vec);</code> // å°† vec ä¸æœ¬èº«çš„å…ƒç´ äº’æ¢</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printVector</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº’æ¢å®¹å™¨</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº’æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">swap</span>(v2);</span><br><span class="line"><span class="built_in">printVector</span>(v1);</span><br><span class="line"><span class="built_in">printVector</span>(v2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¶ç¼©å†…å­˜</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(v).<span class="built_in">swap</span>(v); <span class="comment">//åŒ¿åå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å®¹é‡ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;vçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šswap å¯ä»¥ä½¿ä¸¤ä¸ªå®¹å™¨äº’æ¢ï¼Œå¯ä»¥è¾¾åˆ°å®ç”¨çš„æ”¶ç¼©å†…å­˜æ•ˆæœ</p><h4 id="3-2-8-vector-é¢„ç•™ç©ºé—´">3.2.8 vector é¢„ç•™ç©ºé—´</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‡å°‘ vector åœ¨åŠ¨æ€æ‰©å±•å®¹é‡æ—¶çš„æ‰©å±•æ¬¡æ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reserve(int len);</code>//å®¹å™¨é¢„ç•™ len ä¸ªå…ƒç´ é•¿åº¦ï¼Œé¢„ç•™ä½ç½®ä¸åˆå§‹åŒ–ï¼Œå…ƒç´ ä¸å¯è®¿é—®ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¢„ç•™ç©ºé—´</span></span><br><span class="line">v.<span class="built_in">reserve</span>(<span class="number">100000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span>* p = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line"><span class="keyword">if</span> (p != &amp;v[<span class="number">0</span>]) &#123;</span><br><span class="line">p = &amp;v[<span class="number">0</span>];</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num:&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œå¯ä»¥ä¸€å¼€å§‹åˆ©ç”¨ reserve é¢„ç•™ç©ºé—´</p><h3 id="3-3-deque-å®¹å™¨">3.3 deque å®¹å™¨</h3><h4 id="3-3-1-deque-å®¹å™¨åŸºæœ¬æ¦‚å¿µ">3.3.1 deque å®¹å™¨åŸºæœ¬æ¦‚å¿µ</h4><p><strong>åŠŸèƒ½ï¼š</strong></p><ul><li>åŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œ</li></ul><p><strong>deque ä¸ vector åŒºåˆ«ï¼š</strong></p><ul><li>vector å¯¹äºå¤´éƒ¨çš„æ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½</li><li>deque ç›¸å¯¹è€Œè¨€ï¼Œå¯¹å¤´éƒ¨çš„æ’å…¥åˆ é™¤é€Ÿåº¦å›æ¯” vector å¿«</li><li>vector è®¿é—®å…ƒç´ æ—¶çš„é€Ÿåº¦ä¼šæ¯” deque å¿«,è¿™å’Œä¸¤è€…å†…éƒ¨å®ç°æœ‰å…³</li></ul><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547547642923.jpg" alt="è¯´æ˜: 2015-11-19_204101"></p><p>deque å†…éƒ¨å·¥ä½œåŸç†:</p><p>deque å†…éƒ¨æœ‰ä¸ª<strong>ä¸­æ§å™¨</strong>ï¼Œç»´æŠ¤æ¯æ®µç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®æ•°æ®</p><p>ä¸­æ§å™¨ç»´æŠ¤çš„æ˜¯æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—ä½¿ç”¨ deque æ—¶åƒä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547547896341.jpg" alt="clip_image002-1547547896341"></p><ul><li>deque å®¹å™¨çš„è¿­ä»£å™¨ä¹Ÿæ˜¯æ”¯æŒéšæœºè®¿é—®çš„</li></ul><h4 id="3-3-2-deque-æ„é€ å‡½æ•°">3.3.2 deque æ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>deque å®¹å™¨æ„é€ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>deque&lt;T&gt;</code> deqT; //é»˜è®¤æ„é€ å½¢å¼</li><li><code>deque(beg, end);</code> //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(n, elem);</code> //æ„é€ å‡½æ•°å°† n ä¸ª elem æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>deque(const deque &amp;deq);</code> //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dequeæ„é€ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"><span class="function">deque&lt;<span class="type">int</span>&gt; <span class="title">d2</span><span class="params">(d<span class="number">1.</span>begin(),d<span class="number">1.</span>end())</span></span>;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;<span class="built_in">d3</span>(<span class="number">10</span>,<span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4 = d3;</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**deque å®¹å™¨å’Œ vector å®¹å™¨çš„æ„é€ æ–¹å¼å‡ ä¹ä¸€è‡´ï¼Œçµæ´»ä½¿ç”¨å³å¯</p><h4 id="3-3-3-deque-èµ‹å€¼æ“ä½œ">3.3.3 deque èµ‹å€¼æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™ deque å®¹å™¨è¿›è¡Œèµ‹å€¼</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque&amp; operator=(const deque &amp;deq); </code> //é‡è½½ç­‰å·æ“ä½œç¬¦</p></li><li><p><code>assign(beg, end);</code> //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li><li><p><code>assign(n, elem);</code> //å°† n ä¸ª elem æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d2 = d1;</span><br><span class="line"><span class="built_in">printDeque</span>(d2);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d3;</span><br><span class="line">d<span class="number">3.</span><span class="built_in">assign</span>(d<span class="number">1.</span><span class="built_in">begin</span>(), d<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d3);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d4;</span><br><span class="line">d<span class="number">4.</span><span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šdeque èµ‹å€¼æ“ä½œä¹Ÿä¸ vector ç›¸åŒï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="3-3-4-deque-å¤§å°æ“ä½œ">3.3.4 deque å¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ deque å®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>deque.empty();</code> //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>deque.size();</code> //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>deque.resize(num);</code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º num,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹ //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>deque.resize(num, elem);</code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º num,è‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥ elem å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹ //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">d<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> (d<span class="number">1.</span><span class="built_in">empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1ä¸ä¸ºç©º!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç»Ÿè®¡å¤§å°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;d1çš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; d<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">d<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">15</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line"></span><br><span class="line">d<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>deque æ²¡æœ‰å®¹é‡çš„æ¦‚å¿µ</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•° â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•° â€” resize</li></ul><h4 id="3-3-5-deque-æ’å…¥å’Œåˆ é™¤">3.3.5 deque æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘ deque å®¹å™¨ä¸­æ’å…¥å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p>ä¸¤ç«¯æ’å…¥æ“ä½œï¼š</p><ul><li><code>push_back(elem);</code> //åœ¨å®¹å™¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®</li><li><code>push_front(elem);</code> //åœ¨å®¹å™¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ•°æ®</li><li><code>pop_back();</code> //åˆ é™¤å®¹å™¨æœ€åä¸€ä¸ªæ•°æ®</li><li><code>pop_front();</code> //åˆ é™¤å®¹å™¨ç¬¬ä¸€ä¸ªæ•°æ®</li></ul><p>æŒ‡å®šä½ç½®æ“ä½œï¼š</p><ul><li><p><code>insert(pos,elem);</code> //åœ¨ pos ä½ç½®æ’å…¥ä¸€ä¸ª elem å…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>insert(pos,n,elem);</code> //åœ¨ pos ä½ç½®æ’å…¥ n ä¸ª elem æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>insert(pos,beg,end);</code> //åœ¨ pos ä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</p></li><li><p><code>clear();</code> //æ¸…ç©ºå®¹å™¨çš„æ‰€æœ‰æ•°æ®</p></li><li><p><code>erase(beg,end);</code> //åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li><li><p><code>erase(pos);</code> //åˆ é™¤ pos ä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸¤ç«¯æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), <span class="number">2</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d2;</span><br><span class="line">d<span class="number">2.</span><span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">d<span class="number">2.</span><span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">d<span class="number">2.</span><span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">insert</span>(d.<span class="built_in">begin</span>(), d<span class="number">2.</span><span class="built_in">begin</span>(), d<span class="number">2.</span><span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">d.<span class="built_in">erase</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line">d.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥å’Œåˆ é™¤æä¾›çš„ä½ç½®æ˜¯è¿­ä»£å™¨ï¼</li><li>å°¾æ’ â€” push_back</li><li>å°¾åˆ  â€” pop_back</li><li>å¤´æ’ â€” push_front</li><li>å¤´åˆ  â€” pop_front</li></ul><h4 id="3-3-6-deque-æ•°æ®å­˜å–">3.3.6 deque æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ deque ä¸­çš„æ•°æ®çš„å­˜å–æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>at(int idx); </code> //è¿”å›ç´¢å¼• idx æ‰€æŒ‡çš„æ•°æ®</li><li><code>operator[]; </code> //è¿”å›ç´¢å¼• idx æ‰€æŒ‡çš„æ•°æ®</li><li><code>front(); </code> //è¿”å›å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ </li><li><code>back();</code> //è¿”å›å®¹å™¨ä¸­æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ </li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; d.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">cout &lt;&lt; d.<span class="built_in">at</span>(i) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;front:&quot;</span> &lt;&lt; d.<span class="built_in">front</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;back:&quot;</span> &lt;&lt; d.<span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>é™¤äº†ç”¨è¿­ä»£å™¨è·å– deque å®¹å™¨ä¸­å…ƒç´ ï¼Œ[ ]å’Œ at ä¹Ÿå¯ä»¥</li><li>front è¿”å›å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>back è¿”å›å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ </li></ul><h4 id="3-3-7-deque-æ’åº">3.3.7 deque æ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ©ç”¨ç®—æ³•å®ç°å¯¹ deque å®¹å™¨è¿›è¡Œæ’åº</li></ul><p><strong>ç®—æ³•ï¼š</strong></p><ul><li><code>sort(iterator beg, iterator end)</code> //å¯¹ beg å’Œ end åŒºé—´å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printDeque</span><span class="params">(<span class="type">const</span> deque&lt;<span class="type">int</span>&gt;&amp; d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::const_iterator it = d.<span class="built_in">begin</span>(); it != d.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; d;</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">d.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">d.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printDeque</span>(d);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šsort ç®—æ³•éå¸¸å®ç”¨ï¼Œä½¿ç”¨æ—¶åŒ…å«å¤´æ–‡ä»¶ algorithm å³å¯</p><h3 id="3-4-æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†">3.4 æ¡ˆä¾‹-è¯„å§”æ‰“åˆ†</h3><h4 id="3-4-1-æ¡ˆä¾‹æè¿°">3.4.1 æ¡ˆä¾‹æè¿°</h4><p>æœ‰ 5 åé€‰æ‰‹ï¼šé€‰æ‰‹ ABCDEï¼Œ10 ä¸ªè¯„å§”åˆ†åˆ«å¯¹æ¯ä¸€åé€‰æ‰‹æ‰“åˆ†ï¼Œå»é™¤æœ€é«˜åˆ†ï¼Œå»é™¤è¯„å§”ä¸­æœ€ä½åˆ†ï¼Œå–å¹³å‡åˆ†ã€‚</p><h4 id="3-4-2-å®ç°æ­¥éª¤">3.4.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»ºäº”åé€‰æ‰‹ï¼Œæ”¾åˆ° vector ä¸­</li><li>éå† vector å®¹å™¨ï¼Œå–å‡ºæ¥æ¯ä¸€ä¸ªé€‰æ‰‹ï¼Œæ‰§è¡Œ for å¾ªç¯ï¼Œå¯ä»¥æŠŠ 10 ä¸ªè¯„åˆ†æ‰“åˆ†å­˜åˆ° deque å®¹å™¨ä¸­</li><li>sort ç®—æ³•å¯¹ deque å®¹å™¨ä¸­åˆ†æ•°æ’åºï¼Œå»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</li><li>deque å®¹å™¨éå†ä¸€éï¼Œç´¯åŠ æ€»åˆ†</li><li>è·å–å¹³å‡åˆ†</li></ol><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€‰æ‰‹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Score = score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name; <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Score;  <span class="comment">//å¹³å‡åˆ†</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createPerson</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">string name = <span class="string">&quot;é€‰æ‰‹&quot;</span>;</span><br><span class="line">name += nameSeed[i];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(name, score)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†åˆ›å»ºçš„personå¯¹è±¡ æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(p);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“åˆ†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†è¯„å§”çš„åˆ†æ•° æ”¾å…¥åˆ°dequeå®¹å™¨ä¸­</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt;d;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> score = <span class="built_in">rand</span>() % <span class="number">41</span> + <span class="number">60</span>;  <span class="comment">// 60 ~ 100</span></span><br><span class="line">d.<span class="built_in">push_back</span>(score);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;é€‰æ‰‹ï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; æ‰“åˆ†ï¼š &quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//for (deque&lt;int&gt;::iterator dit = d.begin(); dit != d.end(); dit++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; *dit &lt;&lt; &quot; &quot;;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(d.<span class="built_in">begin</span>(), d.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//å»é™¤æœ€é«˜å’Œæœ€ä½åˆ†</span></span><br><span class="line">d.<span class="built_in">pop_back</span>();</span><br><span class="line">d.<span class="built_in">pop_front</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å–å¹³å‡åˆ†</span></span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (deque&lt;<span class="type">int</span>&gt;::iterator dit = d.<span class="built_in">begin</span>(); dit != d.<span class="built_in">end</span>(); dit++)</span><br><span class="line">&#123;</span><br><span class="line">sum += *dit; <span class="comment">//ç´¯åŠ æ¯ä¸ªè¯„å§”çš„åˆ†æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> avg = sum / d.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å¹³å‡åˆ† èµ‹å€¼ç»™é€‰æ‰‹èº«ä¸Š</span></span><br><span class="line">it-&gt;m_Score = avg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showScore</span><span class="params">(vector&lt;Person&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹³å‡åˆ†ï¼š &quot;</span> &lt;&lt; it-&gt;m_Score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éšæœºæ•°ç§å­</span></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»º5åé€‰æ‰‹</span></span><br><span class="line">vector&lt;Person&gt;v;  <span class="comment">//å­˜æ”¾é€‰æ‰‹å®¹å™¨</span></span><br><span class="line"><span class="built_in">createPerson</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Person&gt;::iterator it = v.begin(); it != v.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; (*it).m_Name &lt;&lt; &quot; åˆ†æ•°ï¼š &quot; &lt;&lt; (*it).m_Score &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ç»™5åé€‰æ‰‹æ‰“åˆ†</span></span><br><span class="line"><span class="built_in">setScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ˜¾ç¤ºæœ€åå¾—åˆ†</span></span><br><span class="line"><span class="built_in">showScore</span>(v);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> é€‰å–ä¸åŒçš„å®¹å™¨æ“ä½œæ•°æ®ï¼Œå¯ä»¥æå‡ä»£ç çš„æ•ˆç‡</p><h3 id="3-5-stack-å®¹å™¨">3.5 stack å®¹å™¨</h3><h4 id="3-5-1-stack-åŸºæœ¬æ¦‚å¿µ">3.5.1 stack åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>stack æ˜¯ä¸€ç§</strong>å…ˆè¿›åå‡º</strong>(First In Last Out,FILO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‡ºå£</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547604555425.jpg" alt="è¯´æ˜: 2015-11-15_195707"></p><p>æ ˆä¸­åªæœ‰é¡¶ç«¯çš„å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>æ ˆä¸­è¿›å…¥æ•°æ®ç§°ä¸º â€” <strong>å…¥æ ˆ</strong> <code>push</code></p><p>æ ˆä¸­å¼¹å‡ºæ•°æ®ç§°ä¸º â€” <strong>å‡ºæ ˆ</strong> <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„æ ˆï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230709205236202.png" alt="image-20230709205236202"></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547605111510.jpg" alt="img"></p><h4 id="3-5-2-stack-å¸¸ç”¨æ¥å£">3.5.2 stack å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>stack&lt;T&gt; stk;</code> //stack é‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œ stack å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>stack(const stack &amp;stk);</code> //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>stack&amp; operator=(const stack &amp;stk);</code> //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code> //å‘æ ˆé¡¶æ·»åŠ å…ƒç´ </li><li><code>pop();</code> //ä»æ ˆé¡¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>top(); </code> //è¿”å›æ ˆé¡¶å…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code> //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code> //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ˆå®¹å™¨å¸¸ç”¨æ¥å£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ ˆå®¹å™¨ æ ˆå®¹å™¨å¿…é¡»ç¬¦åˆå…ˆè¿›åå‡º</span></span><br><span class="line">stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘æ ˆä¸­æ·»åŠ å…ƒç´ ï¼Œå«åš å‹æ ˆ å…¥æ ˆ</span></span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">10</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">20</span>);</span><br><span class="line">s.<span class="built_in">push</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆé¡¶å…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; s.<span class="built_in">top</span>() &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">s.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ ˆçš„å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; s.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥æ ˆ â€” push</li><li>å‡ºæ ˆ â€” pop</li><li>è¿”å›æ ˆé¡¶ â€” top</li><li>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º â€” empty</li><li>è¿”å›æ ˆå¤§å° â€” size</li></ul><h3 id="3-6-queue-å®¹å™¨">3.6 queue å®¹å™¨</h3><h4 id="3-6-1-queue-åŸºæœ¬æ¦‚å¿µ">3.6.1 queue åŸºæœ¬æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š<strong>Queue æ˜¯ä¸€ç§</strong>å…ˆè¿›å…ˆå‡º</strong>(First In First Out,FIFO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡ºå£</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547606475892.jpg" alt="è¯´æ˜: 2015-11-15_214429"></p><p>é˜Ÿåˆ—å®¹å™¨å…è®¸ä»ä¸€ç«¯æ–°å¢å…ƒç´ ï¼Œä»å¦ä¸€ç«¯ç§»é™¤å…ƒç´ </p><p>é˜Ÿåˆ—ä¸­åªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤é˜Ÿåˆ—ä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>é˜Ÿåˆ—ä¸­è¿›æ•°æ®ç§°ä¸º â€” <strong>å…¥é˜Ÿ</strong> <code>push</code></p><p>é˜Ÿåˆ—ä¸­å‡ºæ•°æ®ç§°ä¸º â€” <strong>å‡ºé˜Ÿ</strong> <code>pop</code></p><p>ç”Ÿæ´»ä¸­çš„é˜Ÿåˆ—ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1547606785041.png" alt="1547606785041"></p><h4 id="3-6-2-queue-å¸¸ç”¨æ¥å£">3.6.2 queue å¸¸ç”¨æ¥å£</h4><p>åŠŸèƒ½æè¿°ï¼šæ ˆå®¹å™¨å¸¸ç”¨çš„å¯¹å¤–æ¥å£</p><p>æ„é€ å‡½æ•°ï¼š</p><ul><li><code>queue&lt;T&gt; que;</code> //queue é‡‡ç”¨æ¨¡æ¿ç±»å®ç°ï¼Œqueue å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼</li><li><code>queue(const queue &amp;que);</code> //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼æ“ä½œï¼š</p><ul><li><code>queue&amp; operator=(const queue &amp;que);</code> //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p>æ•°æ®å­˜å–ï¼š</p><ul><li><code>push(elem);</code> //å¾€é˜Ÿå°¾æ·»åŠ å…ƒç´ </li><li><code>pop();</code> //ä»é˜Ÿå¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>back();</code> //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>front(); </code> //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ </li></ul><p>å¤§å°æ“ä½œï¼š</p><ul><li><code>empty();</code> //åˆ¤æ–­å †æ ˆæ˜¯å¦ä¸ºç©º</li><li><code>size(); </code> //è¿”å›æ ˆçš„å¤§å°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">queue&lt;Person&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡†å¤‡æ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;å”åƒ§&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">1000</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;çŒªå…«æˆ’&quot;</span>, <span class="number">900</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;æ²™åƒ§&quot;</span>, <span class="number">800</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´   å…¥é˜Ÿæ“ä½œ</span></span><br><span class="line">q.<span class="built_in">push</span>(p1);</span><br><span class="line">q.<span class="built_in">push</span>(p2);</span><br><span class="line">q.<span class="built_in">push</span>(p3);</span><br><span class="line">q.<span class="built_in">push</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜Ÿåˆ—ä¸æä¾›è¿­ä»£å™¨ï¼Œæ›´ä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line"><span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line"><span class="comment">//è¾“å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå¤´å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">front</span>().m_Name</span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span>&lt;&lt; q.<span class="built_in">front</span>().m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿå°¾å…ƒç´ -- å§“åï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Name</span><br><span class="line">              &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; q.<span class="built_in">back</span>().m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¼¹å‡ºé˜Ÿå¤´å…ƒç´ </span></span><br><span class="line">q.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é˜Ÿåˆ—å¤§å°ä¸ºï¼š&quot;</span> &lt;&lt; q.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å…¥é˜Ÿ â€” push</li><li>å‡ºé˜Ÿ â€” pop</li><li>è¿”å›é˜Ÿå¤´å…ƒç´  â€” front</li><li>è¿”å›é˜Ÿå°¾å…ƒç´  â€” back</li><li>åˆ¤æ–­é˜Ÿæ˜¯å¦ä¸ºç©º â€” empty</li><li>è¿”å›é˜Ÿåˆ—å¤§å° â€” size</li></ul><h3 id="3-7-list-å®¹å™¨">3.7 list å®¹å™¨</h3><h4 id="3-7-1-list-åŸºæœ¬æ¦‚å¿µ">3.7.1 list åŸºæœ¬æ¦‚å¿µ</h4><p>**åŠŸèƒ½ï¼š**å°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨</p><p><strong>é“¾è¡¨</strong>ï¼ˆlistï¼‰æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥å®ç°çš„</p><p>é“¾è¡¨çš„ç»„æˆï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—<strong>ç»“ç‚¹</strong>ç»„æˆ</p><p>ç»“ç‚¹çš„ç»„æˆï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„<strong>æ•°æ®åŸŸ</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„<strong>æŒ‡é’ˆåŸŸ</strong></p><p>STL ä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1547608564071.jpg" alt="è¯´æ˜: 2015-11-15_225145"></p><p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨ list ä¸­çš„è¿­ä»£å™¨åªæ”¯æŒå‰ç§»å’Œåç§»ï¼Œå±äº<strong>åŒå‘è¿­ä»£å™¨</strong></p><p>list çš„ä¼˜ç‚¹ï¼š</p><ul><li>é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º</li><li>é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </li></ul><p>list çš„ç¼ºç‚¹ï¼š</p><ul><li>é“¾è¡¨çµæ´»ï¼Œä½†æ˜¯ç©ºé—´(æŒ‡é’ˆåŸŸ) å’Œ æ—¶é—´ï¼ˆéå†ï¼‰é¢å¤–è€—è´¹è¾ƒå¤§</li></ul><p>List æœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œéƒ½ä¸ä¼šé€ æˆåŸæœ‰ list è¿­ä»£å™¨çš„å¤±æ•ˆï¼Œè¿™åœ¨ vector æ˜¯ä¸æˆç«‹çš„ã€‚</p><p>æ€»ç»“ï¼šSTL ä¸­<strong>List å’Œ vector æ˜¯ä¸¤ä¸ªæœ€å¸¸è¢«ä½¿ç”¨çš„å®¹å™¨</strong>ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹</p><h4 id="3-7-2-list-æ„é€ å‡½æ•°">3.7.2 list æ„é€ å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>åˆ›å»º list å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>list&lt;T&gt; lst;</code> //list é‡‡ç”¨é‡‡ç”¨æ¨¡æ¿ç±»å®ç°,å¯¹è±¡çš„é»˜è®¤æ„é€ å½¢å¼ï¼š</li><li><code>list(beg,end);</code> //æ„é€ å‡½æ•°å°†[beg, end)åŒºé—´ä¸­çš„å…ƒç´ æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(n,elem);</code> //æ„é€ å‡½æ•°å°† n ä¸ª elem æ‹·è´ç»™æœ¬èº«ã€‚</li><li><code>list(const list &amp;lst);</code> //æ‹·è´æ„é€ å‡½æ•°ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L2</span>(L<span class="number">1.</span><span class="built_in">begin</span>(),L<span class="number">1.</span><span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L3</span>(L2);</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;<span class="built_in">L4</span>(<span class="number">10</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlist æ„é€ æ–¹å¼åŒå…¶ä»–å‡ ä¸ª STL å¸¸ç”¨å®¹å™¨ï¼Œç†Ÿç»ƒæŒæ¡å³å¯</p><h4 id="3-7-3-list-èµ‹å€¼å’Œäº¤æ¢">3.7.3 list èµ‹å€¼å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»™ list å®¹å™¨è¿›è¡Œèµ‹å€¼ï¼Œä»¥åŠäº¤æ¢ list å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>assign(beg, end);</code> //å°†[beg, end)åŒºé—´ä¸­çš„æ•°æ®æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>assign(n, elem);</code> //å°† n ä¸ª elem æ‹·è´èµ‹å€¼ç»™æœ¬èº«ã€‚</li><li><code>list&amp; operator=(const list &amp;lst);</code> //é‡è½½ç­‰å·æ“ä½œç¬¦</li><li><code>swap(lst);</code> //å°† lst ä¸æœ¬èº«çš„å…ƒç´ äº’æ¢ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼å’Œäº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L2 = L1;</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L3;</span><br><span class="line">L<span class="number">3.</span><span class="built_in">assign</span>(L<span class="number">2.</span><span class="built_in">begin</span>(), L<span class="number">2.</span><span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">printList</span>(L3);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L4;</span><br><span class="line">L<span class="number">4.</span><span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">printList</span>(L4);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">list&lt;<span class="type">int</span>&gt;L2;</span><br><span class="line">L<span class="number">2.</span><span class="built_in">assign</span>(<span class="number">10</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">L<span class="number">1.</span><span class="built_in">swap</span>(L2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"><span class="built_in">printList</span>(L2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šlist èµ‹å€¼å’Œäº¤æ¢æ“ä½œèƒ½å¤Ÿçµæ´»è¿ç”¨å³å¯</p><h4 id="3-7-4-list-å¤§å°æ“ä½œ">3.7.4 list å¤§å°æ“ä½œ</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ list å®¹å™¨çš„å¤§å°è¿›è¡Œæ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>size(); </code> //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°</p></li><li><p><code>empty(); </code> //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</p></li><li><p><code>resize(num);</code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º numï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥é»˜è®¤å€¼å¡«å……æ–°ä½ç½®ã€‚</p><p>â€‹ //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</p></li><li><p><code>resize(num, elem); </code> //é‡æ–°æŒ‡å®šå®¹å™¨çš„é•¿åº¦ä¸º numï¼Œè‹¥å®¹å™¨å˜é•¿ï¼Œåˆ™ä»¥ elem å€¼å¡«å……æ–°ä½ç½®ã€‚</p><pre><code>    //å¦‚æœå®¹å™¨å˜çŸ­ï¼Œåˆ™æœ«å°¾è¶…å‡ºå®¹å™¨é•¿åº¦çš„å…ƒç´ è¢«åˆ é™¤ã€‚</code></pre></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (L<span class="number">1.</span><span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;L1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡æ–°æŒ‡å®šå¤§å°</span></span><br><span class="line">L<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line"></span><br><span class="line">L<span class="number">1.</span><span class="built_in">resize</span>(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">printList</span>(L1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º â€” empty</li><li>è¿”å›å…ƒç´ ä¸ªæ•° â€” size</li><li>é‡æ–°æŒ‡å®šä¸ªæ•° â€” resize</li></ul><h4 id="3-7-5-list-æ’å…¥å’Œåˆ é™¤">3.7.5 list æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ list å®¹å™¨è¿›è¡Œæ•°æ®çš„æ’å…¥å’Œåˆ é™¤</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li>push_back(elem);//åœ¨å®¹å™¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_back();//åˆ é™¤å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ </li><li>push_front(elem);//åœ¨å®¹å™¨å¼€å¤´æ’å…¥ä¸€ä¸ªå…ƒç´ </li><li>pop_front();//ä»å®¹å™¨å¼€å¤´ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>insert(pos,elem);//åœ¨ pos ä½ç½®æ’ elem å…ƒç´ çš„æ‹·è´ï¼Œè¿”å›æ–°æ•°æ®çš„ä½ç½®ã€‚</li><li>insert(pos,n,elem);//åœ¨ pos ä½ç½®æ’å…¥ n ä¸ª elem æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>insert(pos,beg,end);//åœ¨ pos ä½ç½®æ’å…¥[beg,end)åŒºé—´çš„æ•°æ®ï¼Œæ— è¿”å›å€¼ã€‚</li><li>clear();//ç§»é™¤å®¹å™¨çš„æ‰€æœ‰æ•°æ®</li><li>erase(beg,end);//åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>erase(pos);//åˆ é™¤ pos ä½ç½®çš„æ•°æ®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®ã€‚</li><li>remove(elem);//åˆ é™¤å®¹å™¨ä¸­æ‰€æœ‰ä¸ elem å€¼åŒ¹é…çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line"><span class="comment">//å°¾æ’</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">100</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">200</span>);</span><br><span class="line">L.<span class="built_in">push_front</span>(<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°¾åˆ </span></span><br><span class="line">L.<span class="built_in">pop_back</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤´åˆ </span></span><br><span class="line">L.<span class="built_in">pop_front</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">insert</span>(++it, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">it = L.<span class="built_in">begin</span>();</span><br><span class="line">L.<span class="built_in">erase</span>(++it);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§»é™¤</span></span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">L.<span class="built_in">remove</span>(<span class="number">10000</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©º</span></span><br><span class="line">L.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å°¾æ’ â€” push_back</li><li>å°¾åˆ  â€” pop_back</li><li>å¤´æ’ â€” push_front</li><li>å¤´åˆ  â€” pop_front</li><li>æ’å…¥ â€” insert</li><li>åˆ é™¤ â€” erase</li><li>ç§»é™¤ â€” remove</li><li>æ¸…ç©º â€” clear</li></ul><h4 id="3-7-6-list-æ•°æ®å­˜å–">3.7.6 list æ•°æ®å­˜å–</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ list å®¹å™¨ä¸­æ•°æ®è¿›è¡Œå­˜å–</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>front();</code> //è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>back();</code> //è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®å­˜å–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt;L1;</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L<span class="number">1.</span><span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1.at(0) &lt;&lt; endl;//é”™è¯¯ ä¸æ”¯æŒatè®¿é—®æ•°æ®</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; L1[0] &lt;&lt; endl; //é”™è¯¯  ä¸æ”¯æŒ[]æ–¹å¼è®¿é—®æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="number">1.f</span>ront() &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ä¸ºï¼š &quot;</span> &lt;&lt; L<span class="number">1.</span><span class="built_in">back</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//listå®¹å™¨çš„è¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒéšæœºè®¿é—®</span></span><br><span class="line">list&lt;<span class="type">int</span>&gt;::iterator it = L<span class="number">1.</span><span class="built_in">begin</span>();</span><br><span class="line"><span class="comment">//it = it + 1;//é”™è¯¯ï¼Œä¸å¯ä»¥è·³è·ƒè®¿é—®ï¼Œå³ä½¿æ˜¯+1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>list å®¹å™¨ä¸­ä¸å¯ä»¥é€šè¿‡[]æˆ–è€… at æ–¹å¼è®¿é—®æ•°æ®</li><li>è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´  â€” front</li><li>è¿”å›æœ€åä¸€ä¸ªå…ƒç´  â€” back</li></ul><h4 id="3-7-7-list-åè½¬å’Œæ’åº">3.7.7 list åè½¬å’Œæ’åº</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬ï¼Œä»¥åŠå°†å®¹å™¨ä¸­çš„æ•°æ®è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>reverse();</code> //åè½¬é“¾è¡¨</li><li><code>sort();</code> //é“¾è¡¨æ’åº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(<span class="type">const</span> list&lt;<span class="type">int</span>&gt;&amp; L)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;<span class="type">int</span>&gt;::const_iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">myCompare</span><span class="params">(<span class="type">int</span> val1 , <span class="type">int</span> val2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val1 &gt; val2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å’Œæ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">list&lt;<span class="type">int</span>&gt; L;</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">90</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">L.<span class="built_in">push_back</span>(<span class="number">70</span>);</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åè½¬å®¹å™¨çš„å…ƒç´ </span></span><br><span class="line">L.<span class="built_in">reverse</span>();</span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line">L.<span class="built_in">sort</span>(); <span class="comment">//é»˜è®¤çš„æ’åºè§„åˆ™ ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">sort</span>(myCompare); <span class="comment">//æŒ‡å®šè§„åˆ™ï¼Œä»å¤§åˆ°å°</span></span><br><span class="line"><span class="built_in">printList</span>(L);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åè½¬ â€” reverse</li><li>æ’åº â€” sort ï¼ˆæˆå‘˜å‡½æ•°ï¼‰</li></ul><h4 id="3-7-8-æ’åºæ¡ˆä¾‹">3.7.8 æ’åºæ¡ˆä¾‹</h4><p>æ¡ˆä¾‹æè¿°ï¼šå°† Person è‡ªå®šä¹‰æ•°æ®ç±»å‹è¿›è¡Œæ’åºï¼ŒPerson ä¸­å±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜</p><p>æ’åºè§„åˆ™ï¼šæŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰ç…§èº«é«˜è¿›è¡Œé™åº</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age , <span class="type">int</span> height) &#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">m_Age = age;</span><br><span class="line">m_Height = height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> m_Age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> m_Height;   <span class="comment">//èº«é«˜</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ComparePerson</span><span class="params">(Person&amp; p1, Person&amp; p2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (p<span class="number">1.</span>m_Age == p<span class="number">2.</span>m_Age) &#123;</span><br><span class="line"><span class="keyword">return</span> p<span class="number">1.</span>m_Height  &gt; p<span class="number">2.</span>m_Height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>  p<span class="number">1.</span>m_Age &lt; p<span class="number">2.</span>m_Age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">list&lt;Person&gt; L;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span> , <span class="number">175</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">45</span> , <span class="number">180</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å­™æƒ&quot;</span>, <span class="number">40</span> , <span class="number">170</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">25</span> , <span class="number">190</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span> , <span class="number">160</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span> , <span class="number">200</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">L.<span class="built_in">push_back</span>(p1);</span><br><span class="line">L.<span class="built_in">push_back</span>(p2);</span><br><span class="line">L.<span class="built_in">push_back</span>(p3);</span><br><span class="line">L.<span class="built_in">push_back</span>(p4);</span><br><span class="line">L.<span class="built_in">push_back</span>(p5);</span><br><span class="line">L.<span class="built_in">push_back</span>(p6);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age</span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">L.<span class="built_in">sort</span>(ComparePerson); <span class="comment">//æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (list&lt;Person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age</span><br><span class="line">              &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; it-&gt;m_Height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“å¦‚ä½•è¿›è¡Œæ’åº</p></li><li><p>é«˜çº§æ’åºåªæ˜¯åœ¨æ’åºè§„åˆ™ä¸Šå†è¿›è¡Œä¸€æ¬¡é€»è¾‘è§„åˆ™åˆ¶å®šï¼Œå¹¶ä¸å¤æ‚</p></li></ul><h3 id="3-8-set-multiset-å®¹å™¨">3.8 set/ multiset å®¹å™¨</h3><h4 id="3-8-1-set-åŸºæœ¬æ¦‚å¿µ">3.8.1 set åŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶è‡ªåŠ¨è¢«æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>set/multiset å±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨<strong>äºŒå‰æ ‘</strong>å®ç°ã€‚</li></ul><p><strong>set å’Œ multiset åŒºåˆ«</strong>ï¼š</p><ul><li>set ä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li><li>multiset å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </li></ul><h4 id="3-8-2-set-æ„é€ å’Œèµ‹å€¼">3.8.2 set æ„é€ å’Œèµ‹å€¼</h4><p>åŠŸèƒ½æè¿°ï¼šåˆ›å»º set å®¹å™¨ä»¥åŠèµ‹å€¼</p><p>æ„é€ ï¼š</p><ul><li><code>set&lt;T&gt; st;</code> //é»˜è®¤æ„é€ å‡½æ•°ï¼š</li><li><code>set(const set &amp;st);</code> //æ‹·è´æ„é€ å‡½æ•°</li></ul><p>èµ‹å€¼ï¼š</p><ul><li><code>set&amp; operator=(const set &amp;st);</code> //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ„é€ å’Œèµ‹å€¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;<span class="built_in">s2</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;s3;</span><br><span class="line">s3 = s2;</span><br><span class="line"><span class="built_in">printSet</span>(s3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>set å®¹å™¨æ’å…¥æ•°æ®æ—¶ç”¨ insert</li><li>set å®¹å™¨æ’å…¥æ•°æ®çš„æ•°æ®ä¼šè‡ªåŠ¨æ’åº</li></ul><h4 id="3-8-3-set-å¤§å°å’Œäº¤æ¢">3.8.3 set å¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡ set å®¹å™¨å¤§å°ä»¥åŠäº¤æ¢ set å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>size();</code> //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code> //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code> //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (s<span class="number">1.</span><span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1ä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;s1çš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; s<span class="number">1.</span><span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"></span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt; s2;</span><br><span class="line"></span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">100</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">300</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">200</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">s<span class="number">1.</span><span class="built_in">swap</span>(s2);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"><span class="built_in">printSet</span>(s2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å° â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º â€” empty</li><li>äº¤æ¢å®¹å™¨ â€” swap</li></ul><h4 id="3-8-4-set-æ’å…¥å’Œåˆ é™¤">3.8.4 set æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>set å®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code> //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code> //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code> //åˆ é™¤ pos è¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code> //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(elem);</code> //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸º elem çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printSet</span><span class="params">(set&lt;<span class="type">int</span>&gt; &amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å’Œåˆ é™¤</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">s<span class="number">1.</span><span class="built_in">erase</span>(s<span class="number">1.</span><span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line">s<span class="number">1.</span><span class="built_in">erase</span>(<span class="number">30</span>);</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line"><span class="comment">//s1.erase(s1.begin(), s1.end());</span></span><br><span class="line">s<span class="number">1.</span><span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printSet</span>(s1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ’å…¥ â€” insert</li><li>åˆ é™¤ â€” erase</li><li>æ¸…ç©º â€” clear</li></ul><h4 id="3-8-5-set-æŸ¥æ‰¾å’Œç»Ÿè®¡">3.8.5 set æŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ set å®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code> //æŸ¥æ‰¾ key æ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å› set.end();</li><li><code>count(key);</code> //ç»Ÿè®¡ key çš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator pos = s<span class="number">1.f</span>ind(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != s<span class="number">1.</span><span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  ï¼š &quot;</span> &lt;&lt; *pos &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = s<span class="number">1.</span><span class="built_in">count</span>(<span class="number">30</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾ â€” find ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡ â€” count ï¼ˆå¯¹äº setï¼Œç»“æœä¸º 0 æˆ–è€… 1ï¼‰</li></ul><h4 id="3-8-6-set-å’Œ-multiset-åŒºåˆ«">3.8.6 set å’Œ multiset åŒºåˆ«</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡ set å’Œ multiset çš„åŒºåˆ«</li></ul><p><strong>åŒºåˆ«ï¼š</strong></p><ul><li>set ä¸å¯ä»¥æ’å…¥é‡å¤æ•°æ®ï¼Œè€Œ multiset å¯ä»¥</li><li>set æ’å…¥æ•°æ®çš„åŒæ—¶ä¼šè¿”å›æ’å…¥ç»“æœï¼Œè¡¨ç¤ºæ’å…¥æ˜¯å¦æˆåŠŸ</li><li>multiset ä¸ä¼šæ£€æµ‹æ•°æ®ï¼Œå› æ­¤å¯ä»¥æ’å…¥é‡å¤æ•°æ®</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//setå’ŒmultisetåŒºåˆ«</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">pair&lt;set&lt;<span class="type">int</span>&gt;::iterator, <span class="type">bool</span>&gt;  ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€æ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ret = s.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span> (ret.second) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥æˆåŠŸ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒæ¬¡æ’å…¥å¤±è´¥!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//multiset</span></span><br><span class="line">multiset&lt;<span class="type">int</span>&gt; ms;</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">ms.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (multiset&lt;<span class="type">int</span>&gt;::iterator it = ms.<span class="built_in">begin</span>(); it != ms.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å¦‚æœä¸å…è®¸æ’å…¥é‡å¤æ•°æ®å¯ä»¥åˆ©ç”¨ set</li><li>å¦‚æœéœ€è¦æ’å…¥é‡å¤æ•°æ®åˆ©ç”¨ multiset</li></ul><h4 id="3-8-7-pair-å¯¹ç»„åˆ›å»º">3.8.7 pair å¯¹ç»„åˆ›å»º</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æˆå¯¹å‡ºç°çš„æ•°æ®ï¼Œåˆ©ç”¨å¯¹ç»„å¯ä»¥è¿”å›ä¸¤ä¸ªæ•°æ®</li></ul><p><strong>ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</strong></p><ul><li><code>pair&lt;type, type&gt; p ( value1, value2 );</code></li><li><code>pair&lt;type, type&gt; p = make_pair( value1, value2 );</code></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹ç»„åˆ›å»º</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">pair&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">(string(<span class="string">&quot;Tom&quot;</span>), <span class="number">20</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt;  p.first &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">pair&lt;string, <span class="type">int</span>&gt; p2 = <span class="built_in">make_pair</span>(<span class="string">&quot;Jerry&quot;</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p<span class="number">2.f</span>irst &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="number">2.</span>second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åˆ›å»ºå¯¹ç»„ï¼Œè®°ä½ä¸€ç§å³å¯</p><h4 id="3-8-8-set-å®¹å™¨æ’åº">3.8.8 set å®¹å™¨æ’åº</h4><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>set å®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸ºä»å°åˆ°å¤§ï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p>ä¸»è¦æŠ€æœ¯ç‚¹ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ä¸€</strong> set å­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">1.</span><span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>&gt;::iterator it = s<span class="number">1.</span><span class="built_in">begin</span>(); it != s<span class="number">1.</span><span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šæ’åºè§„åˆ™</span></span><br><span class="line">set&lt;<span class="type">int</span>,MyCompare&gt; s2;</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">40</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">20</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">30</span>);</span><br><span class="line">s<span class="number">2.</span><span class="built_in">insert</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;<span class="type">int</span>, MyCompare&gt;::iterator it = s<span class="number">2.</span><span class="built_in">begin</span>(); it != s<span class="number">2.</span><span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®š set å®¹å™¨çš„æ’åºè§„åˆ™</p><p><strong>ç¤ºä¾‹äºŒ</strong> set å­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">comparePerson</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person&amp; p1, <span class="type">const</span> Person &amp;p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æŒ‰ç…§å¹´é¾„è¿›è¡Œæ’åº  é™åº</span></span><br><span class="line"><span class="keyword">return</span> p<span class="number">1.</span>m_Age &gt; p<span class="number">2.</span>m_Age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">set&lt;Person, comparePerson&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">27</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">21</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">insert</span>(p1);</span><br><span class="line">s.<span class="built_in">insert</span>(p2);</span><br><span class="line">s.<span class="built_in">insert</span>(p3);</span><br><span class="line">s.<span class="built_in">insert</span>(p4);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œset å¿…é¡»æŒ‡å®šæ’åºè§„åˆ™æ‰å¯ä»¥æ’å…¥æ•°æ®</p><h3 id="3-9-map-multimap-å®¹å™¨">3.9 map/ multimap å®¹å™¨</h3><h4 id="3-9-1-map-åŸºæœ¬æ¦‚å¿µ">3.9.1 map åŸºæœ¬æ¦‚å¿µ</h4><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li>map ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ pair</li><li>pair ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º keyï¼ˆé”®å€¼ï¼‰ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸º valueï¼ˆå®å€¼ï¼‰</li><li>æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®å€¼è‡ªåŠ¨æ’åº</li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><ul><li>map/multimap å±äº<strong>å…³è”å¼å®¹å™¨</strong>ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å¯ä»¥æ ¹æ® key å€¼å¿«é€Ÿæ‰¾åˆ° value å€¼</li></ul><p>map å’Œ multimap<strong>åŒºåˆ«</strong>ï¼š</p><ul><li>map ä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤ key å€¼å…ƒç´ </li><li>multimap å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤ key å€¼å…ƒç´ </li></ul><h4 id="3-9-2-map-æ„é€ å’Œèµ‹å€¼">3.9.2 map æ„é€ å’Œèµ‹å€¼</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ map å®¹å™¨è¿›è¡Œæ„é€ å’Œèµ‹å€¼æ“ä½œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p><strong>æ„é€ ï¼š</strong></p><ul><li><code>map&lt;T1, T2&gt; mp;</code> //map é»˜è®¤æ„é€ å‡½æ•°:</li><li><code>map(const map &amp;mp);</code> //æ‹·è´æ„é€ å‡½æ•°</li></ul><p><strong>èµ‹å€¼ï¼š</strong></p><ul><li><code>map&amp; operator=(const map &amp;mp);</code> //é‡è½½ç­‰å·æ“ä½œç¬¦</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;m; <span class="comment">//é»˜è®¤æ„é€ </span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;<span class="built_in">m2</span>(m); <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m3;</span><br><span class="line">m3 = m2; <span class="comment">//èµ‹å€¼</span></span><br><span class="line"><span class="built_in">printMap</span>(m3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šmap ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œæ’å…¥æ•°æ®æ—¶å€™è¦ä½¿ç”¨å¯¹ç»„</p><h4 id="3-9-3-map-å¤§å°å’Œäº¤æ¢">3.9.3 map å¤§å°å’Œäº¤æ¢</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡ map å®¹å™¨å¤§å°ä»¥åŠäº¤æ¢ map å®¹å™¨</li></ul><p>å‡½æ•°åŸå‹ï¼š</p><ul><li><code>size();</code> //è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„æ•°ç›®</li><li><code>empty();</code> //åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</li><li><code>swap(st);</code> //äº¤æ¢ä¸¤ä¸ªé›†åˆå®¹å™¨</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (m.<span class="built_in">empty</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mä¸ä¸ºç©º&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mçš„å¤§å°ä¸ºï¼š &quot;</span> &lt;&lt; m.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m2;</span><br><span class="line">m<span class="number">2.</span><span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">4</span>, <span class="number">100</span>));</span><br><span class="line">m<span class="number">2.</span><span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">5</span>, <span class="number">200</span>));</span><br><span class="line">m<span class="number">2.</span><span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">6</span>, <span class="number">300</span>));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å&quot;</span> &lt;&lt; endl;</span><br><span class="line">m.<span class="built_in">swap</span>(m2);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"><span class="built_in">printMap</span>(m2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ç»Ÿè®¡å¤§å° â€” size</li><li>åˆ¤æ–­æ˜¯å¦ä¸ºç©º â€” empty</li><li>äº¤æ¢å®¹å™¨ â€” swap</li></ul><h4 id="3-9-4-map-æ’å…¥å’Œåˆ é™¤">3.9.4 map æ’å…¥å’Œåˆ é™¤</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>map å®¹å™¨è¿›è¡Œæ’å…¥æ•°æ®å’Œåˆ é™¤æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>insert(elem);</code> //åœ¨å®¹å™¨ä¸­æ’å…¥å…ƒç´ ã€‚</li><li><code>clear();</code> //æ¸…é™¤æ‰€æœ‰å…ƒç´ </li><li><code>erase(pos);</code> //åˆ é™¤ pos è¿­ä»£å™¨æ‰€æŒ‡çš„å…ƒç´ ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(beg, end);</code> //åˆ é™¤åŒºé—´[beg,end)çš„æ‰€æœ‰å…ƒç´  ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>erase(key);</code> //åˆ é™¤å®¹å™¨ä¸­å€¼ä¸º key çš„å…ƒç´ ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMap</span><span class="params">(map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key = &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m.<span class="built_in">insert</span>(map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::<span class="built_in">value_type</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"><span class="comment">//ç¬¬å››ç§æ’å…¥æ–¹å¼</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">40</span>;</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>());</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">erase</span>(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©º</span></span><br><span class="line">m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>(),m.<span class="built_in">end</span>());</span><br><span class="line">m.<span class="built_in">clear</span>();</span><br><span class="line"><span class="built_in">printMap</span>(m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>map æ’å…¥æ–¹å¼å¾ˆå¤šï¼Œè®°ä½å…¶ä¸€å³å¯</li></ul><ul><li>æ’å…¥ â€” insert</li><li>åˆ é™¤ â€” erase</li><li>æ¸…ç©º â€” clear</li></ul><h4 id="3-9-5-map-æŸ¥æ‰¾å’Œç»Ÿè®¡">3.9.5 map æŸ¥æ‰¾å’Œç»Ÿè®¡</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹ map å®¹å™¨è¿›è¡ŒæŸ¥æ‰¾æ•°æ®ä»¥åŠç»Ÿè®¡æ•°æ®</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>find(key);</code> //æŸ¥æ‰¾ key æ˜¯å¦å­˜åœ¨,è‹¥å­˜åœ¨ï¼Œè¿”å›è¯¥é”®çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼›è‹¥ä¸å­˜åœ¨ï¼Œè¿”å› set.end();</li><li><code>count(key);</code> //ç»Ÿè®¡ key çš„å…ƒç´ ä¸ªæ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å’Œç»Ÿè®¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;<span class="type">int</span>, <span class="type">int</span>&gt;(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator pos = m.<span class="built_in">find</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos != m.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†å…ƒç´  key = &quot;</span> &lt;&lt; (*pos).first &lt;&lt; <span class="string">&quot; value = &quot;</span> &lt;&lt; (*pos).second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°å…ƒç´ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡</span></span><br><span class="line"><span class="type">int</span> num = m.<span class="built_in">count</span>(<span class="number">3</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æŸ¥æ‰¾ â€” find ï¼ˆè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼‰</li><li>ç»Ÿè®¡ â€” count ï¼ˆå¯¹äº mapï¼Œç»“æœä¸º 0 æˆ–è€… 1ï¼‰</li></ul><h4 id="3-9-6-map-å®¹å™¨æ’åº">3.9.6 map å®¹å™¨æ’åº</h4><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>map å®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸º æŒ‰ç…§ key å€¼è¿›è¡Œ ä»å°åˆ°å¤§æ’åºï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ä¸»è¦æŠ€æœ¯ç‚¹:</strong></p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨ä»¿å‡½æ•°å®ç°ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt; m;</span><br><span class="line"></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">10</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">20</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">30</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">4</span>, <span class="number">40</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">5</span>, <span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (map&lt;<span class="type">int</span>, <span class="type">int</span>, MyCompare&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;key:&quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot; value:&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>åˆ©ç”¨ä»¿å‡½æ•°å¯ä»¥æŒ‡å®š map å®¹å™¨çš„æ’åºè§„åˆ™</li><li>å¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œmap å¿…é¡»è¦æŒ‡å®šæ’åºè§„åˆ™,åŒ set å®¹å™¨</li></ul><h3 id="3-10-æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„">3.10 æ¡ˆä¾‹-å‘˜å·¥åˆ†ç»„</h3><h4 id="3-10-1-æ¡ˆä¾‹æè¿°">3.10.1 æ¡ˆä¾‹æè¿°</h4><ul><li>å…¬å¸ä»Šå¤©æ‹›è˜äº† 10 ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10 åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</li><li>å‘˜å·¥ä¿¡æ¯æœ‰: å§“å å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</li><li>éšæœºç»™ 10 åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</li><li>é€šè¿‡ multimap è¿›è¡Œä¿¡æ¯çš„æ’å…¥ key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ul><h4 id="3-10-2-å®ç°æ­¥éª¤">3.10.2 å®ç°æ­¥éª¤</h4><ol><li>åˆ›å»º 10 åå‘˜å·¥ï¼Œæ”¾åˆ° vector ä¸­</li><li>éå† vector å®¹å™¨ï¼Œå–å‡ºæ¯ä¸ªå‘˜å·¥ï¼Œè¿›è¡Œéšæœºåˆ†ç»„</li><li>åˆ†ç»„åï¼Œå°†å‘˜å·¥éƒ¨é—¨ç¼–å·ä½œä¸º keyï¼Œå…·ä½“å‘˜å·¥ä½œä¸º valueï¼Œæ”¾å…¥åˆ° multimap å®¹å™¨ä¸­</li><li>åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</li></ol><p><strong>æ¡ˆä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">- å…¬å¸ä»Šå¤©æ‹›è˜äº†10ä¸ªå‘˜å·¥ï¼ˆABCDEFGHIJï¼‰ï¼Œ10åå‘˜å·¥è¿›å…¥å…¬å¸ä¹‹åï¼Œéœ€è¦æŒ‡æ´¾å‘˜å·¥åœ¨é‚£ä¸ªéƒ¨é—¨å·¥ä½œ</span></span><br><span class="line"><span class="comment">- å‘˜å·¥ä¿¡æ¯æœ‰: å§“å  å·¥èµ„ç»„æˆï¼›éƒ¨é—¨åˆ†ä¸ºï¼šç­–åˆ’ã€ç¾æœ¯ã€ç ”å‘</span></span><br><span class="line"><span class="comment">- éšæœºç»™10åå‘˜å·¥åˆ†é…éƒ¨é—¨å’Œå·¥èµ„</span></span><br><span class="line"><span class="comment">- é€šè¿‡multimapè¿›è¡Œä¿¡æ¯çš„æ’å…¥  key(éƒ¨é—¨ç¼–å·) value(å‘˜å·¥)</span></span><br><span class="line"><span class="comment">- åˆ†éƒ¨é—¨æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CEHUA  0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEISHU 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> YANFA  2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Worker</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Salary;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createWorker</span><span class="params">(vector&lt;Worker&gt;&amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">Worker worker;</span><br><span class="line">worker.m_Name = <span class="string">&quot;å‘˜å·¥&quot;</span>;</span><br><span class="line">worker.m_Name += nameSeed[i];</span><br><span class="line"></span><br><span class="line">worker.m_Salary = <span class="built_in">rand</span>() % <span class="number">10000</span> + <span class="number">10000</span>; <span class="comment">// 10000 ~ 19999</span></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ”¾å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">v.<span class="built_in">push_back</span>(worker);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘˜å·¥åˆ†ç»„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setGroup</span><span class="params">(vector&lt;Worker&gt;&amp;v,multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (vector&lt;Worker&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//äº§ç”Ÿéšæœºéƒ¨é—¨ç¼–å·</span></span><br><span class="line"><span class="type">int</span> deptId = <span class="built_in">rand</span>() % <span class="number">3</span>; <span class="comment">// 0 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å‘˜å·¥æ’å…¥åˆ°åˆ†ç»„ä¸­</span></span><br><span class="line"><span class="comment">//keyéƒ¨é—¨ç¼–å·ï¼Œvalueå…·ä½“å‘˜å·¥</span></span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(deptId, *it));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showWorkerByGourp</span><span class="params">(multimap&lt;<span class="type">int</span>,Worker&gt;&amp;m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 0  A  B  C   1  D  E   2  F G ...</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç­–åˆ’éƒ¨é—¨ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">multimap&lt;<span class="type">int</span>,Worker&gt;::iterator pos = m.<span class="built_in">find</span>(CEHUA);</span><br><span class="line"><span class="type">int</span> count = m.<span class="built_in">count</span>(CEHUA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line"><span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++ , index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¾æœ¯éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(MEISHU);</span><br><span class="line">count = m.<span class="built_in">count</span>(MEISHU); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç ”å‘éƒ¨é—¨ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">pos = m.<span class="built_in">find</span>(YANFA);</span><br><span class="line">count = m.<span class="built_in">count</span>(YANFA); <span class="comment">// ç»Ÿè®¡å…·ä½“äººæ•°</span></span><br><span class="line">index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (; pos != m.<span class="built_in">end</span>() &amp;&amp; index &lt; count; pos++, index++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Name &lt;&lt; <span class="string">&quot; å·¥èµ„ï¼š &quot;</span> &lt;&lt; pos-&gt;second.m_Salary &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€åˆ›å»ºå‘˜å·¥</span></span><br><span class="line">vector&lt;Worker&gt;vWorker;</span><br><span class="line"><span class="built_in">createWorker</span>(vWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‘˜å·¥åˆ†ç»„</span></span><br><span class="line">multimap&lt;<span class="type">int</span>, Worker&gt;mWorker;</span><br><span class="line"><span class="built_in">setGroup</span>(vWorker, mWorker);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€åˆ†ç»„æ˜¾ç¤ºå‘˜å·¥</span></span><br><span class="line"><span class="built_in">showWorkerByGourp</span>(mWorker);</span><br><span class="line"></span><br><span class="line"><span class="comment">////æµ‹è¯•</span></span><br><span class="line"><span class="comment">//for (vector&lt;Worker&gt;::iterator it = vWorker.begin(); it != vWorker.end(); it++)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å§“åï¼š &quot; &lt;&lt; it-&gt;m_Name &lt;&lt; &quot; å·¥èµ„ï¼š &quot; &lt;&lt; it-&gt;m_Salary &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>å½“æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨ï¼Œå¯ä»¥è€ƒè™‘ç”¨ map æˆ– multimap</li></ul><h2 id="4-STL-å‡½æ•°å¯¹è±¡">4 STL- å‡½æ•°å¯¹è±¡</h2><h3 id="4-1-å‡½æ•°å¯¹è±¡">4.1 å‡½æ•°å¯¹è±¡</h3><h4 id="4-1-1-å‡½æ•°å¯¹è±¡æ¦‚å¿µ">4.1.1 å‡½æ•°å¯¹è±¡æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>é‡è½½<strong>å‡½æ•°è°ƒç”¨æ“ä½œç¬¦</strong>çš„ç±»ï¼Œå…¶å¯¹è±¡å¸¸ç§°ä¸º<strong>å‡½æ•°å¯¹è±¡</strong></li><li><strong>å‡½æ•°å¯¹è±¡</strong>ä½¿ç”¨é‡è½½çš„()æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«<strong>ä»¿å‡½æ•°</strong></li></ul><p><strong>æœ¬è´¨ï¼š</strong></p><p>å‡½æ•°å¯¹è±¡(ä»¿å‡½æ•°)æ˜¯ä¸€ä¸ª<strong>ç±»</strong>ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°</p><h4 id="4-1-2-å‡½æ•°å¯¹è±¡ä½¿ç”¨">4.1.2 å‡½æ•°å¯¹è±¡ä½¿ç”¨</h4><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</li><li>å‡½æ•°å¯¹è±¡è¶…å‡ºæ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</li><li>å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨, å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd myAdd;</span><br><span class="line">cout &lt;&lt; <span class="built_in">myAdd</span>(<span class="number">10</span>, <span class="number">10</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyPrint</span>()</span><br><span class="line">&#123;</span><br><span class="line">count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; test &lt;&lt; endl;</span><br><span class="line">count++; <span class="comment">//ç»Ÿè®¡ä½¿ç”¨æ¬¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> count; <span class="comment">//å†…éƒ¨è‡ªå·±çš„çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"><span class="built_in">myPrint</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;myPrintè°ƒç”¨æ¬¡æ•°ä¸ºï¼š &quot;</span> &lt;&lt; myPrint.count &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doPrint</span><span class="params">(MyPrint &amp;mp , string test)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">mp</span>(test);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyPrint myPrint;</span><br><span class="line"><span class="built_in">doPrint</span>(myPrint, <span class="string">&quot;Hello C++&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>ä»¿å‡½æ•°å†™æ³•éå¸¸çµæ´»ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</li></ul><h3 id="4-2-è°“è¯">4.2 è°“è¯</h3><h4 id="4-2-1-è°“è¯æ¦‚å¿µ">4.2.1 è°“è¯æ¦‚å¿µ</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>è¿”å› bool ç±»å‹çš„ä»¿å‡½æ•°ç§°ä¸º<strong>è°“è¯</strong></li><li>å¦‚æœ operator()æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšä¸€å…ƒè°“è¯</li><li>å¦‚æœ operator()æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšäºŒå…ƒè°“è¯</li></ul><h4 id="4-2-2-ä¸€å…ƒè°“è¯">4.2.2 ä¸€å…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä¸€å…ƒè°“è¯</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">GreaterFive</span>&#123;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸€ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºä¸€å…ƒè°“è¯</p><h4 id="4-2-3-äºŒå…ƒè°“è¯">4.2.3 äºŒå…ƒè°“è¯</h4><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="comment">//äºŒå…ƒè°“è¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> num1 &gt; num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤ä»å°åˆ°å¤§</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å‡½æ•°å¯¹è±¡æ”¹å˜ç®—æ³•ç­–ç•¥ï¼Œæ’åºä»å¤§åˆ°å°</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">MyCompare</span>());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå‚æ•°åªæœ‰ä¸¤ä¸ªçš„è°“è¯ï¼Œç§°ä¸ºäºŒå…ƒè°“è¯</p><h3 id="4-3-å†…å»ºå‡½æ•°å¯¹è±¡">4.3 å†…å»ºå‡½æ•°å¯¹è±¡</h3><h4 id="4-3-1-å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰">4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰</h4><p><strong>æ¦‚å¿µï¼š</strong></p><ul><li>STL å†…å»ºäº†ä¸€äº›å‡½æ•°å¯¹è±¡</li></ul><p><strong>åˆ†ç±»:</strong></p><ul><li><p>ç®—æœ¯ä»¿å‡½æ•°</p></li><li><p>å…³ç³»ä»¿å‡½æ•°</p></li><li><p>é€»è¾‘ä»¿å‡½æ•°</p></li></ul><p><strong>ç”¨æ³•ï¼š</strong></p><ul><li>è¿™äº›ä»¿å‡½æ•°æ‰€äº§ç”Ÿçš„å¯¹è±¡ï¼Œç”¨æ³•å’Œä¸€èˆ¬å‡½æ•°å®Œå…¨ç›¸åŒ</li><li>ä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include&lt;functional&gt;</code></li></ul><h4 id="4-3-2-ç®—æœ¯ä»¿å‡½æ•°">4.3.2 ç®—æœ¯ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å››åˆ™è¿ç®—</li><li>å…¶ä¸­ negate æ˜¯ä¸€å…ƒè¿ç®—ï¼Œå…¶ä»–éƒ½æ˜¯äºŒå…ƒè¿ç®—</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; T plus&lt;T&gt;</code> //åŠ æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T minus&lt;T&gt;</code> //å‡æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T multiplies&lt;T&gt;</code> //ä¹˜æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T divides&lt;T&gt;</code> //é™¤æ³•ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T modulus&lt;T&gt;</code> //å–æ¨¡ä»¿å‡½æ•°</li><li><code>template&lt;class T&gt; T negate&lt;T&gt;</code> //å–åä»¿å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="comment">//negate</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">negate&lt;<span class="type">int</span>&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="built_in">n</span>(<span class="number">50</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//plus</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">plus&lt;<span class="type">int</span>&gt; p;</span><br><span class="line">cout &lt;&lt; <span class="built_in">p</span>(<span class="number">10</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡æ—¶ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ <code>#include &lt;functional&gt;</code></p><h4 id="4-3-3-å…³ç³»ä»¿å‡½æ•°">4.3.3 å…³ç³»ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°å…³ç³»å¯¹æ¯”</li></ul><p><strong>ä»¿å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool equal_to&lt;T&gt;</code> //ç­‰äº</li><li><code>template&lt;class T&gt; bool not_equal_to&lt;T&gt;</code> //ä¸ç­‰äº</li><li><code>template&lt;class T&gt; bool greater&lt;T&gt;</code> //å¤§äº</li><li><code>template&lt;class T&gt; bool greater_equal&lt;T&gt;</code> //å¤§äºç­‰äº</li><li><code>template&lt;class T&gt; bool less&lt;T&gt;</code> //å°äº</li><li><code>template&lt;class T&gt; bool less_equal&lt;T&gt;</code> //å°äºç­‰äº</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCompare</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1,<span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 &gt; v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå·±å®ç°ä»¿å‡½æ•°</span></span><br><span class="line"><span class="comment">//sort(v.begin(), v.end(), MyCompare());</span></span><br><span class="line"><span class="comment">//STLå†…å»ºä»¿å‡½æ•°  å¤§äºä»¿å‡½æ•°</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt;::iterator it = v.<span class="built_in">begin</span>(); it != v.<span class="built_in">end</span>(); it++) &#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šå…³ç³»ä»¿å‡½æ•°ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯ greater&lt;&gt;å¤§äº</p><h4 id="4-3-4-é€»è¾‘ä»¿å‡½æ•°">4.3.4 é€»è¾‘ä»¿å‡½æ•°</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°é€»è¾‘è¿ç®—</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>template&lt;class T&gt; bool logical_and&lt;T&gt;</code> //é€»è¾‘ä¸</li><li><code>template&lt;class T&gt; bool logical_or&lt;T&gt;</code> //é€»è¾‘æˆ–</li><li><code>template&lt;class T&gt; bool logical_not&lt;T&gt;</code> //é€»è¾‘é</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">true</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v.<span class="built_in">begin</span>();it!= v.<span class="built_in">end</span>();it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€»è¾‘é  å°†vå®¹å™¨æ¬è¿åˆ°v2ä¸­ï¼Œå¹¶æ‰§è¡Œé€»è¾‘éè¿ç®—</span></span><br><span class="line">vector&lt;<span class="type">bool</span>&gt; v2;</span><br><span class="line">v<span class="number">2.</span><span class="built_in">resize</span>(v.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),  v<span class="number">2.</span><span class="built_in">begin</span>(), <span class="built_in">logical_not</span>&lt;<span class="type">bool</span>&gt;());</span><br><span class="line"><span class="keyword">for</span> (vector&lt;<span class="type">bool</span>&gt;::iterator it = v<span class="number">2.</span><span class="built_in">begin</span>(); it != v<span class="number">2.</span><span class="built_in">end</span>(); it++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé€»è¾‘ä»¿å‡½æ•°å®é™…åº”ç”¨è¾ƒå°‘ï¼Œäº†è§£å³å¯</p><h2 id="5-STL-å¸¸ç”¨ç®—æ³•">5 STL- å¸¸ç”¨ç®—æ³•</h2><p><strong>æ¦‚è¿°</strong>:</p><ul><li><p>ç®—æ³•ä¸»è¦æ˜¯ç”±å¤´æ–‡ä»¶<code>&lt;algorithm&gt;</code> <code>&lt;functional&gt;</code> <code>&lt;numeric&gt;</code>ç»„æˆã€‚</p></li><li><p><code>&lt;algorithm&gt;</code>æ˜¯æ‰€æœ‰ STL å¤´æ–‡ä»¶ä¸­æœ€å¤§çš„ä¸€ä¸ªï¼ŒèŒƒå›´æ¶‰åŠåˆ°æ¯”è¾ƒã€ äº¤æ¢ã€æŸ¥æ‰¾ã€éå†æ“ä½œã€å¤åˆ¶ã€ä¿®æ”¹ç­‰ç­‰</p></li><li><p><code>&lt;numeric&gt;</code>ä½“ç§¯å¾ˆå°ï¼ŒåªåŒ…æ‹¬å‡ ä¸ªåœ¨åºåˆ—ä¸Šé¢è¿›è¡Œç®€å•æ•°å­¦è¿ç®—çš„æ¨¡æ¿å‡½æ•°</p></li><li><p><code>&lt;functional&gt;</code>å®šä¹‰äº†ä¸€äº›æ¨¡æ¿ç±»,ç”¨ä»¥å£°æ˜å‡½æ•°å¯¹è±¡ã€‚</p></li></ul><h3 id="5-1-å¸¸ç”¨éå†ç®—æ³•">5.1 å¸¸ç”¨éå†ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„éå†ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>for_each</code> //éå†å®¹å™¨</li><li><code>transform</code> //æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><h4 id="5-1-1-for-each">5.1.1 for_each</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®ç°éå†å®¹å™¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>for_each(iterator beg, iterator end, _func);  </code></p><p>// éå†ç®—æ³• éå†å®¹å™¨å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ™®é€šå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print01</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡½æ•°å¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">print02</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for_eachç®—æ³•åŸºæœ¬ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†ç®—æ³•</span></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), print01);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">print02</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**for_each åœ¨å®é™…å¼€å‘ä¸­æ˜¯æœ€å¸¸ç”¨éå†ç®—æ³•ï¼Œéœ€è¦ç†Ÿç»ƒæŒæ¡</p><h4 id="5-1-2-transform">5.1.2 transform</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ¬è¿å®¹å™¨åˆ°å¦ä¸€ä¸ªå®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><code>transform(iterator beg1, iterator end1, iterator beg2, _func);</code></li></ul><p>//beg1 æºå®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//end1 æºå®¹å™¨ç»“æŸè¿­ä»£å™¨</p><p>//beg2 ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p><p>//_func å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸ç”¨éå†ç®—æ³•  æ¬è¿ transform</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TransForm</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;vTarget; <span class="comment">//ç›®æ ‡å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v.<span class="built_in">size</span>()); <span class="comment">// ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">transform</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>(), <span class="built_in">TransForm</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), vTarget.<span class="built_in">end</span>(), <span class="built_in">MyPrint</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> æ¬è¿çš„ç›®æ ‡å®¹å™¨å¿…é¡»è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¬è¿</p><h3 id="5-2-å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•">5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•</h3><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ul><li>æŒæ¡å¸¸ç”¨çš„æŸ¥æ‰¾ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>find</code> //æŸ¥æ‰¾å…ƒç´ </li><li><code>find_if</code> //æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li><li><code>adjacent_find</code> //æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li><li><code>binary_search</code> //äºŒåˆ†æŸ¥æ‰¾æ³•</li><li><code>count</code> //ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li><li><code>count_if</code> //æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><h4 id="5-2-1-find">5.2.1 find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šå…ƒç´ çš„è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ end()</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find(iterator beg, iterator end, value);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å®¹å™¨ä¸­æ˜¯å¦æœ‰ 5 è¿™ä¸ªå…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">5</span>);</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡è½½==</span></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Person&amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p2);</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š åˆ©ç”¨ find å¯ä»¥åœ¨å®¹å™¨ä¸­æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯<strong>è¿­ä»£å™¨</strong></p><h4 id="5-2-2-find-if">5.2.2 find_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶æŸ¥æ‰¾å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>find_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred å‡½æ•°æˆ–è€…è°“è¯ï¼ˆè¿”å› bool ç±»å‹çš„ä»¿å‡½æ•°ï¼‰</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreaterFive</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt; <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">GreaterFive</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å¤§äº5çš„æ•°å­—:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater20</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &gt; <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;aaa&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;bbb&quot;</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;ccc&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;ddd&quot;</span>, <span class="number">40</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line"></span><br><span class="line">vector&lt;Person&gt;::iterator it = <span class="built_in">find_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater20</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°å§“å:&quot;</span> &lt;&lt; it-&gt;m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„: &quot;</span> &lt;&lt; it-&gt;m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šfind_if æŒ‰æ¡ä»¶æŸ¥æ‰¾ä½¿æŸ¥æ‰¾æ›´åŠ çµæ´»ï¼Œæä¾›çš„ä»¿å‡½æ•°å¯ä»¥æ”¹å˜ä¸åŒçš„ç­–ç•¥</p><h4 id="5-2-3-adjacent-find">5.2.3 adjacent_find</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>adjacent_find(iterator beg, iterator end);  </code></p><p>// æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ,è¿”å›ç›¸é‚»å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ </span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator it = <span class="built_in">adjacent_find</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line"><span class="keyword">if</span> (it == v.<span class="built_in">end</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾ä¸åˆ°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°ç›¸é‚»é‡å¤å…ƒç´ ä¸º:&quot;</span> &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé¢è¯•é¢˜ä¸­å¦‚æœå‡ºç°æŸ¥æ‰¾ç›¸é‚»é‡å¤å…ƒç´ ï¼Œè®°å¾—ç”¨ STL ä¸­çš„ adjacent_find ç®—æ³•</p><h4 id="5-2-4-binary-search">5.2.4 binary_search</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŸ¥æ‰¾æŒ‡å®šå…ƒç´ æ˜¯å¦å­˜åœ¨</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>bool binary_search(iterator beg, iterator end, value);  </code></p><p>// æŸ¥æ‰¾æŒ‡å®šçš„å…ƒç´ ï¼ŒæŸ¥åˆ° è¿”å› true å¦åˆ™ false</p><p>// æ³¨æ„: åœ¨<strong>æ— åºåºåˆ—ä¸­ä¸å¯ç”¨</strong></p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value æŸ¥æ‰¾çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line"><span class="type">bool</span> ret = <span class="built_in">binary_search</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(),<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (ret)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‰¾åˆ°äº†&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**äºŒåˆ†æŸ¥æ‰¾æ³•æŸ¥æ‰¾æ•ˆç‡å¾ˆé«˜ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æŸ¥æ‰¾çš„å®¹å™¨ä¸­å…ƒç´ å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-2-5-count">5.2.5 count</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count(iterator beg, iterator end, value);  </code></p><p>// ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value ç»Ÿè®¡çš„å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line">    <span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;è¯¸è‘›äº®&quot;</span>,<span class="number">35</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), p);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong> ç»Ÿè®¡è‡ªå®šä¹‰æ•°æ®ç±»å‹æ—¶å€™ï¼Œéœ€è¦é…åˆé‡è½½ <code>operator==</code></p><h4 id="5-2-6-count-if">5.2.6 count_if</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>count_if(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰æ¡ä»¶ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greater4</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†…ç½®æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">1</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">2</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">5</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">Greater4</span>());</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¤§äº4çš„ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AgeLess35</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> Person &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.m_Age &lt; <span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Person&gt; v;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">&quot;åˆ˜å¤‡&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">&quot;å…³ç¾½&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">&quot;å¼ é£&quot;</span>, <span class="number">35</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">&quot;èµµäº‘&quot;</span>, <span class="number">30</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">&quot;æ›¹æ“&quot;</span>, <span class="number">25</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">v.<span class="built_in">push_back</span>(p1);</span><br><span class="line">v.<span class="built_in">push_back</span>(p2);</span><br><span class="line">v.<span class="built_in">push_back</span>(p3);</span><br><span class="line">v.<span class="built_in">push_back</span>(p4);</span><br><span class="line">v.<span class="built_in">push_back</span>(p5);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="built_in">count_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">AgeLess35</span>());</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°äº35å²çš„ä¸ªæ•°ï¼š&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**æŒ‰å€¼ç»Ÿè®¡ç”¨ countï¼ŒæŒ‰æ¡ä»¶ç»Ÿè®¡ç”¨ count_if</p><h3 id="5-3-å¸¸ç”¨æ’åºç®—æ³•">5.3 å¸¸ç”¨æ’åºç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ’åºç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>sort</code> //å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li><li><code>random_shuffle</code> //æ´—ç‰Œ æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li><li><code>merge </code> // å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>reverse</code> // åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </li></ul><h4 id="5-3-1-sort">5.3.1 sort</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å¯¹å®¹å™¨å†…å…ƒç´ è¿›è¡Œæ’åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>sort(iterator beg, iterator end, _Pred);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _Pred è°“è¯</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myPrint</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//sorté»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), myPrint);</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**sort å±äºå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ç®—æ³•ä¹‹ä¸€ï¼Œéœ€ç†Ÿç»ƒæŒæ¡</p><h4 id="5-3-2-random-shuffle">5.3.2 random_shuffle</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ´—ç‰Œ æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>random_shuffle(iterator beg, iterator end);  </code></p><p>// æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ éšæœºè°ƒæ•´æ¬¡åº</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“ä¹±é¡ºåº</span></span><br><span class="line"><span class="built_in">random_shuffle</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**random_shuffle æ´—ç‰Œç®—æ³•æ¯”è¾ƒå®ç”¨ï¼Œä½¿ç”¨æ—¶è®°å¾—åŠ éšæœºæ•°ç§å­</p><h4 id="5-3-3-merge">5.3.3 merge</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>ä¸¤ä¸ªå®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>merge(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// å®¹å™¨å…ƒç´ åˆå¹¶ï¼Œå¹¶å­˜å‚¨åˆ°å¦ä¸€å®¹å™¨ä¸­</p><p>// æ³¨æ„: ä¸¤ä¸ªå®¹å™¨å¿…é¡»æ˜¯<strong>æœ‰åºçš„</strong></p><p>// beg1 å®¹å™¨ 1 å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨ 1 ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨ 2 å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨ 2 ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span> ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vtarget;</span><br><span class="line"><span class="comment">//ç›®æ ‡å®¹å™¨éœ€è¦æå‰å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vtarget.<span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>() + v<span class="number">2.</span><span class="built_in">size</span>());</span><br><span class="line"><span class="comment">//åˆå¹¶  éœ€è¦ä¸¤ä¸ªæœ‰åºåºåˆ—</span></span><br><span class="line"><span class="built_in">merge</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), vtarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vtarget.<span class="built_in">begin</span>(), vtarget.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**merge åˆå¹¶çš„ä¸¤ä¸ªå®¹å™¨å¿…é¡»çš„æœ‰åºåºåˆ—</p><h4 id="5-3-4-reverse">5.3.4 reverse</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…å…ƒç´ è¿›è¡Œåè½¬</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>reverse(iterator beg, iterator end);  </code></p><p>// åè½¬æŒ‡å®šèŒƒå›´çš„å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åè½¬åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">reverse</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**reverse åè½¬åŒºé—´å†…å…ƒç´ ï¼Œé¢è¯•é¢˜å¯èƒ½æ¶‰åŠåˆ°</p><h3 id="5-4-å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•">5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„æ‹·è´å’Œæ›¿æ¢ç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><code>copy</code> // å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li><li><code>replace</code> // å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li><li><code>replace_if </code> // å®¹å™¨å†…æŒ‡å®šèŒƒå›´æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ›¿æ¢ä¸ºæ–°å…ƒç´ </li><li><code>swap</code> // äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><h4 id="5-4-1-copy">5.4.1 copy</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€å®¹å™¨ä¸­</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>copy(iterator beg, iterator end, iterator dest);  </code></p><p>// æŒ‰å€¼æŸ¥æ‰¾å…ƒç´ ï¼Œæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°è¿”å›ç»“æŸè¿­ä»£å™¨ä½ç½®</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// dest ç›®æ ‡èµ·å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">v<span class="number">2.</span><span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">copy</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨ copy ç®—æ³•åœ¨æ‹·è´æ—¶ï¼Œç›®æ ‡å®¹å™¨è®°å¾—æå‰å¼€è¾Ÿç©ºé—´</p><h4 id="5-4-2-replace">5.4.2 replace</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å°†å®¹å™¨å†…æŒ‡å®šèŒƒå›´çš„æ—§å…ƒç´ ä¿®æ”¹ä¸ºæ–°å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace(iterator beg, iterator end, oldvalue, newvalue);  </code></p><p>// å°†åŒºé—´å†…æ—§å…ƒç´  æ›¿æ¢æˆ æ–°å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// oldvalue æ—§å…ƒç´ </p><p>// newvalue æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­çš„20 æ›¿æ¢æˆ 2000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">20</span>,<span class="number">2000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replace ä¼šæ›¿æ¢åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </p><h4 id="5-4-3-replace-if">5.4.3 replace_if</h4><p><strong>åŠŸèƒ½æè¿°:</strong></p><ul><li>å°†åŒºé—´å†…æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œæ›¿æ¢æˆæŒ‡å®šå…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>replace_if(iterator beg, iterator end, _pred, newvalue);  </code></p><p>// æŒ‰æ¡ä»¶æ›¿æ¢å…ƒç´ ï¼Œæ»¡è¶³æ¡ä»¶çš„æ›¿æ¢æˆæŒ‡å®šå…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// _pred è°“è¯</p><p>// newvalue æ›¿æ¢çš„æ–°å…ƒç´ </p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReplaceGreater30</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> val &gt;= <span class="number">30</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">40</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">50</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">10</span>);</span><br><span class="line">v.<span class="built_in">push_back</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å®¹å™¨ä¸­å¤§äºç­‰äºçš„30 æ›¿æ¢æˆ 3000</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ›¿æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">replace_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">ReplaceGreater30</span>(), <span class="number">3000</span>);</span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**replace_if æŒ‰æ¡ä»¶æŸ¥æ‰¾ï¼Œå¯ä»¥åˆ©ç”¨ä»¿å‡½æ•°çµæ´»ç­›é€‰æ»¡è¶³çš„æ¡ä»¶</p><h4 id="5-4-4-swap">5.4.4 swap</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>swap(container c1, container c2);  </code></p><p>// äº’æ¢ä¸¤ä¸ªå®¹å™¨çš„å…ƒç´ </p><p>// c1 å®¹å™¨ 1</p><p>// c2 å®¹å™¨ 2</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">for_each(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">swap</span>(v1, v2);</span><br><span class="line">for_each(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">for_each(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**swap äº¤æ¢å®¹å™¨æ—¶ï¼Œæ³¨æ„äº¤æ¢çš„å®¹å™¨è¦åŒç§ç±»å‹</p><h3 id="5-5-å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•">5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„ç®—æœ¯ç”Ÿæˆç®—æ³•</li></ul><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ç®—æœ¯ç”Ÿæˆç®—æ³•å±äºå°å‹ç®—æ³•ï¼Œä½¿ç”¨æ—¶åŒ…å«çš„å¤´æ–‡ä»¶ä¸º <code>#include &lt;numeric&gt;</code></li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>accumulate</code> // è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p></li><li><p><code>fill</code> // å‘å®¹å™¨ä¸­æ·»åŠ å…ƒç´ </p></li></ul><h4 id="5-5-1-accumulate">5.5.1 accumulate</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>è®¡ç®—åŒºé—´å†… å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>accumulate(iterator beg, iterator end, value);  </code></p><p>// è®¡ç®—å®¹å™¨å…ƒç´ ç´¯è®¡æ€»å’Œ</p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value èµ·å§‹å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">v.<span class="built_in">push_back</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> total = <span class="built_in">accumulate</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;total = &quot;</span> &lt;&lt; total &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**accumulate ä½¿ç”¨æ—¶å¤´æ–‡ä»¶æ³¨æ„æ˜¯ numericï¼Œè¿™ä¸ªç®—æ³•å¾ˆå®ç”¨</p><h4 id="5-5-2-fill">5.5.2 fill</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>å‘å®¹å™¨ä¸­å¡«å……æŒ‡å®šçš„å…ƒç´ </li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>fill(iterator beg, iterator end, value);  </code></p><p>// å‘å®¹å™¨ä¸­å¡«å……å…ƒç´ </p><p>// beg å¼€å§‹è¿­ä»£å™¨</p><p>// end ç»“æŸè¿­ä»£å™¨</p><p>// value å¡«å……çš„å€¼</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">v.<span class="built_in">resize</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//å¡«å……</span></span><br><span class="line"><span class="built_in">fill</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">for_each(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åˆ©ç”¨ fill å¯ä»¥å°†å®¹å™¨åŒºé—´å†…å…ƒç´ å¡«å……ä¸º æŒ‡å®šçš„å€¼</p><h3 id="5-6-å¸¸ç”¨é›†åˆç®—æ³•">5.6 å¸¸ç”¨é›†åˆç®—æ³•</h3><p><strong>å­¦ä¹ ç›®æ ‡ï¼š</strong></p><ul><li>æŒæ¡å¸¸ç”¨çš„é›†åˆç®—æ³•</li></ul><p><strong>ç®—æ³•ç®€ä»‹ï¼š</strong></p><ul><li><p><code>set_intersection</code> // æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</p></li><li><p><code>set_union</code> // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å¹¶é›†</p></li><li><p><code>set_difference </code> // æ±‚ä¸¤ä¸ªå®¹å™¨çš„å·®é›†</p></li></ul><h4 id="5-6-1-set-intersection">5.6.1 set_intersection</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªå®¹å™¨çš„äº¤é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_intersection(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨ 1 å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨ 1 ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨ 2 å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨ 2 ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå°çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(<span class="built_in">min</span>(v<span class="number">1.</span><span class="built_in">size</span>(), v<span class="number">2.</span><span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd =</span><br><span class="line">        <span class="built_in">set_intersection</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚äº¤é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨ä¸­å–å°å€¼</strong></li><li>set_intersection è¿”å›å€¼æ—¢æ˜¯äº¤é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-2-set-union">5.6.2 set_union</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_union(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨ 1 å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨ 1 ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨ 2 å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨ 2 ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªå®¹å™¨çš„å’Œç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>(v<span class="number">1.</span><span class="built_in">size</span>() + v<span class="number">2.</span><span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd =</span><br><span class="line">        <span class="built_in">set_union</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line"></span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å¹¶é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦<strong>ä¸¤ä¸ªå®¹å™¨ç›¸åŠ </strong></li><li>set_union è¿”å›å€¼æ—¢æ˜¯å¹¶é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul><h4 id="5-6-3-set-difference">5.6.3 set_difference</h4><p><strong>åŠŸèƒ½æè¿°ï¼š</strong></p><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</li></ul><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><ul><li><p><code>set_difference(iterator beg1, iterator end1, iterator beg2, iterator end2, iterator dest);  </code></p><p>// æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†</p><p>// <strong>æ³¨æ„:ä¸¤ä¸ªé›†åˆå¿…é¡»æ˜¯æœ‰åºåºåˆ—</strong></p><p>// beg1 å®¹å™¨ 1 å¼€å§‹è¿­ä»£å™¨<br>// end1 å®¹å™¨ 1 ç»“æŸè¿­ä»£å™¨<br>// beg2 å®¹å™¨ 2 å¼€å§‹è¿­ä»£å™¨<br>// end2 å®¹å™¨ 2 ç»“æŸè¿­ä»£å™¨<br>// dest ç›®æ ‡å®¹å™¨å¼€å§‹è¿­ä»£å™¨</p></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; val &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(i);</span><br><span class="line">v<span class="number">2.</span><span class="built_in">push_back</span>(i<span class="number">+5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vTarget;</span><br><span class="line"><span class="comment">//å–ä¸¤ä¸ªé‡Œé¢è¾ƒå¤§çš„å€¼ç»™ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´</span></span><br><span class="line">vTarget.<span class="built_in">resize</span>( <span class="built_in">max</span>(v<span class="number">1.</span><span class="built_in">size</span>() , v<span class="number">2.</span><span class="built_in">size</span>()));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ç›®æ ‡å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v1ä¸v2çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;::iterator itEnd =</span><br><span class="line">        <span class="built_in">set_difference</span>(v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;v2ä¸v1çš„å·®é›†ä¸ºï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">itEnd = <span class="built_in">set_difference</span>(v<span class="number">2.</span><span class="built_in">begin</span>(), v<span class="number">2.</span><span class="built_in">end</span>(), v<span class="number">1.</span><span class="built_in">begin</span>(), v<span class="number">1.</span><span class="built_in">end</span>(), vTarget.<span class="built_in">begin</span>());</span><br><span class="line">for_each(vTarget.<span class="built_in">begin</span>(), itEnd, <span class="built_in">myPrint</span>());</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>æ±‚å·®é›†çš„ä¸¤ä¸ªé›†åˆå¿…é¡»çš„æœ‰åºåºåˆ—</li><li>ç›®æ ‡å®¹å™¨å¼€è¾Ÿç©ºé—´éœ€è¦ä»<strong>ä¸¤ä¸ªå®¹å™¨å–è¾ƒå¤§å€¼</strong></li><li>set_difference è¿”å›å€¼æ—¢æ˜¯å·®é›†ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</li></ul>]]></content>
    
    
    <summary type="html">ã€æ¨¡æ¿ã€STLã€‘</summary>
    
    
    
    <category term="C++" scheme="https://angus9823.github.io/categories/C/"/>
    
    
    <category term="C++" scheme="https://angus9823.github.io/tags/C/"/>
    
    <category term="CPP" scheme="https://angus9823.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++æ ¸å¿ƒç¼–ç¨‹</title>
    <link href="https://angus9823.github.io/posts/218758f6.html"/>
    <id>https://angus9823.github.io/posts/218758f6.html</id>
    <published>2023-06-28T13:04:13.000Z</published>
    <updated>2024-08-30T03:31:53.743Z</updated>
    
    <content type="html"><![CDATA[<h1>C++æ ¸å¿ƒç¼–ç¨‹</h1><p>æœ¬é˜¶æ®µä¸»è¦é’ˆå¯¹ C++==é¢å‘å¯¹è±¡==ç¼–ç¨‹æŠ€æœ¯åšè¯¦ç»†è®²è§£ï¼Œæ¢è®¨ C++ä¸­çš„æ ¸å¿ƒå’Œç²¾é«“ã€‚</p><h2 id="1-å†…å­˜åˆ†åŒºæ¨¡å‹">1 å†…å­˜åˆ†åŒºæ¨¡å‹</h2><p>C++ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†å†…å­˜å¤§æ–¹å‘åˆ’åˆ†ä¸º<strong>4 ä¸ªåŒºåŸŸ</strong></p><ul><li>ä»£ç åŒºï¼šå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç®¡ç†çš„</li><li>å…¨å±€åŒºï¼šå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡</li><li>æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</li><li>å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</li></ul><p><strong>å†…å­˜å››åŒºæ„ä¹‰ï¼š</strong></p><p>ä¸åŒåŒºåŸŸå­˜æ”¾çš„æ•°æ®ï¼Œèµ‹äºˆä¸åŒçš„ç”Ÿå‘½å‘¨æœŸ, ç»™æˆ‘ä»¬æ›´å¤§çš„çµæ´»ç¼–ç¨‹</p><h3 id="1-1-ç¨‹åºè¿è¡Œå‰">1.1 ç¨‹åºè¿è¡Œå‰</h3><p>â€‹ åœ¨ç¨‹åºç¼–è¯‘åï¼Œç”Ÿæˆäº† exe å¯æ‰§è¡Œç¨‹åºï¼Œ<strong>æœªæ‰§è¡Œè¯¥ç¨‹åºå‰</strong>åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸ</p><p>â€‹ <strong>ä»£ç åŒºï¼š</strong></p><p>â€‹ å­˜æ”¾ CPU æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤</p><p>â€‹ ä»£ç åŒºæ˜¯<strong>å…±äº«</strong>çš„ï¼Œå…±äº«çš„ç›®çš„æ˜¯å¯¹äºé¢‘ç¹è¢«æ‰§è¡Œçš„ç¨‹åºï¼Œåªéœ€è¦åœ¨å†…å­˜ä¸­æœ‰ä¸€ä»½ä»£ç å³å¯</p><p>â€‹ ä»£ç åŒºæ˜¯<strong>åªè¯»</strong>çš„ï¼Œä½¿å…¶åªè¯»çš„åŸå› æ˜¯é˜²æ­¢ç¨‹åºæ„å¤–åœ°ä¿®æ”¹äº†å®ƒçš„æŒ‡ä»¤</p><p>â€‹ <strong>å…¨å±€åŒºï¼š</strong></p><p>â€‹ å…¨å±€å˜é‡å’Œé™æ€å˜é‡å­˜æ”¾åœ¨æ­¤.</p><p>â€‹ å…¨å±€åŒºè¿˜åŒ…å«äº†å¸¸é‡åŒº, å­—ç¬¦ä¸²å¸¸é‡å’Œå…¶ä»–å¸¸é‡ä¹Ÿå­˜æ”¾åœ¨æ­¤.</p><p>â€‹ ==è¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾==.</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="type">int</span> g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å¸¸é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_g_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å˜é‡båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å˜é‡g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt;  (<span class="type">int</span>)&amp;g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€å˜é‡</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> s_b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é™æ€å˜é‡s_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;s_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­—ç¬¦ä¸²å¸¸é‡åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;<span class="string">&quot;hello world1&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å…¨å±€å¸¸é‡c_g_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_g_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_a = <span class="number">10</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c_l_b = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_aåœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å±€éƒ¨å¸¸é‡c_l_båœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;c_l_b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545017602518.png" alt="1545017602518"></p><p>æ€»ç»“ï¼š</p><ul><li>C++ä¸­åœ¨ç¨‹åºè¿è¡Œå‰åˆ†ä¸ºå…¨å±€åŒºå’Œä»£ç åŒº</li><li>ä»£ç åŒºç‰¹ç‚¹æ˜¯å…±äº«å’Œåªè¯»</li><li>å…¨å±€åŒºä¸­å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡</li><li>å¸¸é‡åŒºä¸­å­˜æ”¾ const ä¿®é¥°çš„å…¨å±€å¸¸é‡ å’Œ å­—ç¬¦ä¸²å¸¸é‡</li></ul><h3 id="1-2-ç¨‹åºè¿è¡Œå">1.2 ç¨‹åºè¿è¡Œå</h3><p>â€‹ <strong>æ ˆåŒºï¼š</strong></p><p>â€‹ ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾, å­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼,å±€éƒ¨å˜é‡ç­‰</p><p>â€‹ æ³¨æ„äº‹é¡¹ï¼šä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œæ ˆåŒºå¼€è¾Ÿçš„æ•°æ®ç”±ç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> * <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">return</span> &amp;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ <strong>å †åŒºï¼š</strong></p><p>â€‹ ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾,è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾,ç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</p><p>â€‹ åœ¨ C++ä¸­ä¸»è¦åˆ©ç”¨ new åœ¨å †åŒºå¼€è¾Ÿå†…å­˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>å †åŒºæ•°æ®ç”±ç¨‹åºå‘˜ç®¡ç†å¼€è¾Ÿå’Œé‡Šæ”¾</p><p>å †åŒºæ•°æ®åˆ©ç”¨ new å…³é”®å­—è¿›è¡Œå¼€è¾Ÿå†…å­˜</p><h3 id="1-3-new-æ“ä½œç¬¦">1.3 new æ“ä½œç¬¦</h3><p>â€‹ C++ä¸­åˆ©ç”¨==new==æ“ä½œç¬¦åœ¨å †åŒºå¼€è¾Ÿæ•°æ®</p><p>â€‹ å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨å¼€è¾Ÿï¼Œæ‰‹åŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾åˆ©ç”¨æ“ä½œç¬¦ ==delete==</p><p>â€‹ è¯­æ³•ï¼š<code> new æ•°æ®ç±»å‹</code></p><p>â€‹ åˆ©ç”¨ new åˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›è¯¥æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ</p><p><strong>ç¤ºä¾‹ 1ï¼š åŸºæœ¬è¯­æ³•</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span>* a = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> *p = <span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨deleteé‡Šæ”¾å †åŒºæ•°æ®</span></span><br><span class="line"><span class="keyword">delete</span> p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; *p &lt;&lt; endl; //æŠ¥é”™ï¼Œé‡Šæ”¾çš„ç©ºé—´ä¸å¯è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼šå¼€è¾Ÿæ•°ç»„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å †åŒºå¼€è¾Ÿæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">arr[i] = i + <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‡Šæ”¾æ•°ç»„ delete ååŠ  []</span></span><br><span class="line"><span class="keyword">delete</span>[] arr;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-å¼•ç”¨">2 å¼•ç”¨</h2><h3 id="2-1-å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨">2.1 å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨</h3><p>**ä½œç”¨ï¼š **ç»™å˜é‡èµ·åˆ«å</p><p><strong>è¯­æ³•ï¼š</strong> <code>æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;b = a;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">b = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-å¼•ç”¨æ³¨æ„äº‹é¡¹">2.2 å¼•ç”¨æ³¨æ„äº‹é¡¹</h3><ul><li>å¼•ç”¨å¿…é¡»åˆå§‹åŒ–</li><li>å¼•ç”¨åœ¨åˆå§‹åŒ–åï¼Œä¸å¯ä»¥æ”¹å˜</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="comment">//int &amp;c; //é”™è¯¯ï¼Œå¼•ç”¨å¿…é¡»åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">int</span> &amp;c = a; <span class="comment">//ä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸å¯ä»¥æ›´æ”¹</span></span><br><span class="line">c = b; <span class="comment">//è¿™æ˜¯èµ‹å€¼æ“ä½œï¼Œä¸æ˜¯æ›´æ”¹å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-å¼•ç”¨åšå‡½æ•°å‚æ•°">2.3 å¼•ç”¨åšå‡½æ•°å‚æ•°</h3><p>**ä½œç”¨ï¼š**å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨çš„æŠ€æœ¯è®©å½¢å‚ä¿®é¥°å®å‚</p><p>**ä¼˜ç‚¹ï¼š**å¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. å€¼ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap01</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap02</span><span class="params">(<span class="type">int</span>* a, <span class="type">int</span>* b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = *a;</span><br><span class="line">*a = *b;</span><br><span class="line">*b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. å¼•ç”¨ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mySwap03</span><span class="params">(<span class="type">int</span>&amp; a, <span class="type">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap01</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap02</span>(&amp;a, &amp;b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">mySwap03</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€šè¿‡å¼•ç”¨å‚æ•°äº§ç”Ÿçš„æ•ˆæœåŒæŒ‰åœ°å€ä¼ é€’æ˜¯ä¸€æ ·çš„ã€‚å¼•ç”¨çš„è¯­æ³•æ›´æ¸…æ¥šç®€å•</p></blockquote><h3 id="2-4-å¼•ç”¨åšå‡½æ•°è¿”å›å€¼">2.4 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼</h3><p>ä½œç”¨ï¼šå¼•ç”¨æ˜¯å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼å­˜åœ¨çš„</p><p>æ³¨æ„ï¼š<strong>ä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</strong></p><p>ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›é™æ€å˜é‡å¼•ç”¨</span></span><br><span class="line"><span class="function"><span class="type">int</span>&amp; <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸èƒ½è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref = <span class="built_in">test01</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref = &quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åšå·¦å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¿”å›å¼•ç”¨</span></span><br><span class="line"><span class="type">int</span>&amp; ref2 = <span class="built_in">test02</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>() = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref2 = &quot;</span> &lt;&lt; ref2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹</p><h3 id="2-5-å¼•ç”¨çš„æœ¬è´¨">2.5 å¼•ç”¨çš„æœ¬è´¨</h3><p>æœ¬è´¨ï¼š<strong>å¼•ç”¨çš„æœ¬è´¨åœ¨ c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡.</strong></p><p>è®²è§£ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘ç°æ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º int* const ref = &amp;a;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span>&amp; ref)</span></span>&#123;</span><br><span class="line">ref = <span class="number">100</span>; <span class="comment">// refæ˜¯å¼•ç”¨ï¼Œè½¬æ¢ä¸º*ref = 100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªåŠ¨è½¬æ¢ä¸º int* const ref = &amp;a; æŒ‡é’ˆå¸¸é‡æ˜¯æŒ‡é’ˆæŒ‡å‘ä¸å¯æ”¹ï¼Œä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹</span></span><br><span class="line"><span class="type">int</span>&amp; ref = a;</span><br><span class="line">ref = <span class="number">20</span>; <span class="comment">//å†…éƒ¨å‘ç°refæ˜¯å¼•ç”¨ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢ä¸º: *ref = 20;</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ref:&quot;</span> &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>(a);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼šC++æ¨èç”¨å¼•ç”¨æŠ€æœ¯ï¼Œå› ä¸ºè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½†æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆæ“ä½œç¼–è¯‘å™¨éƒ½å¸®æˆ‘ä»¬åšäº†</p><h3 id="2-6-å¸¸é‡å¼•ç”¨">2.6 å¸¸é‡å¼•ç”¨</h3><p>**ä½œç”¨ï¼š**å¸¸é‡å¼•ç”¨ä¸»è¦ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ</p><p>åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œå¯ä»¥åŠ ==const ä¿®é¥°å½¢å‚==ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨ä½¿ç”¨çš„åœºæ™¯ï¼Œé€šå¸¸ç”¨æ¥ä¿®é¥°å½¢å‚</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showValue</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; v)</span> </span>&#123;</span><br><span class="line"><span class="comment">//v += 10;</span></span><br><span class="line">cout &lt;&lt; v &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int&amp; ref = 10;  å¼•ç”¨æœ¬èº«éœ€è¦ä¸€ä¸ªåˆæ³•çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™è¡Œé”™è¯¯</span></span><br><span class="line"><span class="comment">//åŠ å…¥constå°±å¯ä»¥äº†ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç ï¼Œint temp = 10; const int&amp; ref = temp;</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; ref = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ref = 100;  //åŠ å…¥conståä¸å¯ä»¥ä¿®æ”¹å˜é‡</span></span><br><span class="line">cout &lt;&lt; ref &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°ä¸­åˆ©ç”¨å¸¸é‡å¼•ç”¨é˜²æ­¢è¯¯æ“ä½œä¿®æ”¹å®å‚</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">showValue</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å‡½æ•°æé«˜">3 å‡½æ•°æé«˜</h2><h3 id="3-1-å‡½æ•°é»˜è®¤å‚æ•°">3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><p>åœ¨ C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚</p><p>è¯­æ³•ï¼š<code> è¿”å›å€¼ç±»å‹  å‡½æ•°å ï¼ˆå‚æ•°= é»˜è®¤å€¼ï¼‰&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>, <span class="type">int</span> c = <span class="number">10</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. å¦‚æœæŸä¸ªä½ç½®å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œé‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€åï¼Œä»å·¦å‘å³ï¼Œå¿…é¡»éƒ½è¦æœ‰é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">//2. å¦‚æœå‡½æ•°å£°æ˜æœ‰é»˜è®¤å€¼ï¼Œå‡½æ•°å®ç°çš„æ—¶å€™å°±ä¸èƒ½æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a = <span class="number">10</span>, <span class="type">int</span> b = <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">20</span>, <span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; <span class="built_in">func</span>(<span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-å‡½æ•°å ä½å‚æ•°">3.2 å‡½æ•°å ä½å‚æ•°</h3><p>C++ä¸­å‡½æ•°çš„å½¢å‚åˆ—è¡¨é‡Œå¯ä»¥æœ‰å ä½å‚æ•°ï¼Œç”¨æ¥åšå ä½ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¿…é¡»å¡«è¡¥è¯¥ä½ç½®</p><p><strong>è¯­æ³•ï¼š</strong> <code>è¿”å›å€¼ç±»å‹ å‡½æ•°å (æ•°æ®ç±»å‹)&#123;&#125;</code></p><p>åœ¨ç°é˜¶æ®µå‡½æ•°çš„å ä½å‚æ•°å­˜åœ¨æ„ä¹‰ä¸å¤§ï¼Œä½†æ˜¯åé¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°è¯¥æŠ€æœ¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å ä½å‚æ•° ï¼Œå ä½å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span>)</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is func&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">10</span>); <span class="comment">//å ä½å‚æ•°å¿…é¡»å¡«è¡¥</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å‡½æ•°é‡è½½">3.3 å‡½æ•°é‡è½½</h3><h4 id="3-3-1-å‡½æ•°é‡è½½æ¦‚è¿°">3.3.1 å‡½æ•°é‡è½½æ¦‚è¿°</h4><p>**ä½œç”¨ï¼š**å‡½æ•°åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><p><strong>å‡½æ•°é‡è½½æ»¡è¶³æ¡ä»¶ï¼š</strong></p><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°<strong>ç±»å‹ä¸åŒ</strong> æˆ–è€… <strong>ä¸ªæ•°ä¸åŒ</strong> æˆ–è€… <strong>é¡ºåºä¸åŒ</strong></li></ul><p><strong>æ³¨æ„:</strong> å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½éœ€è¦å‡½æ•°éƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a ,<span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int a ,double b) çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">double</span> a ,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½æ¡ä»¶</span></span><br><span class="line"><span class="comment">//int func(double a, int b)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;func (double a ,int b)çš„è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">func</span>();</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>,<span class="number">3.14</span>);</span><br><span class="line"><span class="built_in">func</span>(<span class="number">3.14</span> , <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-3-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹">3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><ul><li>å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="comment">//1ã€å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">const</span> <span class="type">int</span> &amp;a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func (const int &amp;a) è°ƒç”¨ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b = <span class="number">10</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a, int b = 10) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func2</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2(int a) è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">func</span>(a); <span class="comment">//è°ƒç”¨æ— const</span></span><br><span class="line"><span class="built_in">func</span>(<span class="number">10</span>);<span class="comment">//è°ƒç”¨æœ‰const</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//func2(10); //ç¢°åˆ°é»˜è®¤å‚æ•°äº§ç”Ÿæ­§ä¹‰ï¼Œéœ€è¦é¿å…</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ç±»å’Œå¯¹è±¡"><strong>4</strong> ç±»å’Œå¯¹è±¡</h2><p>C++é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ä¸ºï¼š==å°è£…ã€ç»§æ‰¿ã€å¤šæ€==</p><p>C++è®¤ä¸º==ä¸‡äº‹ä¸‡ç‰©éƒ½çš†ä¸ºå¯¹è±¡==ï¼Œå¯¹è±¡ä¸Šæœ‰å…¶å±æ€§å’Œè¡Œä¸º</p><p><strong>ä¾‹å¦‚ï¼š</strong></p><p>â€‹ äººå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰å§“åã€å¹´é¾„ã€èº«é«˜ã€ä½“é‡â€¦ï¼Œè¡Œä¸ºæœ‰èµ°ã€è·‘ã€è·³ã€åƒé¥­ã€å”±æ­Œâ€¦</p><p>â€‹ è½¦ä¹Ÿå¯ä»¥ä½œä¸ºå¯¹è±¡ï¼Œå±æ€§æœ‰è½®èƒã€æ–¹å‘ç›˜ã€è½¦ç¯â€¦,è¡Œä¸ºæœ‰è½½äººã€æ”¾éŸ³ä¹ã€æ”¾ç©ºè°ƒâ€¦</p><p>â€‹ å…·æœ‰ç›¸åŒæ€§è´¨çš„==å¯¹è±¡==ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡ç§°ä¸º==ç±»==ï¼Œäººå±äºäººç±»ï¼Œè½¦å±äºè½¦ç±»</p><h3 id="4-1-å°è£…">4.1 å°è£…</h3><h4 id="4-1-1-å°è£…çš„æ„ä¹‰">4.1.1 å°è£…çš„æ„ä¹‰</h4><p>å°è£…æ˜¯ C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</p><p>å°è£…çš„æ„ä¹‰ï¼š</p><ul><li>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</li><li>å°†å±æ€§å’Œè¡Œä¸ºåŠ ä»¥æƒé™æ§åˆ¶</li></ul><p><strong>å°è£…æ„ä¹‰ä¸€ï¼š</strong></p><p>â€‹ åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œå±æ€§å’Œè¡Œä¸ºå†™åœ¨ä¸€èµ·ï¼Œè¡¨ç°äº‹ç‰©</p><p><strong>è¯­æ³•ï¼š</strong> <code>class ç±»å&#123;   è®¿é—®æƒé™ï¼š å±æ€§  / è¡Œä¸º  &#125;;</code></p><p>**ç¤ºä¾‹ 1ï¼š**è®¾è®¡ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</p><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ†å‘¨ç‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€å°è£…çš„æ„ä¹‰</span></span><br><span class="line"><span class="comment">//å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œç”¨æ¥è¡¨ç°ç”Ÿæ´»ä¸­çš„äº‹ç‰©</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°è£…ä¸€ä¸ªåœ†ç±»ï¼Œæ±‚åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="comment">//classä»£è¡¨è®¾è®¡ä¸€ä¸ªç±»ï¼Œåé¢è·Ÿç€çš„æ˜¯ç±»å</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:  <span class="comment">//è®¿é—®æƒé™  å…¬å…±çš„æƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å±æ€§</span></span><br><span class="line"><span class="type">int</span> m_r;<span class="comment">//åŠå¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡Œä¸º</span></span><br><span class="line"><span class="comment">//è·å–åˆ°åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">calculateZC</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//2 * pi  * r</span></span><br><span class="line"><span class="comment">//è·å–åœ†çš„å‘¨é•¿</span></span><br><span class="line"><span class="keyword">return</span>  <span class="number">2</span> * PI * m_r;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åœ†ç±»ï¼Œåˆ›å»ºåœ†çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// c1å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„åœ†</span></span><br><span class="line">Circle c1;</span><br><span class="line">c<span class="number">1.</span>m_r = <span class="number">10</span>; <span class="comment">//ç»™åœ†å¯¹è±¡çš„åŠå¾„ è¿›è¡Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2 * pi * 10 = = 62.8</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åœ†çš„å‘¨é•¿ä¸ºï¼š &quot;</span> &lt;&lt; c<span class="number">1.</span><span class="built_in">calculateZC</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**ç¤ºä¾‹ 2ï¼š**è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œå±æ€§æœ‰å§“åå’Œå­¦å·ï¼Œå¯ä»¥ç»™å§“åå’Œå­¦å·èµ‹å€¼ï¼Œå¯ä»¥æ˜¾ç¤ºå­¦ç”Ÿçš„å§“åå’Œå­¦å·</p><p><strong>ç¤ºä¾‹ 2 ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setID</span><span class="params">(<span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line">m_id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;name:&quot;</span> &lt;&lt; m_name &lt;&lt; <span class="string">&quot; ID:&quot;</span> &lt;&lt; m_id &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_name;</span><br><span class="line"><span class="type">int</span> m_id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Student stu;</span><br><span class="line">stu.<span class="built_in">setName</span>(<span class="string">&quot;å¾·ç›è¥¿äºš&quot;</span>);</span><br><span class="line">stu.<span class="built_in">setID</span>(<span class="number">250</span>);</span><br><span class="line">stu.<span class="built_in">showStudent</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å°è£…æ„ä¹‰äºŒï¼š</strong></p><p>ç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶</p><p>è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼š</p><ol><li>public å…¬å…±æƒé™</li><li>protected ä¿æŠ¤æƒé™</li><li>private ç§æœ‰æƒé™</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‰ç§æƒé™</span></span><br><span class="line"><span class="comment">//å…¬å…±æƒé™  public     ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ä¿æŠ¤æƒé™  protected  ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">//ç§æœ‰æƒé™  private    ç±»å†…å¯ä»¥è®¿é—®  ç±»å¤–ä¸å¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å§“å  å…¬å…±æƒé™</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_Name;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ±½è½¦  ä¿æŠ¤æƒé™</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">string m_Car;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é“¶è¡Œå¡å¯†ç   ç§æœ‰æƒé™</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Password;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_Name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">m_Car = <span class="string">&quot;æ‹–æ‹‰æœº&quot;</span>;</span><br><span class="line">m_Password = <span class="number">123456</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">p.m_Name = <span class="string">&quot;æå››&quot;</span>;</span><br><span class="line"><span class="comment">//p.m_Car = &quot;å¥”é©°&quot;;  //ä¿æŠ¤æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"><span class="comment">//p.m_Password = 123; //ç§æœ‰æƒé™ç±»å¤–è®¿é—®ä¸åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-2-struct-å’Œ-class-åŒºåˆ«">4.1.2 struct å’Œ class åŒºåˆ«</h4><p>åœ¨ C++ä¸­ struct å’Œ class å”¯ä¸€çš„<strong>åŒºåˆ«</strong>å°±åœ¨äº <strong>é»˜è®¤çš„è®¿é—®æƒé™ä¸åŒ</strong></p><p>åŒºåˆ«ï¼š</p><ul><li>struct é»˜è®¤æƒé™ä¸ºå…¬å…±</li><li>class é»˜è®¤æƒé™ä¸ºç§æœ‰</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span>  m_A; <span class="comment">//é»˜è®¤æ˜¯ç§æœ‰æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">C2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m_A;  <span class="comment">//é»˜è®¤æ˜¯å…¬å…±æƒé™</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">C1 c1;</span><br><span class="line">c<span class="number">1.</span>m_A = <span class="number">10</span>; <span class="comment">//é”™è¯¯ï¼Œè®¿é—®æƒé™æ˜¯ç§æœ‰</span></span><br><span class="line"></span><br><span class="line">C2 c2;</span><br><span class="line">c<span class="number">2.</span>m_A = <span class="number">10</span>; <span class="comment">//æ­£ç¡®ï¼Œè®¿é—®æƒé™æ˜¯å…¬å…±</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-3-æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰">4.1.3 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</h4><p>**ä¼˜ç‚¹ 1ï¼š**å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p>**ä¼˜ç‚¹ 2ï¼š**å¯¹äºå†™æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//å§“åè®¾ç½®å¯è¯»å¯å†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setName</span><span class="params">(string name)</span> </span>&#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®å¹´é¾„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setAge</span><span class="params">(<span class="type">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">0</span> || age &gt; <span class="number">150</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä½ ä¸ªè€å¦–ç²¾!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">m_Age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®ä¸ºåªå†™</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setLover</span><span class="params">(string lover)</span> </span>&#123;</span><br><span class="line">m_Lover = lover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_Name; <span class="comment">//å¯è¯»å¯å†™  å§“å</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Age; <span class="comment">//åªè¯»  å¹´é¾„</span></span><br><span class="line"></span><br><span class="line">string m_Lover; <span class="comment">//åªå†™  æƒ…äºº</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line"><span class="comment">//å§“åè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setName</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getName</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„è®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setAge</span>(<span class="number">50</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.<span class="built_in">getAge</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ…äººè®¾ç½®</span></span><br><span class="line">p.<span class="built_in">setLover</span>(<span class="string">&quot;è‹äº•&quot;</span>);</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;æƒ…äººï¼š &quot; &lt;&lt; p.m_Lover &lt;&lt; endl;  //åªå†™å±æ€§ï¼Œä¸å¯ä»¥è¯»å–</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹ 1ï¼šè®¾è®¡ç«‹æ–¹ä½“ç±»</strong></p><p>è®¾è®¡ç«‹æ–¹ä½“ç±»(Cube)</p><p>æ±‚å‡ºç«‹æ–¹ä½“çš„é¢ç§¯å’Œä½“ç§¯</p><p>åˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰ã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545533548532.png" alt="1545533548532"></p><p><strong>ç»ƒä¹ æ¡ˆä¾‹ 2ï¼šç‚¹å’Œåœ†çš„å…³ç³»</strong></p><p>è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»ï¼ˆCircleï¼‰ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆPointï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545533829184.png" alt="1545533829184"></p><h3 id="4-2-å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†">4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h3><ul><li>ç”Ÿæ´»ä¸­æˆ‘ä»¬ä¹°çš„ç”µå­äº§å“éƒ½åŸºæœ¬ä¼šæœ‰å‡ºå‚è®¾ç½®ï¼Œåœ¨æŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ—¶å€™ä¹Ÿä¼šåˆ é™¤ä¸€äº›è‡ªå·±ä¿¡æ¯æ•°æ®ä¿è¯å®‰å…¨</li><li>C++ä¸­çš„é¢å‘å¯¹è±¡æ¥æºäºç”Ÿæ´»ï¼Œæ¯ä¸ªå¯¹è±¡ä¹Ÿéƒ½ä¼šæœ‰åˆå§‹è®¾ç½®ä»¥åŠ å¯¹è±¡é”€æ¯å‰çš„æ¸…ç†æ•°æ®çš„è®¾ç½®ã€‚</li></ul><h4 id="4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°">4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>å¯¹è±¡çš„<strong>åˆå§‹åŒ–å’Œæ¸…ç†</strong>ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜</p><p>â€‹ ä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹çŠ¶æ€ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥</p><p>â€‹ åŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå¯¹è±¡æˆ–å˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜</p><p>c++åˆ©ç”¨äº†<strong>æ„é€ å‡½æ•°</strong>å’Œ<strong>ææ„å‡½æ•°</strong>è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œã€‚</p><p>å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœ<strong>æˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</strong></p><p><strong>ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç©ºå®ç°ã€‚</strong></p><ul><li>æ„é€ å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚</li><li>ææ„å‡½æ•°ï¼šä¸»è¦ä½œç”¨åœ¨äºå¯¹è±¡<strong>é”€æ¯å‰</strong>ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚</li></ul><p><strong>æ„é€ å‡½æ•°è¯­æ³•ï¼š</strong><code>ç±»å()&#123;&#125;</code></p><ol><li>æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™ void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ</li><li>æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><p><strong>ææ„å‡½æ•°è¯­æ³•ï¼š</strong> <code>~ç±»å()&#123;&#125;</code></p><ol><li>ææ„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™ void</li><li>å‡½æ•°åç§°ä¸ç±»åç›¸åŒ,åœ¨åç§°å‰åŠ ä¸Šç¬¦å· ~</li><li>ææ„å‡½æ•°ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œå› æ­¤ä¸å¯ä»¥å‘ç”Ÿé‡è½½</li><li>ç¨‹åºåœ¨å¯¹è±¡é”€æ¯å‰ä¼šè‡ªåŠ¨è°ƒç”¨ææ„ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨,è€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personçš„ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨">4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</h4><p>ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š</p><p>â€‹ æŒ‰å‚æ•°åˆ†ä¸ºï¼š æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ </p><p>â€‹ æŒ‰ç±»å‹åˆ†ä¸ºï¼š æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </p><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š</p><p>â€‹ æ‹¬å·æ³•</p><p>â€‹ æ˜¾ç¤ºæ³•</p><p>â€‹ éšå¼è½¬æ¢æ³•</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€æ„é€ å‡½æ•°åˆ†ç±»</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§å‚æ•°åˆ†ç±»åˆ†ä¸º æœ‰å‚å’Œæ— å‚æ„é€    æ— å‚åˆç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// æŒ‰ç…§ç±»å‹åˆ†ç±»åˆ†ä¸º æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æ„é€ å‡½æ•°çš„è°ƒç”¨</span></span><br><span class="line"><span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æœ‰å‚çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.1  æ‹¬å·æ³•ï¼Œå¸¸ç”¨</span></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="comment">//æ³¨æ„1ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä¸èƒ½åŠ æ‹¬å·ï¼Œå¦‚æœåŠ äº†ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p2();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.2 æ˜¾å¼æ³•</span></span><br><span class="line">Person p2 = <span class="built_in">Person</span>(<span class="number">10</span>);</span><br><span class="line">Person p3 = <span class="built_in">Person</span>(p2);</span><br><span class="line"><span class="comment">//Person(10)å•ç‹¬å†™å°±æ˜¯åŒ¿åå¯¹è±¡  å½“å‰è¡Œç»“æŸä¹‹åï¼Œé©¬ä¸Šææ„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.3 éšå¼è½¬æ¢æ³•</span></span><br><span class="line">Person p4 = <span class="number">10</span>; <span class="comment">// Person p4 = Person(10);</span></span><br><span class="line">Person p5 = p4; <span class="comment">// Person p5 = Person(p4);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„2ï¼šä¸èƒ½åˆ©ç”¨ æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å¯¹è±¡å£°æ˜</span></span><br><span class="line"><span class="comment">//Person p5(p4);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº">4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><p>C++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ</p><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">mAge = p.mAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åœ¨é‡Šæ”¾å†…å­˜ä¹‹å‰è°ƒç”¨</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">man</span><span class="params">(<span class="number">100</span>)</span></span>; <span class="comment">//på¯¹è±¡å·²ç»åˆ›å»ºå®Œæ¯•</span></span><br><span class="line"><span class="function">Person <span class="title">newman</span><span class="params">(man)</span></span>; <span class="comment">//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">Person newman2 = man; <span class="comment">//æ‹·è´æ„é€ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person newman3;</span></span><br><span class="line"><span class="comment">//newman3 = man; //ä¸æ˜¯è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œèµ‹å€¼æ“ä½œ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</span></span><br><span class="line"><span class="comment">//ç›¸å½“äºPerson p1 = p;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">doWork</span><span class="params">(Person p1)</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">Person p; <span class="comment">//æ— å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">doWork</span>(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span></span><br><span class="line"><span class="function">Person <span class="title">doWork2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p1;</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p1 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person p = <span class="built_in">doWork2</span>();</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span> *)&amp;p &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"><span class="built_in">test03</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™">4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ  3 ä¸ªå‡½æ•°</p><p>1ï¼é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2ï¼é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>3ï¼é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸åœ¨æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ </p></li><li><p>å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œc++ä¸ä¼šå†æä¾›å…¶ä»–æ„é€ å‡½æ•°</p></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a) &#123;</span><br><span class="line">age = a;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">age = p.age;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="comment">//å¦‚æœä¸å†™æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ æ‹·è´æ„é€ ï¼Œå¹¶ä¸”åšæµ…æ‹·è´æ“ä½œ</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š &quot;</span> &lt;&lt; p<span class="number">2.</span>age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æœ‰å‚æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›é»˜è®¤æ„é€ ï¼Œä¼šæä¾›æ‹·è´æ„é€ </span></span><br><span class="line">Person p1; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//ç”¨æˆ·æä¾›çš„æœ‰å‚</span></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(p2)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¼šæä¾›</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœç”¨æˆ·æä¾›æ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨ä¸ä¼šæä¾›å…¶ä»–æ„é€ å‡½æ•°</span></span><br><span class="line">Person p4; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›é»˜è®¤æ„é€ ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p5</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">//æ­¤æ—¶å¦‚æœç”¨æˆ·è‡ªå·±æ²¡æœ‰æä¾›æœ‰å‚ï¼Œä¼šå‡ºé”™</span></span><br><span class="line"><span class="function">Person <span class="title">p6</span><span class="params">(p5)</span></span>; <span class="comment">//ç”¨æˆ·è‡ªå·±æä¾›æ‹·è´æ„é€ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-5-æ·±æ‹·è´ä¸æµ…æ‹·è´">4.2.5 æ·±æ‹·è´ä¸æµ…æ‹·è´</h4><p>æ·±æµ…æ‹·è´æ˜¯é¢è¯•ç»å…¸é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ä¸€ä¸ªå‘</p><p>æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œ</p><p>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æ— å‚ï¼ˆé»˜è®¤ï¼‰æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ— å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‚æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age ,<span class="type">int</span> height) &#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æœ‰å‚æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">m_age = age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‹·è´æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//å¦‚æœä¸åˆ©ç”¨æ·±æ‹·è´åœ¨å †åŒºåˆ›å»ºæ–°å†…å­˜ï¼Œä¼šå¯¼è‡´æµ…æ‹·è´å¸¦æ¥çš„é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜</span></span><br><span class="line">m_age = p.m_age;</span><br><span class="line">m_height = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_height);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°</span></span><br><span class="line">~<span class="built_in">Person</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (m_height != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_height;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_age;</span><br><span class="line"><span class="type">int</span>* m_height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>, <span class="number">180</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(p1)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="number">1.</span>m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p<span class="number">1.</span>m_height &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ï¼š &quot;</span> &lt;&lt; p<span class="number">2.</span>m_age &lt;&lt; <span class="string">&quot; èº«é«˜ï¼š &quot;</span> &lt;&lt; *p<span class="number">2.</span>m_height &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´æ„é€ å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜</p></blockquote><h4 id="4-2-6-åˆå§‹åŒ–åˆ—è¡¨">4.2.6 åˆå§‹åŒ–åˆ—è¡¨</h4><p><strong>ä½œç”¨ï¼š</strong></p><p>C++æä¾›äº†åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•ï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§</p><p><strong>è¯­æ³•ï¼š</strong><code>æ„é€ å‡½æ•°()ï¼šå±æ€§1(å€¼1),å±æ€§2ï¼ˆå€¼2ï¼‰... &#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">////ä¼ ç»Ÿæ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//Person(int a, int b, int c) &#123;</span></span><br><span class="line"><span class="comment">//m_A = a;</span></span><br><span class="line"><span class="comment">//m_B = b;</span></span><br><span class="line"><span class="comment">//m_C = c;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨æ–¹å¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c) :<span class="built_in">m_A</span>(a), <span class="built_in">m_B</span>(b), <span class="built_in">m_C</span>(c) &#123;&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mB:&quot;</span> &lt;&lt; m_B &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mC:&quot;</span> &lt;&lt; m_C &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">PrintPerson</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-7-ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜">4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h4><p>C++ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    A aï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>B ç±»ä¸­æœ‰å¯¹è±¡ A ä½œä¸ºæˆå‘˜ï¼ŒA ä¸ºå¯¹è±¡æˆå‘˜</p><p>é‚£ä¹ˆå½“åˆ›å»º B å¯¹è±¡æ—¶ï¼ŒA ä¸ B çš„æ„é€ å’Œææ„çš„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Phone</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Phone</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">m_PhoneName = name;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Phone</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Phoneææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_PhoneName;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–åˆ—è¡¨å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">Person</span>(string name, string pName) :<span class="built_in">m_Name</span>(name), <span class="built_in">m_Phone</span>(pName)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personæ„é€ &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Personææ„&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">playGame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; m_Name &lt;&lt; <span class="string">&quot; ä½¿ç”¨&quot;</span> &lt;&lt; m_Phone.m_PhoneName &lt;&lt; <span class="string">&quot; ç‰Œæ‰‹æœº! &quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line">Phone m_Phone;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å½“ç±»ä¸­æˆå‘˜æ˜¯å…¶ä»–ç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¯¥æˆå‘˜ä¸º å¯¹è±¡æˆå‘˜</span></span><br><span class="line"><span class="comment">//æ„é€ çš„é¡ºåºæ˜¯ ï¼šå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ ï¼Œå†è°ƒç”¨æœ¬ç±»æ„é€ </span></span><br><span class="line"><span class="comment">//ææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line"><span class="function">Person <span class="title">p</span><span class="params">(<span class="string">&quot;å¼ ä¸‰&quot;</span> , <span class="string">&quot;è‹¹æœX&quot;</span>)</span></span>;</span><br><span class="line">p.<span class="built_in">playGame</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-8-é™æ€æˆå‘˜">4.2.8 é™æ€æˆå‘˜</h4><p>é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­— staticï¼Œç§°ä¸ºé™æ€æˆå‘˜</p><p>é™æ€æˆå‘˜åˆ†ä¸ºï¼š</p><ul><li>é™æ€æˆå‘˜å˜é‡<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</li><li>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</li></ul></li><li>é™æ€æˆå‘˜å‡½æ•°<ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</li><li>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</li></ul></li></ul><p>**ç¤ºä¾‹ 1 ï¼š**é™æ€æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</span></span><br><span class="line"><span class="comment">//2 ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//3 æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_B; <span class="comment">//é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> Person::m_B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p<span class="number">1.</span>m_A = <span class="number">100</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p<span class="number">1.</span>m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">Person p2;</span><br><span class="line">p<span class="number">2.</span>m_A = <span class="number">200</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.m_A = &quot;</span> &lt;&lt; p<span class="number">1.</span>m_A &lt;&lt; endl; <span class="comment">//å…±äº«åŒä¸€ä»½æ•°æ®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.m_A = &quot;</span> &lt;&lt; p<span class="number">2.</span>m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;m_A = &quot;</span> &lt;&lt; Person::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;m_B = &quot; &lt;&lt; Person::m_B &lt;&lt; endl; //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**ç¤ºä¾‹ 2ï¼š**é™æ€æˆå‘˜å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">//1 ç¨‹åºå…±äº«ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">//2 é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//m_B = 100; //é”™è¯¯ï¼Œä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A; <span class="comment">//é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="type">int</span> m_B; <span class="comment">//</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;func2è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> Person::m_A = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸¤ç§è®¿é—®æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€é€šè¿‡å¯¹è±¡</span></span><br><span class="line">Person p1;</span><br><span class="line">p<span class="number">1.f</span>unc();</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€é€šè¿‡ç±»å</span></span><br><span class="line">Person::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person::func2(); //ç§æœ‰æƒé™è®¿é—®ä¸åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-C-å¯¹è±¡æ¨¡å‹å’Œ-this-æŒ‡é’ˆ">4.3 C++å¯¹è±¡æ¨¡å‹å’Œ this æŒ‡é’ˆ</h3><h4 id="4-3-1-æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨">4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</h4><p>åœ¨ C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">mA = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éé™æ€æˆå‘˜å˜é‡å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">int</span> mA;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å˜é‡ä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> mB;</span><br><span class="line"><span class="comment">//å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´ï¼Œæ‰€æœ‰å‡½æ•°å…±äº«ä¸€ä¸ªå‡½æ•°å®ä¾‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;mA &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜å‡½æ•°ä¹Ÿä¸å å¯¹è±¡ç©ºé—´</span></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">sfunc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(Person) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-2-this-æŒ‡é’ˆæ¦‚å¿µ">4.3.2 this æŒ‡é’ˆæ¦‚å¿µ</h4><p>é€šè¿‡ 4.3.1 æˆ‘ä»¬çŸ¥é“åœ¨ C++ä¸­æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°æ˜¯åˆ†å¼€å­˜å‚¨çš„</p><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç </p><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ</p><p>c++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆï¼Œthis æŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚<strong>this æŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong></p><p>this æŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>this æŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>this æŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨ this æŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨ return *this</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1ã€å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</span></span><br><span class="line"><span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Person&amp; <span class="title">PersonAddPerson</span><span class="params">(Person p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;age += p.age;</span><br><span class="line"><span class="comment">//è¿”å›å¯¹è±¡æœ¬èº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1.age = &quot;</span> &lt;&lt; p<span class="number">1.</span>age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">p<span class="number">2.</span><span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1).<span class="built_in">PersonAddPerson</span>(p1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2.age = &quot;</span> &lt;&lt; p<span class="number">2.</span>age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°">4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ° this æŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ° this æŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowClassName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æ˜¯Personç±»!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> == <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; mAge &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> mAge;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Person * p = <span class="literal">NULL</span>;</span><br><span class="line">p-&gt;<span class="built_in">ShowClassName</span>(); <span class="comment">//ç©ºæŒ‡é’ˆï¼Œå¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°</span></span><br><span class="line">p-&gt;<span class="built_in">ShowPerson</span>();  <span class="comment">//ä½†æ˜¯å¦‚æœæˆå‘˜å‡½æ•°ä¸­ç”¨åˆ°äº†thisæŒ‡é’ˆï¼Œå°±ä¸å¯ä»¥äº†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-4-const-ä¿®é¥°æˆå‘˜å‡½æ•°">4.3.4 const ä¿®é¥°æˆå‘˜å‡½æ•°</h4><p><strong>å¸¸å‡½æ•°ï¼š</strong></p><ul><li>æˆå‘˜å‡½æ•°ååŠ  const åæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸º<strong>å¸¸å‡½æ•°</strong></li><li>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­— mutable åï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p><strong>å¸¸å¯¹è±¡ï¼š</strong></p><ul><li>å£°æ˜å¯¹è±¡å‰åŠ  const ç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;</span><br><span class="line">m_A = <span class="number">0</span>;</span><br><span class="line">m_B = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//thisæŒ‡é’ˆçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼Œéœ€è¦å£°æ˜å¸¸å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//const Type* const pointer;</span></span><br><span class="line"><span class="comment">//this = NULL; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘ Person* const this;</span></span><br><span class="line"><span class="comment">//this-&gt;mA = 100; //ä½†æ˜¯thisæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°æˆå‘˜å‡½æ•°ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ä¸èƒ½ä¿®æ”¹ï¼Œé™¤äº†mutableä¿®é¥°çš„å˜é‡</span></span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyFunc</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line"><span class="comment">//mA = 10000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">mutable</span> <span class="type">int</span> m_B; <span class="comment">//å¯ä¿®æ”¹ å¯å˜çš„</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°å¯¹è±¡  å¸¸å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> Person person; <span class="comment">//å¸¸é‡å¯¹è±¡</span></span><br><span class="line">cout &lt;&lt; person.m_A &lt;&lt; endl;</span><br><span class="line"><span class="comment">//person.mA = 100; //å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼,ä½†æ˜¯å¯ä»¥è®¿é—®</span></span><br><span class="line">person.m_B = <span class="number">100</span>; <span class="comment">//ä½†æ˜¯å¸¸å¯¹è±¡å¯ä»¥ä¿®æ”¹mutableä¿®é¥°æˆå‘˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸å¯¹è±¡è®¿é—®æˆå‘˜å‡½æ•°</span></span><br><span class="line">person.<span class="built_in">MyFunc</span>(); <span class="comment">//å¸¸å¯¹è±¡ä¸èƒ½è°ƒç”¨constçš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-4-å‹å…ƒ">4.4 å‹å…ƒ</h3><p>ç”Ÿæ´»ä¸­ä½ çš„å®¶æœ‰å®¢å…(Public)ï¼Œæœ‰ä½ çš„å§å®¤(Private)</p><p>å®¢å…æ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»</p><p>ä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„å¥½é—ºèœœå¥½åŸºå‹è¿›å»ã€‚</p><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸º ==friend==</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒ</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><h4 id="4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ">4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayå…¨å±€å‡½æ•° æ˜¯ Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç±»ä¸­çš„ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom; <span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay</span><span class="params">(Building * building)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®ï¼š &quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Building b;</span><br><span class="line"><span class="built_in">goodGay</span>(&amp;b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-2-ç±»åšå‹å…ƒ">4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ goodGayç±»æ˜¯Buildingç±»çš„å¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®åˆ°Buildingç±»ä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">goodGay</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-4-3-æˆå‘˜å‡½æ•°åšå‹å…ƒ">4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">goodGay</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">goodGay</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit</span><span class="params">()</span></span>; <span class="comment">//åªè®©visitå‡½æ•°ä½œä¸ºBuildingçš„å¥½æœ‹å‹ï¼Œå¯ä»¥å‘è®¿é—®Buildingä¸­ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">visit2</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Building *building;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨  goodGayç±»ä¸­çš„visitæˆå‘˜å‡½æ•° æ˜¯Buildingå¥½æœ‹å‹ï¼Œå¯ä»¥è®¿é—®ç§æœ‰å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Building</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string m_SittingRoom; <span class="comment">//å®¢å…</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">string m_BedRoom;<span class="comment">//å§å®¤</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Building::<span class="built_in">Building</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_SittingRoom = <span class="string">&quot;å®¢å…&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_BedRoom = <span class="string">&quot;å§å®¤&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">goodGay::<span class="built_in">goodGay</span>()</span><br><span class="line">&#123;</span><br><span class="line">building = <span class="keyword">new</span> Building;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">goodGay::visit2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot;</span> &lt;&lt; building-&gt;m_SittingRoom &lt;&lt; endl;</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;å¥½åŸºå‹æ­£åœ¨è®¿é—®&quot; &lt;&lt; building-&gt;m_BedRoom &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">goodGay  gg;</span><br><span class="line">gg.<span class="built_in">visit</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-5-è¿ç®—ç¬¦é‡è½½">4.5 è¿ç®—ç¬¦é‡è½½</h3><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼šå¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹</p><h4 id="4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½">4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>() &#123;&#125;;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p) &#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = <span class="keyword">this</span>-&gt;m_A + p.m_A;</span><br><span class="line">temp.m_B = <span class="keyword">this</span>-&gt;m_B + p.m_B;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç° + å·è¿ç®—ç¬¦é‡è½½</span></span><br><span class="line"><span class="comment">//Person operator+(const Person&amp; p1, const Person&amp; p2) &#123;</span></span><br><span class="line"><span class="comment">//Person temp(0, 0);</span></span><br><span class="line"><span class="comment">//temp.m_A = p1.m_A + p2.m_A;</span></span><br><span class="line"><span class="comment">//temp.m_B = p1.m_B + p2.m_B;</span></span><br><span class="line"><span class="comment">//return temp;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿ç®—ç¬¦é‡è½½ å¯ä»¥å‘ç”Ÿå‡½æ•°é‡è½½</span></span><br><span class="line">Person <span class="keyword">operator</span>+(<span class="type">const</span> Person&amp; p2, <span class="type">int</span> val)</span><br><span class="line">&#123;</span><br><span class="line">Person temp;</span><br><span class="line">temp.m_A = p<span class="number">2.</span>m_A + val;</span><br><span class="line">temp.m_B = p<span class="number">2.</span>m_B + val;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•°æ–¹å¼</span></span><br><span class="line">Person p3 = p2 + p1;  <span class="comment">//ç›¸å½“äº p2.operaor+(p1)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p<span class="number">3.</span>m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p<span class="number">3.</span>m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Person p4 = p3 + <span class="number">10</span>; <span class="comment">//ç›¸å½“äº operator+(p3,10)</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mA:&quot;</span> &lt;&lt; p<span class="number">4.</span>m_A &lt;&lt; <span class="string">&quot; mB:&quot;</span> &lt;&lt; p<span class="number">4.</span>m_B &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ 1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</p></blockquote><h4 id="4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½">4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå¯ä»¥è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_A = a;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_B = b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆå‘˜å‡½æ•° å®ç°ä¸äº†  p &lt;&lt; cout ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</span></span><br><span class="line"><span class="comment">//void operator&lt;&lt;(Person&amp; p)&#123;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å‡½æ•°å®ç°å·¦ç§»é‡è½½</span></span><br><span class="line"><span class="comment">//ostreamå¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ª</span></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Person&amp; p) &#123;</span><br><span class="line">out &lt;&lt; <span class="string">&quot;a:&quot;</span> &lt;&lt; p.m_A &lt;&lt; <span class="string">&quot; b:&quot;</span> &lt;&lt; p.m_B;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; p1 &lt;&lt; <span class="string">&quot;hello world&quot;</span> &lt;&lt; endl; <span class="comment">//é“¾å¼ç¼–ç¨‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦é…åˆå‹å…ƒå¯ä»¥å®ç°è¾“å‡ºè‡ªå®šä¹‰æ•°æ®ç±»å‹</p></blockquote><h4 id="4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½">4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼š é€šè¿‡é‡è½½é€’å¢è¿ç®—ç¬¦ï¼Œå®ç°è‡ªå·±çš„æ•´å‹æ•°æ®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyInteger</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">MyInteger</span>() &#123;</span><br><span class="line">m_Num = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‰ç½®++</span></span><br><span class="line">MyInteger&amp; <span class="keyword">operator</span>++() &#123;</span><br><span class="line"><span class="comment">//å…ˆ++</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="comment">//å†è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++</span></span><br><span class="line">MyInteger <span class="keyword">operator</span>++(<span class="type">int</span>) &#123;</span><br><span class="line"><span class="comment">//å…ˆè¿”å›</span></span><br><span class="line">MyInteger temp = *<span class="keyword">this</span>; <span class="comment">//è®°å½•å½“å‰æœ¬èº«çš„å€¼ï¼Œç„¶åè®©æœ¬èº«çš„å€¼åŠ 1ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä»¥å‰çš„å€¼ï¼Œè¾¾åˆ°å…ˆè¿”å›å++ï¼›</span></span><br><span class="line">m_Num++;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_Num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, MyInteger myint) &#123;</span><br><span class="line">out &lt;&lt; myint.m_Num;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰ç½®++ å…ˆ++ å†è¿”å›</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; ++myInt &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®++ å…ˆè¿”å› å†++</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">MyInteger myInt;</span><br><span class="line">cout &lt;&lt; myInt++ &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; myInt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="comment">//test02();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å‰ç½®é€’å¢è¿”å›å¼•ç”¨ï¼Œåç½®é€’å¢è¿”å›å€¼</p></blockquote><h4 id="4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½">4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><p>c++ç¼–è¯‘å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ  4 ä¸ªå‡½æ•°</p><ol><li>é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</li><li>é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li><li>èµ‹å€¼è¿ç®—ç¬¦ operator=, å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</li></ol><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšèµ‹å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…æ‹·è´é—®é¢˜</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//å°†å¹´é¾„æ•°æ®å¼€è¾Ÿåˆ°å †åŒº</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è½½èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line">Person&amp; <span class="keyword">operator</span>=(Person &amp;p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–è¯‘å™¨æä¾›çš„ä»£ç æ˜¯æµ…æ‹·è´</span></span><br><span class="line"><span class="comment">//m_Age = p.m_Age;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›æ·±æ‹·è´ è§£å†³æµ…æ‹·è´çš„é—®é¢˜</span></span><br><span class="line">m_Age = <span class="keyword">new</span> <span class="built_in">int</span>(*p.m_Age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›è‡ªèº«</span></span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~<span class="built_in">Person</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m_Age != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_Age;</span><br><span class="line">m_Age = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¹´é¾„çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> *m_Age;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">Person <span class="title">p1</span><span class="params">(<span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p2</span><span class="params">(<span class="number">20</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">p3</span><span class="params">(<span class="number">30</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">p3 = p2 = p1; <span class="comment">//èµ‹å€¼æ“ä½œ</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p1çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="number">1.</span>m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p2çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="number">2.</span>m_Age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;p3çš„å¹´é¾„ä¸ºï¼š&quot;</span> &lt;&lt; *p<span class="number">3.</span>m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//int a = 10;</span></span><br><span class="line"><span class="comment">//int b = 20;</span></span><br><span class="line"><span class="comment">//int c = 30;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//c = b = a;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;c = &quot; &lt;&lt; c &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-5-å…³ç³»è¿ç®—ç¬¦é‡è½½">4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½</h4><p>**ä½œç”¨ï¼š**é‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Person</span>(string name, <span class="type">int</span> age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Name = name;</span><br><span class="line"><span class="keyword">this</span>-&gt;m_Age = age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(Person &amp; p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name == p.m_Name &amp;&amp; <span class="keyword">this</span>-&gt;m_Age == p.m_Age)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">string m_Name;</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//int a = 0;</span></span><br><span class="line"><span class="comment">//int b = 0;</span></span><br><span class="line"></span><br><span class="line"><span class="function">Person <span class="title">a</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"><span class="function">Person <span class="title">b</span><span class="params">(<span class="string">&quot;å­™æ‚Ÿç©º&quot;</span>, <span class="number">18</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a != b)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;aå’Œbç›¸ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½">4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h4><ul><li>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ () ä¹Ÿå¯ä»¥é‡è½½</li><li>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</li><li>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPrint</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(string text)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; text &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é‡è½½çš„ï¼ˆï¼‰æ“ä½œç¬¦ ä¹Ÿç§°ä¸ºä»¿å‡½æ•°</span></span><br><span class="line">MyPrint myFunc;</span><br><span class="line"><span class="built_in">myFunc</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdd</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> v1, <span class="type">int</span> v2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1 + v2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyAdd add;</span><br><span class="line"><span class="type">int</span> ret = <span class="built_in">add</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ret = &quot;</span> &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¿åå¯¹è±¡è°ƒç”¨</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;MyAdd()(100,100) = &quot;</span> &lt;&lt; <span class="built_in">MyAdd</span>()(<span class="number">100</span>, <span class="number">100</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-6-ç»§æ‰¿">4.6 ç»§æ‰¿</h3><p><strong>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>æœ‰äº›ç±»ä¸ç±»ä¹‹é—´å­˜åœ¨ç‰¹æ®Šçš„å…³ç³»ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1544861202252.png" alt="1544861202252"></p><p>æˆ‘ä»¬å‘ç°ï¼Œå®šä¹‰è¿™äº›ç±»æ—¶ï¼Œä¸‹çº§åˆ«çš„æˆå‘˜é™¤äº†æ‹¥æœ‰ä¸Šä¸€çº§çš„å…±æ€§ï¼Œè¿˜æœ‰è‡ªå·±çš„ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘åˆ©ç”¨ç»§æ‰¿çš„æŠ€æœ¯ï¼Œå‡å°‘é‡å¤ä»£ç </p><h4 id="4-6-1-ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•">4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h4><p>ä¾‹å¦‚æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸­ï¼Œéƒ½æœ‰å…¬å…±çš„å¤´éƒ¨ï¼Œå…¬å…±çš„åº•éƒ¨ï¼Œç”šè‡³å…¬å…±çš„å·¦ä¾§åˆ—è¡¨ï¼Œåªæœ‰ä¸­å¿ƒå†…å®¹ä¸åŒ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œç»§æ‰¿çš„å†™æ³•æ¥å®ç°ç½‘é¡µä¸­çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹ç»§æ‰¿å­˜åœ¨çš„æ„ä¹‰ä»¥åŠå¥½å¤„</p><p><strong>æ™®é€šå®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»§æ‰¿å®ç°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¬å…±é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasePage</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">header</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é¦–é¡µã€å…¬å¼€è¯¾ã€ç™»å½•ã€æ³¨å†Œ...ï¼ˆå…¬å…±å¤´éƒ¨ï¼‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">footer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å¸®åŠ©ä¸­å¿ƒã€äº¤æµåˆä½œã€ç«™å†…åœ°å›¾...(å…¬å…±åº•éƒ¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Java,Python,C++...(å…¬å…±åˆ†ç±»åˆ—è¡¨)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Java</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;JAVAå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Python</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonå­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPP</span> : <span class="keyword">public</span> BasePage</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">content</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++å­¦ç§‘è§†é¢‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Javaé¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Javaä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Java ja;</span><br><span class="line">ja.<span class="built_in">header</span>();</span><br><span class="line">ja.<span class="built_in">footer</span>();</span><br><span class="line">ja.<span class="built_in">left</span>();</span><br><span class="line">ja.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Pythoné¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Pythonä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Python py;</span><br><span class="line">py.<span class="built_in">header</span>();</span><br><span class="line">py.<span class="built_in">footer</span>();</span><br><span class="line">py.<span class="built_in">left</span>();</span><br><span class="line">py.<span class="built_in">content</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++é¡µé¢</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;C++ä¸‹è½½è§†é¢‘é¡µé¢å¦‚ä¸‹ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">CPP cp;</span><br><span class="line">cp.<span class="built_in">header</span>();</span><br><span class="line">cp.<span class="built_in">footer</span>();</span><br><span class="line">cp.<span class="built_in">left</span>();</span><br><span class="line">cp.<span class="built_in">content</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>ç»§æ‰¿çš„å¥½å¤„ï¼š==å¯ä»¥å‡å°‘é‡å¤çš„ä»£ç ==</p><p>class A : public B;</p><p>A ç±»ç§°ä¸ºå­ç±» æˆ– æ´¾ç”Ÿç±»</p><p>B ç±»ç§°ä¸ºçˆ¶ç±» æˆ– åŸºç±»</p><p><strong>æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†</strong>ï¼š</p><p>ä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚</p><p>ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚</p><h4 id="4-6-2-ç»§æ‰¿æ–¹å¼">4.6.2 ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿çš„è¯­æ³•ï¼š<code>class å­ç±» : ç»§æ‰¿æ–¹å¼  çˆ¶ç±»</code></p><p><strong>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</strong></p><ul><li>å…¬å…±ç»§æ‰¿</li><li>ä¿æŠ¤ç»§æ‰¿</li><li>ç§æœ‰ç»§æ‰¿</li></ul><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230628211608171.png" alt="image-20230628211608171"></p><p>![img](B:/C++WorkSpace/studyResourceOnline/åŒ å¿ƒç²¾ä½œ C++ä» 0 åˆ° 1 å…¥é—¨ç¼–ç¨‹-å­¦ä¹ ç¼–ç¨‹ä¸å†éš¾èµ„æ–™/ç¬¬ 3 é˜¶æ®µ-C++æ ¸å¿ƒç¼–ç¨‹ èµ„æ–™/èµ„æ–™/è®²ä¹‰/assets/clip_image002.png)</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son1</span> :<span class="keyword">public</span> Base1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® publicæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son1 s1;</span><br><span class="line">s<span class="number">1.</span>m_A; <span class="comment">//å…¶ä»–ç±»åªèƒ½è®¿é—®åˆ°å…¬å…±æƒé™</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿æŠ¤ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son2</span>:<span class="keyword">protected</span> Base2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® protectedæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myClass2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son2 s;</span><br><span class="line"><span class="comment">//s.m_A; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§æœ‰ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son3</span>:<span class="keyword">private</span> Base3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_A; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line">m_B; <span class="comment">//å¯è®¿é—® privateæƒé™</span></span><br><span class="line"><span class="comment">//m_C; //ä¸å¯è®¿é—®</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandSon3</span> :<span class="keyword">public</span> Son3</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//Son3æ˜¯ç§æœ‰ç»§æ‰¿ï¼Œæ‰€ä»¥ç»§æ‰¿Son3çš„å±æ€§åœ¨GrandSon3ä¸­éƒ½æ— æ³•è®¿é—®åˆ°</span></span><br><span class="line"><span class="comment">//m_A;</span></span><br><span class="line"><span class="comment">//m_B;</span></span><br><span class="line"><span class="comment">//m_C;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="4-6-3-ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹">4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h4><p>**é—®é¢˜ï¼š**ä»çˆ¶ç±»ç»§æ‰¿è¿‡æ¥çš„æˆå‘˜ï¼Œå“ªäº›å±äºå­ç±»å¯¹è±¡ä¸­ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_B;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">int</span> m_C; <span class="comment">//ç§æœ‰æˆå‘˜åªæ˜¯è¢«éšè—äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šç»§æ‰¿ä¸‹å»</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¬å…±ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(Son) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å·¥å…·æŸ¥çœ‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545881904150.png" alt="1545881904150"></p><p>æ‰“å¼€å·¥å…·çª—å£åï¼Œå®šä½åˆ°å½“å‰ CPP æ–‡ä»¶çš„ç›˜ç¬¦</p><p>ç„¶åè¾“å…¥ï¼š cl /d1 reportSingleClassLayout æŸ¥çœ‹çš„ç±»å æ‰€å±æ–‡ä»¶å</p><p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545882158050.png" alt="1545882158050"></p><blockquote><p>ç»“è®ºï¼š çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜ä¹Ÿæ˜¯è¢«å­ç±»ç»§æ‰¿ä¸‹å»äº†ï¼Œåªæ˜¯ç”±ç¼–è¯‘å™¨ç»™éšè—åè®¿é—®ä¸åˆ°</p></blockquote><h4 id="4-6-4-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº">4.6.4 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h4><p>å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</p><p>é—®é¢˜ï¼šçˆ¶ç±»å’Œå­ç±»çš„æ„é€ å’Œææ„é¡ºåºæ˜¯è°å…ˆè°åï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonæ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</span></span><br><span class="line">Son s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</p></blockquote><h4 id="4-6-5-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼">4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šå½“å­ç±»ä¸çˆ¶ç±»å‡ºç°åŒåçš„æˆå‘˜ï¼Œå¦‚ä½•é€šè¿‡å­ç±»å¯¹è±¡ï¼Œè®¿é—®åˆ°å­ç±»æˆ–çˆ¶ç±»ä¸­åŒåçš„æ•°æ®å‘¢ï¼Ÿ</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - func(int a)è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­æ‰€æœ‰ç‰ˆæœ¬çš„åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è®¿é—®çˆ¶ç±»ä¸­è¢«éšè—çš„åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ çˆ¶ç±»çš„ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - func()è°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Sonä¸‹çš„m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Baseä¸‹çš„m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ol><li>å­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®åˆ°å­ç±»ä¸­åŒåæˆå‘˜</li><li>å­ç±»å¯¹è±¡åŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»åŒåæˆå‘˜</li><li>å½“å­ç±»ä¸çˆ¶ç±»æ‹¥æœ‰åŒåçš„æˆå‘˜å‡½æ•°ï¼Œå­ç±»ä¼šéšè—çˆ¶ç±»ä¸­åŒåæˆå‘˜å‡½æ•°ï¼ŒåŠ ä½œç”¨åŸŸå¯ä»¥è®¿é—®åˆ°çˆ¶ç±»ä¸­åŒåå‡½æ•°</li></ol><h4 id="4-6-6-ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼">4.6.6 ç»§æ‰¿åŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼</h4><p>é—®é¢˜ï¼šç»§æ‰¿ä¸­åŒåçš„é™æ€æˆå‘˜åœ¨å­ç±»å¯¹è±¡ä¸Šå¦‚ä½•è¿›è¡Œè®¿é—®ï¼Ÿ</p><p>é™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><ul><li>è®¿é—®å­ç±»åŒåæˆå‘˜ ç›´æ¥è®¿é—®å³å¯</li><li>è®¿é—®çˆ¶ç±»åŒåæˆå‘˜ éœ€è¦åŠ ä½œç”¨åŸŸ</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base - static void func(int a)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Base::m_A = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son - static void func()&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Son::m_A = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å±æ€§</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; s.m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; s.Base::m_A &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡ç±»åè®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Son  ä¸‹ m_A = &quot;</span> &lt;&lt; Son::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Base ä¸‹ m_A = &quot;</span> &lt;&lt; Son::Base::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒåæˆå‘˜å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡å¯¹è±¡è®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son s;</span><br><span class="line">s.<span class="built_in">func</span>();</span><br><span class="line">s.Base::<span class="built_in">func</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;é€šè¿‡ç±»åè®¿é—®ï¼š &quot;</span> &lt;&lt; endl;</span><br><span class="line">Son::<span class="built_in">func</span>();</span><br><span class="line">Son::Base::<span class="built_in">func</span>();</span><br><span class="line"><span class="comment">//å‡ºç°åŒåï¼Œå­ç±»ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°ï¼Œéœ€è¦åŠ ä½œä½œç”¨åŸŸè®¿é—®</span></span><br><span class="line">Son::Base::<span class="built_in">func</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåŒåé™æ€æˆå‘˜å¤„ç†æ–¹å¼å’Œéé™æ€å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œåªä¸è¿‡æœ‰ä¸¤ç§è®¿é—®çš„æ–¹å¼ï¼ˆé€šè¿‡å¯¹è±¡ å’Œ é€šè¿‡ç±»åï¼‰</p></blockquote><h4 id="4-6-7-å¤šç»§æ‰¿è¯­æ³•">4.6.7 å¤šç»§æ‰¿è¯­æ³•</h4><p>C++å…è®¸<strong>ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</strong></p><p>è¯­æ³•ï¼š<code> class å­ç±» ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œ ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2...</code></p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p><strong>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</strong></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base1</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Base2</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_A = <span class="number">200</span>;  <span class="comment">//å¼€å§‹æ˜¯m_B ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯æ”¹ä¸ºmAå°±ä¼šå‡ºç°ä¸æ˜ç¡®</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_A;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> : <span class="keyword">public</span> Base2, <span class="keyword">public</span> Base1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Son</span>()</span><br><span class="line">&#123;</span><br><span class="line">m_C = <span class="number">300</span>;</span><br><span class="line">m_D = <span class="number">400</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_C;</span><br><span class="line"><span class="type">int</span> m_D;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šç»§æ‰¿å®¹æ˜“äº§ç”Ÿæˆå‘˜åŒåçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">//é€šè¿‡ä½¿ç”¨ç±»åä½œç”¨åŸŸå¯ä»¥åŒºåˆ†è°ƒç”¨å“ªä¸€ä¸ªåŸºç±»çš„æˆå‘˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Son s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sizeof Son = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(s) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base1::m_A &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s.Base2::m_A &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å¤šç»§æ‰¿ä¸­å¦‚æœçˆ¶ç±»ä¸­å‡ºç°äº†åŒåæƒ…å†µï¼Œå­ç±»ä½¿ç”¨æ—¶å€™è¦åŠ ä½œç”¨åŸŸ</p></blockquote><h4 id="4-6-8-è±å½¢ç»§æ‰¿">4.6.8 è±å½¢ç»§æ‰¿</h4><p><strong>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼š</strong></p><p>â€‹ ä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»</p><p>â€‹ åˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»</p><p>â€‹ è¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><p><strong>å…¸å‹çš„è±å½¢ç»§æ‰¿æ¡ˆä¾‹ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002.jpg" alt="IMG_256"></p><p><strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼š</strong></p><ol><li><pre><code> ç¾Šç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œé©¼åŒæ ·ç»§æ‰¿äº†åŠ¨ç‰©çš„æ•°æ®ï¼Œå½“è‰æ³¥é©¬ä½¿ç”¨æ•°æ®æ—¶ï¼Œå°±ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚</code></pre></li><li><pre><code> è‰æ³¥é©¬ç»§æ‰¿è‡ªåŠ¨ç‰©çš„æ•°æ®ç»§æ‰¿äº†ä¸¤ä»½ï¼Œå…¶å®æˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œè¿™ä»½æ•°æ®æˆ‘ä»¬åªéœ€è¦ä¸€ä»½å°±å¯ä»¥ã€‚</code></pre></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿å‰åŠ virtualå…³é”®å­—åï¼Œå˜ä¸ºè™šç»§æ‰¿</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶å…¬å…±çš„çˆ¶ç±»Animalç§°ä¸ºè™šåŸºç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sheep</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tuo</span>   : <span class="keyword">virtual</span> <span class="keyword">public</span> Animal &#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SheepTuo</span> : <span class="keyword">public</span> Sheep, <span class="keyword">public</span> Tuo &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SheepTuo st;</span><br><span class="line">st.Sheep::m_Age = <span class="number">100</span>;</span><br><span class="line">st.Tuo::m_Age = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Sheep::m_Age = &quot;</span> &lt;&lt; st.Sheep::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.Tuo::m_Age = &quot;</span> &lt;&lt;  st.Tuo::m_Age &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;st.m_Age = &quot;</span> &lt;&lt; st.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è±å½¢ç»§æ‰¿å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯å­ç±»ç»§æ‰¿ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä»¥åŠæ¯«æ— æ„ä¹‰</li><li>åˆ©ç”¨è™šç»§æ‰¿å¯ä»¥è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜</li></ul><h3 id="4-7-å¤šæ€">4.7 å¤šæ€</h3><h4 id="4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ">4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ</h4><p><strong>å¤šæ€æ˜¯ C++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€</strong></p><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><ul><li>é™æ€å¤šæ€: å‡½æ•°é‡è½½ å’Œ è¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</li><li>åŠ¨æ€å¤šæ€: æ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</li></ul><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><ul><li>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š - ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li><li>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š - è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</li></ul><p>ä¸‹é¢é€šè¿‡æ¡ˆä¾‹è¿›è¡Œè®²è§£å¤šæ€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//Speakå‡½æ•°å°±æ˜¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å‡½æ•°å‰é¢åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šå‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¸èƒ½ç¡®å®šå‡½æ•°è°ƒç”¨äº†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ¨ç‰©åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> :<span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°ç‹—åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¸Œæœ›ä¼ å…¥ä»€ä¹ˆå¯¹è±¡ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ä»€ä¹ˆå¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šï¼Œé‚£ä¹ˆé™æ€è”ç¼–</span></span><br><span class="line"><span class="comment">//å¦‚æœå‡½æ•°åœ°å€åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šï¼Œå°±æ˜¯åŠ¨æ€è”ç¼–</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoSpeak</span><span class="params">(Animal &amp; animal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">animal.<span class="built_in">speak</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//å¤šæ€æ»¡è¶³æ¡ä»¶ï¼š</span></span><br><span class="line"><span class="comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span></span><br><span class="line"><span class="comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//å¤šæ€ä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="comment">//çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Cat cat;</span><br><span class="line"><span class="built_in">DoSpeak</span>(cat);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dog dog;</span><br><span class="line"><span class="built_in">DoSpeak</span>(dog);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><ul><li>æœ‰ç»§æ‰¿å…³ç³»</li><li>å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</li></ul><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><ul><li>çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</li></ul><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹ å‡½æ•°å å‚æ•°åˆ—è¡¨ å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h4 id="4-7-2-å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»">4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€-è®¡ç®—å™¨ç±»</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»</p><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°</li><li>å¯è¯»æ€§å¼º</li><li>åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ™®é€šå®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">(string oper)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (oper == <span class="string">&quot;+&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;-&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&quot;*&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœè¦æä¾›æ–°çš„è¿ç®—ï¼Œéœ€è¦ä¿®æ”¹æºç </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ™®é€šå®ç°æµ‹è¯•</span></span><br><span class="line">Calculator c;</span><br><span class="line">c.m_Num1 = <span class="number">10</span>;</span><br><span class="line">c.m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;+&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;-&quot;</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; c.m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; c.m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; c.<span class="built_in">getResult</span>(<span class="string">&quot;*&quot;</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤šæ€å®ç°</span></span><br><span class="line"><span class="comment">//æŠ½è±¡è®¡ç®—å™¨ç±»</span></span><br><span class="line"><span class="comment">//å¤šæ€ä¼˜ç‚¹ï¼šä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œå¯è¯»æ€§å¼ºï¼Œåˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractCalculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> :</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m_Num1;</span><br><span class="line"><span class="type">int</span> m_Num2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 + m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 - m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulCalculator</span> :<span class="keyword">public</span> AbstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_Num1 * m_Num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºåŠ æ³•è®¡ç®—å™¨</span></span><br><span class="line">AbstractCalculator *abc = <span class="keyword">new</span> AddCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;  <span class="comment">//ç”¨å®Œäº†è®°å¾—é”€æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå‡æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> SubCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; - &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¹˜æ³•è®¡ç®—å™¨</span></span><br><span class="line">abc = <span class="keyword">new</span> MulCalculator;</span><br><span class="line">abc-&gt;m_Num1 = <span class="number">10</span>;</span><br><span class="line">abc-&gt;m_Num2 = <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; abc-&gt;m_Num1 &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; abc-&gt;m_Num2 &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; abc-&gt;<span class="built_in">getResult</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">delete</span> abc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test01();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test02</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šC++å¼€å‘æå€¡åˆ©ç”¨å¤šæ€è®¾è®¡ç¨‹åºæ¶æ„ï¼Œå› ä¸ºå¤šæ€ä¼˜ç‚¹å¾ˆå¤š</p></blockquote><h4 id="4-7-3-çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»">4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h4><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹</p><p>å› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸º<strong>çº¯è™šå‡½æ•°</strong></p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼š<code>virtual è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰= 0 ;</code></p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸º==æŠ½è±¡ç±»==</p><p><strong>æŠ½è±¡ç±»ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li><li>å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çº¯è™šå‡½æ•°</span></span><br><span class="line"><span class="comment">//ç±»ä¸­åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°å°±ç§°ä¸ºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment">//æŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="comment">//å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> :<span class="keyword">public</span> Base</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;funcè°ƒç”¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Base * base = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//base = new Base; // é”™è¯¯ï¼ŒæŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span></span><br><span class="line">base = <span class="keyword">new</span> Son;</span><br><span class="line">base-&gt;<span class="built_in">func</span>();</span><br><span class="line"><span class="keyword">delete</span> base;<span class="comment">//è®°å¾—é”€æ¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-4-å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“">4.7.4 å¤šæ€æ¡ˆä¾‹äºŒ-åˆ¶ä½œé¥®å“</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´ - å†²æ³¡ - å€’å…¥æ¯ä¸­ - åŠ å…¥è¾…æ–™</p><p>åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1545985945198.png" alt="1545985945198"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡åˆ¶ä½œé¥®å“</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AbstractDrinking</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"><span class="comment">//è§„å®šæµç¨‹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MakeDrink</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">Boil</span>();</span><br><span class="line"><span class="built_in">Brew</span>();</span><br><span class="line"><span class="built_in">PourInCup</span>();</span><br><span class="line"><span class="built_in">PutSomething</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œå’–å•¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coffee</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®å†œå¤«å±±æ³‰!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡å’–å•¡!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†å’–å•¡å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥ç‰›å¥¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¶ä½œèŒ¶æ°´</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">public</span> AbstractDrinking &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//çƒ§æ°´</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Boil</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç…®è‡ªæ¥æ°´!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å†²æ³¡</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å†²æ³¡èŒ¶å¶!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å€’å…¥æ¯ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å°†èŒ¶æ°´å€’å…¥æ¯ä¸­!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ å…¥è¾…æ–™</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">PutSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;åŠ å…¥æ¸æ!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸šåŠ¡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DoWork</span><span class="params">(AbstractDrinking* drink)</span> </span>&#123;</span><br><span class="line">drink-&gt;<span class="built_in">MakeDrink</span>();</span><br><span class="line"><span class="keyword">delete</span> drink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Coffee);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">DoWork</span>(<span class="keyword">new</span> Tea);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-7-5-è™šææ„å’Œçº¯è™šææ„">4.7.5 è™šææ„å’Œçº¯è™šææ„</h4><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾Ÿåˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°æ”¹ä¸º<strong>è™šææ„</strong>æˆ–è€…<strong>çº¯è™šææ„</strong></p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><ul><li>å¯ä»¥è§£å†³çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</li><li>éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</li></ul><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><ul><li>å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</li></ul><p>è™šææ„è¯­æ³•ï¼š</p><p><code>virtual ~ç±»å()&#123;&#125;</code></p><p>çº¯è™šææ„è¯­æ³•ï¼š</p><p><code> virtual ~ç±»å() = 0;</code></p><p><code>ç±»å::~ç±»å()&#123;&#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal æ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ææ„å‡½æ•°åŠ ä¸Švirtualå…³é”®å­—ï¼Œå˜æˆè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//virtual ~Animal()</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;Animalè™šææ„å‡½æ•°è°ƒç”¨ï¼&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">Animal</span>() = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Animal::~<span class="built_in">Animal</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Animal çº¯è™šææ„å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å’ŒåŒ…å«æ™®é€šçº¯è™šå‡½æ•°çš„ç±»ä¸€æ ·ï¼ŒåŒ…å«äº†çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ä¸èƒ½å¤Ÿè¢«å®ä¾‹åŒ–ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> : <span class="keyword">public</span> Animal &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Cat</span>(string name)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catæ„é€ å‡½æ•°è°ƒç”¨ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">m_Name = <span class="keyword">new</span> <span class="built_in">string</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; *m_Name &lt;&lt;  <span class="string">&quot;å°çŒ«åœ¨è¯´è¯!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">~<span class="built_in">Cat</span>()</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Catææ„å‡½æ•°è°ƒç”¨!&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;m_Name != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="keyword">delete</span> m_Name;</span><br><span class="line">m_Name = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">string *m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Animal *animal = <span class="keyword">new</span> <span class="built_in">Cat</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">animal-&gt;<span class="built_in">Speak</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å­ç±»å¯¹è±¡å¯èƒ½æ¸…ç†ä¸å¹²å‡€ï¼Œé€ æˆå†…å­˜æ³„æ¼</span></span><br><span class="line"><span class="comment">//æ€ä¹ˆè§£å†³ï¼Ÿç»™åŸºç±»å¢åŠ ä¸€ä¸ªè™šææ„å‡½æ•°</span></span><br><span class="line"><span class="comment">//è™šææ„å‡½æ•°å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</span></span><br><span class="line"><span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>â€‹ 1. è™šææ„æˆ–çº¯è™šææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>â€‹ 2. å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p><p>â€‹ 3. æ‹¥æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</p><h4 id="4-7-6-å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…">4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸º CPUï¼ˆç”¨äºè®¡ç®—ï¼‰ï¼Œæ˜¾å¡ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰</p><p>å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ä¸”æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚ Intel å‚å•†å’Œ Lenovo å‚å•†</p><p>åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£</p><p>æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡CPUç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„è®¡ç®—å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡æ˜¾å¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VideoCard</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„æ˜¾ç¤ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½è±¡å†…å­˜æ¡ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//æŠ½è±¡çš„å­˜å‚¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”µè„‘ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Computer</span>(CPU * cpu, VideoCard * vc, Memory * mem)</span><br><span class="line">&#123;</span><br><span class="line">m_cpu = cpu;</span><br><span class="line">m_vc = vc;</span><br><span class="line">m_mem = mem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›å·¥ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//è®©é›¶ä»¶å·¥ä½œèµ·æ¥ï¼Œè°ƒç”¨æ¥å£</span></span><br><span class="line">m_cpu-&gt;<span class="built_in">calculate</span>();</span><br><span class="line"></span><br><span class="line">m_vc-&gt;<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">m_mem-&gt;<span class="built_in">storage</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æä¾›ææ„å‡½æ•° é‡Šæ”¾3ä¸ªç”µè„‘é›¶ä»¶</span></span><br><span class="line">~<span class="built_in">Computer</span>()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾CPUé›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_cpu != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_cpu;</span><br><span class="line">m_cpu = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾æ˜¾å¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_vc != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_vc;</span><br><span class="line">m_vc = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡Šæ”¾å†…å­˜æ¡é›¶ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (m_mem != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">delete</span> m_mem;</span><br><span class="line">m_mem = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">CPU * m_cpu; <span class="comment">//CPUçš„é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">VideoCard * m_vc; <span class="comment">//æ˜¾å¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">Memory * m_mem; <span class="comment">//å†…å­˜æ¡é›¶ä»¶æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·ä½“å‚å•†</span></span><br><span class="line"><span class="comment">//Intelå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IntelMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Intelçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lenovoå‚å•†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoCPU</span> :<span class="keyword">public</span> CPU</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">calculate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„CPUå¼€å§‹è®¡ç®—äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoVideoCard</span> :<span class="keyword">public</span> VideoCard</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„æ˜¾å¡å¼€å§‹æ˜¾ç¤ºäº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LenovoMemory</span> :<span class="keyword">public</span> Memory</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">storage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Lenovoçš„å†…å­˜æ¡å¼€å§‹å­˜å‚¨äº†ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€å°ç”µè„‘é›¶ä»¶</span></span><br><span class="line">CPU * intelCpu = <span class="keyword">new</span> IntelCPU;</span><br><span class="line">VideoCard * intelCard = <span class="keyword">new</span> IntelVideoCard;</span><br><span class="line">Memory * intelMem = <span class="keyword">new</span> IntelMemory;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//åˆ›å»ºç¬¬ä¸€å°ç”µè„‘</span></span><br><span class="line">Computer * computer1 = <span class="keyword">new</span> <span class="built_in">Computer</span>(intelCpu, intelCard, intelMem);</span><br><span class="line">computer1-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer1;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬äºŒå°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬äºŒå°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer2 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> LenovoVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer2-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer2;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;-----------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸‰å°ç”µè„‘å¼€å§‹å·¥ä½œï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//ç¬¬ä¸‰å°ç”µè„‘ç»„è£…</span></span><br><span class="line">Computer * computer3 = <span class="keyword">new</span> <span class="built_in">Computer</span>(<span class="keyword">new</span> LenovoCPU, <span class="keyword">new</span> IntelVideoCard, <span class="keyword">new</span> LenovoMemory);;</span><br><span class="line">computer3-&gt;<span class="built_in">work</span>();</span><br><span class="line"><span class="keyword">delete</span> computer3;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-æ–‡ä»¶æ“ä½œ">5 æ–‡ä»¶æ“ä½œ</h2><p>ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºä¸´æ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾</p><p>é€šè¿‡<strong>æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–</strong></p><p>C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶ ==&lt; fstream &gt;==</p><p>æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li><strong>æ–‡æœ¬æ–‡ä»¶</strong> - æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>ASCII ç </strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­</li><li><strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong> - æ–‡ä»¶ä»¥æ–‡æœ¬çš„<strong>äºŒè¿›åˆ¶</strong>å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬</li></ol><p>æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»:</p><ol><li>ofstreamï¼šå†™æ“ä½œ</li><li>ifstreamï¼š è¯»æ“ä½œ</li><li>fstream ï¼š è¯»å†™æ“ä½œ</li></ol><h3 id="5-1-æ–‡æœ¬æ–‡ä»¶">5.1 æ–‡æœ¬æ–‡ä»¶</h3><h4 id="5-1-1-å†™æ–‡ä»¶">5.1.1 å†™æ–‡ä»¶</h4><p>å†™æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ofstream ofs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶</p><p>ofs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>å†™æ•°æ®</p><p>ofs &lt;&lt; â€œå†™å…¥çš„æ•°æ®â€;</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ofs.close();</p></li></ol><p>æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼š</p><table><thead><tr><th>æ‰“å¼€æ–¹å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>ios::in</td><td>ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::out</td><td>ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶</td></tr><tr><td>ios::ate</td><td>åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾</td></tr><tr><td>ios::app</td><td>è¿½åŠ æ–¹å¼å†™æ–‡ä»¶</td></tr><tr><td>ios::trunc</td><td>å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œå†åˆ›å»º</td></tr><tr><td>ios::binary</td><td>äºŒè¿›åˆ¶æ–¹å¼</td></tr></tbody></table><p><strong>æ³¨æ„ï¼š</strong> æ–‡ä»¶æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä½¿ç”¨ï¼Œåˆ©ç”¨|æ“ä½œç¬¦</p><p>**ä¾‹å¦‚ï¼š**ç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ <code>ios::binary |  ios:: out</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ofstream ofs;</span><br><span class="line">ofs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::out);</span><br><span class="line"></span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;æ€§åˆ«ï¼šç”·&quot;</span> &lt;&lt; endl;</span><br><span class="line">ofs &lt;&lt; <span class="string">&quot;å¹´é¾„ï¼š18&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶æ“ä½œå¿…é¡»åŒ…å«å¤´æ–‡ä»¶ fstream</li><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ofstream ï¼Œæˆ–è€… fstream ç±»</li><li>æ‰“å¼€æ–‡ä»¶æ—¶å€™éœ€è¦æŒ‡å®šæ“ä½œæ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠæ‰“å¼€æ–¹å¼</li><li>åˆ©ç”¨&lt;&lt;å¯ä»¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®</li><li>æ“ä½œå®Œæ¯•ï¼Œè¦å…³é—­æ–‡ä»¶</li></ul><h4 id="5-1-2-è¯»æ–‡ä»¶">5.1.2 è¯»æ–‡ä»¶</h4><p>è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š</p><p>è¯»æ–‡ä»¶æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åŒ…å«å¤´æ–‡ä»¶</p><p>#include &lt;fstream&gt;</p></li><li><p>åˆ›å»ºæµå¯¹è±¡</p><p>ifstream ifs;</p></li><li><p>æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>ifs.open(â€œæ–‡ä»¶è·¯å¾„â€,æ‰“å¼€æ–¹å¼);</p></li><li><p>è¯»æ•°æ®</p><p>å››ç§æ–¹å¼è¯»å–</p></li><li><p>å…³é—­æ–‡ä»¶</p><p>ifs.close();</p></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ifstream ifs;</span><br><span class="line">ifs.<span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, ios::in);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs &gt;&gt; buf)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line"><span class="comment">//char buf[1024] = &#123; 0 &#125;;</span></span><br><span class="line"><span class="comment">//while (ifs.getline(buf,sizeof(buf)))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§</span></span><br><span class="line"><span class="comment">//string buf;</span></span><br><span class="line"><span class="comment">//while (getline(ifs, buf))</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; buf &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="keyword">while</span> ((c = ifs.<span class="built_in">get</span>()) != EOF)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ifs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ ifstream ï¼Œæˆ–è€… fstream ç±»</li><li>åˆ©ç”¨ is_open å‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</li><li>close å…³é—­æ–‡ä»¶</li></ul><h3 id="5-2-äºŒè¿›åˆ¶æ–‡ä»¶">5.2 äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p><p>æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸º ==ios::binary==</p><h4 id="5-2-1-å†™æ–‡ä»¶">5.2.1 å†™æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•° write</p><p>å‡½æ•°åŸå‹ ï¼š<code>ostream&amp; write(const char * buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆ buffer æŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚len æ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒè¿›åˆ¶æ–‡ä»¶  å†™æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//1ã€åŒ…å«å¤´æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span></span><br><span class="line"><span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::out | ios::binary)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//ofs.open(&quot;person.txt&quot;, ios::out | ios::binary);</span></span><br><span class="line"></span><br><span class="line">Person p = &#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>  , <span class="number">18</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€å†™æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line"><span class="comment">//5ã€å…³é—­æ–‡ä»¶</span></span><br><span class="line">ofs.<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><ul><li>æ–‡ä»¶è¾“å‡ºæµå¯¹è±¡ å¯ä»¥é€šè¿‡ write å‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼å†™æ•°æ®</li></ul><h4 id="5-2-2-è¯»æ–‡ä»¶">5.2.2 è¯»æ–‡ä»¶</h4><p>äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•° read</p><p>å‡½æ•°åŸå‹ï¼š<code>istream&amp; read(char *buffer,int len);</code></p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆ buffer æŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚len æ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">char</span> m_Name[<span class="number">64</span>];</span><br><span class="line"><span class="type">int</span> m_Age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;person.txt&quot;</span>, ios::in | ios::binary)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (!ifs.<span class="built_in">is_open</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person p;</span><br><span class="line">ifs.<span class="built_in">read</span>((<span class="type">char</span> *)&amp;p, <span class="built_in">sizeof</span>(p));</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; p.m_Name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; p.m_Age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">test01</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶è¾“å…¥æµå¯¹è±¡ å¯ä»¥é€šè¿‡ read å‡½æ•°ï¼Œä»¥äºŒè¿›åˆ¶æ–¹å¼è¯»æ•°æ®</li></ul>]]></content>
    
    
    <summary type="html">ã€å¼•ç”¨ã€ç±»å’Œå¯¹è±¡ã€å‡½æ•°ã€æ–‡ä»¶æ“ä½œã€‘</summary>
    
    
    
    <category term="C++" scheme="https://angus9823.github.io/categories/C/"/>
    
    
    <category term="C++" scheme="https://angus9823.github.io/tags/C/"/>
    
    <category term="CPP" scheme="https://angus9823.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>CPP_åŸºç¡€å…¥é—¨</title>
    <link href="https://angus9823.github.io/posts/dacacf22.html"/>
    <id>https://angus9823.github.io/posts/dacacf22.html</id>
    <published>2023-05-19T07:10:02.000Z</published>
    <updated>2024-08-30T03:31:53.642Z</updated>
    
    <content type="html"><![CDATA[<h1>C++åŸºç¡€å…¥é—¨</h1><h2 id="1-C-åˆè¯†">1 C++åˆè¯†</h2><h3 id="1-1-ç¬¬ä¸€ä¸ª-C-ç¨‹åº">1.1 ç¬¬ä¸€ä¸ª C++ç¨‹åº</h3><p>ç¼–å†™ä¸€ä¸ª C++ç¨‹åºæ€»å…±åˆ†ä¸º 4 ä¸ªæ­¥éª¤</p><ul><li>åˆ›å»ºé¡¹ç›®</li><li>åˆ›å»ºæ–‡ä»¶</li><li>ç¼–å†™ä»£ç </li><li>è¿è¡Œç¨‹åº</li></ul><h4 id="1-1-1-åˆ›å»ºé¡¹ç›®">1.1.1 åˆ›å»ºé¡¹ç›®</h4><p>â€‹ Visual Studio æ˜¯æˆ‘ä»¬ç”¨æ¥ç¼–å†™ C++ç¨‹åºçš„ä¸»è¦å·¥å…·ï¼Œæˆ‘ä»¬å…ˆå°†å®ƒæ‰“å¼€</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541383178746.png" alt="1541383178746"></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541384366413.png" alt="1541384366413"></p><h4 id="1-1-2-åˆ›å»ºæ–‡ä»¶">1.1.2 åˆ›å»ºæ–‡ä»¶</h4><p>å³é”®æºæ–‡ä»¶ï¼Œé€‰æ‹©æ·»åŠ -&gt;æ–°å»ºé¡¹</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541383817248.png" alt="1541383817248"></p><p>ç»™ C++æ–‡ä»¶èµ·ä¸ªåç§°ï¼Œç„¶åç‚¹å‡»æ·»åŠ å³å¯ã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541384140042.png" alt="1541384140042"></p><h4 id="1-1-3-ç¼–å†™ä»£ç ">1.1.3 ç¼–å†™ä»£ç </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;Hello world&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-1-4-è¿è¡Œç¨‹åº">1.1.4 è¿è¡Œç¨‹åº</h4><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541384818688.png" alt="1541384818688"></p><h3 id="1-2-æ³¨é‡Š">1.2 æ³¨é‡Š</h3><p><strong>ä½œç”¨</strong>ï¼šåœ¨ä»£ç ä¸­åŠ ä¸€äº›è¯´æ˜å’Œè§£é‡Šï¼Œæ–¹ä¾¿è‡ªå·±æˆ–å…¶ä»–ç¨‹åºå‘˜ç¨‹åºå‘˜é˜…è¯»ä»£ç </p><p><strong>ä¸¤ç§æ ¼å¼</strong></p><ol><li><strong>å•è¡Œæ³¨é‡Š</strong>ï¼š<code>// æè¿°ä¿¡æ¯</code><ul><li>é€šå¸¸æ”¾åœ¨ä¸€è¡Œä»£ç çš„ä¸Šæ–¹ï¼Œæˆ–è€…ä¸€æ¡è¯­å¥çš„æœ«å°¾ï¼Œ==å¯¹è¯¥è¡Œä»£ç è¯´æ˜==</li></ul></li><li><strong>å¤šè¡Œæ³¨é‡Š</strong>ï¼š <code>/* æè¿°ä¿¡æ¯ */</code><ul><li>é€šå¸¸æ”¾åœ¨ä¸€æ®µä»£ç çš„ä¸Šæ–¹ï¼Œ==å¯¹è¯¥æ®µä»£ç åšæ•´ä½“è¯´æ˜==</li></ul></li></ol><blockquote><p>æç¤ºï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œä¼šå¿½ç•¥æ³¨é‡Šçš„å†…å®¹</p></blockquote><h3 id="1-3-å˜é‡">1.3 å˜é‡</h3><p><strong>ä½œç”¨</strong>ï¼šç»™ä¸€æ®µæŒ‡å®šçš„å†…å­˜ç©ºé—´èµ·åï¼Œæ–¹ä¾¿æ“ä½œè¿™æ®µå†…å­˜</p><p><strong>è¯­æ³•</strong>ï¼š<code>æ•°æ®ç±»å‹ å˜é‡å = åˆå§‹å€¼;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å˜é‡çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">//è¯­æ³•ï¼šæ•°æ®ç±»å‹  å˜é‡å = åˆå§‹å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šC++åœ¨åˆ›å»ºå˜é‡æ—¶ï¼Œå¿…é¡»ç»™å˜é‡ä¸€ä¸ªåˆå§‹å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p></blockquote><h3 id="1-4-å¸¸é‡">1.4 å¸¸é‡</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºè®°å½•ç¨‹åºä¸­ä¸å¯æ›´æ”¹çš„æ•°æ®</p><p>C++å®šä¹‰å¸¸é‡ä¸¤ç§æ–¹å¼</p><ol><li><p><strong>#define</strong> å®å¸¸é‡ï¼š <code>#define å¸¸é‡å å¸¸é‡å€¼</code></p><ul><li>==é€šå¸¸åœ¨æ–‡ä»¶ä¸Šæ–¹å®šä¹‰==ï¼Œè¡¨ç¤ºä¸€ä¸ªå¸¸é‡</li></ul></li><li><p><strong>const</strong>ä¿®é¥°çš„å˜é‡ <code>const æ•°æ®ç±»å‹ å¸¸é‡å = å¸¸é‡å€¼</code></p><ul><li>==é€šå¸¸åœ¨å˜é‡å®šä¹‰å‰åŠ å…³é”®å­— const==ï¼Œä¿®é¥°è¯¥å˜é‡ä¸ºå¸¸é‡ï¼Œä¸å¯ä¿®æ”¹</li></ul></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€å®å¸¸é‡</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> day 7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸€å‘¨é‡Œæ€»å…±æœ‰ &quot;</span> &lt;&lt; day &lt;&lt; <span class="string">&quot; å¤©&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//day = 8;  //æŠ¥é”™ï¼Œå®å¸¸é‡ä¸å¯ä»¥ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€constä¿®é¥°å˜é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> month = <span class="number">12</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸€å¹´é‡Œæ€»å…±æœ‰ &quot;</span> &lt;&lt; month &lt;&lt; <span class="string">&quot; ä¸ªæœˆä»½&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//month = 24; //æŠ¥é”™ï¼Œå¸¸é‡æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5-å…³é”®å­—">1.5 å…³é”®å­—</h3><p>**ä½œç”¨ï¼š**å…³é”®å­—æ˜¯ C++ä¸­é¢„å…ˆä¿ç•™çš„å•è¯ï¼ˆæ ‡è¯†ç¬¦ï¼‰</p><ul><li><strong>åœ¨å®šä¹‰å˜é‡æˆ–è€…å¸¸é‡æ—¶å€™ï¼Œä¸è¦ç”¨å…³é”®å­—</strong></li></ul><p>C++å…³é”®å­—å¦‚ä¸‹ï¼š</p><table><thead><tr><th>asm</th><th>do</th><th>if</th><th>return</th><th>typedef</th></tr></thead><tbody><tr><td>auto</td><td>double</td><td>inline</td><td>short</td><td>typeid</td></tr><tr><td>bool</td><td>dynamic_cast</td><td>int</td><td>signed</td><td>typename</td></tr><tr><td>break</td><td>else</td><td>long</td><td>sizeof</td><td>union</td></tr><tr><td>case</td><td>enum</td><td>mutable</td><td>static</td><td>unsigned</td></tr><tr><td>catch</td><td>explicit</td><td>namespace</td><td>static_cast</td><td>using</td></tr><tr><td>char</td><td>export</td><td>new</td><td>struct</td><td>virtual</td></tr><tr><td>class</td><td>extern</td><td>operator</td><td>switch</td><td>void</td></tr><tr><td>const</td><td>false</td><td>private</td><td>template</td><td>volatile</td></tr><tr><td>const_cast</td><td>float</td><td>protected</td><td>this</td><td>wchar_t</td></tr><tr><td>continue</td><td>for</td><td>public</td><td>throw</td><td>while</td></tr><tr><td>default</td><td>friend</td><td>register</td><td>true</td><td></td></tr><tr><td>delete</td><td>goto</td><td>reinterpret_cast</td><td>try</td><td></td></tr></tbody></table><p><code>æç¤ºï¼šåœ¨ç»™å˜é‡æˆ–è€…å¸¸é‡èµ·åç§°æ—¶å€™ï¼Œä¸è¦ç”¨C++å¾—å…³é”®å­—ï¼Œå¦åˆ™ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚</code></p><h3 id="1-6-æ ‡è¯†ç¬¦å‘½åè§„åˆ™">1.6 æ ‡è¯†ç¬¦å‘½åè§„åˆ™</h3><p><strong>ä½œç”¨</strong>ï¼šC++è§„å®šç»™æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å¸¸é‡ï¼‰å‘½åæ—¶ï¼Œæœ‰ä¸€å¥—è‡ªå·±çš„è§„åˆ™</p><ul><li>æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯å…³é”®å­—</li><li>æ ‡è¯†ç¬¦åªèƒ½ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆ</li><li>ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»ä¸ºå­—æ¯æˆ–ä¸‹åˆ’çº¿</li><li>æ ‡è¯†ç¬¦ä¸­å­—æ¯åŒºåˆ†å¤§å°å†™</li></ul><blockquote><p>å»ºè®®ï¼šç»™æ ‡è¯†ç¬¦å‘½åæ—¶ï¼Œäº‰å–åšåˆ°è§åçŸ¥æ„çš„æ•ˆæœï¼Œæ–¹ä¾¿è‡ªå·±å’Œä»–äººçš„é˜…è¯»</p></blockquote><h2 id="2-æ•°æ®ç±»å‹">2 æ•°æ®ç±»å‹</h2><p>C++è§„å®šåœ¨åˆ›å»ºä¸€ä¸ªå˜é‡æˆ–è€…å¸¸é‡æ—¶ï¼Œå¿…é¡»è¦æŒ‡å®šå‡ºç›¸åº”çš„æ•°æ®ç±»å‹ï¼Œå¦åˆ™æ— æ³•ç»™å˜é‡åˆ†é…å†…å­˜</p><h3 id="2-1-æ•´å‹">2.1 æ•´å‹</h3><p><strong>ä½œç”¨</strong>ï¼šæ•´å‹å˜é‡è¡¨ç¤ºçš„æ˜¯==æ•´æ•°ç±»å‹==çš„æ•°æ®</p><p>C++ä¸­èƒ½å¤Ÿè¡¨ç¤ºæ•´å‹çš„ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œ<strong>åŒºåˆ«åœ¨äºæ‰€å å†…å­˜ç©ºé—´ä¸åŒ</strong>ï¼š</p><table><thead><tr><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>å ç”¨ç©ºé—´</strong></th><th>å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>short(çŸ­æ•´å‹)</td><td>2 å­—èŠ‚</td><td>(-2^15 ~ 2^15-1)</td></tr><tr><td>int(æ•´å‹)</td><td>4 å­—èŠ‚</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long(é•¿æ•´å½¢)</td><td>Windows ä¸º 4 å­—èŠ‚ï¼ŒLinux ä¸º 4 å­—èŠ‚(32 ä½)ï¼Œ8 å­—èŠ‚(64 ä½)</td><td>(-2^31 ~ 2^31-1)</td></tr><tr><td>long long(é•¿é•¿æ•´å½¢)</td><td>8 å­—èŠ‚</td><td>(-2^63 ~ 2^63-1)</td></tr></tbody></table><h3 id="2-2-sizeof-å…³é”®å­—">2.2 sizeof å…³é”®å­—</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨ sizeof å…³é”®å­—å¯ä»¥==ç»Ÿè®¡æ•°æ®ç±»å‹æ‰€å å†…å­˜å¤§å°==</p><p><strong>è¯­æ³•ï¼š</strong> <code>sizeof( æ•°æ®ç±»å‹ / å˜é‡)</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;short ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">short</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;int ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">int</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;long ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">long</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;long long ç±»å‹æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">long</span> <span class="type">long</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ•´å‹ç»“è®º</strong>ï¼š==short &lt; int &lt;= long &lt;= long long==</p></blockquote><h3 id="2-3-å®å‹ï¼ˆæµ®ç‚¹å‹ï¼‰">2.3 å®å‹ï¼ˆæµ®ç‚¹å‹ï¼‰</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äº==è¡¨ç¤ºå°æ•°==</p><p>æµ®ç‚¹å‹å˜é‡åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li>å•ç²¾åº¦ float</li><li>åŒç²¾åº¦ double</li></ol><p>ä¸¤è€…çš„<strong>åŒºåˆ«</strong>åœ¨äºè¡¨ç¤ºçš„æœ‰æ•ˆæ•°å­—èŒƒå›´ä¸åŒã€‚</p><table><thead><tr><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>å ç”¨ç©ºé—´</strong></th><th><strong>æœ‰æ•ˆæ•°å­—èŒƒå›´</strong></th></tr></thead><tbody><tr><td>float</td><td>4 å­—èŠ‚</td><td>7 ä½æœ‰æ•ˆæ•°å­—</td></tr><tr><td>double</td><td>8 å­—èŠ‚</td><td>15 ï½ 16 ä½æœ‰æ•ˆæ•°å­—</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> f1 = <span class="number">3.14f</span>;</span><br><span class="line"><span class="type">double</span> d1 = <span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; f1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; d1&lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;float  sizeof = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(f1) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;double sizeof = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(d1) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç§‘å­¦è®¡æ•°æ³•</span></span><br><span class="line"><span class="type">float</span> f2 = <span class="number">3e2</span>; <span class="comment">// 3 * 10 ^ 2</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;f2 = &quot;</span> &lt;&lt; f2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> f3 = <span class="number">3e-2</span>;  <span class="comment">// 3 * 0.1 ^ 2</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;f3 = &quot;</span> &lt;&lt; f3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-å­—ç¬¦å‹">2.4 å­—ç¬¦å‹</h3><p>**ä½œç”¨ï¼š**å­—ç¬¦å‹å˜é‡ç”¨äºæ˜¾ç¤ºå•ä¸ªå­—ç¬¦</p><p><strong>è¯­æ³•ï¼š</strong><code>char ch = 'a';</code></p><blockquote><p>æ³¨æ„ 1ï¼šåœ¨æ˜¾ç¤ºå­—ç¬¦å‹å˜é‡æ—¶ï¼Œç”¨å•å¼•å·å°†å­—ç¬¦æ‹¬èµ·æ¥ï¼Œä¸è¦ç”¨åŒå¼•å·</p></blockquote><blockquote><p>æ³¨æ„ 2ï¼šå•å¼•å·å†…åªèƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä¸å¯ä»¥æ˜¯å­—ç¬¦ä¸²</p></blockquote><ul><li>C å’Œ C++ä¸­å­—ç¬¦å‹å˜é‡åªå ç”¨==1 ä¸ªå­—èŠ‚==ã€‚</li><li>å­—ç¬¦å‹å˜é‡å¹¶ä¸æ˜¯æŠŠå­—ç¬¦æœ¬èº«æ”¾åˆ°å†…å­˜ä¸­å­˜å‚¨ï¼Œè€Œæ˜¯å°†å¯¹åº”çš„ ASCII ç¼–ç æ”¾å…¥åˆ°å­˜å‚¨å•å…ƒ</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ch = &quot;abcde&quot;; //é”™è¯¯ï¼Œä¸å¯ä»¥ç”¨åŒå¼•å·</span></span><br><span class="line"><span class="comment">//ch = &#x27;abcde&#x27;; //é”™è¯¯ï¼Œå•å¼•å·å†…åªèƒ½å¼•ç”¨ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (<span class="type">int</span>)ch &lt;&lt; endl;  <span class="comment">//æŸ¥çœ‹å­—ç¬¦aå¯¹åº”çš„ASCIIç </span></span><br><span class="line">ch = <span class="number">97</span>; <span class="comment">//å¯ä»¥ç›´æ¥ç”¨ASCIIç»™å­—ç¬¦å‹å˜é‡èµ‹å€¼</span></span><br><span class="line">cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ASCII ç è¡¨æ ¼ï¼š</p><table><thead><tr><th><strong>ASCII</strong>å€¼</th><th><strong>æ§åˆ¶å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th><th><strong>ASCII</strong>å€¼</th><th><strong>å­—ç¬¦</strong></th></tr></thead><tbody><tr><td>0</td><td>NUT</td><td>32</td><td>(space)</td><td>64</td><td>@</td><td>96</td><td>ã€</td></tr><tr><td>1</td><td>SOH</td><td>33</td><td>!</td><td>65</td><td>A</td><td>97</td><td>a</td></tr><tr><td>2</td><td>STX</td><td>34</td><td>&quot;</td><td>66</td><td>B</td><td>98</td><td>b</td></tr><tr><td>3</td><td>ETX</td><td>35</td><td>#</td><td>67</td><td>C</td><td>99</td><td>c</td></tr><tr><td>4</td><td>EOT</td><td>36</td><td>$</td><td>68</td><td>D</td><td>100</td><td>d</td></tr><tr><td>5</td><td>ENQ</td><td>37</td><td>%</td><td>69</td><td>E</td><td>101</td><td>e</td></tr><tr><td>6</td><td>ACK</td><td>38</td><td>&amp;</td><td>70</td><td>F</td><td>102</td><td>f</td></tr><tr><td>7</td><td>BEL</td><td>39</td><td>,</td><td>71</td><td>G</td><td>103</td><td>g</td></tr><tr><td>8</td><td>BS</td><td>40</td><td>(</td><td>72</td><td>H</td><td>104</td><td>h</td></tr><tr><td>9</td><td>HT</td><td>41</td><td>)</td><td>73</td><td>I</td><td>105</td><td>i</td></tr><tr><td>10</td><td>LF</td><td>42</td><td>*</td><td>74</td><td>J</td><td>106</td><td>j</td></tr><tr><td>11</td><td>VT</td><td>43</td><td>+</td><td>75</td><td>K</td><td>107</td><td>k</td></tr><tr><td>12</td><td>FF</td><td>44</td><td>,</td><td>76</td><td>L</td><td>108</td><td>l</td></tr><tr><td>13</td><td>CR</td><td>45</td><td>-</td><td>77</td><td>M</td><td>109</td><td>m</td></tr><tr><td>14</td><td>SO</td><td>46</td><td>.</td><td>78</td><td>N</td><td>110</td><td>n</td></tr><tr><td>15</td><td>SI</td><td>47</td><td>/</td><td>79</td><td>O</td><td>111</td><td>o</td></tr><tr><td>16</td><td>DLE</td><td>48</td><td>0</td><td>80</td><td>P</td><td>112</td><td>p</td></tr><tr><td>17</td><td>DCI</td><td>49</td><td>1</td><td>81</td><td>Q</td><td>113</td><td>q</td></tr><tr><td>18</td><td>DC2</td><td>50</td><td>2</td><td>82</td><td>R</td><td>114</td><td>r</td></tr><tr><td>19</td><td>DC3</td><td>51</td><td>3</td><td>83</td><td>S</td><td>115</td><td>s</td></tr><tr><td>20</td><td>DC4</td><td>52</td><td>4</td><td>84</td><td>T</td><td>116</td><td>t</td></tr><tr><td>21</td><td>NAK</td><td>53</td><td>5</td><td>85</td><td>U</td><td>117</td><td>u</td></tr><tr><td>22</td><td>SYN</td><td>54</td><td>6</td><td>86</td><td>V</td><td>118</td><td>v</td></tr><tr><td>23</td><td>TB</td><td>55</td><td>7</td><td>87</td><td>W</td><td>119</td><td>w</td></tr><tr><td>24</td><td>CAN</td><td>56</td><td>8</td><td>88</td><td>X</td><td>120</td><td>x</td></tr><tr><td>25</td><td>EM</td><td>57</td><td>9</td><td>89</td><td>Y</td><td>121</td><td>y</td></tr><tr><td>26</td><td>SUB</td><td>58</td><td>:</td><td>90</td><td>Z</td><td>122</td><td>z</td></tr><tr><td>27</td><td>ESC</td><td>59</td><td>;</td><td>91</td><td>[</td><td>123</td><td>{</td></tr><tr><td>28</td><td>FS</td><td>60</td><td>&lt;</td><td>92</td><td>/</td><td>124</td><td>|</td></tr><tr><td>29</td><td>GS</td><td>61</td><td>=</td><td>93</td><td>]</td><td>125</td><td>}</td></tr><tr><td>30</td><td>RS</td><td>62</td><td>&gt;</td><td>94</td><td>^</td><td>126</td><td>`</td></tr><tr><td>31</td><td>US</td><td>63</td><td>?</td><td>95</td><td>_</td><td>127</td><td>DEL</td></tr></tbody></table><p>ASCII ç å¤§è‡´ç”±ä»¥ä¸‹<strong>ä¸¤éƒ¨åˆ†ç»„</strong>æˆï¼š</p><ul><li>ASCII éæ‰“å°æ§åˆ¶å­—ç¬¦ï¼š ASCII è¡¨ä¸Šçš„æ•°å­— <strong>0-31</strong> åˆ†é…ç»™äº†æ§åˆ¶å­—ç¬¦ï¼Œç”¨äºæ§åˆ¶åƒæ‰“å°æœºç­‰ä¸€äº›å¤–å›´è®¾å¤‡ã€‚</li><li>ASCII æ‰“å°å­—ç¬¦ï¼šæ•°å­— <strong>32-126</strong> åˆ†é…ç»™äº†èƒ½åœ¨é”®ç›˜ä¸Šæ‰¾åˆ°çš„å­—ç¬¦ï¼Œå½“æŸ¥çœ‹æˆ–æ‰“å°æ–‡æ¡£æ—¶å°±ä¼šå‡ºç°ã€‚</li></ul><h3 id="2-5-è½¬ä¹‰å­—ç¬¦">2.5 è½¬ä¹‰å­—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºè¡¨ç¤ºä¸€äº›==ä¸èƒ½æ˜¾ç¤ºå‡ºæ¥çš„ ASCII å­—ç¬¦==</p><p>ç°é˜¶æ®µæˆ‘ä»¬å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰ï¼š<code> \n  \\  \t</code></p><table><thead><tr><th><strong>è½¬ä¹‰å­—ç¬¦</strong></th><th><strong>å«ä¹‰</strong></th><th><strong>ASCII</strong>ç å€¼ï¼ˆåè¿›åˆ¶ï¼‰</th></tr></thead><tbody><tr><td>\a</td><td>è­¦æŠ¥</td><td>007</td></tr><tr><td>\b</td><td>é€€æ ¼(BS) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°å‰ä¸€åˆ—</td><td>008</td></tr><tr><td>\f</td><td>æ¢é¡µ(FF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹é¡µå¼€å¤´</td><td>012</td></tr><tr><td><strong>\n</strong></td><td><strong>æ¢è¡Œ(LF) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´</strong></td><td><strong>010</strong></td></tr><tr><td>\r</td><td>å›è½¦(CR) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°æœ¬è¡Œå¼€å¤´</td><td>013</td></tr><tr><td><strong>\t</strong></td><td><strong>æ°´å¹³åˆ¶è¡¨(HT) ï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ª TAB ä½ç½®ï¼‰</strong></td><td><strong>009</strong></td></tr><tr><td>\v</td><td>å‚ç›´åˆ¶è¡¨(VT)</td><td>011</td></tr><tr><td><strong>\\</strong></td><td><strong>ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦&quot;&quot;</strong></td><td><strong>092</strong></td></tr><tr><td>â€™</td><td>ä»£è¡¨ä¸€ä¸ªå•å¼•å·ï¼ˆæ’‡å·ï¼‰å­—ç¬¦</td><td>039</td></tr><tr><td>&quot;</td><td>ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦</td><td>034</td></tr><tr><td>?</td><td>ä»£è¡¨ä¸€ä¸ªé—®å·</td><td>063</td></tr><tr><td>\0</td><td>æ•°å­— 0</td><td>000</td></tr><tr><td>\ddd</td><td>8 è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ï¼Œd èŒƒå›´ 0~7</td><td>3 ä½ 8 è¿›åˆ¶</td></tr><tr><td>\xhh</td><td>16 è¿›åˆ¶è½¬ä¹‰å­—ç¬¦ï¼Œh èŒƒå›´ 0~9ï¼Œa~fï¼ŒA~F</td><td>3 ä½ 16 è¿›åˆ¶</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\\&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\tHello&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-å­—ç¬¦ä¸²å‹">2.6 å­—ç¬¦ä¸²å‹</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºè¡¨ç¤ºä¸€ä¸²å­—ç¬¦</p><p><strong>ä¸¤ç§é£æ ¼</strong></p><ol><li><p><strong>C é£æ ¼å­—ç¬¦ä¸²</strong>ï¼š <code>char å˜é‡å[] = &quot;å­—ç¬¦ä¸²å€¼&quot;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> str1[] = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">cout &lt;&lt; str1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šC é£æ ¼çš„å­—ç¬¦ä¸²è¦ç”¨åŒå¼•å·æ‹¬èµ·æ¥</p></blockquote><ol><li><p><strong>C++é£æ ¼å­—ç¬¦ä¸²</strong>ï¼š <code>string  å˜é‡å = &quot;å­—ç¬¦ä¸²å€¼&quot;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šC++é£æ ¼å­—ç¬¦ä¸²ï¼Œéœ€è¦åŠ å…¥å¤´æ–‡ä»¶==#include&lt;string&gt;==</p></blockquote><h3 id="2-7-å¸ƒå°”ç±»å‹-bool">2.7 å¸ƒå°”ç±»å‹ bool</h3><p>**ä½œç”¨ï¼š**å¸ƒå°”æ•°æ®ç±»å‹ä»£è¡¨çœŸæˆ–å‡çš„å€¼</p><p>bool ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼š</p><ul><li>true â€” çœŸï¼ˆæœ¬è´¨æ˜¯ 1ï¼‰</li><li>false â€” å‡ï¼ˆæœ¬è´¨æ˜¯ 0ï¼‰</li></ul><p><strong>bool ç±»å‹å ==1 ä¸ªå­—èŠ‚==å¤§å°</strong></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">cout &lt;&lt; flag &lt;&lt; endl; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line">cout &lt;&lt; flag &lt;&lt; endl; <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;size of bool = &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">bool</span>) &lt;&lt; endl; <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-8-æ•°æ®çš„è¾“å…¥">2.8 æ•°æ®çš„è¾“å…¥</h3><p><strong>ä½œç”¨ï¼šç”¨äºä»é”®ç›˜è·å–æ•°æ®</strong></p><p>**å…³é”®å­—ï¼š**cin</p><p><strong>è¯­æ³•ï¼š</strong> <code>cin &gt;&gt; å˜é‡ </code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•´å‹è¾“å…¥</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æ•´å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; a;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ®ç‚¹å‹è¾“å…¥</span></span><br><span class="line"><span class="type">double</span> d = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥æµ®ç‚¹å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; d;</span><br><span class="line">cout &lt;&lt; d &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦å‹è¾“å…¥</span></span><br><span class="line"><span class="type">char</span> ch = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å­—ç¬¦å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; ch;</span><br><span class="line">cout &lt;&lt; ch &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²å‹è¾“å…¥</span></span><br><span class="line">string str;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å­—ç¬¦ä¸²å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; str;</span><br><span class="line">cout &lt;&lt; str &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸ƒå°”ç±»å‹è¾“å…¥</span></span><br><span class="line"><span class="type">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å¸ƒå°”å‹å˜é‡ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; flag;</span><br><span class="line">cout &lt;&lt; flag &lt;&lt; endl;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-è¿ç®—ç¬¦">3 è¿ç®—ç¬¦</h2><p>**ä½œç”¨ï¼š**ç”¨äºæ‰§è¡Œä»£ç çš„è¿ç®—</p><p>æœ¬ç« æˆ‘ä»¬ä¸»è¦è®²è§£ä»¥ä¸‹å‡ ç±»è¿ç®—ç¬¦ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦ç±»å‹</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>ç®—æœ¯è¿ç®—ç¬¦</td><td>ç”¨äºå¤„ç†å››åˆ™è¿ç®—</td></tr><tr><td>èµ‹å€¼è¿ç®—ç¬¦</td><td>ç”¨äºå°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡</td></tr><tr><td>æ¯”è¾ƒè¿ç®—ç¬¦</td><td>ç”¨äºè¡¨è¾¾å¼çš„æ¯”è¾ƒï¼Œå¹¶è¿”å›ä¸€ä¸ªçœŸå€¼æˆ–å‡å€¼</td></tr><tr><td>é€»è¾‘è¿ç®—ç¬¦</td><td>ç”¨äºæ ¹æ®è¡¨è¾¾å¼çš„å€¼è¿”å›çœŸå€¼æˆ–å‡å€¼</td></tr></tbody></table><h3 id="3-1-ç®—æœ¯è¿ç®—ç¬¦">3.1 ç®—æœ¯è¿ç®—ç¬¦</h3><p><strong>ä½œç”¨</strong>ï¼šç”¨äºå¤„ç†å››åˆ™è¿ç®—</p><p>ç®—æœ¯è¿ç®—ç¬¦åŒ…æ‹¬ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>+</td><td>æ­£å·</td><td>+3</td><td>3</td></tr><tr><td>-</td><td>è´Ÿå·</td><td>-3</td><td>-3</td></tr><tr><td>+</td><td>åŠ </td><td>10 + 5</td><td>15</td></tr><tr><td>-</td><td>å‡</td><td>10 - 5</td><td>5</td></tr><tr><td>*</td><td>ä¹˜</td><td>10 * 5</td><td>50</td></tr><tr><td>/</td><td>é™¤</td><td>10 / 5</td><td>2</td></tr><tr><td>%</td><td>å–æ¨¡(å–ä½™)</td><td>10 % 3</td><td>1</td></tr><tr><td>++</td><td>å‰ç½®é€’å¢</td><td>a=2; b=++a;</td><td>a=3; b=3;</td></tr><tr><td>++</td><td>åç½®é€’å¢</td><td>a=2; b=a++;</td><td>a=3; b=2;</td></tr><tr><td>â€“</td><td>å‰ç½®é€’å‡</td><td>a=2; b=â€“a;</td><td>a=1; b=1;</td></tr><tr><td>â€“</td><td>åç½®é€’å‡</td><td>a=2; b=aâ€“;</td><td>a=1; b=2;</td></tr></tbody></table><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ å‡ä¹˜é™¤</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a1 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b1 = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; a1 + b1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; a1 - b1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; a1 * b1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; a1 / b1 &lt;&lt; endl;  <span class="comment">//ä¸¤ä¸ªæ•´æ•°ç›¸é™¤ç»“æœä¾ç„¶æ˜¯æ•´æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a2 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b2 = <span class="number">20</span>;</span><br><span class="line">cout &lt;&lt; a2 / b2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a3 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b3 = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//cout &lt;&lt; a3 / b3 &lt;&lt; endl; //æŠ¥é”™ï¼Œé™¤æ•°ä¸å¯ä»¥ä¸º0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ä¸ªå°æ•°å¯ä»¥ç›¸é™¤</span></span><br><span class="line"><span class="type">double</span> d1 = <span class="number">0.5</span>;</span><br><span class="line"><span class="type">double</span> d2 = <span class="number">0.25</span>;</span><br><span class="line">cout &lt;&lt; d1 / d2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåœ¨é™¤æ³•è¿ç®—ä¸­ï¼Œé™¤æ•°ä¸èƒ½ä¸º 0</p></blockquote><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å–æ¨¡</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a1 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b1 = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="number">10</span> % <span class="number">3</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a2 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b2 = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; a2 % b2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a3 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b3 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; a3 % b3 &lt;&lt; endl; //å–æ¨¡è¿ç®—æ—¶ï¼Œé™¤æ•°ä¹Ÿä¸èƒ½ä¸º0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ä¸ªå°æ•°ä¸å¯ä»¥å–æ¨¡</span></span><br><span class="line"><span class="type">double</span> d1 = <span class="number">3.14</span>;</span><br><span class="line"><span class="type">double</span> d2 = <span class="number">1.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; d1 % d2 &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåªæœ‰æ•´å‹å˜é‡å¯ä»¥è¿›è¡Œå–æ¨¡è¿ç®—</p></blockquote><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€’å¢</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®é€’å¢</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">a++; <span class="comment">//ç­‰ä»·äºa = a + 1</span></span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl; <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‰ç½®é€’å¢</span></span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line">++b;</span><br><span class="line">cout &lt;&lt; b &lt;&lt; endl; <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒºåˆ«</span></span><br><span class="line"><span class="comment">//å‰ç½®é€’å¢å…ˆå¯¹å˜é‡è¿›è¡Œ++ï¼Œå†è®¡ç®—è¡¨è¾¾å¼</span></span><br><span class="line"><span class="type">int</span> a2 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b2 = ++a2 * <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; b2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç½®é€’å¢å…ˆè®¡ç®—è¡¨è¾¾å¼ï¼Œåå¯¹å˜é‡è¿›è¡Œ++</span></span><br><span class="line"><span class="type">int</span> a3 = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b3 = a3++ * <span class="number">10</span>;</span><br><span class="line">cout &lt;&lt; b3 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå‰ç½®é€’å¢å…ˆå¯¹å˜é‡è¿›è¡Œ++ï¼Œå†è®¡ç®—è¡¨è¾¾å¼ï¼Œåç½®é€’å¢ç›¸å</p></blockquote><h3 id="3-2-èµ‹å€¼è¿ç®—ç¬¦">3.2 èµ‹å€¼è¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºå°†è¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡</p><p>èµ‹å€¼è¿ç®—ç¬¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>=</td><td>èµ‹å€¼</td><td>a=2; b=3;</td><td>a=2; b=3;</td></tr><tr><td>+=</td><td>åŠ ç­‰äº</td><td>a=0; a+=2;</td><td>a=2;</td></tr><tr><td>-=</td><td>å‡ç­‰äº</td><td>a=5; a-=3;</td><td>a=2;</td></tr><tr><td>*=</td><td>ä¹˜ç­‰äº</td><td>a=2; a*=2;</td><td>a=4;</td></tr><tr><td>/=</td><td>é™¤ç­‰äº</td><td>a=4; a/=2;</td><td>a=2;</td></tr><tr><td>%=</td><td>æ¨¡ç­‰äº</td><td>a=3; a%2;</td><td>a=1;</td></tr></tbody></table><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// =</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">a = <span class="number">100</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// +=</span></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">a += <span class="number">2</span>; <span class="comment">// a = a + 2;</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -=</span></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">a -= <span class="number">2</span>; <span class="comment">// a = a - 2</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// *=</span></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">a *= <span class="number">2</span>; <span class="comment">// a = a * 2</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// /=</span></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">a /= <span class="number">2</span>;  <span class="comment">// a = a / 2;</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// %=</span></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">a %= <span class="number">2</span>;  <span class="comment">// a = a % 2;</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-æ¯”è¾ƒè¿ç®—ç¬¦">3.3 æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºè¡¨è¾¾å¼çš„æ¯”è¾ƒï¼Œå¹¶è¿”å›ä¸€ä¸ªçœŸå€¼æˆ–å‡å€¼</p><p>æ¯”è¾ƒè¿ç®—ç¬¦æœ‰ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>==</td><td>ç›¸ç­‰äº</td><td>4 == 3</td><td>0</td></tr><tr><td>!=</td><td>ä¸ç­‰äº</td><td>4 != 3</td><td>1</td></tr><tr><td>&lt;</td><td>å°äº</td><td>4 &lt; 3</td><td>0</td></tr><tr><td>&gt;</td><td>å¤§äº</td><td>4 &gt; 3</td><td>1</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td><td>4 &lt;= 3</td><td>0</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td><td>4 &gt;= 1</td><td>1</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a == b) &lt;&lt; endl; <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a != b) &lt;&lt; endl; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &gt; b) &lt;&lt; endl; <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &lt; b) &lt;&lt; endl; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &gt;= b) &lt;&lt; endl; <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &lt;= b) &lt;&lt; endl; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šC å’Œ C++ è¯­è¨€çš„æ¯”è¾ƒè¿ç®—ä¸­ï¼Œ ==â€œçœŸâ€ç”¨æ•°å­—â€œ1â€æ¥è¡¨ç¤ºï¼Œ â€œå‡â€ç”¨æ•°å­—â€œ0â€æ¥è¡¨ç¤ºã€‚==</p></blockquote><h3 id="3-4-é€»è¾‘è¿ç®—ç¬¦">3.4 é€»è¾‘è¿ç®—ç¬¦</h3><p>**ä½œç”¨ï¼š**ç”¨äºæ ¹æ®è¡¨è¾¾å¼çš„å€¼è¿”å›çœŸå€¼æˆ–å‡å€¼</p><p>é€»è¾‘è¿ç®—ç¬¦æœ‰ä»¥ä¸‹ç¬¦å·ï¼š</p><table><thead><tr><th><strong>è¿ç®—ç¬¦</strong></th><th><strong>æœ¯è¯­</strong></th><th><strong>ç¤ºä¾‹</strong></th><th><strong>ç»“æœ</strong></th></tr></thead><tbody><tr><td>!</td><td>é</td><td>!a</td><td>å¦‚æœ a ä¸ºå‡ï¼Œåˆ™!a ä¸ºçœŸï¼› å¦‚æœ a ä¸ºçœŸï¼Œåˆ™!a ä¸ºå‡ã€‚</td></tr><tr><td>&amp;&amp;</td><td>ä¸</td><td>a &amp;&amp; b</td><td>å¦‚æœ a å’Œ b éƒ½ä¸ºçœŸï¼Œåˆ™ç»“æœä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ã€‚</td></tr><tr><td>||</td><td>æˆ–</td><td>a || b</td><td>å¦‚æœ a å’Œ b æœ‰ä¸€ä¸ªä¸ºçœŸï¼Œåˆ™ç»“æœä¸ºçœŸï¼ŒäºŒè€…éƒ½ä¸ºå‡æ—¶ï¼Œç»“æœä¸ºå‡ã€‚</td></tr></tbody></table><p>**ç¤ºä¾‹ 1ï¼š**é€»è¾‘é</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€»è¾‘è¿ç®—ç¬¦  --- é</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; !a &lt;&lt; endl; <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; !!a &lt;&lt; endl; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š çœŸå˜å‡ï¼Œå‡å˜çœŸ</p></blockquote><p>**ç¤ºä¾‹ 2ï¼š**é€»è¾‘ä¸</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€»è¾‘è¿ç®—ç¬¦  --- ä¸</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a &amp;&amp; b) &lt;&lt; endl;<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šé€»è¾‘==ä¸==è¿ç®—ç¬¦æ€»ç»“ï¼š ==åŒçœŸä¸ºçœŸï¼Œå…¶ä½™ä¸ºå‡==</p></blockquote><p>**ç¤ºä¾‹ 3ï¼š**é€»è¾‘æˆ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€»è¾‘è¿ç®—ç¬¦  --- æˆ–</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line">b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; (a || b) &lt;&lt; endl;<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é€»è¾‘==æˆ–==è¿ç®—ç¬¦æ€»ç»“ï¼š ==åŒå‡ä¸ºå‡ï¼Œå…¶ä½™ä¸ºçœŸ==</p></blockquote><h2 id="4-ç¨‹åºæµç¨‹ç»“æ„">4 ç¨‹åºæµç¨‹ç»“æ„</h2><p>C/C++æ”¯æŒæœ€åŸºæœ¬çš„ä¸‰ç§ç¨‹åºè¿è¡Œç»“æ„ï¼š==é¡ºåºç»“æ„ã€é€‰æ‹©ç»“æ„ã€å¾ªç¯ç»“æ„==</p><ul><li>é¡ºåºç»“æ„ï¼šç¨‹åºæŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸å‘ç”Ÿè·³è½¬</li><li>é€‰æ‹©ç»“æ„ï¼šä¾æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œæœ‰é€‰æ‹©çš„æ‰§è¡Œç›¸åº”åŠŸèƒ½</li><li>å¾ªç¯ç»“æ„ï¼šä¾æ®æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå¾ªç¯å¤šæ¬¡æ‰§è¡ŒæŸæ®µä»£ç </li></ul><h3 id="4-1-é€‰æ‹©ç»“æ„">4.1 é€‰æ‹©ç»“æ„</h3><h4 id="4-1-1-if-è¯­å¥">4.1.1 if è¯­å¥</h4><p>**ä½œç”¨ï¼š**æ‰§è¡Œæ»¡è¶³æ¡ä»¶çš„è¯­å¥</p><p>if è¯­å¥çš„ä¸‰ç§å½¢å¼</p><ul><li><p>å•è¡Œæ ¼å¼ if è¯­å¥</p></li><li><p>å¤šè¡Œæ ¼å¼ if è¯­å¥</p></li><li><p>å¤šæ¡ä»¶çš„ if è¯­å¥</p></li></ul><ol><li><p>å•è¡Œæ ¼å¼ if è¯­å¥ï¼š<code>if(æ¡ä»¶)&#123; æ¡ä»¶æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;</code></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€‰æ‹©ç»“æ„-å•è¡Œifè¯­å¥</span></span><br><span class="line"><span class="comment">//è¾“å…¥ä¸€ä¸ªåˆ†æ•°ï¼Œå¦‚æœåˆ†æ•°å¤§äº600åˆ†ï¼Œè§†ä¸ºè€ƒä¸Šä¸€æœ¬å¤§å­¦ï¼Œå¹¶åœ¨å±å¹•ä¸Šæ‰“å°</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªåˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; score;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨è¾“å…¥çš„åˆ†æ•°ä¸ºï¼š &quot;</span> &lt;&lt; score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ifè¯­å¥</span></span><br><span class="line"><span class="comment">//æ³¨æ„äº‹é¡¹ï¼Œåœ¨ifåˆ¤æ–­è¯­å¥åé¢ï¼Œä¸è¦åŠ åˆ†å·</span></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">600</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦ï¼ï¼ï¼&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šif æ¡ä»¶è¡¨è¾¾å¼åä¸è¦åŠ åˆ†å·</p></blockquote><ol start="2"><li>å¤šè¡Œæ ¼å¼ if è¯­å¥ï¼š<code>if(æ¡ä»¶)&#123; æ¡ä»¶æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;else&#123; æ¡ä»¶ä¸æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;;</code></li></ol><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1541662519170.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cin &gt;&gt; score;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">600</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æœªè€ƒä¸Šä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å¤šæ¡ä»¶çš„ if è¯­å¥ï¼š<code>if(æ¡ä»¶1)&#123; æ¡ä»¶1æ»¡è¶³æ‰§è¡Œçš„è¯­å¥ &#125;else if(æ¡ä»¶2)&#123;æ¡ä»¶2æ»¡è¶³æ‰§è¡Œçš„è¯­å¥&#125;... else&#123; éƒ½ä¸æ»¡è¶³æ‰§è¡Œçš„è¯­å¥&#125;</code></li></ol><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1541662566808.png" alt="img"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cin &gt;&gt; score;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">600</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">500</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†äºŒæœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">400</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸‰æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æœªè€ƒä¸Šæœ¬ç§‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åµŒå¥— if è¯­å¥</strong>ï¼šåœ¨ if è¯­å¥ä¸­ï¼Œå¯ä»¥åµŒå¥—ä½¿ç”¨ if è¯­å¥ï¼Œè¾¾åˆ°æ›´ç²¾ç¡®çš„æ¡ä»¶åˆ¤æ–­</p><p>æ¡ˆä¾‹éœ€æ±‚ï¼š</p><ul><li>æç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªé«˜è€ƒè€ƒè¯•åˆ†æ•°ï¼Œæ ¹æ®åˆ†æ•°åšå¦‚ä¸‹åˆ¤æ–­</li><li>åˆ†æ•°å¦‚æœå¤§äº 600 åˆ†è§†ä¸ºè€ƒä¸Šä¸€æœ¬ï¼Œå¤§äº 500 åˆ†è€ƒä¸ŠäºŒæœ¬ï¼Œå¤§äº 400 è€ƒä¸Šä¸‰æœ¬ï¼Œå…¶ä½™è§†ä¸ºæœªè€ƒä¸Šæœ¬ç§‘ï¼›</li><li>åœ¨ä¸€æœ¬åˆ†æ•°ä¸­ï¼Œå¦‚æœå¤§äº 700 åˆ†ï¼Œè€ƒå…¥åŒ—å¤§ï¼Œå¤§äº 650 åˆ†ï¼Œè€ƒå…¥æ¸…åï¼Œå¤§äº 600 è€ƒå…¥äººå¤§ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è€ƒè¯•åˆ†æ•°ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cin &gt;&gt; score;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">600</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸€æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">700</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†åŒ—å¤§&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">650</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†æ¸…å&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†äººå¤§&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">500</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†äºŒæœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (score &gt; <span class="number">400</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘è€ƒä¸Šäº†ä¸‰æœ¬å¤§å­¦&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æˆ‘æœªè€ƒä¸Šæœ¬ç§‘&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼š</strong> ä¸‰åªå°çŒªç§°ä½“é‡</p><p>æœ‰ä¸‰åªå°çŒª ABCï¼Œè¯·åˆ†åˆ«è¾“å…¥ä¸‰åªå°çŒªçš„ä½“é‡ï¼Œå¹¶ä¸”åˆ¤æ–­å“ªåªå°çŒªæœ€é‡ï¼Ÿ<img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/%E4%B8%89%E5%8F%AA%E5%B0%8F%E7%8C%AA.jpg" alt="ä¸‰åªå°çŒª"></p><h4 id="4-1-2-ä¸‰ç›®è¿ç®—ç¬¦">4.1.2 ä¸‰ç›®è¿ç®—ç¬¦</h4><p><strong>ä½œç”¨ï¼š</strong> é€šè¿‡ä¸‰ç›®è¿ç®—ç¬¦å®ç°ç®€å•çš„åˆ¤æ–­</p><p><strong>è¯­æ³•ï¼š</strong><code>è¡¨è¾¾å¼1 ? è¡¨è¾¾å¼2 ï¼šè¡¨è¾¾å¼3</code></p><p><strong>è§£é‡Šï¼š</strong></p><p>å¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºçœŸï¼Œæ‰§è¡Œè¡¨è¾¾å¼ 2ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼ 2 çš„ç»“æœï¼›</p><p>å¦‚æœè¡¨è¾¾å¼ 1 çš„å€¼ä¸ºå‡ï¼Œæ‰§è¡Œè¡¨è¾¾å¼ 3ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼ 3 çš„ç»“æœã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">c = a &gt; b ? a : b;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//C++ä¸­ä¸‰ç›®è¿ç®—ç¬¦è¿”å›çš„æ˜¯å˜é‡,å¯ä»¥ç»§ç»­èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">(a &gt; b ? a : b) = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;c = &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå’Œ if è¯­å¥æ¯”è¾ƒï¼Œä¸‰ç›®è¿ç®—ç¬¦ä¼˜ç‚¹æ˜¯çŸ­å°æ•´æ´ï¼Œç¼ºç‚¹æ˜¯å¦‚æœç”¨åµŒå¥—ï¼Œç»“æ„ä¸æ¸…æ™°</p></blockquote><h4 id="4-1-3-switch-è¯­å¥">4.1.3 switch è¯­å¥</h4><p>**ä½œç”¨ï¼š**æ‰§è¡Œå¤šæ¡ä»¶åˆ†æ”¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(è¡¨è¾¾å¼)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> ç»“æœ<span class="number">1</span>ï¼šæ‰§è¡Œè¯­å¥;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> ç»“æœ<span class="number">2</span>ï¼šæ‰§è¡Œè¯­å¥;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:æ‰§è¡Œè¯­å¥;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯·ç»™ç”µå½±è¯„åˆ†</span></span><br><span class="line"><span class="comment">//10 ~ 9   ç»å…¸</span></span><br><span class="line"><span class="comment">// 8 ~ 7   éå¸¸å¥½</span></span><br><span class="line"><span class="comment">// 6 ~ 5   ä¸€èˆ¬</span></span><br><span class="line"><span class="comment">// 5åˆ†ä»¥ä¸‹ çƒ‚ç‰‡</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·ç»™ç”µå½±æ‰“åˆ†&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; score;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (score)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç»å…¸&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;éå¸¸å¥½&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸€èˆ¬&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;çƒ‚ç‰‡&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ 1ï¼šswitch è¯­å¥ä¸­è¡¨è¾¾å¼ç±»å‹åªèƒ½æ˜¯æ•´å‹æˆ–è€…å­—ç¬¦å‹</p></blockquote><blockquote><p>æ³¨æ„ 2ï¼šcase é‡Œå¦‚æœæ²¡æœ‰ breakï¼Œé‚£ä¹ˆç¨‹åºä¼šä¸€ç›´å‘ä¸‹æ‰§è¡Œ</p></blockquote><blockquote><p>æ€»ç»“ï¼šä¸ if è¯­å¥æ¯”ï¼Œå¯¹äºå¤šæ¡ä»¶åˆ¤æ–­æ—¶ï¼Œswitch çš„ç»“æ„æ¸…æ™°ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œç¼ºç‚¹æ˜¯ switch ä¸å¯ä»¥åˆ¤æ–­åŒºé—´</p></blockquote><h3 id="4-2-å¾ªç¯ç»“æ„">4.2 å¾ªç¯ç»“æ„</h3><h4 id="4-2-1-while-å¾ªç¯è¯­å¥">4.2.1 while å¾ªç¯è¯­å¥</h4><p>**ä½œç”¨ï¼š**æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong><code> while(å¾ªç¯æ¡ä»¶)&#123; å¾ªç¯è¯­å¥ &#125;</code></p><p><strong>è§£é‡Šï¼š</strong>==åªè¦å¾ªç¯æ¡ä»¶çš„ç»“æœä¸ºçœŸï¼Œå°±æ‰§è¡Œå¾ªç¯è¯­å¥==</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1541668640382.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (num &lt; <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num = &quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨æ‰§è¡Œå¾ªç¯è¯­å¥æ—¶å€™ï¼Œç¨‹åºå¿…é¡»æä¾›è·³å‡ºå¾ªç¯çš„å‡ºå£ï¼Œå¦åˆ™å‡ºç°æ­»å¾ªç¯</p></blockquote><p><strong>while å¾ªç¯ç»ƒä¹ æ¡ˆä¾‹ï¼š</strong>==çŒœæ•°å­—==</p><p>**æ¡ˆä¾‹æè¿°ï¼š**ç³»ç»Ÿéšæœºç”Ÿæˆä¸€ä¸ª 1 åˆ° 100 ä¹‹é—´çš„æ•°å­—ï¼Œç©å®¶è¿›è¡ŒçŒœæµ‹ï¼Œå¦‚æœçŒœé”™ï¼Œæç¤ºç©å®¶æ•°å­—è¿‡å¤§æˆ–è¿‡å°ï¼Œå¦‚æœçŒœå¯¹æ­å–œç©å®¶èƒœåˆ©ï¼Œå¹¶ä¸”é€€å‡ºæ¸¸æˆã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/%E7%8C%9C%E6%95%B0%E5%AD%97.jpg" alt="çŒœæ•°å­—"></p><h4 id="4-2-2-doâ€¦while-å¾ªç¯è¯­å¥">4.2.2 doâ€¦while å¾ªç¯è¯­å¥</h4><p><strong>ä½œç”¨ï¼š</strong> æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong> <code>do&#123; å¾ªç¯è¯­å¥ &#125; while(å¾ªç¯æ¡ä»¶);</code></p><p>**æ³¨æ„ï¼š**ä¸ while çš„åŒºåˆ«åœ¨äº==doâ€¦while ä¼šå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯è¯­å¥==ï¼Œå†åˆ¤æ–­å¾ªç¯æ¡ä»¶</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/clip_image002-1541671163478.png" alt="img"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">num++;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">while</span> (num &lt; <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šä¸ while å¾ªç¯åŒºåˆ«åœ¨äºï¼Œdoâ€¦while å…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯è¯­å¥ï¼Œå†åˆ¤æ–­å¾ªç¯æ¡ä»¶</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼šæ°´ä»™èŠ±æ•°</strong></p><p>**æ¡ˆä¾‹æè¿°ï¼š**æ°´ä»™èŠ±æ•°æ˜¯æŒ‡ä¸€ä¸ª 3 ä½æ•°ï¼Œå®ƒçš„æ¯ä¸ªä½ä¸Šçš„æ•°å­—çš„ 3 æ¬¡å¹‚ä¹‹å’Œç­‰äºå®ƒæœ¬èº«</p><p>ä¾‹å¦‚ï¼š1^3 + 5^3+ 3^3 = 153</p><p>è¯·åˆ©ç”¨ doâ€¦while è¯­å¥ï¼Œæ±‚å‡ºæ‰€æœ‰ 3 ä½æ•°ä¸­çš„æ°´ä»™èŠ±æ•°</p><h4 id="4-2-3-for-å¾ªç¯è¯­å¥">4.2.3 for å¾ªç¯è¯­å¥</h4><p><strong>ä½œç”¨ï¼š</strong> æ»¡è¶³å¾ªç¯æ¡ä»¶ï¼Œæ‰§è¡Œå¾ªç¯è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong><code> for(èµ·å§‹è¡¨è¾¾å¼;æ¡ä»¶è¡¨è¾¾å¼;æœ«å°¾å¾ªç¯ä½“) &#123; å¾ªç¯è¯­å¥; &#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¯¦è§£ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541673704101.png" alt="1541673704101"></p><blockquote><p>æ³¨æ„ï¼šfor å¾ªç¯ä¸­çš„è¡¨è¾¾å¼ï¼Œè¦ç”¨åˆ†å·è¿›è¡Œåˆ†éš”</p></blockquote><blockquote><p>æ€»ç»“ï¼šwhile , doâ€¦while, for éƒ½æ˜¯å¼€å‘ä¸­å¸¸ç”¨çš„å¾ªç¯è¯­å¥ï¼Œfor å¾ªç¯ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼Œæ¯”è¾ƒå¸¸ç”¨</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹ï¼šæ•²æ¡Œå­</strong></p><p>æ¡ˆä¾‹æè¿°ï¼šä» 1 å¼€å§‹æ•°åˆ°æ•°å­— 100ï¼Œ å¦‚æœæ•°å­—ä¸ªä½å«æœ‰ 7ï¼Œæˆ–è€…æ•°å­—åä½å«æœ‰ 7ï¼Œæˆ–è€…è¯¥æ•°å­—æ˜¯ 7 çš„å€æ•°ï¼Œæˆ‘ä»¬æ‰“å°æ•²æ¡Œå­ï¼Œå…¶ä½™æ•°å­—ç›´æ¥æ‰“å°è¾“å‡ºã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/timg.gif" alt="timg"></p><h4 id="4-2-4-åµŒå¥—å¾ªç¯">4.2.4 åµŒå¥—å¾ªç¯</h4><p><strong>ä½œç”¨ï¼š</strong> åœ¨å¾ªç¯ä½“ä¸­å†åµŒå¥—ä¸€å±‚å¾ªç¯ï¼Œè§£å†³ä¸€äº›å®é™…é—®é¢˜</p><p>ä¾‹å¦‚æˆ‘ä»¬æƒ³åœ¨å±å¹•ä¸­æ‰“å°å¦‚ä¸‹å›¾ç‰‡ï¼Œå°±éœ€è¦åˆ©ç”¨åµŒå¥—å¾ªç¯</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541676003486.png" alt="1541676003486"></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤–å±‚å¾ªç¯æ‰§è¡Œ1æ¬¡ï¼Œå†…å±‚å¾ªç¯æ‰§è¡Œ1è½®</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;*&quot;</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**ç»ƒä¹ æ¡ˆä¾‹ï¼š**ä¹˜æ³•å£è¯€è¡¨</p><p>æ¡ˆä¾‹æè¿°ï¼šåˆ©ç”¨åµŒå¥—å¾ªç¯ï¼Œå®ç°ä¹ä¹ä¹˜æ³•è¡¨</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/0006018857256120_b.jpg" alt="0006018857256120_b"></p><h3 id="4-3-è·³è½¬è¯­å¥">4.3 è·³è½¬è¯­å¥</h3><h4 id="4-3-1-break-è¯­å¥">4.3.1 break è¯­å¥</h4><p><strong>ä½œç”¨:</strong> ç”¨äºè·³å‡º==é€‰æ‹©ç»“æ„==æˆ–è€…==å¾ªç¯ç»“æ„==</p><p>break ä½¿ç”¨çš„æ—¶æœºï¼š</p><ul><li>å‡ºç°åœ¨ switch æ¡ä»¶è¯­å¥ä¸­ï¼Œä½œç”¨æ˜¯ç»ˆæ­¢ case å¹¶è·³å‡º switch</li><li>å‡ºç°åœ¨å¾ªç¯è¯­å¥ä¸­ï¼Œä½œç”¨æ˜¯è·³å‡ºå½“å‰çš„å¾ªç¯è¯­å¥</li><li>å‡ºç°åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œè·³å‡ºæœ€è¿‘çš„å†…å±‚å¾ªç¯è¯­å¥</li></ul><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//1ã€åœ¨switch è¯­å¥ä¸­ä½¿ç”¨break</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¯·é€‰æ‹©æ‚¨æŒ‘æˆ˜å‰¯æœ¬çš„éš¾åº¦ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1ã€æ™®é€š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2ã€ä¸­ç­‰&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;3ã€å›°éš¾&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cin &gt;&gt; num;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (num)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯æ™®é€šéš¾åº¦&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯ä¸­ç­‰éš¾åº¦&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ‚¨é€‰æ‹©çš„æ˜¯å›°éš¾éš¾åº¦&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//2ã€åœ¨å¾ªç¯è¯­å¥ä¸­ç”¨break</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (i == <span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>; <span class="comment">//è·³å‡ºå¾ªç¯è¯­å¥</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//åœ¨åµŒå¥—å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨breakï¼Œé€€å‡ºå†…å±‚å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (j == <span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;*&quot;</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-3-2-continue-è¯­å¥">4.3.2 continue è¯­å¥</h4><p>**ä½œç”¨ï¼š**åœ¨==å¾ªç¯è¯­å¥==ä¸­ï¼Œè·³è¿‡æœ¬æ¬¡å¾ªç¯ä¸­ä½™ä¸‹å°šæœªæ‰§è¡Œçš„è¯­å¥ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šcontinue å¹¶æ²¡æœ‰ä½¿æ•´ä¸ªå¾ªç¯ç»ˆæ­¢ï¼Œè€Œ break ä¼šè·³å‡ºå¾ªç¯</p></blockquote><h4 id="4-3-3-goto-è¯­å¥">4.3.3 goto è¯­å¥</h4><p>**ä½œç”¨ï¼š**å¯ä»¥æ— æ¡ä»¶è·³è½¬è¯­å¥</p><p><strong>è¯­æ³•ï¼š</strong> <code>goto æ ‡è®°;</code></p><p>**è§£é‡Šï¼š**å¦‚æœæ ‡è®°çš„åç§°å­˜åœ¨ï¼Œæ‰§è¡Œåˆ° goto è¯­å¥æ—¶ï¼Œä¼šè·³è½¬åˆ°æ ‡è®°çš„ä½ç½®</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">goto</span> FLAG;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;3&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">FLAG:</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;5&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨ç¨‹åºä¸­ä¸å»ºè®®ä½¿ç”¨ goto è¯­å¥ï¼Œä»¥å…é€ æˆç¨‹åºæµç¨‹æ··ä¹±</p></blockquote><h2 id="5-æ•°ç»„">5 æ•°ç»„</h2><h3 id="5-1-æ¦‚è¿°">5.1 æ¦‚è¿°</h3><p>æ‰€è°“æ•°ç»„ï¼Œå°±æ˜¯ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢å­˜æ”¾äº†ç›¸åŒç±»å‹çš„æ•°æ®å…ƒç´ </p><p>**ç‰¹ç‚¹ 1ï¼š**æ•°ç»„ä¸­çš„æ¯ä¸ª==æ•°æ®å…ƒç´ éƒ½æ˜¯ç›¸åŒçš„æ•°æ®ç±»å‹==</p><p>**ç‰¹ç‚¹ 2ï¼š**æ•°ç»„æ˜¯ç”±==è¿ç»­çš„å†…å­˜==ä½ç½®ç»„æˆçš„</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541748375356.png" alt="1541748375356"></p><h3 id="5-2-ä¸€ç»´æ•°ç»„">5.2 ä¸€ç»´æ•°ç»„</h3><h4 id="5-2-1-ä¸€ç»´æ•°ç»„å®šä¹‰æ–¹å¼">5.2.1 ä¸€ç»´æ•°ç»„å®šä¹‰æ–¹å¼</h4><p>ä¸€ç»´æ•°ç»„å®šä¹‰çš„ä¸‰ç§æ–¹å¼ï¼š</p><ol><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ æ•°ç»„é•¿åº¦ ];</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ æ•°ç»„é•¿åº¦ ] = &#123; å€¼1ï¼Œå€¼2 ...&#125;;</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ ] = &#123; å€¼1ï¼Œå€¼2 ...&#125;;</code></li></ol><p>ç¤ºä¾‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æ–¹å¼1</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[å…ƒç´ ä¸ªæ•°];</span></span><br><span class="line"><span class="type">int</span> score[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨ä¸‹æ ‡èµ‹å€¼</span></span><br><span class="line">score[<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line">score[<span class="number">1</span>] = <span class="number">99</span>;</span><br><span class="line">score[<span class="number">2</span>] = <span class="number">85</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨ä¸‹æ ‡è¾“å‡º</span></span><br><span class="line">cout &lt;&lt; score[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; score[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; score[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§å®šä¹‰æ–¹å¼</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[å…ƒç´ ä¸ªæ•°] =  &#123;å€¼1ï¼Œå€¼2 ï¼Œå€¼3 ...&#125;;</span></span><br><span class="line"><span class="comment">//å¦‚æœ&#123;&#125;å†…ä¸è¶³10ä¸ªæ•°æ®ï¼Œå‰©ä½™æ•°æ®ç”¨0è¡¥å…¨</span></span><br><span class="line"><span class="type">int</span> score2[<span class="number">10</span>] = &#123; <span class="number">100</span>, <span class="number">90</span>,<span class="number">80</span>,<span class="number">70</span>,<span class="number">60</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€ä¸ªè¾“å‡º</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; score2[0] &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; score2[1] &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸€ä¸ªä¸€ä¸ªè¾“å‡ºå¤ªéº»çƒ¦ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨å¾ªç¯è¿›è¡Œè¾“å‡º</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; score2[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æ–¹å¼3</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[] =  &#123;å€¼1ï¼Œå€¼2 ï¼Œå€¼3 ...&#125;;</span></span><br><span class="line"><span class="type">int</span> score3[] = &#123; <span class="number">100</span>,<span class="number">90</span>,<span class="number">80</span>,<span class="number">70</span>,<span class="number">60</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; score3[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ 1ï¼šæ•°ç»„åçš„å‘½åè§„èŒƒä¸å˜é‡åå‘½åè§„èŒƒä¸€è‡´ï¼Œä¸è¦å’Œå˜é‡é‡å</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šæ•°ç»„ä¸­ä¸‹æ ‡æ˜¯ä» 0 å¼€å§‹ç´¢å¼•</p></blockquote><h4 id="5-2-2-ä¸€ç»´æ•°ç»„æ•°ç»„å">5.2.2 ä¸€ç»´æ•°ç»„æ•°ç»„å</h4><p>ä¸€ç»´æ•°ç»„åç§°çš„<strong>ç”¨é€”</strong>ï¼š</p><ol><li>å¯ä»¥ç»Ÿè®¡æ•´ä¸ªæ•°ç»„åœ¨å†…å­˜ä¸­çš„é•¿åº¦</li><li>å¯ä»¥è·å–æ•°ç»„åœ¨å†…å­˜ä¸­çš„é¦–åœ°å€</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°ç»„åç”¨é€”</span></span><br><span class="line"><span class="comment">//1ã€å¯ä»¥è·å–æ•´ä¸ªæ•°ç»„å ç”¨å†…å­˜ç©ºé—´å¤§å°</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•´ä¸ªæ•°ç»„æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ¯ä¸ªå…ƒç´ æ‰€å å†…å­˜ç©ºé—´ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸ºï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€å¯ä»¥é€šè¿‡æ•°ç»„åè·å–åˆ°æ•°ç»„é¦–åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•°ç»„é¦–åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)arr &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•°ç»„ä¸­ç¬¬äºŒä¸ªå…ƒç´ åœ°å€ä¸ºï¼š &quot;</span> &lt;&lt; (<span class="type">int</span>)&amp;arr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//arr = 100; é”™è¯¯ï¼Œæ•°ç»„åæ˜¯å¸¸é‡ï¼Œå› æ­¤ä¸å¯ä»¥èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæ•°ç»„åæ˜¯å¸¸é‡ï¼Œä¸å¯ä»¥èµ‹å€¼</p></blockquote><blockquote><p>æ€»ç»“ 1ï¼šç›´æ¥æ‰“å°æ•°ç»„åï¼Œå¯ä»¥æŸ¥çœ‹æ•°ç»„æ‰€å å†…å­˜çš„é¦–åœ°å€</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šå¯¹æ•°ç»„åè¿›è¡Œ sizeofï¼Œå¯ä»¥è·å–æ•´ä¸ªæ•°ç»„å å†…å­˜ç©ºé—´çš„å¤§å°</p></blockquote><p><strong>ç»ƒä¹ æ¡ˆä¾‹ 1</strong>ï¼šäº”åªå°çŒªç§°ä½“é‡</p><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è®°å½•äº†äº”åªå°çŒªçš„ä½“é‡ï¼Œå¦‚ï¼šint arr[5] = {300,350,200,400,250};</p><p>æ‰¾å‡ºå¹¶æ‰“å°æœ€é‡çš„å°çŒªä½“é‡ã€‚</p><p>**ç»ƒä¹ æ¡ˆä¾‹ 2ï¼š**æ•°ç»„å…ƒç´ é€†ç½®</p><p>**æ¡ˆä¾‹æè¿°ï¼š**è¯·å£°æ˜ä¸€ä¸ª 5 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå¹¶ä¸”å°†å…ƒç´ é€†ç½®.</p><p>(å¦‚åŸæ•°ç»„å…ƒç´ ä¸ºï¼š1,3,2,5,4;é€†ç½®åè¾“å‡ºç»“æœä¸º:4,5,2,3,1);</p><h4 id="5-2-3-å†’æ³¡æ’åº">5.2.3 å†’æ³¡æ’åº</h4><p><strong>ä½œç”¨ï¼š</strong> æœ€å¸¸ç”¨çš„æ’åºç®—æ³•ï¼Œå¯¹æ•°ç»„å†…å…ƒç´ è¿›è¡Œæ’åº</p><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ€å¤§å€¼ã€‚</li><li>é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œæ¯æ¬¡æ¯”è¾ƒæ¬¡æ•°-1ï¼Œç›´åˆ°ä¸éœ€è¦æ¯”è¾ƒ</li></ol><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541905327273.png" alt="1541905327273"></p><p><strong>ç¤ºä¾‹ï¼š</strong> å°†æ•°ç»„ { 4,2,8,0,5,7,1,3,9 } è¿›è¡Œå‡åºæ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[<span class="number">9</span>] = &#123; <span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">9</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span> - <span class="number">1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span> - <span class="number">1</span> - i; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> temp = arr[j];</span><br><span class="line">arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-3-äºŒç»´æ•°ç»„">5.3 äºŒç»´æ•°ç»„</h3><p>äºŒç»´æ•°ç»„å°±æ˜¯åœ¨ä¸€ç»´æ•°ç»„ä¸Šï¼Œå¤šåŠ ä¸€ä¸ªç»´åº¦ã€‚</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/1541905559138.png" alt="1541905559138"></p><h4 id="5-3-1-äºŒç»´æ•°ç»„å®šä¹‰æ–¹å¼">5.3.1 äºŒç»´æ•°ç»„å®šä¹‰æ–¹å¼</h4><p>äºŒç»´æ•°ç»„å®šä¹‰çš„å››ç§æ–¹å¼ï¼š</p><ol><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ];</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ] = &#123; &#123;æ•°æ®1ï¼Œæ•°æ®2 &#125; ï¼Œ&#123;æ•°æ®3ï¼Œæ•°æ®4 &#125; &#125;;</code></li><li><code>æ•°æ®ç±»å‹  æ•°ç»„å[ è¡Œæ•° ][ åˆ—æ•° ] = &#123; æ•°æ®1ï¼Œæ•°æ®2ï¼Œæ•°æ®3ï¼Œæ•°æ®4&#125;;</code></li><li><code> æ•°æ®ç±»å‹  æ•°ç»„å[  ][ åˆ—æ•° ] = &#123; æ•°æ®1ï¼Œæ•°æ®2ï¼Œæ•°æ®3ï¼Œæ•°æ®4&#125;;</code></li></ol><blockquote><p>å»ºè®®ï¼šä»¥ä¸Š 4 ç§å®šä¹‰æ–¹å¼ï¼Œåˆ©ç”¨==ç¬¬äºŒç§æ›´åŠ ç›´è§‚ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§==</p></blockquote><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼1</span></span><br><span class="line"><span class="comment">//æ•°ç»„ç±»å‹ æ•°ç»„å [è¡Œæ•°][åˆ—æ•°]</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">arr[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">arr[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">5</span>;</span><br><span class="line">arr[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼2</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[è¡Œæ•°][åˆ—æ•°] = &#123; &#123;æ•°æ®1ï¼Œæ•°æ®2 &#125; ï¼Œ&#123;æ•°æ®3ï¼Œæ•°æ®4 &#125; &#125;;</span></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">2</span>][<span class="number">3</span>] =</span><br><span class="line">&#123;</span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼3</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[è¡Œæ•°][åˆ—æ•°] = &#123; æ•°æ®1ï¼Œæ•°æ®2 ,æ•°æ®3ï¼Œæ•°æ®4  &#125;;</span></span><br><span class="line"><span class="type">int</span> arr3[<span class="number">2</span>][<span class="number">3</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼4</span></span><br><span class="line"><span class="comment">//æ•°æ®ç±»å‹ æ•°ç»„å[][åˆ—æ•°] = &#123; æ•°æ®1ï¼Œæ•°æ®2 ,æ•°æ®3ï¼Œæ•°æ®4  &#125;;</span></span><br><span class="line"><span class="type">int</span> arr4[][<span class="number">3</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šåœ¨å®šä¹‰äºŒç»´æ•°ç»„æ—¶ï¼Œå¦‚æœåˆå§‹åŒ–äº†æ•°æ®ï¼Œå¯ä»¥çœç•¥è¡Œæ•°</p></blockquote><h4 id="5-3-2-äºŒç»´æ•°ç»„æ•°ç»„å">5.3.2 äºŒç»´æ•°ç»„æ•°ç»„å</h4><ul><li>æŸ¥çœ‹äºŒç»´æ•°ç»„æ‰€å å†…å­˜ç©ºé—´</li><li>è·å–äºŒç»´æ•°ç»„é¦–åœ°å€</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒç»´æ•°ç»„æ•°ç»„å</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">2</span>][<span class="number">3</span>] =</span><br><span class="line">&#123;</span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„å¤§å°ï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„ä¸€è¡Œå¤§å°ï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„å…ƒç´ å¤§å°ï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>][<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„è¡Œæ•°ï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„åˆ—æ•°ï¼š &quot;</span> &lt;&lt; <span class="built_in">sizeof</span>(arr[<span class="number">0</span>]) / <span class="built_in">sizeof</span>(arr[<span class="number">0</span>][<span class="number">0</span>]) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ°å€</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„é¦–åœ°å€ï¼š&quot;</span> &lt;&lt; arr &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œåœ°å€ï¼š&quot;</span> &lt;&lt; arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„ç¬¬äºŒè¡Œåœ°å€ï¼š&quot;</span> &lt;&lt; arr[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ åœ°å€ï¼š&quot;</span> &lt;&lt; &amp;arr[<span class="number">0</span>][<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äºŒç»´æ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ åœ°å€ï¼š&quot;</span> &lt;&lt; &amp;arr[<span class="number">0</span>][<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ 1ï¼šäºŒç»´æ•°ç»„åå°±æ˜¯è¿™ä¸ªæ•°ç»„çš„é¦–åœ°å€</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šå¯¹äºŒç»´æ•°ç»„åè¿›è¡Œ sizeof æ—¶ï¼Œå¯ä»¥è·å–æ•´ä¸ªäºŒç»´æ•°ç»„å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°</p></blockquote><h4 id="5-3-3-äºŒç»´æ•°ç»„åº”ç”¨æ¡ˆä¾‹"><strong>5.3.3 äºŒç»´æ•°ç»„åº”ç”¨æ¡ˆä¾‹</strong></h4><p><strong>è€ƒè¯•æˆç»©ç»Ÿè®¡ï¼š</strong></p><p>æ¡ˆä¾‹æè¿°ï¼šæœ‰ä¸‰ååŒå­¦ï¼ˆå¼ ä¸‰ï¼Œæå››ï¼Œç‹äº”ï¼‰ï¼Œåœ¨ä¸€æ¬¡è€ƒè¯•ä¸­çš„æˆç»©åˆ†åˆ«å¦‚ä¸‹è¡¨ï¼Œ<strong>è¯·åˆ†åˆ«è¾“å‡ºä¸‰ååŒå­¦çš„æ€»æˆç»©</strong></p><table><thead><tr><th></th><th>è¯­æ–‡</th><th>æ•°å­¦</th><th>è‹±è¯­</th></tr></thead><tbody><tr><td>å¼ ä¸‰</td><td>100</td><td>100</td><td>100</td></tr><tr><td>æå››</td><td>90</td><td>50</td><td>100</td></tr><tr><td>ç‹äº”</td><td>60</td><td>70</td><td>80</td></tr></tbody></table><p><strong>å‚è€ƒç­”æ¡ˆï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> scores[<span class="number">3</span>][<span class="number">3</span>] =</span><br><span class="line">&#123;</span><br><span class="line">&#123;<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>&#125;,</span><br><span class="line">&#123;<span class="number">90</span>,<span class="number">50</span>,<span class="number">100</span>&#125;,</span><br><span class="line">&#123;<span class="number">60</span>,<span class="number">70</span>,<span class="number">80</span>&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">string names[<span class="number">3</span>] = &#123; <span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;ç‹äº”&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">sum += scores[i][j];</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; names[i] &lt;&lt; <span class="string">&quot;åŒå­¦æ€»æˆç»©ä¸ºï¼š &quot;</span> &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-å‡½æ•°">6 å‡½æ•°</h2><h3 id="6-1-æ¦‚è¿°">6.1 æ¦‚è¿°</h3><p>**ä½œç”¨ï¼š**å°†ä¸€æ®µç»å¸¸ä½¿ç”¨çš„ä»£ç å°è£…èµ·æ¥ï¼Œå‡å°‘é‡å¤ä»£ç </p><p>ä¸€ä¸ªè¾ƒå¤§çš„ç¨‹åºï¼Œä¸€èˆ¬åˆ†ä¸ºè‹¥å¹²ä¸ªç¨‹åºå—ï¼Œæ¯ä¸ªæ¨¡å—å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</p><h3 id="6-2-å‡½æ•°çš„å®šä¹‰">6.2 å‡½æ•°çš„å®šä¹‰</h3><p>å‡½æ•°çš„å®šä¹‰ä¸€èˆ¬ä¸»è¦æœ‰ 5 ä¸ªæ­¥éª¤ï¼š</p><p>1ã€è¿”å›å€¼ç±»å‹</p><p>2ã€å‡½æ•°å</p><p>3ã€å‚æ•°è¡¨åˆ—</p><p>4ã€å‡½æ•°ä½“è¯­å¥</p><p>5ã€return è¡¨è¾¾å¼</p><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">       å‡½æ•°ä½“è¯­å¥</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span>è¡¨è¾¾å¼</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿”å›å€¼ç±»å‹ ï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­</li><li>å‡½æ•°åï¼šç»™å‡½æ•°èµ·ä¸ªåç§°</li><li>å‚æ•°åˆ—è¡¨ï¼šä½¿ç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„æ•°æ®</li><li>å‡½æ•°ä½“è¯­å¥ï¼šèŠ±æ‹¬å·å†…çš„ä»£ç ï¼Œå‡½æ•°å†…éœ€è¦æ‰§è¡Œçš„è¯­å¥</li><li>return è¡¨è¾¾å¼ï¼š å’Œè¿”å›å€¼ç±»å‹æŒ‚é’©ï¼Œå‡½æ•°æ‰§è¡Œå®Œåï¼Œè¿”å›ç›¸åº”çš„æ•°æ®</li></ul><p>**ç¤ºä¾‹ï¼š**å®šä¹‰ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œå®ç°ä¸¤ä¸ªæ•°ç›¸åŠ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> sum = num1 + num2;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-3-å‡½æ•°çš„è°ƒç”¨">6.3 å‡½æ•°çš„è°ƒç”¨</h3><p>**åŠŸèƒ½ï¼š**ä½¿ç”¨å®šä¹‰å¥½çš„å‡½æ•°</p><p><strong>è¯­æ³•ï¼š</strong><code> å‡½æ•°åï¼ˆå‚æ•°ï¼‰</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> <span class="comment">//å®šä¹‰ä¸­çš„num1,num2ç§°ä¸ºå½¢å¼å‚æ•°ï¼Œç®€ç§°å½¢å‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> sum = num1 + num2;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//è°ƒç”¨addå‡½æ•°</span></span><br><span class="line"><span class="type">int</span> sum = <span class="built_in">add</span>(a, b);<span class="comment">//è°ƒç”¨æ—¶çš„aï¼Œbç§°ä¸ºå®é™…å‚æ•°ï¼Œç®€ç§°å®å‚</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sum = &quot;</span> &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">a = <span class="number">100</span>;</span><br><span class="line">b = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">sum = <span class="built_in">add</span>(a, b);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;sum = &quot;</span> &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå‡½æ•°å®šä¹‰é‡Œå°æ‹¬å·å†…ç§°ä¸ºå½¢å‚ï¼Œå‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ç§°ä¸ºå®å‚</p></blockquote><h3 id="6-4-å€¼ä¼ é€’">6.4 å€¼ä¼ é€’</h3><ul><li>æ‰€è°“å€¼ä¼ é€’ï¼Œå°±æ˜¯å‡½æ•°è°ƒç”¨æ—¶å®å‚å°†æ•°å€¼ä¼ å…¥ç»™å½¢å‚</li><li>å€¼ä¼ é€’æ—¶ï¼Œ==å¦‚æœå½¢å‚å‘ç”Ÿï¼Œå¹¶ä¸ä¼šå½±å“å®å‚==</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢å‰ï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num1 = &quot;</span> &lt;&lt; num1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num2 = &quot;</span> &lt;&lt; num2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> temp = num1;</span><br><span class="line">num1 = num2;</span><br><span class="line">num2 = temp;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;äº¤æ¢åï¼š&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num1 = &quot;</span> &lt;&lt; num1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;num2 = &quot;</span> &lt;&lt; num2 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//return ; å½“å‡½æ•°å£°æ˜æ—¶å€™ï¼Œä¸éœ€è¦è¿”å›å€¼ï¼Œå¯ä»¥ä¸å†™return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">swap</span>(a, b);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mianä¸­çš„ a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;mianä¸­çš„ b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼š å€¼ä¼ é€’æ—¶ï¼Œå½¢å‚æ˜¯ä¿®é¥°ä¸äº†å®å‚çš„</p></blockquote><h3 id="6-5-å‡½æ•°çš„å¸¸è§æ ·å¼"><strong>6.5 å‡½æ•°çš„å¸¸è§æ ·å¼</strong></h3><p>å¸¸è§çš„å‡½æ•°æ ·å¼æœ‰ 4 ç§</p><ol><li>æ— å‚æ— è¿”</li><li>æœ‰å‚æ— è¿”</li><li>æ— å‚æœ‰è¿”</li><li>æœ‰å‚æœ‰è¿”</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‡½æ•°å¸¸è§æ ·å¼</span></span><br><span class="line"><span class="comment">//1ã€ æ— å‚æ— è¿”</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//void a = 10; //æ— ç±»å‹ä¸å¯ä»¥åˆ›å»ºå˜é‡,åŸå› æ— æ³•åˆ†é…å†…å­˜</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is test01&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//test01(); å‡½æ•°è°ƒç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€ æœ‰å‚æ— è¿”</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test02</span><span class="params">(<span class="type">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is test02&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3ã€æ— å‚æœ‰è¿”</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test03</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is test03 &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4ã€æœ‰å‚æœ‰è¿”</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">test04</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;this is test04 &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="type">int</span> sum = a + b;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-6-å‡½æ•°çš„å£°æ˜">6.6 å‡½æ•°çš„å£°æ˜</h3><p><strong>ä½œç”¨ï¼š</strong> å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°åç§°åŠå¦‚ä½•è°ƒç”¨å‡½æ•°ã€‚å‡½æ•°çš„å®é™…ä¸»ä½“å¯ä»¥å•ç‹¬å®šä¹‰ã€‚</p><ul><li>å‡½æ•°çš„<strong>å£°æ˜å¯ä»¥å¤šæ¬¡</strong>ï¼Œä½†æ˜¯å‡½æ•°çš„<strong>å®šä¹‰åªèƒ½æœ‰ä¸€æ¬¡</strong></li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜å¯ä»¥å¤šæ¬¡ï¼Œå®šä¹‰åªèƒ½ä¸€æ¬¡</span></span><br><span class="line"><span class="comment">//å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="comment">//å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">max</span>(a, b) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-7-å‡½æ•°çš„åˆ†æ–‡ä»¶ç¼–å†™">6.7 å‡½æ•°çš„åˆ†æ–‡ä»¶ç¼–å†™</h3><p>**ä½œç”¨ï¼š**è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°</p><p>å‡½æ•°åˆ†æ–‡ä»¶ç¼–å†™ä¸€èˆ¬æœ‰ 4 ä¸ªæ­¥éª¤</p><ol><li>åˆ›å»ºåç¼€åä¸º.h çš„å¤´æ–‡ä»¶</li><li>åˆ›å»ºåç¼€åä¸º.cpp çš„æºæ–‡ä»¶</li><li>åœ¨å¤´æ–‡ä»¶ä¸­å†™å‡½æ•°çš„å£°æ˜</li><li>åœ¨æºæ–‡ä»¶ä¸­å†™å‡½æ•°çš„å®šä¹‰</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swap.hæ–‡ä»¶</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°ä¸¤ä¸ªæ•°å­—äº¤æ¢çš„å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swap.cppæ–‡ä»¶</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;swap.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mainå‡½æ•°æ–‡ä»¶</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;swap.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">200</span>;</span><br><span class="line"><span class="built_in">swap</span>(a, b);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-æŒ‡é’ˆ">7 æŒ‡é’ˆ</h2><h3 id="7-1-æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ">7.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ</h3><p><strong>æŒ‡é’ˆçš„ä½œç”¨ï¼š</strong> å¯ä»¥é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®å†…å­˜</p><ul><li><p>å†…å­˜ç¼–å·æ˜¯ä» 0 å¼€å§‹è®°å½•çš„ï¼Œä¸€èˆ¬ç”¨åå…­è¿›åˆ¶æ•°å­—è¡¨ç¤º</p></li><li><p>å¯ä»¥åˆ©ç”¨æŒ‡é’ˆå˜é‡ä¿å­˜åœ°å€</p></li></ul><h3 id="7-2-æŒ‡é’ˆå˜é‡çš„å®šä¹‰å’Œä½¿ç”¨">7.2 æŒ‡é’ˆå˜é‡çš„å®šä¹‰å’Œä½¿ç”¨</h3><p>æŒ‡é’ˆå˜é‡å®šä¹‰è¯­æ³•ï¼š <code>æ•°æ®ç±»å‹ * å˜é‡åï¼›</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€æŒ‡é’ˆçš„å®šä¹‰</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>; <span class="comment">//å®šä¹‰æ•´å‹å˜é‡a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡é’ˆå®šä¹‰è¯­æ³•ï¼š æ•°æ®ç±»å‹ * å˜é‡å ;</span></span><br><span class="line"><span class="type">int</span> * p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡é’ˆå˜é‡èµ‹å€¼</span></span><br><span class="line">p = &amp;a; <span class="comment">//æŒ‡é’ˆæŒ‡å‘å˜é‡açš„åœ°å€</span></span><br><span class="line">cout &lt;&lt; &amp;a &lt;&lt; endl; <span class="comment">//æ‰“å°æ•°æ®açš„åœ°å€</span></span><br><span class="line">cout &lt;&lt; p &lt;&lt; endl;  <span class="comment">//æ‰“å°æŒ‡é’ˆå˜é‡p</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2ã€æŒ‡é’ˆçš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment">//é€šè¿‡*æ“ä½œæŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;*p = &quot;</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‡é’ˆå˜é‡å’Œæ™®é€šå˜é‡çš„åŒºåˆ«</p><ul><li>æ™®é€šå˜é‡å­˜æ”¾çš„æ˜¯æ•°æ®,æŒ‡é’ˆå˜é‡å­˜æ”¾çš„æ˜¯åœ°å€</li><li>æŒ‡é’ˆå˜é‡å¯ä»¥é€šè¿‡&quot; * &quot;æ“ä½œç¬¦ï¼Œæ“ä½œæŒ‡é’ˆå˜é‡æŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£å¼•ç”¨</li></ul><blockquote><p>æ€»ç»“ 1ï¼š æˆ‘ä»¬å¯ä»¥é€šè¿‡ &amp; ç¬¦å· è·å–å˜é‡çš„åœ°å€</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šåˆ©ç”¨æŒ‡é’ˆå¯ä»¥è®°å½•åœ°å€</p></blockquote><blockquote><p>æ€»ç»“ 3ï¼šå¯¹æŒ‡é’ˆå˜é‡è§£å¼•ç”¨ï¼Œå¯ä»¥æ“ä½œæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜</p></blockquote><h3 id="7-3-æŒ‡é’ˆæ‰€å å†…å­˜ç©ºé—´">7.3 æŒ‡é’ˆæ‰€å å†…å­˜ç©ºé—´</h3><p>æé—®ï¼šæŒ‡é’ˆä¹Ÿæ˜¯ç§æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆè¿™ç§æ•°æ®ç±»å‹å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Ÿ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> * p;</span><br><span class="line">p = &amp;a; <span class="comment">//æŒ‡é’ˆæŒ‡å‘æ•°æ®açš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl; <span class="comment">//* è§£å¼•ç”¨</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(p) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">char</span> *) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">float</span> *) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="type">double</span> *) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šæ‰€æœ‰æŒ‡é’ˆç±»å‹åœ¨ 32 ä½æ“ä½œç³»ç»Ÿä¸‹æ˜¯ 4 ä¸ªå­—èŠ‚</p></blockquote><h3 id="7-4-ç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆ">7.4 ç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆ</h3><p><strong>ç©ºæŒ‡é’ˆ</strong>ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘å†…å­˜ä¸­ç¼–å·ä¸º 0 çš„ç©ºé—´</p><p>**ç”¨é€”ï¼š**åˆå§‹åŒ–æŒ‡é’ˆå˜é‡</p><p>**æ³¨æ„ï¼š**ç©ºæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜æ˜¯ä¸å¯ä»¥è®¿é—®çš„</p><p><strong>ç¤ºä¾‹ 1ï¼šç©ºæŒ‡é’ˆ</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡é’ˆå˜é‡pæŒ‡å‘å†…å­˜åœ°å€ç¼–å·ä¸º0çš„ç©ºé—´</span></span><br><span class="line"><span class="type">int</span> * p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¿é—®ç©ºæŒ‡é’ˆæŠ¥é”™</span></span><br><span class="line"><span class="comment">//å†…å­˜ç¼–å·0 ~255ä¸ºç³»ç»Ÿå ç”¨å†…å­˜ï¼Œä¸å…è®¸ç”¨æˆ·è®¿é—®</span></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡æŒ‡é’ˆ</strong>ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘éæ³•çš„å†…å­˜ç©ºé—´</p><p><strong>ç¤ºä¾‹ 2ï¼šé‡æŒ‡é’ˆ</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡é’ˆå˜é‡pæŒ‡å‘å†…å­˜åœ°å€ç¼–å·ä¸º0x1100çš„ç©ºé—´</span></span><br><span class="line"><span class="type">int</span> * p = (<span class="type">int</span> *)<span class="number">0x1100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¿é—®é‡æŒ‡é’ˆæŠ¥é”™</span></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç©ºæŒ‡é’ˆå’Œé‡æŒ‡é’ˆéƒ½ä¸æ˜¯æˆ‘ä»¬ç”³è¯·çš„ç©ºé—´ï¼Œå› æ­¤ä¸è¦è®¿é—®ã€‚</p></blockquote><h3 id="7-5-const-ä¿®é¥°æŒ‡é’ˆ">7.5 const ä¿®é¥°æŒ‡é’ˆ</h3><p>const ä¿®é¥°æŒ‡é’ˆæœ‰ä¸‰ç§æƒ…å†µ</p><ol><li>const ä¿®é¥°æŒ‡é’ˆ â€” å¸¸é‡æŒ‡é’ˆ</li><li>const ä¿®é¥°å¸¸é‡ â€” æŒ‡é’ˆå¸¸é‡</li><li>const å³ä¿®é¥°æŒ‡é’ˆï¼Œåˆä¿®é¥°å¸¸é‡</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°çš„æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘å¯ä»¥æ”¹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸å¯ä»¥æ›´æ”¹</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> * p1 = &amp;a;</span><br><span class="line">p1 = &amp;b; <span class="comment">//æ­£ç¡®</span></span><br><span class="line"><span class="comment">//*p1 = 100;  æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//constä¿®é¥°çš„æ˜¯å¸¸é‡ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸å¯ä»¥æ”¹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼å¯ä»¥æ›´æ”¹</span></span><br><span class="line"><span class="type">int</span> * <span class="type">const</span> p2 = &amp;a;</span><br><span class="line"><span class="comment">//p2 = &amp;b; //é”™è¯¯</span></span><br><span class="line">*p2 = <span class="number">100</span>; <span class="comment">//æ­£ç¡®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//constæ—¢ä¿®é¥°æŒ‡é’ˆåˆä¿®é¥°å¸¸é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> * <span class="type">const</span> p3 = &amp;a;</span><br><span class="line"><span class="comment">//p3 = &amp;b; //é”™è¯¯</span></span><br><span class="line"><span class="comment">//*p3 = 100; //é”™è¯¯</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æŠ€å·§ï¼šçœ‹ const å³ä¾§ç´§è·Ÿç€çš„æ˜¯æŒ‡é’ˆè¿˜æ˜¯å¸¸é‡, æ˜¯æŒ‡é’ˆå°±æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œæ˜¯å¸¸é‡å°±æ˜¯æŒ‡é’ˆå¸¸é‡</p></blockquote><h3 id="7-6-æŒ‡é’ˆå’Œæ•°ç»„">7.6 æŒ‡é’ˆå’Œæ•°ç»„</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­å…ƒç´ </p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> * p = arr;  <span class="comment">//æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &quot;</span> &lt;&lt; arr[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æŒ‡é’ˆè®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š &quot;</span> &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//åˆ©ç”¨æŒ‡é’ˆéå†æ•°ç»„</span></span><br><span class="line">cout &lt;&lt; *p &lt;&lt; endl;</span><br><span class="line">p++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-7-æŒ‡é’ˆå’Œå‡½æ•°">7.7 æŒ‡é’ˆå’Œå‡½æ•°</h3><p>**ä½œç”¨ï¼š**åˆ©ç”¨æŒ‡é’ˆä½œå‡½æ•°å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹å®å‚çš„å€¼</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å€¼ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap1</span><span class="params">(<span class="type">int</span> a ,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> temp = a;</span><br><span class="line">a = b;</span><br><span class="line">b = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap2</span><span class="params">(<span class="type">int</span> * p1, <span class="type">int</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> temp = *p1;</span><br><span class="line">*p1 = *p2;</span><br><span class="line">*p2 = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">swap1</span>(a, b); <span class="comment">// å€¼ä¼ é€’ä¸ä¼šæ”¹å˜å®å‚</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">swap2</span>(&amp;a, &amp;b); <span class="comment">//åœ°å€ä¼ é€’ä¼šæ”¹å˜å®å‚</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;b = &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœä¸æƒ³ä¿®æ”¹å®å‚ï¼Œå°±ç”¨å€¼ä¼ é€’ï¼Œå¦‚æœæƒ³ä¿®æ”¹å®å‚ï¼Œå°±ç”¨åœ°å€ä¼ é€’</p></blockquote><h3 id="7-8-æŒ‡é’ˆã€æ•°ç»„ã€å‡½æ•°">7.8 æŒ‡é’ˆã€æ•°ç»„ã€å‡½æ•°</h3><p>**æ¡ˆä¾‹æè¿°ï¼š**å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œåˆ©ç”¨å†’æ³¡æ’åºï¼Œå®ç°å¯¹æ•´å‹æ•°ç»„çš„å‡åºæ’åº</p><p>ä¾‹å¦‚æ•°ç»„ï¼šint arr[10] = { 4,3,6,9,1,2,10,8,7,5 };</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å†’æ³¡æ’åºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="type">int</span> * arr, <span class="type">int</span> len)</span>  <span class="comment">//int * arr ä¹Ÿå¯ä»¥å†™ä¸ºint arr[]</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> temp = arr[j];</span><br><span class="line">arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰“å°æ•°ç»„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printArray</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; arr[i] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">4</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">5</span> &#125;;</span><br><span class="line"><span class="type">int</span> len = <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">bubbleSort</span>(arr, len);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printArray</span>(arr, len);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå½“æ•°ç»„åä¼ å…¥åˆ°å‡½æ•°ä½œä¸ºå‚æ•°æ—¶ï¼Œè¢«é€€åŒ–ä¸ºæŒ‡å‘é¦–å…ƒç´ çš„æŒ‡é’ˆ</p></blockquote><h2 id="8-ç»“æ„ä½“">8 ç»“æ„ä½“</h2><h3 id="8-1-ç»“æ„ä½“åŸºæœ¬æ¦‚å¿µ">8.1 ç»“æ„ä½“åŸºæœ¬æ¦‚å¿µ</h3><p>ç»“æ„ä½“å±äºç”¨æˆ·==è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹==ï¼Œå…è®¸ç”¨æˆ·å­˜å‚¨ä¸åŒçš„æ•°æ®ç±»å‹</p><h3 id="8-2-ç»“æ„ä½“å®šä¹‰å’Œä½¿ç”¨">8.2 ç»“æ„ä½“å®šä¹‰å’Œä½¿ç”¨</h3><p><strong>è¯­æ³•ï¼š</strong><code>struct ç»“æ„ä½“å &#123; ç»“æ„ä½“æˆå‘˜åˆ—è¡¨ &#125;ï¼›</code></p><p>é€šè¿‡ç»“æ„ä½“åˆ›å»ºå˜é‡çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>struct ç»“æ„ä½“å å˜é‡å</li><li>struct ç»“æ„ä½“å å˜é‡å = { æˆå‘˜ 1 å€¼ ï¼Œ æˆå‘˜ 2 å€¼â€¦}</li><li>å®šä¹‰ç»“æ„ä½“æ—¶é¡ºä¾¿åˆ›å»ºå˜é‡</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;stu3; <span class="comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼1</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> stu1; <span class="comment">//struct å…³é”®å­—å¯ä»¥çœç•¥</span></span><br><span class="line"></span><br><span class="line">stu<span class="number">1.</span>name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">stu<span class="number">1.</span>age = <span class="number">18</span>;</span><br><span class="line">stu<span class="number">1.</span>score = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="number">1.</span>name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="number">1.</span>age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="number">1.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æ„ä½“å˜é‡åˆ›å»ºæ–¹å¼2</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> stu2 = &#123; <span class="string">&quot;æå››&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="number">2.</span>name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="number">2.</span>age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="number">2.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu<span class="number">3.</span>name = <span class="string">&quot;ç‹äº”&quot;</span>;</span><br><span class="line">stu<span class="number">3.</span>age = <span class="number">18</span>;</span><br><span class="line">stu<span class="number">3.</span>score = <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu<span class="number">3.</span>name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu<span class="number">3.</span>age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu<span class="number">3.</span>score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ 1ï¼šå®šä¹‰ç»“æ„ä½“æ—¶çš„å…³é”®å­—æ˜¯ structï¼Œä¸å¯çœç•¥</p></blockquote><blockquote><p>æ€»ç»“ 2ï¼šåˆ›å»ºç»“æ„ä½“å˜é‡æ—¶ï¼Œå…³é”®å­— struct å¯ä»¥çœç•¥</p></blockquote><blockquote><p>æ€»ç»“ 3ï¼šç»“æ„ä½“å˜é‡åˆ©ç”¨æ“ä½œç¬¦ â€˜â€™.â€˜â€™ è®¿é—®æˆå‘˜</p></blockquote><h3 id="8-3-ç»“æ„ä½“æ•°ç»„">8.3 ç»“æ„ä½“æ•°ç»„</h3><p>**ä½œç”¨ï¼š**å°†è‡ªå®šä¹‰çš„ç»“æ„ä½“æ”¾å…¥åˆ°æ•°ç»„ä¸­æ–¹ä¾¿ç»´æŠ¤</p><p><strong>è¯­æ³•ï¼š</strong><code> struct  ç»“æ„ä½“å æ•°ç»„å[å…ƒç´ ä¸ªæ•°] = &#123;  &#123;&#125; , &#123;&#125; , ... &#123;&#125; &#125;</code></p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æ„ä½“æ•°ç»„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> arr[<span class="number">3</span>]=</span><br><span class="line">&#123;</span><br><span class="line">&#123;<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">18</span>,<span class="number">80</span> &#125;,</span><br><span class="line">&#123;<span class="string">&quot;æå››&quot;</span>,<span class="number">19</span>,<span class="number">60</span> &#125;,</span><br><span class="line">&#123;<span class="string">&quot;ç‹äº”&quot;</span>,<span class="number">20</span>,<span class="number">70</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; arr[i].name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; arr[i].age &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; arr[i].score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-4-ç»“æ„ä½“æŒ‡é’ˆ">8.4 ç»“æ„ä½“æŒ‡é’ˆ</h3><p>**ä½œç”¨ï¼š**é€šè¿‡æŒ‡é’ˆè®¿é—®ç»“æ„ä½“ä¸­çš„æˆå‘˜</p><ul><li>åˆ©ç”¨æ“ä½œç¬¦ <code>-&gt; </code>å¯ä»¥é€šè¿‡ç»“æ„ä½“æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å±æ€§</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> stu = &#123; <span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">18</span>,<span class="number">100</span>, &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> * p = &amp;stu;</span><br><span class="line"></span><br><span class="line">p-&gt;score = <span class="number">80</span>; <span class="comment">//æŒ‡é’ˆé€šè¿‡ -&gt; æ“ä½œç¬¦å¯ä»¥è®¿é—®æˆå‘˜</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; p-&gt;age &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; p-&gt;score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šç»“æ„ä½“æŒ‡é’ˆå¯ä»¥é€šè¿‡ -&gt; æ“ä½œç¬¦ æ¥è®¿é—®ç»“æ„ä½“ä¸­çš„æˆå‘˜</p></blockquote><h3 id="8-5-ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“">8.5 ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“</h3><p><strong>ä½œç”¨ï¼š</strong> ç»“æ„ä½“ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯å¦ä¸€ä¸ªç»“æ„ä½“</p><p>**ä¾‹å¦‚ï¼š**æ¯ä¸ªè€å¸ˆè¾…å¯¼ä¸€ä¸ªå­¦å‘˜ï¼Œä¸€ä¸ªè€å¸ˆçš„ç»“æ„ä½“ä¸­ï¼Œè®°å½•ä¸€ä¸ªå­¦ç”Ÿçš„ç»“æ„ä½“</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•™å¸ˆç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">teacher</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line"><span class="type">int</span> id; <span class="comment">//èŒå·¥ç¼–å·</span></span><br><span class="line">string name;  <span class="comment">//æ•™å¸ˆå§“å</span></span><br><span class="line"><span class="type">int</span> age;   <span class="comment">//æ•™å¸ˆå¹´é¾„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> stu; <span class="comment">//å­ç»“æ„ä½“ å­¦ç”Ÿ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">teacher</span> t1;</span><br><span class="line">t<span class="number">1.</span>id = <span class="number">10000</span>;</span><br><span class="line">t<span class="number">1.</span>name = <span class="string">&quot;è€ç‹&quot;</span>;</span><br><span class="line">t<span class="number">1.</span>age = <span class="number">40</span>;</span><br><span class="line"></span><br><span class="line">t<span class="number">1.</span>stu.name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line">t<span class="number">1.</span>stu.age = <span class="number">18</span>;</span><br><span class="line">t<span class="number">1.</span>stu.score = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;æ•™å¸ˆ èŒå·¥ç¼–å·ï¼š &quot;</span> &lt;&lt; t<span class="number">1.</span>id &lt;&lt; <span class="string">&quot; å§“åï¼š &quot;</span> &lt;&lt; t<span class="number">1.</span>name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; t<span class="number">1.</span>age &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;è¾…å¯¼å­¦å‘˜ å§“åï¼š &quot;</span> &lt;&lt; t<span class="number">1.</span>stu.name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; t<span class="number">1.</span>stu.age &lt;&lt; <span class="string">&quot; è€ƒè¯•åˆ†æ•°ï¼š &quot;</span> &lt;&lt; t<span class="number">1.</span>stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>**æ€»ç»“ï¼š**åœ¨ç»“æ„ä½“ä¸­å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºæˆå‘˜ï¼Œç”¨æ¥è§£å†³å®é™…é—®é¢˜</p><h3 id="8-6-ç»“æ„ä½“åšå‡½æ•°å‚æ•°">8.6 ç»“æ„ä½“åšå‡½æ•°å‚æ•°</h3><p>**ä½œç”¨ï¼š**å°†ç»“æ„ä½“ä½œä¸ºå‚æ•°å‘å‡½æ•°ä¸­ä¼ é€’</p><p>ä¼ é€’æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>å€¼ä¼ é€’</li><li>åœ°å€ä¼ é€’</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å€¼ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(student stu )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">stu.age = <span class="number">28</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent2</span><span class="params">(student *stu)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">stu-&gt;age = <span class="number">28</span>;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å­å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu-&gt;age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">student stu = &#123; <span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">18</span>,<span class="number">100</span>&#125;;</span><br><span class="line"><span class="comment">//å€¼ä¼ é€’</span></span><br><span class="line"><span class="built_in">printStudent</span>(stu);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸»å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ°å€ä¼ é€’</span></span><br><span class="line"><span class="built_in">printStudent2</span>(&amp;stu);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;ä¸»å‡½æ•°ä¸­ å§“åï¼š&quot;</span> &lt;&lt; stu.name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; stu.age  &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu.score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ï¼šå¦‚æœä¸æƒ³ä¿®æ”¹ä¸»å‡½æ•°ä¸­çš„æ•°æ®ï¼Œç”¨å€¼ä¼ é€’ï¼Œåä¹‹ç”¨åœ°å€ä¼ é€’</p></blockquote><h3 id="8-7-ç»“æ„ä½“ä¸­-const-ä½¿ç”¨åœºæ™¯">8.7 ç»“æ„ä½“ä¸­ const ä½¿ç”¨åœºæ™¯</h3><p>**ä½œç”¨ï¼š**ç”¨ const æ¥é˜²æ­¢è¯¯æ“ä½œ</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­¦ç”Ÿç»“æ„ä½“å®šä¹‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æˆå‘˜åˆ—è¡¨</span></span><br><span class="line">string name;  <span class="comment">//å§“å</span></span><br><span class="line"><span class="type">int</span> age;      <span class="comment">//å¹´é¾„</span></span><br><span class="line"><span class="type">int</span> score;    <span class="comment">//åˆ†æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//constä½¿ç”¨åœºæ™¯</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printStudent</span><span class="params">(<span class="type">const</span> student *stu)</span> <span class="comment">//åŠ consté˜²æ­¢å‡½æ•°ä½“ä¸­çš„è¯¯æ“ä½œ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//stu-&gt;age = 100; //æ“ä½œå¤±è´¥ï¼Œå› ä¸ºåŠ äº†constä¿®é¥°</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š&quot;</span> &lt;&lt; stu-&gt;name &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š&quot;</span> &lt;&lt; stu-&gt;age &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; stu-&gt;score &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">student stu = &#123; <span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">18</span>,<span class="number">100</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printStudent</span>(&amp;stu);</span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-8-ç»“æ„ä½“æ¡ˆä¾‹">8.8 ç»“æ„ä½“æ¡ˆä¾‹</h3><h4 id="8-8-1-æ¡ˆä¾‹-1">8.8.1 æ¡ˆä¾‹ 1</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>å­¦æ ¡æ­£åœ¨åšæ¯•è®¾é¡¹ç›®ï¼Œæ¯åè€å¸ˆå¸¦é¢† 5 ä¸ªå­¦ç”Ÿï¼Œæ€»å…±æœ‰ 3 åè€å¸ˆï¼Œéœ€æ±‚å¦‚ä¸‹</p><p>è®¾è®¡å­¦ç”Ÿå’Œè€å¸ˆçš„ç»“æ„ä½“ï¼Œå…¶ä¸­åœ¨è€å¸ˆçš„ç»“æ„ä½“ä¸­ï¼Œæœ‰è€å¸ˆå§“åå’Œä¸€ä¸ªå­˜æ”¾ 5 åå­¦ç”Ÿçš„æ•°ç»„ä½œä¸ºæˆå‘˜</p><p>å­¦ç”Ÿçš„æˆå‘˜æœ‰å§“åã€è€ƒè¯•åˆ†æ•°ï¼Œåˆ›å»ºæ•°ç»„å­˜æ”¾ 3 åè€å¸ˆï¼Œé€šè¿‡å‡½æ•°ç»™æ¯ä¸ªè€å¸ˆåŠæ‰€å¸¦çš„å­¦ç”Ÿèµ‹å€¼</p><p>æœ€ç»ˆæ‰“å°å‡ºè€å¸ˆæ•°æ®ä»¥åŠè€å¸ˆæ‰€å¸¦çš„å­¦ç”Ÿæ•°æ®ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">&#123;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Teacher</span></span><br><span class="line">&#123;</span><br><span class="line">string name;</span><br><span class="line">Student sArray[<span class="number">5</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">allocateSpace</span><span class="params">(Teacher tArray[] , <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">string tName = <span class="string">&quot;æ•™å¸ˆ&quot;</span>;</span><br><span class="line">string sName = <span class="string">&quot;å­¦ç”Ÿ&quot;</span>;</span><br><span class="line">string nameSeed = <span class="string">&quot;ABCDE&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line">tArray[i].name = tName + nameSeed[i];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">tArray[i].sArray[j].name = sName + nameSeed[j];</span><br><span class="line">tArray[i].sArray[j].score = <span class="built_in">rand</span>() % <span class="number">61</span> + <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printTeachers</span><span class="params">(Teacher tArray[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; tArray[i].name &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\tå§“åï¼š&quot;</span> &lt;&lt; tArray[i].sArray[j].name &lt;&lt; <span class="string">&quot; åˆ†æ•°ï¼š&quot;</span> &lt;&lt; tArray[i].sArray[j].score &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span> <span class="type">int</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>)); <span class="comment">//éšæœºæ•°ç§å­ å¤´æ–‡ä»¶ #include &lt;ctime&gt;</span></span><br><span class="line"></span><br><span class="line">Teacher tArray[<span class="number">3</span>]; <span class="comment">//è€å¸ˆæ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> len = <span class="built_in">sizeof</span>(tArray) / <span class="built_in">sizeof</span>(Teacher);</span><br><span class="line"></span><br><span class="line"><span class="built_in">allocateSpace</span>(tArray, len); <span class="comment">//åˆ›å»ºæ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printTeachers</span>(tArray, len); <span class="comment">//æ‰“å°æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="8-8-2-æ¡ˆä¾‹-2">8.8.2 æ¡ˆä¾‹ 2</h4><p><strong>æ¡ˆä¾‹æè¿°ï¼š</strong></p><p>è®¾è®¡ä¸€ä¸ªè‹±é›„çš„ç»“æ„ä½“ï¼ŒåŒ…æ‹¬æˆå‘˜å§“åï¼Œå¹´é¾„ï¼Œæ€§åˆ«;åˆ›å»ºç»“æ„ä½“æ•°ç»„ï¼Œæ•°ç»„ä¸­å­˜æ”¾ 5 åè‹±é›„ã€‚</p><p>é€šè¿‡å†’æ³¡æ’åºçš„ç®—æ³•ï¼Œå°†æ•°ç»„ä¸­çš„è‹±é›„æŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºæ’åºï¼Œæœ€ç»ˆæ‰“å°æ’åºåçš„ç»“æœã€‚</p><p>äº”åè‹±é›„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;åˆ˜å¤‡&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;å…³ç¾½&quot;</span>,<span class="number">22</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;å¼ é£&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;èµµäº‘&quot;</span>,<span class="number">21</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;è²‚è‰&quot;</span>,<span class="number">19</span>,<span class="string">&quot;å¥³&quot;</span>&#125;,</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‹±é›„ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">hero</span></span><br><span class="line">&#123;</span><br><span class="line">string name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">string sex;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å†’æ³¡æ’åº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bubbleSort</span><span class="params">(hero arr[] , <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (arr[j].age &gt; arr[j + <span class="number">1</span>].age)</span><br><span class="line">&#123;</span><br><span class="line">hero temp = arr[j];</span><br><span class="line">arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‰“å°æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printHeros</span><span class="params">(hero arr[], <span class="type">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;å§“åï¼š &quot;</span> &lt;&lt; arr[i].name &lt;&lt; <span class="string">&quot; æ€§åˆ«ï¼š &quot;</span> &lt;&lt; arr[i].sex &lt;&lt; <span class="string">&quot; å¹´é¾„ï¼š &quot;</span> &lt;&lt; arr[i].age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">hero</span> arr[<span class="number">5</span>] =</span><br><span class="line">&#123;</span><br><span class="line">&#123;<span class="string">&quot;åˆ˜å¤‡&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;å…³ç¾½&quot;</span>,<span class="number">22</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;å¼ é£&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;èµµäº‘&quot;</span>,<span class="number">21</span>,<span class="string">&quot;ç”·&quot;</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;è²‚è‰&quot;</span>,<span class="number">19</span>,<span class="string">&quot;å¥³&quot;</span>&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> len = <span class="built_in">sizeof</span>(arr) / <span class="built_in">sizeof</span>(hero); <span class="comment">//è·å–æ•°ç»„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">bubbleSort</span>(arr, len); <span class="comment">//æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printHeros</span>(arr, len); <span class="comment">//æ‰“å°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1></h1>]]></content>
    
    
    <summary type="html">ã€è®°å½•ä¸€ä¸‹23/5/18,å…¥èŒæ¾ä¸‹ã€åŠªåŠ›å·CPPã€‘</summary>
    
    
    
    <category term="C++" scheme="https://angus9823.github.io/categories/C/"/>
    
    
    <category term="C++" scheme="https://angus9823.github.io/tags/C/"/>
    
    <category term="CPP" scheme="https://angus9823.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>è®ºæ–‡ç­”è¾©é—®é¢˜è®°å½•</title>
    <link href="https://angus9823.github.io/posts/1302f2a3.html"/>
    <id>https://angus9823.github.io/posts/1302f2a3.html</id>
    <published>2023-05-14T13:25:14.000Z</published>
    <updated>2024-08-30T03:31:53.651Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç­”è¾©æé—®-é—®é¢˜è®°å½•">ç­”è¾©æé—® é—®é¢˜è®°å½•</h3><h5 id="1-ç³»ç»Ÿä¸­å¼•å…¥-RabbitMQ-çš„åœºæ™¯ä»¥åŠå¦‚ä½•å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Ÿ">1.ç³»ç»Ÿä¸­å¼•å…¥ RabbitMQ çš„åœºæ™¯ä»¥åŠå¦‚ä½•å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Ÿ</h5><p>å…¨ç§° Message Queueï¼Œè¢«ç§°ä¸ºæ¶ˆæ¯é˜Ÿåˆ—<br>åœºæ™¯ï¼šå¼‚æ­¥å¤„ç†ï¼šå‡è®¾æˆ‘ä»¬çš„ä¸€ä¸ªæ™®é€šä¸šåŠ¡ï¼Œä»¥ç”¨æˆ·æ³¨å†Œä¸ºä¾‹ï¼Œç”¨æˆ·é€šè¿‡æµè§ˆå™¨æäº¤äº†è´¦å·ã€å¯†ç ç­‰æ³¨å†Œä¿¡æ¯ï¼Œæ³¨å†Œä¿¡æ¯å¯èƒ½åˆ†ä¸ºä»¥ä¸‹è¿™ä¸‰æ­¥ 1)æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“ï¼›2ï¼‰å‘é€æ³¨å†Œé‚®ä»¶ï¼›3ï¼‰å‘é€æ³¨å†ŒçŸ­ä¿¡<br>è¿™æ˜¯ä¸€ç§åŒæ­¥æ¨¡å¼ï¼Œç”¨æˆ·åœ¨æ¯ä¸€ä¸ªæ­¥éª¤éƒ½ä¼šèŠ±è´¹ 50ms çš„æ—¶é—´ï¼ŒåŠ èµ·æ¥å°±æ˜¯ 150ms çš„æ—¶é—´ï¼Œ æˆ‘ä»¬å‘ç°è¿™æ˜¯æ²¡æœ‰å¿…è¦çš„</p><p>å°¤å…¶æ˜¯ç¬¬ 2 æ­¥è·Ÿç¬¬ 3 æ­¥ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢è¿™ç§æ¨¡å¼ï¼Œå¯ä»¥ç»™å®ƒå¼„ä¸€ä¸ªå¼‚æ­¥</p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230514212210236.png" alt="image-20230514212210236" style="zoom:50%;" /><p>ç”¨æˆ·å°†æ³¨å†Œä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä¸€ä¸ªå‘é€æ³¨å†Œé‚®ä»¶ï¼Œä¸€ä¸ªå‘é€æ³¨å†ŒçŸ­ä¿¡ï¼Œå½“ç„¶æˆ‘ä»¬éœ€è¦æœ€ç»ˆçš„å®Œæ•´è¿”å›ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä¸€ä¸ªè¿”å›ï¼Œå°±å¯ä»¥è·å–åˆ°ä¸¤ä¸ªç»“æœ</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†æ—¶é—´ç¼©çŸ­åˆ°äº† 100ms ï¼Œçœ‹èµ·æ¥æ—¶é—´æ›´å¿«äº†ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿å¼‚æ­¥éƒ½ä¸éœ€è¦</p><p>ç”¨æˆ·å°†æ³¨å†Œä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä¸€ä¸ªå‘é€æ³¨å†Œé‚®ä»¶ï¼Œä¸€ä¸ªå‘é€æ³¨å†ŒçŸ­ä¿¡ï¼Œå½“ç„¶æˆ‘ä»¬éœ€è¦æœ€ç»ˆçš„å®Œæ•´è¿”å›ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä¸€ä¸ªè¿”å›ï¼Œå°±å¯ä»¥è·å–åˆ°ä¸¤ä¸ªç»“æœ</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†æ—¶é—´ç¼©çŸ­åˆ°äº† 100ms ï¼Œçœ‹èµ·æ¥æ—¶é—´æ›´å¿«äº†ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿å¼‚æ­¥éƒ½ä¸éœ€è¦</p><p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230514212013125.png" alt="image-20230514212013125"></p><p>æˆ‘ä»¬å¦‚æœå°†æ³¨å†Œä¿¡æ¯å†™å…¥æ•°æ®åº“æˆåŠŸäº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ³¨å†ŒæˆåŠŸçš„æ¶ˆæ¯å†™å…¥<a href="https://so.csdn.net/so/search?q=%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97&amp;spm=1001.2101.3001.7020">æ¶ˆæ¯é˜Ÿåˆ—</a>ï¼Œä¿å­˜åœ¨æ¶ˆæ¯ä¸­é—´ä»¶è¿™ä¸ªæœåŠ¡å™¨ä¸­ï¼Œå‡è®¾ï¼šä¿å­˜äº†ä¸€ä¸ª 1 å·ç”¨æˆ·æ³¨å†ŒæˆåŠŸçš„æ¶ˆæ¯ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬å°±ç›´æ¥ç»™ç”¨æˆ·è¿”å›</p><p>å› ä¸ºç»™æ¶ˆæ¯ä¸­é—´ä»¶å†™æ¶ˆæ¯è¿™ä¸ªè€—æ—¶æ˜¯éå¸¸çŸ­çš„ï¼Œæ•°æ®åº“æ’å…¥æ•°æ®åº“å¯èƒ½å¾ˆæ…¢ï¼Œéœ€è¦ 50ms ï¼Œè€Œå†™æ¶ˆæ¯ï¼Œç±»ä¼¼äºç›´æ¥æ“ä½œ redis ä¸€æ ·ï¼Œå¯èƒ½åªèŠ±è´¹ 5msï¼Œå¾ˆå¿«ï¼Œé‚£ä¹ˆç”¨æˆ·æ”¶åˆ°è¿™ä¸ªå“åº”åªéœ€è¦ 55msï¼Œä½†æ˜¯ç”¨æˆ·èƒ½ä¸èƒ½æ”¶åˆ°é‚®ä»¶ã€çŸ­ä¿¡å‘¢ï¼Ÿ</p><p>ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬çš„æ¶ˆæ¯æ—¢ç„¶å­˜åˆ°äº†æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢ï¼Œåˆ«çš„æœåŠ¡å°±å¯ä»¥ä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢æ‹¿åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œå‡è®¾ï¼šè¿™ä¸ªæœåŠ¡æ‹¿åˆ° 1 å·ç”¨æˆ·æ³¨å†ŒæˆåŠŸçš„æ¶ˆæ¯äº†ï¼Œé‚£ä¹ˆå®ƒå°±åœ¨åå°è¯¥å‘é‚®ä»¶å‘é‚®ä»¶ï¼Œè¯¥å‘çŸ­ä¿¡å‘çŸ­ä¿¡ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå®ƒä»€ä¹ˆæ—¶å€™å‘çŸ­ä¿¡ã€å‘é‚®ä»¶ï¼Œåªè¦å®ƒå¹²äº†è¿™ä¸ªäº‹å°±è¡Œï¼Œä½†æ˜¯ç”¨æˆ·ä¼šä¸€èµ·å“åº”æˆåŠŸã€‚</p><ul><li>æ€»ç»“</li></ul><p><strong>è¿™å°±æ˜¯<code>å¼‚æ­¥å¤„ç†</code>ï¼Œä½¿ç”¨èµ·æ¥æ¯”å¼‚æ­¥ä»»åŠ¡æ›´å¿«ï¼Œå¼‚æ­¥ä»»åŠ¡æˆ‘ä»¬è¿˜å¿…é¡»ç­‰å¾…æ¶ˆæ¯è¿”å›ï¼Œè€Œè¿™ä¸ªå¼‚æ­¥å¤„ç†ï¼Œåªéœ€è¦ç»™æ¶ˆæ¯ä¸­é—´ä»¶çš„æœåŠ¡å™¨å‘ä¸€ä¸ªæ¶ˆæ¯ï¼Œè®©å®ƒåœ¨åå°æ…¢æ…¢å¤„ç†å°±è¡Œ</strong>ã€‚</p><h5 id="2-å¦‚ä½•å®ç°-Redis-ç¼“å­˜å’Œ-MySQL-æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ">2.å¦‚ä½•å®ç° Redis ç¼“å­˜å’Œ MySQL æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ</h5><p>Redis æ˜¯ä¸€ç§å¿«é€Ÿã€é«˜æ•ˆçš„å†…å­˜æ•°æ®åº“ï¼ŒMySQL æ˜¯ä¸€ç§å¯é çš„å…³ç³»å‹æ•°æ®åº“ã€‚</p><p>å¾ˆå¤š Web åº”ç”¨éƒ½ä½¿ç”¨ Redis ä½œä¸ºç¼“å­˜ï¼Œå°†<strong>å¸¸ç”¨æ•°æ®å­˜å‚¨åœ¨ Redis ä¸­ï¼Œä»¥å‡è½» MySQL çš„å‹åŠ›ï¼Œæé«˜åº”ç”¨çš„æ€§èƒ½ã€‚</strong></p><p>ç„¶è€Œï¼Œ<strong>ç”±äº Redis æ˜¯ä¸€ç§å†…å­˜æ•°æ®åº“</strong>ï¼Œè€Œ<strong>MySQL æ˜¯ä¸€ç§ç£ç›˜æ•°æ®åº“</strong>ï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€å®šçš„ä¸ä¸€è‡´æ€§ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>å¦‚ä½•ä¿æŒ Redis ç¼“å­˜å’Œ MySQL æ•°æ®çš„ä¸€è‡´æ€§æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜ã€‚</strong></p><p>1ï¼‰å†™æ“ä½œåŒæ­¥</p><p><strong>ä¸ºäº†ä¿è¯ Redis ç¼“å­˜å’Œ MySQL æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥åœ¨å†™æ“ä½œæ—¶è¿›è¡ŒåŒæ­¥ã€‚</strong></p><p>å³ï¼Œå½“æœ‰**æ•°æ®æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œå…ˆæ›´æ–° MySQL æ•°æ®åº“ï¼Œå†æ›´æ–° Redis ç¼“å­˜ã€‚è¿™ç§æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†æ˜¯ä¼šå¢åŠ  MySQL çš„å‹åŠ›ï¼Œå› ä¸ºæ¯æ¬¡å†™æ“ä½œéƒ½éœ€è¦æ“ä½œä¸¤ä¸ªæ•°æ®åº“ã€‚</p><p>2ï¼‰è¯»æ“ä½œåŒé‡æ£€æŸ¥ï¼ˆæ³¨æ„ï¼šé¡¹ç›®ä¸­ä¸šåŠ¡ä»£ç æ˜¯è¿™ä¸ªæ–¹æ³•ï¼‰</p><p><strong>ä¸ºäº†å‡è½» MySQL çš„å‹åŠ›ï¼Œå¯ä»¥å°†å¤§é‡çš„è¯»æ“ä½œä» MySQL ä¸­è½¬ç§»åˆ° Redis ç¼“å­˜ä¸­ã€‚</strong></p><p>ä½†æ˜¯ï¼Œ<strong>ç”±äº Redis ç¼“å­˜å¯èƒ½ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œå› æ­¤åœ¨è¿›è¡Œè¯»æ“ä½œæ—¶éœ€è¦è¿›è¡ŒåŒé‡æ£€æŸ¥ã€‚</strong></p><p>å³ï¼Œ<strong>å…ˆä» Redis ä¸­è¯»å–æ•°æ®ï¼Œå¦‚æœæ•°æ®ä¸å­˜åœ¨æˆ–è€…è¿‡æœŸ</strong>ï¼Œåˆ™ä»**MySQL ä¸­è¯»å–æœ€æ–°çš„æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ° Redis ç¼“å­˜ä¸­ã€‚è¿™ç§æ–¹æ³•å¯ä»¥å‡è½» MySQL çš„å‹åŠ›ï¼Œä½†æ˜¯ä¼šå¢åŠ ä»£ç çš„å¤æ‚åº¦ã€‚</p><p>3ï¼‰å®šæ—¶åŒæ­¥æ•°æ® ï¼ˆ<strong>å®šæ—¶å°† MySQL ä¸­æœ€æ–°çš„æ•°æ®åŒæ­¥åˆ° Redis ç¼“å­˜ä¸­</strong>ã€‚ï¼‰</p><p>4ï¼‰æ¶ˆæ¯é˜Ÿåˆ— ï¼ˆ**å°†å†™æ“ä½œå‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå†ç”±æ¶ˆæ¯é˜Ÿåˆ—å°†æ“ä½œåŒæ­¥åˆ° MySQL å’Œ Redis ç¼“å­˜ä¸­ã€‚**è¿™ç§æ–¹æ³•å¯ä»¥å¼‚æ­¥å¤„ç†æ•°æ®ï¼Œæé«˜åº”ç”¨çš„æ€§èƒ½ã€‚</p><h5 id="3-ç³»ç»Ÿä¸­ç”¨åˆ°é‚£äº›ç®—æ³•ï¼Ÿ">3.ç³»ç»Ÿä¸­ç”¨åˆ°é‚£äº›ç®—æ³•ï¼Ÿ</h5><p>1ï¼‰åŠ å¯†ç®—æ³•ï¼šMD5 åŠ ç›åŠ å¯†</p><p>ä¸å¯é€†åŠ å¯†ï¼šåŒä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å®¹æ¯æ¬¡åŠ å¯†å¾—ç»“æœä¸€æ ·ã€‚</p><p>åŠ ç›æ–¹å¼ï¼š 1.string+key ç„¶åè¿›è¡Œ md5 åŠ å¯† 2.ç”¨ string é“­æ–‡çš„ hashcode ä½œä¸ºç›ï¼Œç„¶åè¿›è¡Œ md5 åŠ å¯† 3.éšæœºç”Ÿæˆé—ä¼ å­—ç¬¦ä¸²ä½œä¸ºç›ï¼Œç„¶åè¿›è¡Œ md5 åŠ å¯†ã€‚ä¿å­˜ç”¨æˆ·å¯†ç ã€‚</p><p>2ï¼‰Raft ç®—æ³•å®ç°åˆ†å¸ƒå¼ç³»ç»Ÿä¸€è‡´æ€§ï¼ˆå‡å¦‚ç³»ç»Ÿéƒ¨ç½²åˆ°ä¸‰ä¸ªé›†ç¾¤ï¼‰ï¼šé¢†å¯¼é€‰ä¸¾ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œè¾¹ï¼Œéœ€è¦é€‰ä¸¾ä¸€ä¸ªé¢†å¯¼ï¼Œç®€å•æ¥è¯´å‡å¦‚æœ‰ä¸‰å°æœºå™¨éœ€è¦é€‰å‡ºä¸€ä¸ªè€å¤§ã€‚æ—¥å¿—å¤åˆ¶ï¼Œæ‰€æœ‰çš„æ”¹å˜é€šè¿‡é¢†å¯¼ï¼Œé¢†å¯¼å†™ä¸€ä¸ªæ—¥å¿—ï¼Œä¹Ÿè®©éšä»è·Ÿç€å†™ã€‚åªè¦æŒ‰ç…§é¢†å¯¼é€‰ä¸¾åŠ ä¸Šæ—¥å¿—å¤åˆ¶ï¼Œå°±å¯ä»¥ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿå¾—ç»Ÿä¸€æ€§ã€‚</p><p>è¯¦ç»†ï¼š<strong>é¢†å¯¼é€‰ä¸¾</strong></p><ol><li>é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨é»˜è®¤éƒ½æ˜¯éšä»çŠ¶æ€</li><li>å¦‚æœæ²¡æœ‰ç›‘å¬åˆ°åˆ°é¢†å¯¼è€…å‘½ä»¤è‡ªå·±ï¼Œå˜æˆå€™é€‰è€…</li><li>æŠ•ç¥¨ï¼Œæœ€ç»ˆæˆä¸ºé¢†å¯¼</li></ol><p><strong>å…·ä½“æ­¥éª¤</strong>ï¼š</p><ol><li>é€‰ä¸¾è¶…æ—¶ election timeout éšä»å˜æˆå€™é€‰è€…çš„æ—¶é—´ã€150ms and 300ms éšæœºçš„ã€‘ã€è‡ªæ—‹æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°é¢†å¯¼çš„å‘½ä»¤å˜æˆå€™é€‰è€…ã€‘ä¾‹å¦‚ï¼šå¯åŠ¨é›†ç¾¤ï¼Œ3 ä¸ªèŠ‚ç‚¹è·å¾—éšæœºè‡ªæ—‹æ—¶é—´ï¼Œè‡ªæ—‹æ—¶é—´åˆ°äº†å°±æˆä¸ºå€™é€‰èŠ‚ç‚¹</li><li>æˆä¸ºå€™é€‰èŠ‚ç‚¹ï¼Œå¹¶ç»™è‡ªå·±æŠ•ç¥¨ 1ï¼Œç„¶åç»™å…¶ä»–éšä»èŠ‚ç‚¹å‘é€é€‰ä¸¾è¯·æ±‚ã€éšä»èŠ‚ç‚¹çš„ç¥¨å¯èƒ½æŠ•ç»™æ›´å¿«çš„å€™é€‰è€…ã€‘éšä»èŠ‚ç‚¹çš„ç¥¨ä¸€æ—¦æŠ•å‡ºä¾¿é‡æ–°è‡ªæ—‹</li><li>å¿ƒè·³æ—¶é—´ï¼šæ¯éš”ä¸€æ®µæ—¶é—´å‘é€ä¸€ä¸ªå¿ƒè·³ï¼Œç„¶åéšä»èŠ‚ç‚¹åˆ·æ–°è‡ªæ—‹æ—¶é—´ã€å°äº 300msï¼Œå¦åˆ™å¤§å®¶éƒ½æˆä¸ºå€™é€‰è€…äº†ã€‘æ­¤æ—¶é¢†å¯¼ç½‘ç»œå»¶æ—¶ï¼Œè‡ªæ—‹ç»“æŸäº§ç”Ÿå€™é€‰è€…ï¼Œäº§ç”Ÿæ–°é¢†å¯¼</li><li>æœ‰å¤šä¸ªå€™é€‰è€…ï¼Œå¹¶ä¸”ç¥¨æ•°ä¸€æ ·ï¼Œå°±è‡ªæ—‹é‡æ–°æŠ•</li></ol><blockquote><p><strong>é¢†å¯¼å¤åˆ¶ã€å¯ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‘</strong></p></blockquote><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ‰€æœ‰èŠ‚ç‚¹ä¿®æ”¹æ•°æ®ï¼Œéƒ½è¦é€šè¿‡é¢†å¯¼æ¥ä¿®æ”¹</span><br><span class="line"><span class="number">1</span>ã€å®¢æˆ·ç«¯é€šçŸ¥é¢†å¯¼ä¿®æ”¹ä¸€ä¸ªæ•°æ®ï¼Œé¢†å¯¼å…ˆåˆ›å»ºä¸€ä¸ª èŠ‚ç‚¹æ—¥å¿—</span><br><span class="line"><span class="number">2</span>ã€é¢†å¯¼å°†è¿™æ¡æ—¥å¿— å‘é€ç»™æ‰€æœ‰æ‰€æœ‰éšä»èŠ‚ç‚¹ã€éšä»èŠ‚ç‚¹æ”¶åˆ°å¹¶è¿”å›ç¡®è®¤æ¶ˆæ¯ç»™é¢†å¯¼ã€‘</span><br><span class="line"><span class="number">3</span>ã€é¢†å¯¼ç­‰å¾…å¤§å¤šæ•°éšä»èŠ‚ç‚¹çš„ç¡®è®¤æ¶ˆæ¯ï¼Œé¢†å¯¼æäº¤æ•°æ®ï¼Œç„¶åé€šçŸ¥éšä»èŠ‚ç‚¹å¯ä»¥æäº¤äº†</span><br><span class="line"><span class="number">4</span>ã€éšä»èŠ‚ç‚¹ä¹Ÿæäº¤æ•°æ®ã€‚æœ€åé¢†å¯¼èŠ‚ç‚¹ç»™è¯·æ±‚è¿”å›æäº¤æˆåŠŸ</span><br><span class="line"></span><br><span class="line">å…·ä½“æ­¥éª¤ï¼š</span><br><span class="line"><span class="number">1</span>ã€é¢†å¯¼æ”¶åˆ°åå¹¶ä¸ä¼šé©¬ä¸Šç»™éšä»èŠ‚ç‚¹å‘é€ æ—¥å¿—ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡å¿ƒè·³æ—¶å‘é€æ—¥å¿—</span><br><span class="line"><span class="number">2</span>ã€ç„¶åé¢†å¯¼æäº¤å¹¶é©¬ä¸Šè¿”å›è¯·æ±‚æäº¤æˆåŠŸã€‚ç„¶åè·Ÿéšä¸‹ä¸€ä¸ªå¿ƒè·³å‘é€éšä» å‘Šè¯‰å…¶æäº¤</span><br><span class="line"><span class="number">3</span>ã€å¯ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€ä¾‹å¦‚é€‰å‡ºæ¥ä¸¤ä¸ªé¢†å¯¼ï¼Œä¸åŒæœºæˆ¿ã€‚<span class="number">2</span>ä¸ªå’Œ<span class="number">3</span>ä¸ªç»„æˆä¸¤ä¸ªç¾¤ã€‘</span><br><span class="line"><span class="built_in">demo</span>ï¼šæ­¤æ—¶<span class="number">2</span>ä¸ªçš„é‚£ä¸ªå®¢æˆ·ç«¯å‘è¯·æ±‚ï¼Œä¸€ç›´ä¿å­˜å¤±è´¥ï¼Œå› ä¸ºä¸æ˜¯å¤§å¤šæ•°äººæˆåŠŸã€æ‰€ä»¥æ•°æ®æœªæäº¤ã€‘ï¼Œä½†æ˜¯å¦å¤–ä¸€è¾¹<span class="number">3</span>ä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤å¯ä»¥ä¿å­˜æˆåŠŸã€å¤§å¤šæ•°èŠ‚ç‚¹ã€‘</span><br><span class="line">å¦‚æœæ­¤æ—¶ä¸¤ä¸ªé›†ç¾¤æ¢å¤äº†æ•°æ®é€šä¿¡ï¼Œæ—§é¢†å¯¼é€€ä½ï¼Œå¹¶ä¸”è·Ÿç€æ—§é¢†å¯¼æœªæäº¤çš„æ•°æ®éœ€è¦å›æ»šã€ä½è½®é¢†å¯¼é€€ä½ï¼Œæ–°é¢†å¯¼ä¸Šä½ã€‘</span><br><span class="line">ç„¶ååŒ¹é…ä¸Šæ–°é¢†å¯¼çš„æ—¥å¿—</span><br></pre></td></tr></table></figure><p>æ•°æ®ä¸€è‡´æ€§ï¼šåªæœ‰ä¸Šé¢ä¸€ä¸ªé¢†å¯¼æ•°æ®ä¿å­˜æˆåŠŸã€å¤§å¤šæ•°èŠ‚ç‚¹ã€‘</p><p>æ•°æ®é€šä¿¡æ¢å¤ï¼Œæ—§é¢†å¯¼é€€ä½</p><h5 id="4-ç¤¾äº¤ç™»å½•ï¼ˆå¾®åšç™»å½•ï¼‰åŠŸèƒ½æ¨¡å—å¦‚ä½•è®¾è®¡å¹¶å®ç°çš„ï¼Ÿ">4.ç¤¾äº¤ç™»å½•ï¼ˆå¾®åšç™»å½•ï¼‰åŠŸèƒ½æ¨¡å—å¦‚ä½•è®¾è®¡å¹¶å®ç°çš„ï¼Ÿ</h5><p><strong>OAuth2.0</strong> <strong>ï¼š</strong> å¯¹äºç”¨æˆ·ç›¸å…³çš„ OpenAPI ï¼ˆä¾‹å¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼ŒåŠ¨æ€åŒæ­¥ï¼Œç…§ç‰‡ï¼Œæ—¥å¿—ï¼Œåˆ†</p><p>äº«ç­‰ï¼‰ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„å®‰å…¨å’Œéšç§ï¼Œç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ç”¨æˆ·æ•°æ®å‰éƒ½éœ€è¦æ˜¾å¼çš„å‘</p><p>ç”¨æˆ·å¾æ±‚æˆæƒã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šç‚¹å‡»ç¤¾äº¤ç™»å½•æŒ‰é’®ï¼Œå¼•å¯¼ç”¨æˆ·è¿›å…¥æˆæƒé¡µã€‚ç™»å½•æˆåŠŸï¼Œè·å¾— code<br>ç¬¬äºŒæ­¥ï¼šæ ¹æ® code æ¢å– Access Tokenã€‚ï¼ˆcode åªèƒ½ç”¨ä¸€æ¬¡ï¼Œä¸€å®šæ—¶é—´å†… Access Token ä¸å˜ï¼‰<br>ç¬¬ä¸‰æ­¥ï¼šæ ¹æ® Access Tokenï¼Œè·å–ç”¨æˆ·ä¿¡æ¯<br>ç¬¬å››æ­¥ï¼šåœ¨ç”¨æˆ·è¡¨åé¢åŠ ä¸€ä¸ª social_uid å­—æ®µç”¨äºå…³è”æœ¬ç³»ç»Ÿçš„è´¦æˆ·ä¿¡æ¯ï¼Œç™»å½•çš„æ—¶å€™ï¼Œæ£€æµ‹è¿™ä¸ªæ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦æ›¾ç»ç™»é™†è¿‡ã€‚<br>è‹¥æ²¡æœ‰æŸ¥åˆ°å½“å‰ç¤¾äº¤ç”¨æˆ·å¯¹åº”çš„è®°å½•æˆ‘ä»¬å°±éœ€è¦æ³¨å†Œä¸€ä¸ªï¼Œå°±æ–°å¢ï¼ˆè¿™ä¸ªæ—¶å€™éœ€è¦ access_token è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰social_uidï¼Œaccess_tokenï¼Œexpires_in;<br>è‹¥å­˜åœ¨å°±æ ¹æ® social_uidï¼Œæ›´æ–° access_tokenï¼Œexpires_in;</p><h5 id="5-ä½“ç³»ç»“æ„è®¾è®¡">5.ä½“ç³»ç»“æ„è®¾è®¡</h5><p>ä¸‰ç§è®¾å¤‡é€šè¿‡ç½‘å…³ç­‰æ‹¦æˆªåè¿›å…¥åä¸€ä¸ªå¾®æœåŠ¡æ¨¡å—ï¼Œå…¶ä¸­ä¸‰æ–¹æœåŠ¡åŒ…å«ç‰©æµã€çŸ­ä¿¡ã€é‡‘èï¼ˆæ”¯ä»˜å®ï¼‰ã€èº«ä»½è®¤è¯ç­‰ï¼Œä½¿ç”¨äº† Nacosã€Seataã€Sentinelã€SpringCloudã€SpringBoot ç­‰æŠ€æœ¯è¿›è¡ŒæœåŠ¡æ²»ç†ï¼Œæ•°æ®å±‚åŒ…å«äº† redisã€MySQLã€RabbitMQã€elasticã€oss ç­‰ã€‚</p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230514212043985.png" alt="image-20230514212043985" style="zoom: 67%;" /><h5 id="6-ç³»ç»Ÿç§’æ€å¦‚ä½•è®¾è®¡çš„ï¼Ÿ">6.ç³»ç»Ÿç§’æ€å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</h5><p>ç§’æ€æ³¨æ„ç‚¹ï¼š</p><p>1.æœåŠ¡å•ä¸€èŒè´£+ç‹¬ç«‹éƒ¨ç½² 2.ç§’æ€é“¾æ¥åŠ å¯†ï¼›3.åŠ¨é™åˆ†ç¦»ï¼›4.åº“å­˜é¢„çƒ­ï¼Œå¿«é€Ÿæ‰£å‡ï¼ˆredis) ;5.æ¶æ„è¯·æ±‚æ‹¦æˆªï¼›6.æµé‡é”™å³°ï¼ˆåŠ éªŒè¯ç ï¼‰7.é™æµç†”æ–­é™çº§ï¼›8.é˜Ÿåˆ—å‰Šå³°ï¼ˆæ…¢æ…¢åˆ›å»ºè®¢å•ï¼Œæ‰£å‡åº“å­˜ï¼‰</p><p>â‘  åå°æ–°å¢ç§’æ€åœºæ¬¡ï¼›â‘¡ åœºæ¬¡å…³è”å•†å“ï¼›â‘¢ ç§’æ€æœåŠ¡è®¾è®¡ï¼›</p><img src="https://raw.githubusercontent.com/Angus9823/BlogDrawingBed_Typora_pic/main/2023/03/image-20230514212112376.png" alt="image-20230514212112376" style="zoom: 67%;" /><p>â‘£ å®šæ—¶ä»»åŠ¡ï¼›â‘¤ å®šæ—¶ä¸Šä¼ ç§’æ€ï¼›â‘¥ ä¿¡å·é‡é™æµï¼ˆå•†å“ç§’æ€æ•°é‡ä½œä¸ºä¿¡å·é‡)ï¼›â‘¦ å¼‚æ­¥è·å–å•†å“è¯¦æƒ…ï¼›â‘§ ç™»å½•æ£€æŸ¥ï¼ˆæ‹¦æˆªå™¨ï¼›â‘¨MQ å¼‚æ­¥å¤„ç†ï¼›â‘© ç§’æ€æˆåŠŸï¼Œè¿”å›è®¢å•å·ã€‚</p>]]></content>
    
    
    <summary type="html">ã€è®ºæ–‡ç­”è¾©é—®é¢˜è®°å½•ã€‘</summary>
    
    
    
    
    <category term="è®ºæ–‡ç­”è¾©" scheme="https://angus9823.github.io/tags/%E8%AE%BA%E6%96%87%E7%AD%94%E8%BE%A9/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬19ç«  æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤</title>
    <link href="https://angus9823.github.io/posts/20409461.html"/>
    <id>https://angus9823.github.io/posts/20409461.html</id>
    <published>2023-04-18T07:38:31.000Z</published>
    <updated>2023-04-18T08:25:56.567Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬19ç« -æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤">ç¬¬19ç«  æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤</h3><h4 id="1-ç‰©ç†å¤‡ä»½ä¸é€»è¾‘å¤‡ä»½"><strong>1.</strong> <strong>ç‰©ç†å¤‡ä»½ä¸é€»è¾‘å¤‡ä»½</strong></h4><p><strong>ç‰©ç†å¤‡ä»½</strong>ï¼šå¤‡ä»½æ•°æ®æ–‡ä»¶ï¼Œè½¬å‚¨æ•°æ®åº“ç‰©ç†æ–‡ä»¶åˆ°æŸä¸€ç›®å½•ã€‚ç‰©ç†å¤‡ä»½æ¢å¤é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†å ç”¨ç©ºé—´æ¯”è¾ƒå¤§ï¼ŒMySQLä¸­å¯ä»¥ç”¨<code>xtrabackup</code>å·¥å…·æ¥è¿›è¡Œç‰©ç†å¤‡ä»½ã€‚</p><p><strong>é€»è¾‘å¤‡ä»½</strong>ï¼šå¯¹æ•°æ®åº“å¯¹è±¡åˆ©ç”¨å·¥å…·è¿›è¡Œå¯¼å‡ºå·¥ä½œï¼Œæ±‡æ€»å…¥å¤‡ä»½æ–‡ä»¶å†…ã€‚é€»è¾‘å¤‡ä»½æ¢å¤é€Ÿåº¦æ…¢ï¼Œä½†å ç”¨ç©ºé—´å°ï¼Œæ›´çµæ´»ã€‚MySQL ä¸­å¸¸ç”¨çš„é€»è¾‘å¤‡ä»½å·¥å…·ä¸º<code>mysqldump</code>ã€‚é€»è¾‘å¤‡ä»½å°±æ˜¯<code>å¤‡ä»½sqlè¯­å¥</code>ï¼Œåœ¨æ¢å¤çš„æ—¶å€™æ‰§è¡Œå¤‡ä»½çš„sqlè¯­å¥å®ç°æ•°æ®åº“æ•°æ®çš„é‡ç°ã€‚</p><h4 id="2-mysqldumpå®ç°é€»è¾‘å¤‡ä»½"><strong>2. mysqldumpå®ç°é€»è¾‘å¤‡ä»½</strong></h4><h5 id="2-1-å¤‡ä»½ä¸€ä¸ªæ•°æ®åº“"><strong>2.1</strong> <strong>å¤‡ä»½ä¸€ä¸ªæ•°æ®åº“</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump â€“u ç”¨æˆ·åç§° â€“h ä¸»æœºåç§° â€“på¯†ç  å¾…å¤‡ä»½çš„æ•°æ®åº“åç§°[tbname, [tbname...]]&gt; å¤‡ä»½æ–‡ä»¶å ç§°.sql</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu&gt;atguigu.sql #å¤‡ä»½æ–‡ä»¶å­˜å‚¨åœ¨å½“å‰ç›®å½•ä¸‹</span><br><span class="line">mysqldump -uroot -p atguigudb1 &gt; /var/lib/mysql/atguigu.sql</span><br></pre></td></tr></table></figure><h5 id="2-2-å¤‡ä»½å…¨éƒ¨æ•°æ®åº“"><strong>2.2</strong> <strong>å¤‡ä»½å…¨éƒ¨æ•°æ®åº“</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -pxxxxxx --all-databases &gt; all_database.sql </span><br><span class="line">mysqldump -uroot -pxxxxxx -A &gt; all_database.sql</span><br></pre></td></tr></table></figure><h5 id="2-3-å¤‡ä»½éƒ¨åˆ†æ•°æ®åº“"><strong>2.3</strong> <strong>å¤‡ä»½éƒ¨åˆ†æ•°æ®åº“</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump â€“u user â€“h host â€“p --databases [æ•°æ®åº“çš„åç§°1 [æ•°æ®åº“çš„åç§°2...]] &gt; å¤‡ä»½æ–‡ä»¶å ç§°.sql</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p --databases atguigu atguigu12 &gt;two_database.sql</span><br><span class="line">mysqldump -uroot -p -B atguigu atguigu12 &gt; two_database.sql</span><br></pre></td></tr></table></figure><h5 id="2-4-å¤‡ä»½éƒ¨åˆ†è¡¨"><strong>2.4</strong> <strong>å¤‡ä»½éƒ¨åˆ†è¡¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump â€“u user â€“h host â€“p æ•°æ®åº“çš„åç§° [è¡¨å1 [è¡¨å2...]] &gt; å¤‡ä»½æ–‡ä»¶åç§°.sql</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu book&gt; book.sql</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¤‡ä»½å¤šå¼ è¡¨</span> </span><br><span class="line">mysqldump -uroot -p atguigu book account &gt; 2_tables_bak.sql</span><br></pre></td></tr></table></figure><h5 id="2-5-å¤‡ä»½å•è¡¨çš„éƒ¨åˆ†æ•°æ®"><strong>2.5</strong> <strong>å¤‡ä»½å•è¡¨çš„éƒ¨åˆ†æ•°æ®</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu student --where=&quot;id &lt; 10 &quot; &gt; student_part_id10_low_bak.sql</span><br></pre></td></tr></table></figure><h5 id="2-6-æ’é™¤æŸäº›è¡¨çš„å¤‡ä»½"><strong>2.6</strong> <strong>æ’é™¤æŸäº›è¡¨çš„å¤‡ä»½</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu --ignore-table=atguigu.student &gt; no_stu_bak.sql</span><br></pre></td></tr></table></figure><h5 id="2-7-åªå¤‡ä»½ç»“æ„æˆ–åªå¤‡ä»½æ•°æ®"><strong>2.7</strong> <strong>åªå¤‡ä»½ç»“æ„æˆ–åªå¤‡ä»½æ•°æ®</strong></h5><ul><li>åªå¤‡ä»½ç»“æ„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu --no-data &gt; atguigu_no_data_bak.sql</span><br></pre></td></tr></table></figure><ul><li>åªå¤‡ä»½æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p atguigu --no-create-info &gt; atguigu_no_create_info_bak.sql</span><br></pre></td></tr></table></figure><h5 id="2-8-å¤‡ä»½ä¸­åŒ…å«å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€äº‹ä»¶"><strong>2.8</strong> <strong>å¤‡ä»½ä¸­åŒ…å«å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€äº‹ä»¶</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p -R -E --databases atguigu &gt; fun_atguigu_bak.sql</span><br></pre></td></tr></table></figure><h4 id="3-mysqlå‘½ä»¤æ¢å¤æ•°æ®"><strong>3. mysqlå‘½ä»¤æ¢å¤æ•°æ®</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql â€“u root â€“p [dbname] &lt; backup.sql</span><br></pre></td></tr></table></figure><h5 id="3-1-å•åº“å¤‡ä»½ä¸­æ¢å¤å•åº“"><strong>3.1</strong> <strong>å•åº“å¤‡ä»½ä¸­æ¢å¤å•åº“</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¤‡ä»½æ–‡ä»¶ä¸­åŒ…å«äº†åˆ›å»ºæ•°æ®åº“çš„è¯­å¥</span></span><br><span class="line">mysql -uroot -p &lt; atguigu.sql</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¤‡ä»½æ–‡ä»¶ä¸­ä¸åŒ…å«äº†åˆ›å»ºæ•°æ®åº“çš„è¯­å¥</span></span><br><span class="line">mysql -uroot -p atguigu4&lt; atguigu.sql</span><br></pre></td></tr></table></figure><h5 id="3-2-å…¨é‡å¤‡ä»½æ¢å¤"><strong>3.2</strong> <strong>å…¨é‡å¤‡ä»½æ¢å¤</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql â€“u root â€“p &lt; all.sql</span><br></pre></td></tr></table></figure><h5 id="3-3-ä»å…¨é‡å¤‡ä»½ä¸­æ¢å¤å•åº“"><strong>3.3</strong> <strong>ä»å…¨é‡å¤‡ä»½ä¸­æ¢å¤å•åº“</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/^-- Current Database: `atguigu`/,/^-- Current Database: `/p&#x27; all_database.sql &gt; atguigu.sql </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ†ç¦»å®Œæˆåæˆ‘ä»¬å†å¯¼å…¥atguigu.sqlå³å¯æ¢å¤å•ä¸ªåº“</span></span><br></pre></td></tr></table></figure><h5 id="3-4-ä»å•åº“å¤‡ä»½ä¸­æ¢å¤å•è¡¨"><strong>3.4</strong> <strong>ä»å•åº“å¤‡ä»½ä¸­æ¢å¤å•è¡¨</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat atguigu.sql | sed -e &#x27;/./&#123;H;$!d;&#125;&#x27; -e &#x27;x;/CREATE TABLE `class`/!d;q&#x27; &gt; class_structure.sql </span><br><span class="line">cat atguigu.sql | grep --ignore-case &#x27;insert into `class`&#x27; &gt; class_data.sql </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç”¨shellè¯­æ³•åˆ†ç¦»å‡ºåˆ›å»ºè¡¨çš„è¯­å¥åŠæ’å…¥æ•°æ®çš„è¯­å¥å å†ä¾æ¬¡å¯¼å‡ºå³å¯å®Œæˆæ¢å¤</span> </span><br><span class="line"></span><br><span class="line">use atguigu; </span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="built_in">source</span> class_structure.sql;</span> </span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec) </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash"><span class="built_in">source</span> class_data.sql;</span> </span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure><h4 id="4-è¡¨çš„å¯¼å‡ºä¸å¯¼å…¥"><strong>4.</strong> <strong>è¡¨çš„å¯¼å‡ºä¸å¯¼å…¥</strong></h4><h5 id="4-1-è¡¨çš„å¯¼å‡º"><strong>4.1</strong> <strong>è¡¨çš„å¯¼å‡º</strong></h5><p><strong>1.</strong> <strong>ä½¿ç”¨SELECTâ€¦INTO OUTFILEå¯¼å‡ºæ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SHOW GLOBAL VARIABLES LIKE &#x27;%secure%&#x27;;</span><br><span class="line">SELECT * FROM account INTO OUTFILE &quot;/var/lib/mysql-files/account.txt&quot;;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä½¿ç”¨mysqldumpå‘½ä»¤å¯¼å‡ºæ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -p -T &quot;/var/lib/mysql-files/&quot; atguigu account</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆ–</span></span><br><span class="line">mysqldump -uroot -p -T &quot;/var/lib/mysql-files/&quot; atguigu account --fields-terminated- by=&#x27;,&#x27; --fields-optionally-enclosed-by=&#x27;\&quot;&#x27;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>ä½¿ç”¨mysqlå‘½ä»¤å¯¼å‡ºæ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p --execute=&quot;SELECT * FROM account;&quot; atguigu&gt; &quot;/var/lib/mysql-files/account.txt&quot;</span><br></pre></td></tr></table></figure><h5 id="4-2-è¡¨çš„å¯¼å…¥"><strong>4.2</strong> <strong>è¡¨çš„å¯¼å…¥</strong></h5><p><strong>1.</strong> <strong>ä½¿ç”¨LOAD DATA INFILEæ–¹å¼å¯¼å…¥æ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LOAD DATA INFILE &#x27;/var/lib/mysql-files/account_0.txt&#x27; INTO TABLE atguigu.account;</span><br><span class="line"># æˆ–</span><br><span class="line">LOAD DATA INFILE &#x27;/var/lib/mysql-files/account_1.txt&#x27; INTO TABLE atguigu.account FIELDS TERMINATED BY &#x27;,&#x27; ENCLOSED BY &#x27;\&quot;&#x27;;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä½¿ç”¨mysqlimportæ–¹å¼å¯¼å…¥æ–‡æœ¬æ–‡ä»¶</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlimport -uroot -p atguigu &#x27;/var/lib/mysql-files/account.txt&#x27; --fields-terminated- by=&#x27;,&#x27; --fields-optionally-enclosed-by=&#x27;\&quot;&#x27;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ã€ç‰©ç†å¤‡ä»½ä¸é€»è¾‘å¤‡ä»½ã€mysqldumpå®ç°é€»è¾‘å¤‡ä»½ã€mysqlå‘½ä»¤æ¢å¤æ•°æ®ã€è¡¨çš„å¯¼å‡ºä¸å¯¼å…¥ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬18ç«  ä¸»ä»å¤åˆ¶</title>
    <link href="https://angus9823.github.io/posts/a8c4b5f8.html"/>
    <id>https://angus9823.github.io/posts/a8c4b5f8.html</id>
    <published>2023-04-18T07:38:20.000Z</published>
    <updated>2023-04-18T08:25:56.562Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬18ç« -ä¸»ä»å¤åˆ¶">ç¬¬18ç«  ä¸»ä»å¤åˆ¶</h3><h4 id="1-ä¸»ä»å¤åˆ¶æ¦‚è¿°"><strong>1.</strong> <strong>ä¸»ä»å¤åˆ¶æ¦‚è¿°</strong></h4><h5 id="1-1-å¦‚ä½•æå‡æ•°æ®åº“å¹¶å‘èƒ½åŠ›"><strong>1.1</strong> <strong>å¦‚ä½•æå‡æ•°æ®åº“å¹¶å‘èƒ½åŠ›</strong></h5><p>ä¸€èˆ¬åº”ç”¨å¯¹æ•°æ®åº“è€Œè¨€éƒ½æ˜¯â€œ<code>è¯»å¤šå†™å°‘</code>â€ï¼Œä¹Ÿå°±è¯´å¯¹æ•°æ®åº“è¯»å–æ•°æ®çš„å‹åŠ›æ¯”è¾ƒå¤§ï¼Œæœ‰ä¸€ä¸ªæ€è·¯å°±æ˜¯é‡‡ç”¨æ•°æ®åº“é›†ç¾¤çš„æ–¹æ¡ˆï¼Œåš<code>ä¸»ä»æ¶æ„</code>ã€è¿›è¡Œ<code>è¯»å†™åˆ†ç¦»</code>ï¼Œè¿™æ ·åŒæ ·å¯ä»¥æå‡æ•°æ®åº“çš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„åº”ç”¨éƒ½éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œä¸»ä»æ¶æ„çš„è®¾ç½®ï¼Œæ¯•ç«Ÿè®¾ç½®æ¶æ„æœ¬èº«æ˜¯æœ‰æˆæœ¬çš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ¨äºæå‡æ•°æ®åº“é«˜å¹¶å‘è®¿é—®çš„æ•ˆç‡ï¼Œé‚£ä¹ˆé¦–å…ˆè€ƒè™‘çš„æ˜¯å¦‚ä½•<code>ä¼˜åŒ–SQLå’Œç´¢å¼•</code>ï¼Œè¿™ç§æ–¹å¼ç®€å•æœ‰æ•ˆï¼›å…¶æ¬¡æ‰æ˜¯é‡‡ç”¨<code>ç¼“å­˜çš„ç­–ç•¥</code>ï¼Œæ¯”å¦‚ä½¿ç”¨ Rediså°†çƒ­ç‚¹æ•°æ®ä¿å­˜åœ¨å†…å­˜æ•°æ®åº“ä¸­ï¼Œæå‡è¯»å–çš„æ•ˆç‡ï¼›æœ€åæ‰æ˜¯å¯¹æ•°æ®åº“é‡‡ç”¨<code>ä¸»ä»æ¶æ„</code>ï¼Œè¿›è¡Œè¯»å†™åˆ†ç¦»ã€‚</p><h5 id="1-2-ä¸»ä»å¤åˆ¶çš„ä½œç”¨"><strong>1.2</strong> <strong>ä¸»ä»å¤åˆ¶çš„ä½œç”¨</strong></h5><p><strong>ç¬¬1ä¸ªä½œç”¨ï¼šè¯»å†™åˆ†ç¦»ã€‚</strong></p><p><strong>ç¬¬2ä¸ªä½œç”¨å°±æ˜¯æ•°æ®å¤‡ä»½ã€‚</strong></p><p><strong>ç¬¬3ä¸ªä½œç”¨æ˜¯å…·æœ‰é«˜å¯ç”¨æ€§ã€‚</strong></p><h4 id="2-ä¸»ä»å¤åˆ¶çš„åŸç†"><strong>2.</strong> <strong>ä¸»ä»å¤åˆ¶çš„åŸç†</strong></h4><h5 id="2-1-åŸç†å‰–æ"><strong>2.1</strong> <strong>åŸç†å‰–æ</strong></h5><p><strong>ä¸‰ä¸ªçº¿ç¨‹</strong></p><p>å®é™…ä¸Šä¸»ä»åŒæ­¥çš„åŸç†å°±æ˜¯åŸºäº binlog è¿›è¡Œæ•°æ®åŒæ­¥çš„ã€‚åœ¨ä¸»ä»å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œä¼šåŸºäº<code>3 ä¸ªçº¿ç¨‹</code>æ¥æ“ä½œï¼Œä¸€ä¸ªä¸»åº“çº¿ç¨‹ï¼Œä¸¤ä¸ªä»åº“çº¿ç¨‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051646097.png" alt="image-20220405164559961"></p><p><code>äºŒè¿›åˆ¶æ—¥å¿—è½¬å‚¨çº¿ç¨‹</code>ï¼ˆBinlog dump threadï¼‰æ˜¯ä¸€ä¸ªä¸»åº“çº¿ç¨‹ã€‚å½“ä»åº“çº¿ç¨‹è¿æ¥çš„æ—¶å€™ï¼Œ ä¸»åº“å¯ä»¥å°†äºŒè¿›åˆ¶æ—¥å¿—å‘é€ç»™ä»åº“ï¼Œå½“ä¸»åº“è¯»å–äº‹ä»¶ï¼ˆEventï¼‰çš„æ—¶å€™ï¼Œä¼šåœ¨ Binlog ä¸Š<code>åŠ é”</code>ï¼Œè¯»å–å®Œæˆä¹‹åï¼Œå†å°†é”é‡Šæ”¾æ‰ã€‚</p><p><code>ä»åº“ I/O çº¿ç¨‹</code>ä¼šè¿æ¥åˆ°ä¸»åº“ï¼Œå‘ä¸»åº“å‘é€è¯·æ±‚æ›´æ–° Binlogã€‚è¿™æ—¶ä»åº“çš„ I/O çº¿ç¨‹å°±å¯ä»¥è¯»å–åˆ°ä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—è½¬å‚¨çº¿ç¨‹å‘é€çš„ Binlog æ›´æ–°éƒ¨åˆ†ï¼Œå¹¶ä¸”æ‹·è´åˆ°æœ¬åœ°çš„ä¸­ç»§æ—¥å¿— ï¼ˆRelay logï¼‰ã€‚</p><p><code>ä»åº“ SQL çº¿ç¨‹</code>ä¼šè¯»å–ä»åº“ä¸­çš„ä¸­ç»§æ—¥å¿—ï¼Œå¹¶ä¸”æ‰§è¡Œæ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†ä»åº“ä¸­çš„æ•°æ®ä¸ä¸»åº“ä¿æŒåŒæ­¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051647759.png" alt="image-20220405164718627"></p><p><strong>å¤åˆ¶ä¸‰æ­¥éª¤</strong></p><p>æ­¥éª¤1ï¼š<code>Master</code>å°†å†™æ“ä½œè®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆ<code>binlog</code>ï¼‰ã€‚</p><p>æ­¥éª¤2ï¼š<code>Slave</code>å°†<code>Master</code>çš„binary log eventsæ‹·è´åˆ°å®ƒçš„ä¸­ç»§æ—¥å¿—ï¼ˆ<code>relay log</code>ï¼‰ï¼›</p><p>æ­¥éª¤3ï¼š<code>Slave</code>é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åº”ç”¨åˆ°è‡ªå·±çš„æ•°æ®åº“ä¸­ã€‚ MySQLå¤åˆ¶æ˜¯å¼‚æ­¥çš„ä¸”ä¸²è¡ŒåŒ–çš„ï¼Œè€Œä¸”é‡å¯åä»<code>æ¥å…¥ç‚¹</code>å¼€å§‹å¤åˆ¶ã€‚</p><p><strong>å¤åˆ¶çš„é—®é¢˜</strong></p><p>å¤åˆ¶çš„æœ€å¤§é—®é¢˜ï¼š<code>å»¶æ—¶</code></p><h5 id="2-2-å¤åˆ¶çš„åŸºæœ¬åŸåˆ™"><strong>2.2</strong> <strong>å¤åˆ¶çš„åŸºæœ¬åŸåˆ™</strong></h5><ul><li><p>æ¯ä¸ª<code>Slave</code>åªæœ‰ä¸€ä¸ª<code>Master</code></p></li><li><p>æ¯ä¸ª<code>Slave</code>åªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æœåŠ¡å™¨ID</p></li><li><p>æ¯ä¸ª<code>Master</code>å¯ä»¥æœ‰å¤šä¸ª<code>Slave</code></p></li></ul><h4 id="3-åŒæ­¥æ•°æ®ä¸€è‡´æ€§é—®é¢˜"><strong>3.</strong> <strong>åŒæ­¥æ•°æ®ä¸€è‡´æ€§é—®é¢˜</strong></h4><p><strong>ä¸»ä»åŒæ­¥çš„è¦æ±‚ï¼š</strong></p><ul><li><p>è¯»åº“å’Œå†™åº“çš„æ•°æ®ä¸€è‡´(æœ€ç»ˆä¸€è‡´)ï¼›</p></li><li><p>å†™æ•°æ®å¿…é¡»å†™åˆ°å†™åº“ï¼›</p></li><li><p>è¯»æ•°æ®å¿…é¡»åˆ°è¯»åº“(ä¸ä¸€å®š)ï¼›</p></li></ul><h5 id="3-1-ç†è§£ä¸»ä»å»¶è¿Ÿé—®é¢˜"><strong>3.1</strong> <strong>ç†è§£ä¸»ä»å»¶è¿Ÿé—®é¢˜</strong></h5><p>è¿›è¡Œä¸»ä»åŒæ­¥çš„å†…å®¹æ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨è¿›è¡Œ<code>ç½‘ç»œä¼ è¾“</code>çš„è¿‡ç¨‹ä¸­å°±ä¸€å®šä¼š<code>å­˜åœ¨ä¸»ä»å»¶è¿Ÿ</code>ï¼ˆæ¯”å¦‚ 500msï¼‰ï¼Œè¿™æ ·å°±å¯èƒ½é€ æˆç”¨æˆ·åœ¨ä»åº“ä¸Šè¯»å–çš„æ•°æ®ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸»ä»åŒæ­¥ä¸­çš„<code>æ•°æ®ä¸ä¸€è‡´æ€§</code>é—®é¢˜ã€‚</p><h5 id="3-2-ä¸»ä»å»¶è¿Ÿé—®é¢˜åŸå› "><strong>3.2</strong> <strong>ä¸»ä»å»¶è¿Ÿé—®é¢˜åŸå› </strong></h5><p>åœ¨ç½‘ç»œæ­£å¸¸çš„æ—¶å€™ï¼Œæ—¥å¿—ä»ä¸»åº“ä¼ ç»™ä»åº“æ‰€éœ€çš„æ—¶é—´æ˜¯å¾ˆçŸ­çš„ï¼Œå³T2-T1çš„å€¼æ˜¯éå¸¸å°çš„ã€‚å³ï¼Œç½‘ç»œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸»å¤‡å»¶è¿Ÿçš„ä¸»è¦æ¥æºæ˜¯å¤‡åº“æ¥æ”¶å®Œbinlogå’Œæ‰§è¡Œå®Œè¿™ä¸ªäº‹åŠ¡ä¹‹é—´çš„æ—¶é—´å·®ã€‚</p><p>**ä¸»å¤‡å»¶è¿Ÿæœ€ç›´æ¥çš„è¡¨ç°æ˜¯ï¼Œä»åº“æ¶ˆè´¹ä¸­ç»§æ—¥å¿—ï¼ˆrelay logï¼‰çš„é€Ÿåº¦ï¼Œæ¯”ä¸»åº“ç”Ÿäº§binlogçš„é€Ÿåº¦è¦æ…¢ã€‚**é€ æˆåŸå› ï¼š</p><p>1ã€ä»åº“çš„æœºå™¨æ€§èƒ½æ¯”ä¸»åº“è¦å·®</p><p>2ã€ä»åº“çš„å‹åŠ›å¤§</p><p>3ã€å¤§äº‹åŠ¡çš„æ‰§è¡Œ</p><h5 id="3-3-å¦‚ä½•å‡å°‘ä¸»ä»å»¶è¿Ÿ"><strong>3.3</strong> <strong>å¦‚ä½•å‡å°‘ä¸»ä»å»¶è¿Ÿ</strong></h5><p>è‹¥æƒ³è¦å‡å°‘ä¸»ä»å»¶è¿Ÿçš„æ—¶é—´ï¼Œå¯ä»¥é‡‡å–ä¸‹é¢çš„åŠæ³•ï¼š</p><ol><li><p>é™ä½å¤šçº¿ç¨‹å¤§äº‹åŠ¡å¹¶å‘çš„æ¦‚ç‡ï¼Œä¼˜åŒ–ä¸šåŠ¡é€»è¾‘</p></li><li><p>ä¼˜åŒ–SQLï¼Œé¿å…æ…¢SQLï¼Œ<code>å‡å°‘æ‰¹é‡æ“ä½œ</code>ï¼Œå»ºè®®å†™è„šæœ¬ä»¥update-sleepè¿™æ ·çš„å½¢å¼å®Œæˆã€‚</p></li><li><p><code>æé«˜ä»åº“æœºå™¨çš„é…ç½®</code>ï¼Œå‡å°‘ä¸»åº“å†™binlogå’Œä»åº“è¯»binlogçš„æ•ˆç‡å·®ã€‚</p></li><li><p>å°½é‡é‡‡ç”¨<code>çŸ­çš„é“¾è·¯</code>ï¼Œä¹Ÿå°±æ˜¯ä¸»åº“å’Œä»åº“æœåŠ¡å™¨çš„è·ç¦»å°½é‡è¦çŸ­ï¼Œæå‡ç«¯å£å¸¦å®½ï¼Œå‡å°‘binlogä¼ è¾“çš„ç½‘ç»œå»¶æ—¶ã€‚</p></li><li><p>å®æ—¶æ€§è¦æ±‚çš„ä¸šåŠ¡è¯»å¼ºåˆ¶èµ°ä¸»åº“ï¼Œä»åº“åªåšç¾å¤‡ï¼Œå¤‡ä»½ã€‚</p></li></ol><h5 id="3-4-å¦‚ä½•è§£å†³ä¸€è‡´æ€§é—®é¢˜"><strong>3.4</strong> <strong>å¦‚ä½•è§£å†³ä¸€è‡´æ€§é—®é¢˜</strong></h5><p>è¯»å†™åˆ†ç¦»æƒ…å†µä¸‹ï¼Œè§£å†³ä¸»ä»åŒæ­¥ä¸­æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œ å°±æ˜¯è§£å†³ä¸»ä»ä¹‹é—´ æ•°æ®å¤åˆ¶æ–¹å¼ çš„é—®é¢˜ï¼Œå¦‚æœæŒ‰ç…§æ•°æ®ä¸€è‡´æ€§ ä»å¼±åˆ°å¼º æ¥è¿›è¡Œåˆ’åˆ†ï¼Œæœ‰ä»¥ä¸‹ 3 ç§å¤åˆ¶æ–¹å¼ã€‚</p><p><strong>æ–¹æ³•</strong> <strong>1ï¼šå¼‚æ­¥å¤åˆ¶</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051654133.png" alt="image-20220405165455998"></p><p><strong>æ–¹æ³•</strong> <strong>2ï¼šåŠåŒæ­¥å¤åˆ¶</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051655175.png" alt="image-20220405165513025"></p><p><strong>æ–¹æ³•</strong> <strong>3ï¼šç»„å¤åˆ¶</strong></p><p>é¦–å…ˆæˆ‘ä»¬å°†å¤šä¸ªèŠ‚ç‚¹å…±åŒç»„æˆä¸€ä¸ªå¤åˆ¶ç»„ï¼Œåœ¨<code>æ‰§è¡Œè¯»å†™ï¼ˆRWï¼‰äº‹åŠ¡</code>çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡ä¸€è‡´æ€§åè®®å±‚ï¼ˆConsensus å±‚ï¼‰çš„åŒæ„ï¼Œä¹Ÿå°±æ˜¯è¯»å†™äº‹åŠ¡æƒ³è¦è¿›è¡Œæäº¤ï¼Œå¿…é¡»è¦ç»è¿‡ç»„é‡Œâ€œå¤§å¤šæ•°äººâ€ï¼ˆå¯¹åº” Node èŠ‚ç‚¹ï¼‰çš„åŒæ„ï¼Œå¤§å¤šæ•°æŒ‡çš„æ˜¯åŒæ„çš„èŠ‚ç‚¹æ•°é‡éœ€è¦å¤§äº ï¼ˆN/2+1ï¼‰ï¼Œè¿™æ ·æ‰å¯ä»¥è¿›è¡Œæäº¤ï¼Œè€Œä¸æ˜¯åŸå‘èµ·æ–¹ä¸€ä¸ªè¯´äº†ç®—ã€‚è€Œé’ˆå¯¹<code>åªè¯»ï¼ˆROï¼‰äº‹åŠ¡</code>åˆ™ä¸éœ€è¦ç»è¿‡ç»„å†…åŒæ„ï¼Œç›´æ¥ COMMIT å³å¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051656560.png" alt="image-20220405165650425"></p><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€ä¸»ä»å¤åˆ¶æ¦‚è¿°ã€ä¸»ä»å¤åˆ¶çš„åŸç†ã€åŒæ­¥æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬17ç«  å…¶å®ƒæ•°æ®åº“æ—¥å¿—</title>
    <link href="https://angus9823.github.io/posts/33dc6f58.html"/>
    <id>https://angus9823.github.io/posts/33dc6f58.html</id>
    <published>2023-04-18T07:38:08.000Z</published>
    <updated>2023-04-18T08:25:56.558Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬17ç« -å…¶å®ƒæ•°æ®åº“æ—¥å¿—">ç¬¬17ç«  å…¶å®ƒæ•°æ®åº“æ—¥å¿—</h3><h4 id="1-MySQLæ”¯æŒçš„æ—¥å¿—"><strong>1. MySQLæ”¯æŒçš„æ—¥å¿—</strong></h4><h5 id="1-1-æ—¥å¿—ç±»å‹"><strong>1.1</strong> <strong>æ—¥å¿—ç±»å‹</strong></h5><p>MySQLæœ‰ä¸åŒç±»å‹çš„æ—¥å¿—æ–‡ä»¶ï¼Œç”¨æ¥å­˜å‚¨ä¸åŒç±»å‹çš„æ—¥å¿—ï¼Œåˆ†ä¸º<code>äºŒè¿›åˆ¶æ—¥å¿—</code>ã€<code>é”™è¯¯æ—¥å¿—</code>ã€<code>é€šç”¨æŸ¥è¯¢æ—¥å¿—</code>å’Œ<code>æ…¢æŸ¥è¯¢æ—¥å¿—</code>ï¼Œè¿™ä¹Ÿæ˜¯å¸¸ç”¨çš„4ç§ã€‚MySQL 8åˆæ–°å¢ä¸¤ç§æ”¯æŒçš„æ—¥å¿—ï¼š<code>ä¸­ç»§æ—¥å¿—</code>å’Œ<code>æ•°æ®å®šä¹‰è¯­å¥æ—¥å¿—</code>ã€‚ä½¿ç”¨è¿™äº›æ—¥å¿—æ–‡ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹MySQLå†…éƒ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><ul><li><p>**æ…¢æŸ¥è¯¢æ—¥å¿—ï¼š**è®°å½•æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡long_query_timeçš„æ‰€æœ‰æŸ¥è¯¢ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ã€‚</p></li><li><p>**é€šç”¨æŸ¥è¯¢æ—¥å¿—ï¼š**è®°å½•æ‰€æœ‰è¿æ¥çš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´ï¼Œä»¥åŠè¿æ¥å‘é€ç»™æ•°æ®åº“æœåŠ¡å™¨çš„æ‰€æœ‰æŒ‡ä»¤ï¼Œå¯¹æˆ‘ä»¬å¤åŸæ“ä½œçš„å®é™…åœºæ™¯ã€å‘ç°é—®é¢˜ï¼Œç”šè‡³æ˜¯å¯¹æ•°æ®åº“æ“ä½œçš„å®¡è®¡éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p></li><li><p>**é”™è¯¯æ—¥å¿—ï¼š**è®°å½•MySQLæœåŠ¡çš„å¯åŠ¨ã€è¿è¡Œæˆ–åœæ­¢MySQLæœåŠ¡æ—¶å‡ºç°çš„é—®é¢˜ï¼Œæ–¹ä¾¿æˆ‘ä»¬äº†è§£æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œä»è€Œå¯¹æœåŠ¡å™¨è¿›è¡Œç»´æŠ¤ã€‚</p></li><li><p>**äºŒè¿›åˆ¶æ—¥å¿—ï¼š**è®°å½•æ‰€æœ‰æ›´æ”¹æ•°æ®çš„è¯­å¥ï¼Œå¯ä»¥ç”¨äºä¸»ä»æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®åŒæ­¥ï¼Œä»¥åŠæœåŠ¡å™¨é‡åˆ°æ•…éšœæ—¶æ•°æ®çš„æ— æŸå¤±æ¢å¤ã€‚</p></li><li><p>**ä¸­ç»§æ—¥å¿—ï¼š**ç”¨äºä¸»ä»æœåŠ¡å™¨æ¶æ„ä¸­ï¼Œä»æœåŠ¡å™¨ç”¨æ¥å­˜æ”¾ä¸»æœåŠ¡å™¨äºŒè¿›åˆ¶æ—¥å¿—å†…å®¹çš„ä¸€ä¸ªä¸­é—´æ–‡ä»¶ã€‚ä»æœåŠ¡å™¨é€šè¿‡è¯»å–ä¸­ç»§æ—¥å¿—çš„å†…å®¹ï¼Œæ¥åŒæ­¥ä¸»æœåŠ¡å™¨ä¸Šçš„æ“ä½œã€‚</p></li><li><p>**æ•°æ®å®šä¹‰è¯­å¥æ—¥å¿—ï¼š**è®°å½•æ•°æ®å®šä¹‰è¯­å¥æ‰§è¡Œçš„å…ƒæ•°æ®æ“ä½œã€‚</p></li></ul><p>é™¤äºŒè¿›åˆ¶æ—¥å¿—å¤–ï¼Œå…¶ä»–æ—¥å¿—éƒ½æ˜¯<code>æ–‡æœ¬æ–‡ä»¶</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ—¥å¿—åˆ›å»ºäº<code>MySQLæ•°æ®ç›®å½•</code>ä¸­ã€‚</p><h5 id="1-2-æ—¥å¿—çš„å¼Šç«¯"><strong>1.2</strong> <strong>æ—¥å¿—çš„å¼Šç«¯</strong></h5><ul><li><p>æ—¥å¿—åŠŸèƒ½ä¼š<code>é™ä½MySQLæ•°æ®åº“çš„æ€§èƒ½</code>ã€‚</p></li><li><p>æ—¥å¿—ä¼š<code>å ç”¨å¤§é‡çš„ç£ç›˜ç©ºé—´</code>ã€‚</p></li></ul><h4 id="2-é€šç”¨æŸ¥è¯¢æ—¥å¿—-general-query-log"><strong>2.</strong> <strong>é€šç”¨æŸ¥è¯¢æ—¥å¿—(general query log)</strong></h4><p>é€šç”¨æŸ¥è¯¢æ—¥å¿—ç”¨æ¥<code>è®°å½•ç”¨æˆ·çš„æ‰€æœ‰æ“ä½œ</code>ï¼ŒåŒ…æ‹¬å¯åŠ¨å’Œå…³é—­MySQLæœåŠ¡ã€æ‰€æœ‰ç”¨æˆ·çš„è¿æ¥å¼€å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´ã€å‘ç»™ MySQL æ•°æ®åº“æœåŠ¡å™¨çš„æ‰€æœ‰ SQL æŒ‡ä»¤ç­‰ã€‚å½“æˆ‘ä»¬çš„æ•°æ®å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œ<strong>æŸ¥çœ‹é€šç”¨æŸ¥è¯¢æ—¥å¿—ï¼Œè¿˜åŸæ“ä½œæ—¶çš„å…·ä½“åœºæ™¯</strong>ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡†ç¡®å®šä½é—®é¢˜ã€‚</p><h5 id="2-1-æŸ¥çœ‹å½“å‰çŠ¶æ€"><strong>2.1</strong> <strong>æŸ¥çœ‹å½“å‰çŠ¶æ€</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES LIKE &#x27;%general%&#x27;;</span><br></pre></td></tr></table></figure><h5 id="2-2-å¯åŠ¨æ—¥å¿—"><strong>2.2</strong> <strong>å¯åŠ¨æ—¥å¿—</strong></h5><p><strong>æ–¹å¼1ï¼šæ°¸ä¹…æ€§æ–¹å¼</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="attr">general_log</span>=<span class="literal">ON</span> </span><br><span class="line"><span class="attr">general_log_file</span>=[path[filename]] <span class="comment">#æ—¥å¿—æ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„ï¼Œfilenameä¸ºæ—¥å¿—æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼2ï¼šä¸´æ—¶æ€§æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL general_log=on; # å¼€å¯é€šç”¨æŸ¥è¯¢æ—¥å¿—</span><br><span class="line">SET GLOBAL general_log_file=â€™path/filenameâ€™; # è®¾ç½®æ—¥å¿—æ–‡ä»¶ä¿å­˜ä½ç½®</span><br><span class="line">SET GLOBAL general_log=off; # å…³é—­é€šç”¨æŸ¥è¯¢æ—¥å¿—</span><br><span class="line">SHOW VARIABLES LIKE &#x27;general_log%&#x27;; # æŸ¥çœ‹è®¾ç½®åæƒ…å†µ</span><br></pre></td></tr></table></figure><h5 id="2-3-åœæ­¢æ—¥å¿—"><strong>2.3</strong> <strong>åœæ­¢æ—¥å¿—</strong></h5><p><strong>æ–¹å¼1ï¼šæ°¸ä¹…æ€§æ–¹å¼</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="attr">general_log</span>=<span class="literal">OFF</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼2ï¼šä¸´æ—¶æ€§æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL general_log=off;</span><br><span class="line">SHOW VARIABLES LIKE &#x27;general_log%&#x27;;</span><br></pre></td></tr></table></figure><h4 id="3-é”™è¯¯æ—¥å¿—-error-log"><strong>3.é”™è¯¯æ—¥å¿—(error log)</strong></h4><h5 id="3-1-å¯åŠ¨æ—¥å¿—"><strong>3.1</strong> <strong>å¯åŠ¨æ—¥å¿—</strong></h5><p>åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œé”™è¯¯æ—¥å¿—åŠŸèƒ½æ˜¯<code>é»˜è®¤å¼€å¯</code>çš„ã€‚è€Œä¸”ï¼Œé”™è¯¯æ—¥å¿—<code>æ— æ³•è¢«ç¦æ­¢</code>ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="attr">log-error</span>=[path/[filename]] <span class="comment">#pathä¸ºæ—¥å¿—æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„ï¼Œfilenameä¸ºæ—¥å¿—æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><h5 id="3-2-æŸ¥çœ‹æ—¥å¿—"><strong>3.2</strong> <strong>æŸ¥çœ‹æ—¥å¿—</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES LIKE &#x27;log_err%&#x27;;</span><br></pre></td></tr></table></figure><h5 id="3-3-åˆ é™¤-åˆ·æ–°æ—¥å¿—"><strong>3.3</strong> <strong>åˆ é™¤\åˆ·æ–°æ—¥å¿—</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">install -omysql -gmysql -m0644 /dev/null /var/log/mysqld.log</span><br><span class="line">mysqladmin -uroot -p flush-logs</span><br></pre></td></tr></table></figure><h4 id="4-äºŒè¿›åˆ¶æ—¥å¿—-bin-log"><strong>4.</strong> <strong>äºŒè¿›åˆ¶æ—¥å¿—(bin log)</strong></h4><h5 id="4-1-æŸ¥çœ‹é»˜è®¤æƒ…å†µ"><strong>4.1</strong> <strong>æŸ¥çœ‹é»˜è®¤æƒ…å†µ</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;%log_bin%&#x27;;</span><br></pre></td></tr></table></figure><h5 id="4-2-æ—¥å¿—å‚æ•°è®¾ç½®"><strong>4.2</strong> <strong>æ—¥å¿—å‚æ•°è®¾ç½®</strong></h5><p><strong>æ–¹å¼1ï¼šæ°¸ä¹…æ€§æ–¹å¼</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="comment">#å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿— </span></span><br><span class="line"><span class="attr">log-bin</span>=atguigu-bin </span><br><span class="line"><span class="attr">binlog_expire_logs_seconds</span>=<span class="number">600</span> max_binlog_size=<span class="number">100</span>M</span><br></pre></td></tr></table></figure><p><strong>è®¾ç½®å¸¦æ–‡ä»¶å¤¹çš„bin-logæ—¥å¿—å­˜æ”¾ç›®å½•</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="attr">log-bin</span>=<span class="string">&quot;/var/lib/mysql/binlog/atguigu-bin&quot;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ–°å»ºçš„æ–‡ä»¶å¤¹éœ€è¦ä½¿ç”¨mysqlç”¨æˆ·ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R -v mysql:mysql binlog</span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼2ï¼šä¸´æ—¶æ€§æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># global çº§åˆ« </span><br><span class="line">mysql&gt; set global sql_log_bin=0; </span><br><span class="line">ERROR 1228 (HY000): Variable &#x27;sql_log_bin&#x27; is a SESSION variable and can`t be used with SET GLOBAL </span><br><span class="line"></span><br><span class="line"># sessionçº§åˆ« </span><br><span class="line">mysql&gt; SET sql_log_bin=0; </span><br><span class="line">Query OK, 0 rows affected (0.01 ç§’)</span><br></pre></td></tr></table></figure><h5 id="4-3-æŸ¥çœ‹æ—¥å¿—"><strong>4.3</strong> <strong>æŸ¥çœ‹æ—¥å¿—</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog -v &quot;/var/lib/mysql/binlog/atguigu-bin.000002&quot;</span><br><span class="line"># ä¸æ˜¾ç¤ºbinlogæ ¼å¼çš„è¯­å¥</span><br><span class="line">mysqlbinlog -v --base64-output=DECODE-ROWS &quot;/var/lib/mysql/binlog/atguigu-bin.000002&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># å¯æŸ¥çœ‹å‚æ•°å¸®åŠ© </span><br><span class="line">mysqlbinlog --no-defaults --help </span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹æœ€å100è¡Œ </span><br><span class="line">mysqlbinlog --no-defaults --base64-output=decode-rows -vv atguigu-bin.000002 |tail -100 </span><br><span class="line"></span><br><span class="line"># æ ¹æ®positionæŸ¥æ‰¾ </span><br><span class="line">mysqlbinlog --no-defaults --base64-output=decode-rows -vv atguigu-bin.000002 |grep -A20 &#x27;4939002&#x27;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§åŠæ³•è¯»å–å‡ºbinlogæ—¥å¿—çš„å…¨æ–‡å†…å®¹æ¯”è¾ƒå¤šï¼Œä¸å®¹æ˜“åˆ†è¾¨æŸ¥çœ‹åˆ°posç‚¹ä¿¡æ¯ï¼Œä¸‹é¢ä»‹ç»ä¸€ç§æ›´ä¸ºæ–¹ä¾¿çš„æŸ¥è¯¢å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show binlog events [IN &#x27;log_name&#x27;] [FROM pos] [LIMIT [offset,] row_count];</span><br></pre></td></tr></table></figure><ul><li><code>IN 'log_name'</code>ï¼šæŒ‡å®šè¦æŸ¥è¯¢çš„binlogæ–‡ä»¶åï¼ˆä¸æŒ‡å®šå°±æ˜¯ç¬¬ä¸€ä¸ªbinlogæ–‡ä»¶ï¼‰</li><li><code>FROM pos</code>ï¼šæŒ‡å®šä»å“ªä¸ªposèµ·å§‹ç‚¹å¼€å§‹æŸ¥èµ·ï¼ˆä¸æŒ‡å®šå°±æ˜¯ä»æ•´ä¸ªæ–‡ä»¶é¦–ä¸ªposç‚¹å¼€å§‹ç®—ï¼‰</li><li><code>LIMIT [offset]</code>ï¼šåç§»é‡(ä¸æŒ‡å®šå°±æ˜¯0)</li><li><code>row_count</code>:æŸ¥è¯¢æ€»æ¡æ•°ï¼ˆä¸æŒ‡å®šå°±æ˜¯æ‰€æœ‰è¡Œï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show binlog events in &#x27;atguigu-bin.000002&#x27;;</span><br></pre></td></tr></table></figure><h5 id="4-4-ä½¿ç”¨æ—¥å¿—æ¢å¤æ•°æ®"><strong>4.4</strong> <strong>ä½¿ç”¨æ—¥å¿—æ¢å¤æ•°æ®</strong></h5><p>mysqlbinlogæ¢å¤æ•°æ®çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog [option] filename|mysql â€“uuser -ppass;</span><br></pre></td></tr></table></figure><ul><li><code>filename</code>ï¼šæ˜¯æ—¥å¿—æ–‡ä»¶åã€‚</li><li><code>option</code>ï¼šå¯é€‰é¡¹ï¼Œæ¯”è¾ƒé‡è¦çš„ä¸¤å¯¹optionå‚æ•°æ˜¯â€“start-dateã€â€“stop-date å’Œ --start-positionã€-- stop-positionã€‚<ul><li><code>--start-date å’Œ --stop-date</code>ï¼šå¯ä»¥æŒ‡å®šæ¢å¤æ•°æ®åº“çš„èµ·å§‹æ—¶é—´ç‚¹å’Œç»“æŸæ—¶é—´ç‚¹ã€‚</li><li><code>--start-positionå’Œ--stop-position</code>ï¼šå¯ä»¥æŒ‡å®šæ¢å¤æ•°æ®çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</li></ul></li></ul><blockquote><p>æ³¨æ„ï¼šä½¿ç”¨mysqlbinlogå‘½ä»¤è¿›è¡Œæ¢å¤æ“ä½œæ—¶ï¼Œå¿…é¡»æ˜¯ç¼–å·å°çš„å…ˆæ¢å¤ï¼Œä¾‹å¦‚atguigu-bin.000001å¿…é¡»åœ¨atguigu-bin.000002ä¹‹å‰æ¢å¤ã€‚</p></blockquote><h5 id="4-5-åˆ é™¤äºŒè¿›åˆ¶æ—¥å¿—"><strong>4.5</strong> <strong>åˆ é™¤äºŒè¿›åˆ¶æ—¥å¿—</strong></h5><p><strong>1. PURGE MASTER LOGSï¼šåˆ é™¤æŒ‡å®šæ—¥å¿—æ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PURGE &#123;MASTER | BINARY&#125; LOGS TO â€˜æŒ‡å®šæ—¥å¿—æ–‡ä»¶åâ€™ </span><br><span class="line">PURGE &#123;MASTER | BINARY&#125; LOGS BEFORE â€˜æŒ‡å®šæ—¥æœŸâ€™</span><br></pre></td></tr></table></figure><h4 id="5-å†è°ˆäºŒè¿›åˆ¶æ—¥å¿—-binlog"><strong>5.</strong> <strong>å†è°ˆäºŒè¿›åˆ¶æ—¥å¿—(binlog)</strong></h4><h5 id="5-1-å†™å…¥æœºåˆ¶"><strong>5.1</strong> <strong>å†™å…¥æœºåˆ¶</strong></h5><p>binlogçš„å†™å…¥æ—¶æœºä¹Ÿéå¸¸ç®€å•ï¼Œäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæŠŠæ—¥å¿—å†™åˆ°<code>binlog cache</code>ï¼Œäº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œå†æŠŠbinlog cacheå†™åˆ°binlogæ–‡ä»¶ä¸­ã€‚å› ä¸ºä¸€ä¸ªäº‹åŠ¡çš„binlogä¸èƒ½è¢«æ‹†å¼€ï¼Œæ— è®ºè¿™ä¸ªäº‹åŠ¡å¤šå¤§ï¼Œä¹Ÿè¦ç¡®ä¿ä¸€æ¬¡æ€§å†™å…¥ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ªå—å†…å­˜ä½œä¸ºbinlog cacheã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051630535.png" alt="image-20220405163025361"></p><p>writeå’Œfsyncçš„æ—¶æœºï¼Œå¯ä»¥ç”±å‚æ•°<code>sync_binlog</code>æ§åˆ¶ï¼Œé»˜è®¤æ˜¯ <code>0</code>ã€‚ä¸º0çš„æ—¶å€™ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½åªwriteï¼Œç”±ç³»ç»Ÿè‡ªè¡Œåˆ¤æ–­ä»€ä¹ˆæ—¶å€™æ‰§è¡Œfsyncã€‚è™½ç„¶æ€§èƒ½å¾—åˆ°æå‡ï¼Œä½†æ˜¯æœºå™¨å®•æœºï¼Œpage cacheé‡Œé¢çš„binglog ä¼šä¸¢å¤±ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051631346.png" alt="image-20220405163125180"></p><p>ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå¯ä»¥è®¾ç½®ä¸º<code>1</code>ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½ä¼šæ‰§è¡Œfsyncï¼Œå°±å¦‚åŒ<strong>redo log</strong> <strong>åˆ·ç›˜æµç¨‹</strong>ä¸€æ ·ã€‚æœ€åè¿˜æœ‰ä¸€ç§æŠ˜ä¸­æ–¹å¼ï¼Œå¯ä»¥è®¾ç½®ä¸ºN(N&gt;1)ï¼Œè¡¨ç¤ºæ¯æ¬¡æäº¤äº‹åŠ¡éƒ½writeï¼Œä½†ç´¯ç§¯Nä¸ªäº‹åŠ¡åæ‰fsyncã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051632526.png" alt="image-20220405163205364"></p><p>åœ¨å‡ºç°IOç“¶é¢ˆçš„åœºæ™¯é‡Œï¼Œå°†sync_binlogè®¾ç½®æˆä¸€ä¸ªæ¯”è¾ƒå¤§çš„å€¼ï¼Œå¯ä»¥æå‡æ€§èƒ½ã€‚åŒæ ·çš„ï¼Œå¦‚æœæœºå™¨å®•æœºï¼Œä¼šä¸¢å¤±æœ€è¿‘Nä¸ªäº‹åŠ¡çš„binlogæ—¥å¿—ã€‚</p><h5 id="5-2-binlogä¸redologå¯¹æ¯”"><strong>5.2 binlogä¸redologå¯¹æ¯”</strong></h5><ul><li>redo log å®ƒæ˜¯<code>ç‰©ç†æ—¥å¿—</code>ï¼Œè®°å½•å†…å®¹æ˜¯â€œåœ¨æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹â€ï¼Œå±äº InnoDB å­˜å‚¨å¼•æ“å±‚äº§ç”Ÿçš„ã€‚</li><li>è€Œ binlog æ˜¯<code>é€»è¾‘æ—¥å¿—</code>ï¼Œè®°å½•å†…å®¹æ˜¯è¯­å¥çš„åŸå§‹é€»è¾‘ï¼Œç±»ä¼¼äºâ€œç»™ ID=2 è¿™ä¸€è¡Œçš„ c å­—æ®µåŠ  1â€ï¼Œå±äºMySQL Server å±‚ã€‚</li><li>è™½ç„¶å®ƒä»¬éƒ½å±äºæŒä¹…åŒ–çš„ä¿è¯ï¼Œä½†æ˜¯ä¾§é‡ç‚¹ä¸åŒã€‚<ul><li>redo log è®©InnoDBå­˜å‚¨å¼•æ“æ‹¥æœ‰äº†å´©æºƒæ¢å¤èƒ½åŠ›ã€‚</li><li>binlogä¿è¯äº†MySQLé›†ç¾¤æ¶æ„çš„æ•°æ®ä¸€è‡´æ€§</li></ul></li></ul><h5 id="5-3-ä¸¤é˜¶æ®µæäº¤"><strong>5.3</strong> <strong>ä¸¤é˜¶æ®µæäº¤</strong></h5><p>åœ¨æ‰§è¡Œæ›´æ–°è¯­å¥è¿‡ç¨‹ï¼Œä¼šè®°å½•redo logä¸binlogä¸¤å—æ—¥å¿—ï¼Œä»¥åŸºæœ¬çš„äº‹åŠ¡ä¸ºå•ä½ï¼Œredo logåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä¸æ–­å†™å…¥ï¼Œè€Œbinlogåªæœ‰åœ¨æäº¤äº‹åŠ¡æ—¶æ‰å†™å…¥ï¼Œæ‰€ä»¥redo logä¸binlogçš„<code>å†™å…¥æ—¶æœº</code>ä¸ä¸€æ ·ã€‚</p><p>ä¸ºäº†è§£å†³ä¸¤ä»½æ—¥å¿—ä¹‹é—´çš„é€»è¾‘ä¸€è‡´é—®é¢˜ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä½¿ç”¨<strong>ä¸¤é˜¶æ®µæäº¤</strong>æ–¹æ¡ˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051637390.png" alt="image-20220405163716222"></p><p>ä½¿ç”¨<strong>ä¸¤é˜¶æ®µæäº¤</strong>åï¼Œå†™å…¥binlogæ—¶å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¸ä¼šæœ‰å½±å“</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051639192.png" alt="image-20220405163902977"></p><p>å¦ä¸€ä¸ªåœºæ™¯ï¼Œredo logè®¾ç½®commité˜¶æ®µå‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¼šä¸ä¼šå›æ»šäº‹åŠ¡å‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051639403.png" alt="image-20220405163927129"></p><p>å¹¶ä¸ä¼šå›æ»šäº‹åŠ¡ï¼Œå®ƒä¼šæ‰§è¡Œä¸Šå›¾æ¡†ä½çš„é€»è¾‘ï¼Œè™½ç„¶redo logæ˜¯å¤„äºprepareé˜¶æ®µï¼Œä½†æ˜¯èƒ½é€šè¿‡äº‹åŠ¡idæ‰¾åˆ°å¯¹åº”çš„binlogæ—¥å¿—ï¼Œæ‰€ä»¥MySQLè®¤ä¸ºæ˜¯å®Œæ•´çš„ï¼Œå°±ä¼šæäº¤äº‹åŠ¡æ¢å¤æ•°æ®ã€‚</p><h4 id="6-ä¸­ç»§æ—¥å¿—-relay-log"><strong>6.</strong> <strong>ä¸­ç»§æ—¥å¿—(relay log)</strong></h4><h5 id="6-1-ä»‹ç»"><strong>6.1</strong> <strong>ä»‹ç»</strong></h5><p><strong>ä¸­ç»§æ—¥å¿—åªåœ¨ä¸»ä»æœåŠ¡å™¨æ¶æ„çš„ä»æœåŠ¡å™¨ä¸Šå­˜åœ¨</strong>ã€‚ä»æœåŠ¡å™¨ä¸ºäº†ä¸ä¸»æœåŠ¡å™¨ä¿æŒä¸€è‡´ï¼Œè¦ä»ä¸»æœåŠ¡å™¨è¯»å–äºŒè¿›åˆ¶æ—¥å¿—çš„å†…å®¹ï¼Œå¹¶ä¸”æŠŠè¯»å–åˆ°çš„ä¿¡æ¯å†™å…¥<code>æœ¬åœ°çš„æ—¥å¿—æ–‡ä»¶</code>ä¸­ï¼Œè¿™ä¸ªä»æœåŠ¡å™¨æœ¬åœ°çš„æ—¥å¿—æ–‡ä»¶å°±å«<code>ä¸­ç»§æ—¥å¿—</code>ã€‚ç„¶åï¼Œä»æœåŠ¡å™¨è¯»å–ä¸­ç»§æ—¥å¿—ï¼Œå¹¶æ ¹æ®ä¸­ç»§æ—¥å¿—çš„å†…å®¹å¯¹ä»æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œå®Œæˆä¸»ä»æœåŠ¡å™¨çš„<code>æ•°æ®åŒæ­¥</code>ã€‚</p><h5 id="6-2-æ¢å¤çš„å…¸å‹é”™è¯¯"><strong>6.2</strong> <strong>æ¢å¤çš„å…¸å‹é”™è¯¯</strong></h5><p>å¦‚æœä»æœåŠ¡å™¨å®•æœºï¼Œæœ‰çš„æ—¶å€™ä¸ºäº†ç³»ç»Ÿæ¢å¤ï¼Œè¦é‡è£…æ“ä½œç³»ç»Ÿï¼Œè¿™æ ·å°±å¯èƒ½ä¼šå¯¼è‡´ä½ çš„<code>æœåŠ¡å™¨åç§°</code>ä¸ä¹‹å‰<code>ä¸åŒ</code>ã€‚è€Œä¸­ç»§æ—¥å¿—é‡Œæ˜¯<code>åŒ…å«ä»æœåŠ¡å™¨å</code>çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å¯èƒ½å¯¼è‡´ä½ æ¢å¤ä»æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ— æ³•ä»å®•æœºå‰çš„ä¸­ç»§æ—¥å¿—é‡Œè¯»å–æ•°æ®ï¼Œä»¥ä¸ºæ˜¯æ—¥å¿—æ–‡ä»¶æŸåäº†ï¼Œå…¶å®æ˜¯åç§°ä¸å¯¹äº†ã€‚</p><p>è§£å†³çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠä»æœåŠ¡å™¨çš„åç§°æ”¹å›ä¹‹å‰çš„åç§°ã€‚</p>]]></content>
    
    
    <summary type="html">ã€MySQLæ”¯æŒçš„æ—¥å¿—ã€é€šç”¨æŸ¥è¯¢æ—¥å¿—(general query log)ã€é”™è¯¯æ—¥å¿—(error log)ã€äºŒè¿›åˆ¶æ—¥å¿—(bin log)ã€å†è°ˆäºŒè¿›åˆ¶æ—¥å¿—(binlog)ã€ä¸­ç»§æ—¥å¿—(relay log)ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬16ç«  å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</title>
    <link href="https://angus9823.github.io/posts/26b3c04f.html"/>
    <id>https://angus9823.github.io/posts/26b3c04f.html</id>
    <published>2023-04-18T07:37:55.000Z</published>
    <updated>2023-04-18T08:25:56.552Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬16ç« -å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶">ç¬¬16ç«  å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</h3><h4 id="1-ä»€ä¹ˆæ˜¯MVCC"><strong>1.</strong> <strong>ä»€ä¹ˆæ˜¯MVCC</strong></h4><p>MVCC ï¼ˆMultiversion Concurrency Controlï¼‰ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚é¡¾åæ€ä¹‰ï¼ŒMVCC æ˜¯é€šè¿‡æ•°æ®è¡Œçš„å¤šä¸ªç‰ˆæœ¬ç®¡ç†æ¥å®ç°æ•°æ®åº“çš„<code>å¹¶å‘æ§åˆ¶</code>ã€‚è¿™é¡¹æŠ€æœ¯ä½¿å¾—åœ¨InnoDBçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹æ‰§è¡Œ<code>ä¸€è‡´æ€§è¯»</code>æ“ä½œæœ‰äº†ä¿è¯ã€‚æ¢è¨€ä¹‹ï¼Œå°±æ˜¯ä¸ºäº†æŸ¥è¯¢ä¸€äº›æ­£åœ¨è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ›´æ–°çš„è¡Œï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°å®ƒä»¬è¢«æ›´æ–°ä¹‹å‰çš„å€¼ï¼Œè¿™æ ·åœ¨åšæŸ¥è¯¢çš„æ—¶å€™å°±ä¸ç”¨ç­‰å¾…å¦ä¸€ä¸ªäº‹åŠ¡é‡Šæ”¾é”ã€‚</p><h4 id="2-å¿«ç…§è¯»ä¸å½“å‰è¯»"><strong>2.</strong> <strong>å¿«ç…§è¯»ä¸å½“å‰è¯»</strong></h4><p>MVCCåœ¨MySQL InnoDBä¸­çš„å®ç°ä¸»è¦æ˜¯ä¸ºäº†æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œç”¨æ›´å¥½çš„æ–¹å¼å»å¤„ç†<code>è¯»-å†™å†²çª</code>ï¼Œåšåˆ°å³ä½¿æœ‰è¯»å†™å†²çªæ—¶ï¼Œä¹Ÿèƒ½åšåˆ°<code>ä¸åŠ é”</code>ï¼Œ<code>éé˜»å¡å¹¶å‘è¯»</code>ï¼Œè€Œè¿™ä¸ªè¯»æŒ‡çš„å°±æ˜¯<code>å¿«ç…§è¯»</code>, è€Œé<code>å½“å‰è¯»</code>ã€‚å½“å‰è¯»å®é™…ä¸Šæ˜¯ä¸€ç§åŠ é”çš„æ“ä½œï¼Œæ˜¯æ‚²è§‚é”çš„å®ç°ã€‚è€ŒMVCCæœ¬è´¨æ˜¯é‡‡ç”¨ä¹è§‚é”æ€æƒ³çš„ä¸€ç§æ–¹å¼ã€‚</p><h5 id="2-1-å¿«ç…§è¯»"><strong>2.1</strong> <strong>å¿«ç…§è¯»</strong></h5><p>å¿«ç…§è¯»åˆå«ä¸€è‡´æ€§è¯»ï¼Œè¯»å–çš„æ˜¯å¿«ç…§æ•°æ®ã€‚<strong>ä¸åŠ é”çš„ç®€å•çš„</strong> <strong>SELECT</strong> <strong>éƒ½å±äºå¿«ç…§è¯»</strong>ï¼Œå³ä¸åŠ é”çš„éé˜»å¡è¯»ã€‚</p><p>ä¹‹æ‰€ä»¥å‡ºç°å¿«ç…§è¯»çš„æƒ…å†µï¼Œæ˜¯åŸºäºæé«˜å¹¶å‘æ€§èƒ½çš„è€ƒè™‘ï¼Œå¿«ç…§è¯»çš„å®ç°æ˜¯åŸºäºMVCCï¼Œå®ƒåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé¿å…äº†åŠ é”æ“ä½œï¼Œé™ä½äº†å¼€é”€ã€‚</p><p>æ—¢ç„¶æ˜¯åŸºäºå¤šç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¿«ç…§è¯»å¯èƒ½è¯»åˆ°çš„å¹¶ä¸ä¸€å®šæ˜¯æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè€Œæœ‰å¯èƒ½æ˜¯ä¹‹å‰çš„å†å²ç‰ˆæœ¬ã€‚</p><p>å¿«ç…§è¯»çš„å‰ææ˜¯éš”ç¦»çº§åˆ«ä¸æ˜¯ä¸²è¡Œçº§åˆ«ï¼Œä¸²è¡Œçº§åˆ«ä¸‹çš„å¿«ç…§è¯»ä¼šé€€åŒ–æˆå½“å‰è¯»ã€‚</p><h5 id="2-2-å½“å‰è¯»"><strong>2.2</strong> <strong>å½“å‰è¯»</strong></h5><p>å½“å‰è¯»è¯»å–çš„æ˜¯è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆæœ€æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯å†å²ç‰ˆæœ¬çš„æ•°æ®ï¼‰ï¼Œè¯»å–æ—¶è¿˜è¦ä¿è¯å…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½ä¿®æ”¹å½“å‰è®°å½•ï¼Œä¼šå¯¹è¯»å–çš„è®°å½•è¿›è¡ŒåŠ é”ã€‚åŠ é”çš„ SELECTï¼Œæˆ–è€…å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹éƒ½ä¼šè¿›è¡Œå½“å‰è¯»ã€‚</p><h4 id="3-å¤ä¹ "><strong>3.</strong> <strong>å¤ä¹ </strong></h4><h5 id="3-1-å†è°ˆéš”ç¦»çº§åˆ«"><strong>3.1</strong> <strong>å†è°ˆéš”ç¦»çº§åˆ«</strong></h5><p>æˆ‘ä»¬çŸ¥é“äº‹åŠ¡æœ‰ 4 ä¸ªéš”ç¦»çº§åˆ«ï¼Œå¯èƒ½å­˜åœ¨ä¸‰ç§å¹¶å‘é—®é¢˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051536648.png" alt="image-20220405153617536"></p><p>å¦å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051536125.png" alt="image-20220405153632021"></p><h5 id="3-2-éšè—å­—æ®µã€Undo-Logç‰ˆæœ¬é“¾"><strong>3.2</strong> <strong>éšè—å­—æ®µã€Undo Logç‰ˆæœ¬é“¾</strong></h5><p>å›é¡¾ä¸€ä¸‹undoæ—¥å¿—çš„ç‰ˆæœ¬é“¾ï¼Œå¯¹äºä½¿ç”¨<code>InnoDB</code>å­˜å‚¨å¼•æ“çš„è¡¨æ¥è¯´ï¼Œå®ƒçš„èšç°‡ç´¢å¼•è®°å½•ä¸­éƒ½åŒ…å«ä¸¤ä¸ªå¿…è¦çš„éšè—åˆ—ã€‚</p><ul><li><code>trx_id</code>ï¼šæ¯æ¬¡ä¸€ä¸ªäº‹åŠ¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠè¯¥äº‹åŠ¡çš„<code>äº‹åŠ¡id</code>èµ‹å€¼ç»™trx_id éšè—åˆ—ã€‚</li><li><code>roll_pointer</code>ï¼šæ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œæ”¹åŠ¨æ—¶ï¼Œéƒ½ä¼šæŠŠæ—§çš„ç‰ˆæœ¬å†™å…¥åˆ° undoæ—¥å¿— ä¸­ï¼Œç„¶åè¿™ä¸ªéšè—åˆ—å°±ç›¸å½“äºä¸€ä¸ªæŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥æ‰¾åˆ°è¯¥è®°å½•ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚</li></ul><h4 id="4-MVCCå®ç°åŸç†ä¹‹ReadView"><strong>4. MVCCå®ç°åŸç†ä¹‹ReadView</strong></h4><p>MVCC çš„å®ç°ä¾èµ–äºï¼š<strong>éšè—å­—æ®µã€Undo Logã€Read View</strong>ã€‚</p><h5 id="4-1-ä»€ä¹ˆæ˜¯ReadView"><strong>4.1</strong> <strong>ä»€ä¹ˆæ˜¯ReadView</strong></h5><p>ReadViewå°±æ˜¯äº‹åŠ¡åœ¨ä½¿ç”¨MVCCæœºåˆ¶è¿›è¡Œå¿«ç…§è¯»æ“ä½œæ—¶äº§ç”Ÿçš„è¯»è§†å›¾ã€‚å½“äº‹åŠ¡å¯åŠ¨æ—¶ï¼Œä¼šç”Ÿæˆæ•°æ®åº“ç³»ç»Ÿå½“å‰çš„ä¸€ä¸ªå¿«ç…§ï¼ŒInnoDBä¸ºæ¯ä¸ªäº‹åŠ¡æ„é€ äº†ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥è®°å½•å¹¶ç»´æŠ¤ç³»ç»Ÿå½“å‰<code>æ´»è·ƒäº‹åŠ¡</code>çš„IDï¼ˆâ€œæ´»è·ƒâ€æŒ‡çš„å°±æ˜¯ï¼Œå¯åŠ¨äº†ä½†è¿˜æ²¡æäº¤ï¼‰ã€‚</p><h5 id="4-2-è®¾è®¡æ€è·¯"><strong>4.2</strong> <strong>è®¾è®¡æ€è·¯</strong></h5><p>ä½¿ç”¨<code>READ UNCOMMITTED</code>éš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼Œç”±äºå¯ä»¥è¯»åˆ°æœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„è®°å½•ï¼Œæ‰€ä»¥ç›´æ¥è¯»å–è®°å½•çš„æœ€æ–°ç‰ˆæœ¬å°±å¥½äº†ã€‚</p><p>ä½¿ç”¨<code>SERIALIZABLE</code>éš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼ŒInnoDBè§„å®šä½¿ç”¨åŠ é”çš„æ–¹å¼æ¥è®¿é—®è®°å½•ã€‚</p><p>ä½¿ç”¨<code>READ COMMITTED</code>å’Œ<code>REPEATABLE READ</code>éš”ç¦»çº§åˆ«çš„äº‹åŠ¡ï¼Œéƒ½å¿…é¡»ä¿è¯è¯»åˆ°<code>å·²ç»æäº¤äº†çš„</code>äº‹åŠ¡ä¿®æ”¹è¿‡çš„è®°å½•ã€‚å‡å¦‚å¦ä¸€ä¸ªäº‹åŠ¡å·²ç»ä¿®æ”¹äº†è®°å½•ä½†æ˜¯å°šæœªæäº¤ï¼Œæ˜¯ä¸èƒ½ç›´æ¥è¯»å–æœ€æ–°ç‰ˆæœ¬çš„è®°å½•çš„ï¼Œæ ¸å¿ƒé—®é¢˜å°±æ˜¯éœ€è¦åˆ¤æ–­ä¸€ä¸‹ç‰ˆæœ¬é“¾ä¸­çš„å“ªä¸ªç‰ˆæœ¬æ˜¯å½“å‰äº‹åŠ¡å¯è§çš„ï¼Œè¿™æ˜¯ReadViewè¦è§£å†³çš„ä¸»è¦é—®é¢˜ã€‚</p><p>è¿™ä¸ªReadViewä¸­ä¸»è¦åŒ…å«4ä¸ªæ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ol><li><code>creator_trx_id</code>ï¼Œåˆ›å»ºè¿™ä¸ª Read View çš„äº‹åŠ¡ IDã€‚</li></ol><blockquote><p>è¯´æ˜ï¼šåªæœ‰åœ¨å¯¹è¡¨ä¸­çš„è®°å½•åšæ”¹åŠ¨æ—¶ï¼ˆæ‰§è¡ŒINSERTã€DELETEã€UPDATEè¿™äº›è¯­å¥æ—¶ï¼‰æ‰ä¼šä¸ºäº‹åŠ¡åˆ†é…äº‹åŠ¡idï¼Œå¦åˆ™åœ¨ä¸€ä¸ªåªè¯»äº‹åŠ¡ä¸­çš„äº‹åŠ¡idå€¼éƒ½é»˜è®¤ä¸º0ã€‚</p></blockquote><ol start="2"><li><p><code>trx_ids</code>ï¼Œè¡¨ç¤ºåœ¨ç”ŸæˆReadViewæ—¶å½“å‰ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡çš„<code>äº‹åŠ¡idåˆ—è¡¨</code>ã€‚</p></li><li><p><code>up_limit_id</code>ï¼Œæ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡ IDã€‚</p></li><li><p><code>low_limit_id</code>ï¼Œè¡¨ç¤ºç”ŸæˆReadViewæ—¶ç³»ç»Ÿä¸­åº”è¯¥åˆ†é…ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„<code>id</code>å€¼ã€‚low_limit_id æ˜¯ç³»ç»Ÿæœ€å¤§çš„äº‹åŠ¡idå€¼ï¼Œè¿™é‡Œè¦æ³¨æ„æ˜¯ç³»ç»Ÿä¸­çš„äº‹åŠ¡idï¼Œéœ€è¦åŒºåˆ«äºæ­£åœ¨æ´»è·ƒçš„äº‹åŠ¡IDã€‚</p></li></ol><blockquote><p>æ³¨æ„ï¼šlow_limit_idå¹¶ä¸æ˜¯trx_idsä¸­çš„æœ€å¤§å€¼ï¼Œäº‹åŠ¡idæ˜¯é€’å¢åˆ†é…çš„ã€‚æ¯”å¦‚ï¼Œç°åœ¨æœ‰idä¸º1ï¼Œ 2ï¼Œ3è¿™ä¸‰ä¸ªäº‹åŠ¡ï¼Œä¹‹åidä¸º3çš„äº‹åŠ¡æäº¤äº†ã€‚é‚£ä¹ˆä¸€ä¸ªæ–°çš„è¯»äº‹åŠ¡åœ¨ç”ŸæˆReadViewæ—¶ï¼Œtrx_idså°±åŒ…æ‹¬1å’Œ2ï¼Œup_limit_idçš„å€¼å°±æ˜¯1ï¼Œlow_limit_idçš„å€¼å°±æ˜¯4ã€‚</p></blockquote><h5 id="4-3-ReadViewçš„è§„åˆ™"><strong>4.3 ReadViewçš„è§„åˆ™</strong></h5><p>æœ‰äº†è¿™ä¸ªReadViewï¼Œè¿™æ ·åœ¨è®¿é—®æŸæ¡è®°å½•æ—¶ï¼Œåªéœ€è¦æŒ‰ç…§ä¸‹è¾¹çš„æ­¥éª¤åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯è§ã€‚</p><ul><li>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_idå±æ€§å€¼ä¸ReadViewä¸­çš„<code>creator_trx_id</code>å€¼ç›¸åŒï¼Œæ„å‘³ç€å½“å‰äº‹åŠ¡åœ¨è®¿é—®å®ƒè‡ªå·±ä¿®æ”¹è¿‡çš„è®°å½•ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®ã€‚</li><li>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_idå±æ€§å€¼å°äºReadViewä¸­çš„<code>up_limit_id</code>å€¼ï¼Œè¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”ŸæˆReadViewå‰å·²ç»æäº¤ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®ã€‚</li><li>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_idå±æ€§å€¼å¤§äºæˆ–ç­‰äºReadViewä¸­çš„<code>low_limit_id</code>å€¼ï¼Œè¡¨æ˜ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡åœ¨å½“å‰äº‹åŠ¡ç”ŸæˆReadViewåæ‰å¼€å¯ï¼Œæ‰€ä»¥è¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«å½“å‰äº‹åŠ¡è®¿é—®ã€‚</li><li>å¦‚æœè¢«è®¿é—®ç‰ˆæœ¬çš„trx_idå±æ€§å€¼åœ¨ReadViewçš„<code>up_limit_id</code>å’Œ<code>low_limit_id</code>ä¹‹é—´ï¼Œé‚£å°±éœ€è¦åˆ¤æ–­ä¸€ä¸‹trx_idå±æ€§å€¼æ˜¯ä¸æ˜¯åœ¨ trx_ids åˆ—è¡¨ä¸­ã€‚<ul><li>å¦‚æœåœ¨ï¼Œè¯´æ˜åˆ›å»ºReadViewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡è¿˜æ˜¯æ´»è·ƒçš„ï¼Œè¯¥ç‰ˆæœ¬ä¸å¯ä»¥è¢«è®¿é—®ã€‚</li><li>å¦‚æœä¸åœ¨ï¼Œè¯´æ˜åˆ›å»ºReadViewæ—¶ç”Ÿæˆè¯¥ç‰ˆæœ¬çš„äº‹åŠ¡å·²ç»è¢«æäº¤ï¼Œè¯¥ç‰ˆæœ¬å¯ä»¥è¢«è®¿é—®ã€‚</li></ul></li></ul><h5 id="4-4-MVCCæ•´ä½“æ“ä½œæµç¨‹"><strong>4.4 MVCCæ•´ä½“æ“ä½œæµç¨‹</strong></h5><p>äº†è§£äº†è¿™äº›æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å½“æŸ¥è¯¢ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œç³»ç»Ÿå¦‚ä½•é€šè¿‡MVCCæ‰¾åˆ°å®ƒï¼š</p><ol><li><p>é¦–å…ˆè·å–äº‹åŠ¡è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡ IDï¼›</p></li><li><p>è·å– ReadViewï¼›</p></li><li><p>æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œç„¶åä¸ ReadView ä¸­çš„äº‹åŠ¡ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒï¼›</p></li><li><p>å¦‚æœä¸ç¬¦åˆ ReadView è§„åˆ™ï¼Œå°±éœ€è¦ä» Undo Log ä¸­è·å–å†å²å¿«ç…§ï¼›</p></li><li><p>æœ€åè¿”å›ç¬¦åˆè§„åˆ™çš„æ•°æ®ã€‚</p></li></ol><p>åœ¨éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤ï¼ˆRead Committedï¼‰æ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ¯ä¸€æ¬¡ SELECT æŸ¥è¯¢éƒ½ä¼šé‡æ–°è·å–ä¸€æ¬¡Read Viewã€‚</p><p>å¦‚è¡¨æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051549618.png" alt="image-20220405154948505"></p><blockquote><p>æ³¨æ„ï¼Œæ­¤æ—¶åŒæ ·çš„æŸ¥è¯¢è¯­å¥éƒ½ä¼šé‡æ–°è·å–ä¸€æ¬¡ Read Viewï¼Œè¿™æ—¶å¦‚æœ Read View ä¸åŒï¼Œå°±å¯èƒ½äº§ç”Ÿä¸å¯é‡å¤è¯»æˆ–è€…å¹»è¯»çš„æƒ…å†µã€‚</p></blockquote><p>å½“éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»çš„æ—¶å€™ï¼Œå°±é¿å…äº†ä¸å¯é‡å¤è¯»ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªäº‹åŠ¡åªåœ¨ç¬¬ä¸€æ¬¡ SELECT çš„æ—¶å€™ä¼šè·å–ä¸€æ¬¡ Read Viewï¼Œè€Œåé¢æ‰€æœ‰çš„ SELECT éƒ½ä¼šå¤ç”¨è¿™ä¸ª Read Viewï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051550072.png" alt="image-20220405155041964"></p><h4 id="5-ä¸¾ä¾‹è¯´æ˜"><strong>5.</strong> <strong>ä¸¾ä¾‹è¯´æ˜</strong></h4><h5 id="5-1-READ-COMMITTEDéš”ç¦»çº§åˆ«ä¸‹"><strong>5.1 READ COMMITTEDéš”ç¦»çº§åˆ«ä¸‹</strong></h5><p><strong>READ COMMITTED</strong> <strong>ï¼šæ¯æ¬¡è¯»å–æ•°æ®å‰éƒ½ç”Ÿæˆä¸€ä¸ªReadView</strong>ã€‚</p><h5 id="5-2-REPEATABLE-READéš”ç¦»çº§åˆ«ä¸‹"><strong>5.2 REPEATABLE READéš”ç¦»çº§åˆ«ä¸‹</strong></h5><p>ä½¿ç”¨<code>REPEATABLE READ</code>éš”ç¦»çº§åˆ«çš„äº‹åŠ¡æ¥è¯´ï¼Œåªä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶ç”Ÿæˆä¸€ä¸ª ReadView ï¼Œä¹‹åçš„æŸ¥è¯¢å°±ä¸ä¼šé‡å¤ç”Ÿæˆäº†ã€‚</p><h5 id="5-3-å¦‚ä½•è§£å†³å¹»è¯»"><strong>5.3</strong> <strong>å¦‚ä½•è§£å†³å¹»è¯»</strong></h5><p>å‡è®¾ç°åœ¨è¡¨ student ä¸­åªæœ‰ä¸€æ¡æ•°æ®ï¼Œæ•°æ®å†…å®¹ä¸­ï¼Œä¸»é”® id=1ï¼Œéšè—çš„ trx_id=10ï¼Œå®ƒçš„ undo log å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051556631.png" alt="image-20220405155640520"></p><p>å‡è®¾ç°åœ¨æœ‰äº‹åŠ¡ A å’Œäº‹åŠ¡ B å¹¶å‘æ‰§è¡Œï¼Œ<code>äº‹åŠ¡ A</code>çš„äº‹åŠ¡ id ä¸º<code>20</code>ï¼Œ<code>äº‹åŠ¡ B</code>çš„äº‹åŠ¡ id ä¸º<code>30</code>ã€‚</p><p>æ­¥éª¤1ï¼šäº‹åŠ¡ A å¼€å§‹ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŸ¥è¯¢çš„ SQL è¯­å¥å¦‚ä¸‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from student where id &gt;= 1;</span><br></pre></td></tr></table></figure><p>åœ¨å¼€å§‹æŸ¥è¯¢ä¹‹å‰ï¼ŒMySQL ä¼šä¸ºäº‹åŠ¡ A äº§ç”Ÿä¸€ä¸ª ReadViewï¼Œæ­¤æ—¶ ReadView çš„å†…å®¹å¦‚ä¸‹ï¼š<code>trx_ids= [20,30]</code>ï¼Œ<code>up_limit_id=20</code>ï¼Œ<code>low_limit_id=31</code>ï¼Œ<code>creator_trx_id=20</code>ã€‚</p><p>ç”±äºæ­¤æ—¶è¡¨ student ä¸­åªæœ‰ä¸€æ¡æ•°æ®ï¼Œä¸”ç¬¦åˆ where id&gt;=1 æ¡ä»¶ï¼Œå› æ­¤ä¼šæŸ¥è¯¢å‡ºæ¥ã€‚ç„¶åæ ¹æ® ReadViewæœºåˆ¶ï¼Œå‘ç°è¯¥è¡Œæ•°æ®çš„trx_id=10ï¼Œå°äºäº‹åŠ¡ A çš„ ReadView é‡Œ up_limit_idï¼Œè¿™è¡¨ç¤ºè¿™æ¡æ•°æ®æ˜¯äº‹åŠ¡ A å¼€å¯ä¹‹å‰ï¼Œå…¶ä»–äº‹åŠ¡å°±å·²ç»æäº¤äº†çš„æ•°æ®ï¼Œå› æ­¤äº‹åŠ¡ A å¯ä»¥è¯»å–åˆ°ã€‚</p><p>ç»“è®ºï¼šäº‹åŠ¡ A çš„ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œèƒ½è¯»å–åˆ°ä¸€æ¡æ•°æ®ï¼Œid=1ã€‚</p><p>æ­¥éª¤2ï¼šæ¥ç€äº‹åŠ¡ B(trx_id=30)ï¼Œå¾€è¡¨ student ä¸­æ–°æ’å…¥ä¸¤æ¡æ•°æ®ï¼Œå¹¶æäº¤äº‹åŠ¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into student(id,name) values(2,&#x27;æå››&#x27;); </span><br><span class="line">insert into student(id,name) values(3,&#x27;ç‹äº”&#x27;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¡¨student ä¸­å°±æœ‰ä¸‰æ¡æ•°æ®äº†ï¼Œå¯¹åº”çš„ undo å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051559345.png" alt="image-20220405155909223"></p><p>æ­¥éª¤3ï¼šæ¥ç€äº‹åŠ¡ A å¼€å¯ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼Œæ ¹æ®å¯é‡å¤è¯»éš”ç¦»çº§åˆ«çš„è§„åˆ™ï¼Œæ­¤æ—¶äº‹åŠ¡ A å¹¶ä¸ä¼šå†é‡æ–°ç”ŸæˆReadViewã€‚æ­¤æ—¶è¡¨ student ä¸­çš„ 3 æ¡æ•°æ®éƒ½æ»¡è¶³ where id&gt;=1 çš„æ¡ä»¶ï¼Œå› æ­¤ä¼šå…ˆæŸ¥å‡ºæ¥ã€‚ç„¶åæ ¹æ®ReadView æœºåˆ¶ï¼Œåˆ¤æ–­æ¯æ¡æ•°æ®æ˜¯ä¸æ˜¯éƒ½å¯ä»¥è¢«äº‹åŠ¡ A çœ‹åˆ°ã€‚</p><p>1ï¼‰é¦–å…ˆ id=1 çš„è¿™æ¡æ•°æ®ï¼Œå‰é¢å·²ç»è¯´è¿‡äº†ï¼Œå¯ä»¥è¢«äº‹åŠ¡ A çœ‹åˆ°ã€‚</p><p>2ï¼‰ç„¶åæ˜¯ id=2 çš„æ•°æ®ï¼Œå®ƒçš„ trx_id=30ï¼Œæ­¤æ—¶äº‹åŠ¡ A å‘ç°ï¼Œè¿™ä¸ªå€¼å¤„äº up_limit_id å’Œ low_limit_id ä¹‹é—´ï¼Œå› æ­¤è¿˜éœ€è¦å†åˆ¤æ–­ 30 æ˜¯å¦å¤„äº trx_ids æ•°ç»„å†…ã€‚ç”±äºäº‹åŠ¡ A çš„ trx_ids=[20,30]ï¼Œå› æ­¤åœ¨æ•°ç»„å†…ï¼Œè¿™è¡¨ç¤º id=2 çš„è¿™æ¡æ•°æ®æ˜¯ä¸äº‹åŠ¡ A åœ¨åŒä¸€æ—¶åˆ»å¯åŠ¨çš„å…¶ä»–äº‹åŠ¡æäº¤çš„ï¼Œæ‰€ä»¥è¿™æ¡æ•°æ®ä¸èƒ½è®©äº‹åŠ¡ A çœ‹åˆ°ã€‚</p><p>3ï¼‰åŒç†ï¼Œid=3 çš„è¿™æ¡æ•°æ®ï¼Œtrx_id ä¹Ÿä¸º 30ï¼Œå› æ­¤ä¹Ÿä¸èƒ½è¢«äº‹åŠ¡ A çœ‹è§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051559867.png" alt="image-20220405155941753"></p><p>ç»“è®ºï¼šæœ€ç»ˆäº‹åŠ¡ A çš„ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼Œåªèƒ½æŸ¥è¯¢å‡º id=1 çš„è¿™æ¡æ•°æ®ã€‚è¿™å’Œäº‹åŠ¡ A çš„ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤æ²¡æœ‰å‡ºç°å¹»è¯»ç°è±¡ï¼Œæ‰€ä»¥è¯´åœ¨ MySQL çš„å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸å­˜åœ¨å¹»è¯»é—®é¢˜ã€‚</p><h4 id="6-æ€»ç»“"><strong>6.</strong> <strong>æ€»ç»“</strong></h4><p>è¿™é‡Œä»‹ç»äº†<code>MVCC</code>åœ¨<code>READ COMMITTD</code>ã€<code>REPEATABLE READ</code>è¿™ä¸¤ç§éš”ç¦»çº§åˆ«çš„äº‹åŠ¡åœ¨æ‰§è¡Œå¿«ç…§è¯»æ“ä½œæ—¶è®¿é—®è®°å½•çš„ç‰ˆæœ¬é“¾çš„è¿‡ç¨‹ã€‚è¿™æ ·ä½¿ä¸åŒäº‹åŠ¡çš„<code>è¯»-å†™</code>ã€<code>å†™-è¯»</code>æ“ä½œå¹¶å‘æ‰§è¡Œï¼Œä»è€Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>æ ¸å¿ƒç‚¹åœ¨äº ReadView çš„åŸç†ï¼Œ<code>READ COMMITTD</code>ã€<code>REPEATABLE READ</code>è¿™ä¸¤ä¸ªéš”ç¦»çº§åˆ«çš„ä¸€ä¸ªå¾ˆå¤§ä¸åŒå°±æ˜¯ç”ŸæˆReadViewçš„æ—¶æœºä¸åŒï¼š</p><ul><li><code>READ COMMITTD</code>åœ¨æ¯ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadView</li><li><code>REPEATABLE READ</code>åªåœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰ç”Ÿæˆä¸€ä¸ªReadViewï¼Œä¹‹åçš„æŸ¥è¯¢æ“ä½œéƒ½é‡å¤ä½¿ç”¨è¿™ä¸ªReadViewå°±å¥½äº†ã€‚</li></ul>]]></content>
    
    
    <summary type="html">ã€ä»€ä¹ˆæ˜¯MVCCã€å¿«ç…§è¯»ä¸å½“å‰è¯»ã€å¤ä¹ ã€MVCCå®ç°åŸç†ä¹‹ReadViewã€ä¸¾ä¾‹è¯´æ˜ã€æ€»ç»“ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬15ç«  é”</title>
    <link href="https://angus9823.github.io/posts/4fe4598b.html"/>
    <id>https://angus9823.github.io/posts/4fe4598b.html</id>
    <published>2023-04-18T07:37:39.000Z</published>
    <updated>2023-04-18T08:25:56.585Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬15ç« -é”">ç¬¬15ç«  é”</h3><h4 id="1-æ¦‚è¿°"><strong>1.</strong> <strong>æ¦‚è¿°</strong></h4><p>åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆå¦‚CPUã€RAMã€I/Oç­‰ï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚ä¸ºä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œéœ€è¦å¯¹<code>å¹¶å‘æ“ä½œè¿›è¡Œæ§åˆ¶</code>ï¼Œå› æ­¤äº§ç”Ÿäº†<code>é”</code>ã€‚åŒæ—¶<code>é”æœºåˆ¶</code>ä¹Ÿä¸ºå®ç°MySQLçš„å„ä¸ªéš”ç¦»çº§åˆ«æä¾›äº†ä¿è¯ã€‚ é”å†²çª ä¹Ÿæ˜¯å½±å“æ•°æ®åº“<code>å¹¶å‘è®¿é—®æ€§èƒ½</code>çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚æ‰€ä»¥é”å¯¹æ•°æ®åº“è€Œè¨€æ˜¾å¾—å°¤å…¶é‡è¦ï¼Œä¹Ÿæ›´åŠ å¤æ‚ã€‚</p><h4 id="2-MySQLå¹¶å‘äº‹åŠ¡è®¿é—®ç›¸åŒè®°å½•"><strong>2. MySQLå¹¶å‘äº‹åŠ¡è®¿é—®ç›¸åŒè®°å½•</strong></h4><h5 id="2-1-è¯»-è¯»æƒ…å†µ"><strong>2.1</strong> <strong>è¯»-è¯»æƒ…å†µ</strong></h5><p><code>è¯»-è¯»</code>æƒ…å†µï¼Œå³å¹¶å‘äº‹åŠ¡ç›¸ç»§<code>è¯»å–ç›¸åŒçš„è®°å½•</code>ã€‚è¯»å–æ“ä½œæœ¬èº«ä¸ä¼šå¯¹è®°å½•æœ‰ä»»ä½•å½±å“ï¼Œå¹¶ä¸ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Œæ‰€ä»¥å…è®¸è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚</p><h5 id="2-2-å†™-å†™æƒ…å†µ"><strong>2.2</strong> <strong>å†™-å†™æƒ…å†µ</strong></h5><p><code>å†™-å†™</code>æƒ…å†µï¼Œå³å¹¶å‘äº‹åŠ¡ç›¸ç»§å¯¹ç›¸åŒçš„è®°å½•åšå‡ºæ”¹åŠ¨ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿ<code>è„å†™</code>çš„é—®é¢˜ï¼Œä»»ä½•ä¸€ç§éš”ç¦»çº§åˆ«éƒ½ä¸å…è®¸è¿™ç§é—®é¢˜çš„å‘ç”Ÿã€‚æ‰€ä»¥åœ¨å¤šä¸ªæœªæäº¤äº‹åŠ¡ç›¸ç»§å¯¹ä¸€æ¡è®°å½•åšæ”¹åŠ¨æ—¶ï¼Œéœ€è¦è®©å®ƒä»¬<code>æ’é˜Ÿæ‰§è¡Œ</code>ï¼Œè¿™ä¸ªæ’é˜Ÿçš„è¿‡ç¨‹å…¶å®æ˜¯é€šè¿‡<code>é”</code>æ¥å®ç°çš„ã€‚</p><h5 id="2-3-è¯»-å†™æˆ–å†™-è¯»æƒ…å†µ"><strong>2.3</strong> <strong>è¯»-å†™æˆ–å†™-è¯»æƒ…å†µ</strong></h5><p><code>è¯»-å†™</code>æˆ–<code>å†™-è¯»</code>ï¼Œå³ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œè¯»å–æ“ä½œï¼Œå¦ä¸€ä¸ªè¿›è¡Œæ”¹åŠ¨æ“ä½œã€‚è¿™ç§æƒ…å†µä¸‹å¯èƒ½å‘ç”Ÿ<code>è„è¯»</code>ã€<code>ä¸å¯é‡å¤è¯»</code>ã€<code>å¹»è¯»</code>çš„é—®é¢˜ã€‚</p><h5 id="2-4-å¹¶å‘é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ"><strong>2.4</strong> <strong>å¹¶å‘é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</strong></h5><p>æ€ä¹ˆè§£å†³<code>è„è¯»</code>ã€<code>ä¸å¯é‡å¤è¯»</code>ã€<code>å¹»è¯»</code>è¿™äº›é—®é¢˜å‘¢ï¼Ÿå…¶å®æœ‰ä¸¤ç§å¯é€‰çš„è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æ–¹æ¡ˆä¸€ï¼šè¯»æ“ä½œåˆ©ç”¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆ<code>MVCC</code>ï¼Œä¸‹ç« è®²è§£ï¼‰ï¼Œå†™æ“ä½œè¿›è¡Œ<code>åŠ é”</code>ã€‚</li></ul><p>æ‰€è°“çš„<code>MVCC</code>ï¼Œå°±æ˜¯ç”Ÿæˆä¸€ä¸ª<code>ReadView</code>ï¼Œé€šè¿‡ReadViewæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•ç‰ˆæœ¬ï¼ˆå†å²ç‰ˆæœ¬ç”±<code>undoæ—¥å¿—</code>æ„å»ºï¼‰ã€‚æŸ¥è¯¢è¯­å¥åªèƒ½<code>è¯»</code>åˆ°åœ¨ç”ŸæˆReadViewä¹‹å‰<code>å·²æäº¤äº‹åŠ¡æ‰€åšçš„æ›´æ”¹</code>ï¼Œåœ¨ç”ŸæˆReadViewä¹‹å‰æœªæäº¤çš„äº‹åŠ¡æˆ–è€…ä¹‹åæ‰å¼€å¯çš„äº‹åŠ¡æ‰€åšçš„æ›´æ”¹æ˜¯çœ‹ä¸åˆ°çš„ã€‚è€Œ<code>å†™æ“ä½œ</code>è‚¯å®šé’ˆå¯¹çš„æ˜¯<code>æœ€æ–°ç‰ˆæœ¬çš„è®°å½•</code>ï¼Œè¯»è®°å½•çš„å†å²ç‰ˆæœ¬å’Œæ”¹åŠ¨è®°å½•çš„æœ€æ–°ç‰ˆæœ¬æœ¬èº«å¹¶ä¸å†²çªï¼Œä¹Ÿå°±æ˜¯é‡‡ç”¨MVCCæ—¶ï¼Œ<code>è¯»-å†™</code>æ“ä½œå¹¶ä¸å†²çªã€‚</p><blockquote><p>æ™®é€šçš„SELECTè¯­å¥åœ¨READ COMMITTEDå’ŒREPEATABLE READéš”ç¦»çº§åˆ«ä¸‹ä¼šä½¿ç”¨åˆ°MVCCè¯»å–è®°å½•ã€‚</p><ul><li>åœ¨<code>READ COMMITTED</code>éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ¯æ¬¡æ‰§è¡ŒSELECTæ“ä½œæ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼ŒReadViewçš„å­˜åœ¨æœ¬èº«å°±ä¿è¯äº†<code>äº‹åŠ¡ä¸å¯ä»¥è¯»å–åˆ°æœªæäº¤çš„äº‹åŠ¡æ‰€åšçš„æ›´æ”¹</code>ï¼Œä¹Ÿå°±æ˜¯é¿å…äº†è„è¯»ç°è±¡ï¼›</li><li>åœ¨<code>REPEATABLE READ</code>éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸€ä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åªæœ‰<code>ç¬¬ä¸€æ¬¡æ‰§è¡ŒSELECTæ“ä½œ </code>æ‰ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼Œä¹‹åçš„SELECTæ“ä½œéƒ½<code>å¤ç”¨</code>è¿™ReadViewï¼Œè¿™æ ·ä¹Ÿå°±é¿å…äº†ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„é—®é¢˜ã€‚</li></ul></blockquote><ul><li><p>æ–¹æ¡ˆäºŒï¼šè¯»ã€å†™æ“ä½œéƒ½é‡‡ç”¨<code>åŠ é”</code>çš„æ–¹å¼ã€‚</p></li><li><p>å°ç»“å¯¹æ¯”å‘ç°ï¼š</p><ul><li>é‡‡ç”¨<code>MVCC</code>æ–¹å¼çš„è¯ï¼Œ<code>è¯»-å†™</code>æ“ä½œå½¼æ­¤å¹¶ä¸å†²çªï¼Œ<code>æ€§èƒ½æ›´é«˜</code>ã€‚</li><li>é‡‡ç”¨<code>åŠ é”</code>æ–¹å¼çš„è¯ï¼Œ<code>è¯»-å†™</code>æ“ä½œå½¼æ­¤éœ€è¦<code>æ’é˜Ÿæ‰§è¡Œ</code>ï¼Œå½±å“æ€§èƒ½ã€‚</li></ul></li></ul><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å½“ç„¶æ„¿æ„é‡‡ç”¨<code>MVCC</code>æ¥è§£å†³<code>è¯»-å†™</code>æ“ä½œå¹¶å‘æ‰§è¡Œçš„é—®é¢˜ï¼Œä½†æ˜¯ä¸šåŠ¡åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¦æ±‚å¿…é¡»é‡‡ç”¨<code>åŠ é”</code>çš„æ–¹å¼æ‰§è¡Œã€‚</p><h4 id="3-é”çš„ä¸åŒè§’åº¦åˆ†ç±»"><strong>3.</strong> <strong>é”çš„ä¸åŒè§’åº¦åˆ†ç±»</strong></h4><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204050933339.png" alt="image-20220405093322184"></p><h5 id="3-1-ä»æ•°æ®æ“ä½œçš„ç±»å‹åˆ’åˆ†ï¼šè¯»é”ã€å†™é”"><strong>3.1</strong> <strong>ä»æ•°æ®æ“ä½œçš„ç±»å‹åˆ’åˆ†ï¼šè¯»é”ã€å†™é”</strong></h5><ul><li><code>è¯»é”</code>ï¼šä¹Ÿç§°ä¸º<code>å…±äº«é”</code>ã€è‹±æ–‡ç”¨<code>S</code>è¡¨ç¤ºã€‚é’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªäº‹åŠ¡çš„è¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œè€Œä¸ä¼šäº’ç›¸å½±å“ï¼Œç›¸äº’ä¸é˜»å¡çš„ã€‚</li><li><code>å†™é”</code>ï¼šä¹Ÿç§°ä¸º<code>æ’ä»–é”</code>ã€è‹±æ–‡ç”¨<code>X</code>è¡¨ç¤ºã€‚å½“å‰å†™æ“ä½œæ²¡æœ‰å®Œæˆå‰ï¼Œå®ƒä¼šé˜»æ–­å…¶ä»–å†™é”å’Œè¯»é”ã€‚è¿™æ ·å°±èƒ½ç¡®ä¿åœ¨ç»™å®šçš„æ—¶é—´é‡Œï¼Œåªæœ‰ä¸€ä¸ªäº‹åŠ¡èƒ½æ‰§è¡Œå†™å…¥ï¼Œå¹¶é˜²æ­¢å…¶ä»–ç”¨æˆ·è¯»å–æ­£åœ¨å†™å…¥çš„åŒä¸€èµ„æºã€‚</li></ul><p><strong>éœ€è¦æ³¨æ„çš„æ˜¯å¯¹äº</strong> <strong>InnoDB</strong> <strong>å¼•æ“æ¥è¯´ï¼Œè¯»é”å’Œå†™é”å¯ä»¥åŠ åœ¨è¡¨ä¸Šï¼Œä¹Ÿå¯ä»¥åŠ åœ¨è¡Œä¸Šã€‚</strong></p><p><strong>1. é”å®šè¯»</strong></p><p>åœ¨é‡‡ç”¨<code>åŠ é”</code>æ–¹å¼è§£å†³<code>è„è¯»</code>ã€<code>ä¸å¯é‡å¤è¯»</code>ã€<code>å¹»è¯»</code>è¿™äº›é—®é¢˜æ—¶ï¼Œè¯»å–ä¸€æ¡è®°å½•æ—¶éœ€è¦è·å–è¯¥è®°å½•çš„<code>Sé”</code>ï¼Œå…¶å®æ˜¯ä¸ä¸¥è°¨çš„ï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨è¯»å–è®°å½•æ—¶å°±è·å–è®°å½•çš„<code>Xé”</code>ï¼Œæ¥ç¦æ­¢åˆ«çš„äº‹åŠ¡è¯»å†™è¯¥è®°å½•ï¼Œä¸ºæ­¤MySQLæå‡ºäº†ä¸¤ç§æ¯”è¾ƒç‰¹æ®Šçš„<code>SELECT</code>è¯­å¥æ ¼å¼ï¼š</p><ul><li>å¯¹è¯»å–çš„è®°å½•åŠ <code>Sé”</code>ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... LOCK IN SHARE MODE;</span><br><span class="line"># æˆ–</span><br><span class="line">SELECT ... FOR SHARE; #(8.0æ–°å¢è¯­æ³•)</span><br></pre></td></tr></table></figure><ul><li>å¯¹è¯»å–çš„è®°å½•åŠ <code>Xé”</code>ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... FOR UPDATE;</span><br></pre></td></tr></table></figure><p><strong>MySQL8.0æ–°ç‰¹æ€§ï¼š</strong></p><p>åœ¨5.7åŠä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒSELECT â€¦ FOR UPDATEï¼Œå¦‚æœè·å–ä¸åˆ°é”ï¼Œä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°<code>innodb_lock_wait_timeout</code>è¶…æ—¶ã€‚åœ¨8.0ç‰ˆæœ¬ä¸­ï¼ŒSELECT â€¦ FOR UPDATE, SELECT â€¦ FOR SHARE æ·»åŠ <code>NOWAIT</code>ã€<code>SKIP LOCKED</code>è¯­æ³•ï¼Œè·³è¿‡é”ç­‰å¾…ï¼Œæˆ–è€…è·³è¿‡é”å®šã€‚</p><ul><li>NOWAITï¼šå¦‚æœæŸ¥è¯¢çš„è¡Œå·²ç»åŠ é”ï¼Œä¼šç«‹å³æŠ¥é”™è¿”å›</li><li>SKIP LOCKEDï¼šå¦‚æœæŸ¥è¯¢çš„è¡Œå·²ç»åŠ é”ï¼Œåªè¿”å›ç»“æœä¸­ä¸åŒ…å«è¢«é”å®šçš„è¡Œ</li></ul><p><strong>2. å†™æ“ä½œ</strong></p><ul><li><code>DELETE</code>ï¼šå¯¹ä¸€æ¡è®°å½•åšDELETEæ“ä½œçš„è¿‡ç¨‹å…¶å®æ˜¯å…ˆåœ¨<code>B+</code>æ ‘ä¸­å®šä½åˆ°è¿™æ¡è®°å½•çš„ä½ç½®ï¼Œç„¶åè·å–è¿™æ¡è®°å½•çš„<code>Xé”</code>ï¼Œå†æ‰§è¡Œ<code>delete mark</code>æ“ä½œã€‚</li><li><code>UPDATE</code>ï¼šåœ¨å¯¹ä¸€æ¡è®°å½•åšUPDATEæ“ä½œæ—¶åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š<ul><li>æƒ…å†µ1ï¼šæœªä¿®æ”¹è¯¥è®°å½•çš„é”®å€¼ï¼Œå¹¶ä¸”è¢«æ›´æ–°çš„åˆ—å ç”¨çš„å­˜å‚¨ç©ºé—´åœ¨ä¿®æ”¹å‰åæœªå‘ç”Ÿå˜åŒ–ã€‚åˆ™å…ˆåœ¨<code>B+</code>æ ‘ä¸­å®šä½åˆ°è¿™æ¡è®°å½•çš„ä½ç½®ï¼Œç„¶åå†è·å–ä¸€ä¸‹è®°å½•çš„<code>Xé”</code>ï¼Œæœ€ååœ¨åŸçºªå½•çš„ä½ç½®è¿›è¡Œä¿®æ”¹æ“ä½œã€‚</li><li>æƒ…å†µ2ï¼šæœªä¿®æ”¹è¯¥è®°å½•çš„é”®å€¼ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªè¢«æ›´æ–°çš„åˆ—å ç”¨çš„å­˜å‚¨ç©ºé—´åœ¨ä¿®æ”¹å‰åå‘ç”Ÿå˜åŒ–ã€‚åˆ™å…ˆåœ¨<code>B+</code>æ ‘ä¸­å®šä½åˆ°è¿™æ¡è®°å½•çš„ä½ç½®ï¼Œç„¶åè·å–ä¸€ä¸‹è®°å½•çš„<code>Xé”</code>ï¼Œå°†è¯¥è®°å½•å½»åº•åˆ é™¤æ‰ï¼ˆå°±æ˜¯æŠŠè®°å½•å½»åº•ç§»å…¥åƒåœ¾é“¾è¡¨ï¼‰ï¼Œæœ€åå†æ’å…¥ä¸€æ¡æ–°è®°å½•ã€‚æ–°æ’å…¥çš„è®°å½•ç”±<code>INSERT</code>æ“ä½œæä¾›çš„<code>éšå¼é”</code>è¿›è¡Œä¿æŠ¤ã€‚</li><li>æƒ…å†µ3ï¼šä¿®æ”¹è¯¥è®°å½•çš„é”®å€¼ï¼Œåˆ™ç›¸å½“äºåœ¨åŸçºªå½•ä¸Šåš<code>DELECT</code>æ“ä½œä¹‹åå†æ¥ä¸€æ¬¡<code>INSERT</code>æ“ä½œã€‚</li></ul></li><li><code>INSERT</code>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–°æ’å…¥ä¸€æ¡è®°å½•çš„æ“ä½œå¹¶ä¸åŠ é”ï¼Œé€šè¿‡ä¸€ç§ç§°ä¹‹ä¸º<code>éšå¼é”</code>çš„ç»“æ„æ¥ä¿æŠ¤è¿™æ¡æ–°æ’å…¥çš„è®°å½•åœ¨æœ¬äº‹åŠ¡æäº¤å‰ä¸è¢«åˆ«çš„äº‹åŠ¡è®¿é—®ã€‚</li></ul><h5 id="3-2-ä»æ•°æ®æ“ä½œçš„ç²’åº¦åˆ’åˆ†ï¼šè¡¨çº§é”ã€é¡µçº§é”ã€è¡Œé”"><strong>3.2</strong> <strong>ä»æ•°æ®æ“ä½œçš„ç²’åº¦åˆ’åˆ†ï¼šè¡¨çº§é”ã€é¡µçº§é”ã€è¡Œé”</strong></h5><p><strong>1.</strong> <strong>è¡¨é”ï¼ˆTable Lockï¼‰</strong></p><p>è¯¥é”ä¼šé”å®šæ•´å¼ è¡¨ï¼Œå®ƒæ˜¯MySQLä¸­æœ€åŸºæœ¬çš„é”ç­–ç•¥ï¼Œå¹¶<code>ä¸ä¾èµ–äºå­˜å‚¨å¼•æ“</code>ï¼Œå¹¶ä¸”è¡¨é”æ˜¯<code>å¼€é”€æœ€å°‘</code>çš„ç­–ç•¥ã€‚ç”±äºè¡¨çº§é”ä¸€æ¬¡ä¼šå°†æ•´ä¸ªè¡¨é”å®šï¼Œæ‰€ä»¥å¯ä»¥å¾ˆå¥½çš„<code>é¿å…æ­»é”</code>çš„é—®é¢˜ã€‚å½“ç„¶ï¼Œé”çš„ç²’åº¦å¤§æ‰€å¸¦æ¥æœ€å¤§çš„è´Ÿé¢å½±å“å°±æ˜¯å‡ºç°é”èµ„æºäº‰ç”¨çš„æ¦‚ç‡ä¹Ÿä¼šæœ€é«˜ï¼Œå¯¼è‡´<code>å¹¶å‘ç‡å¤§æ‰“æŠ˜æ‰£</code>ã€‚</p><p><strong>â‘  è¡¨çº§åˆ«çš„Sé”ã€Xé”</strong></p><p>åœ¨å¯¹æŸä¸ªè¡¨æ‰§è¡ŒSELECTã€INSERTã€DELETEã€UPDATEè¯­å¥æ—¶ï¼ŒInnoDBå­˜å‚¨å¼•æ“æ˜¯ä¸ä¼šä¸ºè¿™ä¸ªè¡¨æ·»åŠ è¡¨çº§åˆ«çš„<code>Sé”</code>æˆ–è€…<code>Xé”</code>çš„ã€‚åœ¨å¯¹æŸä¸ªè¡¨æ‰§è¡Œä¸€äº›è¯¸å¦‚<code>ALTER TABLE</code>ã€<code>DROP TABLE</code>è¿™ç±»çš„<code>DDL</code>è¯­å¥æ—¶ï¼Œå…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸ªè¡¨å¹¶å‘æ‰§è¡Œè¯¸å¦‚SELECTã€INSERTã€DELETEã€UPDATEçš„è¯­å¥ä¼šå‘ç”Ÿé˜»å¡ã€‚åŒç†ï¼ŒæŸä¸ªäº‹åŠ¡ä¸­å¯¹æŸä¸ªè¡¨æ‰§è¡ŒSELECTã€INSERTã€DELETEã€UPDATEè¯­å¥æ—¶ï¼Œåœ¨å…¶ä»–ä¼šè¯ä¸­å¯¹è¿™ä¸ªè¡¨æ‰§è¡Œ<code>DDL</code>è¯­å¥ä¹Ÿä¼šå‘ç”Ÿé˜»å¡ã€‚è¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯é€šè¿‡åœ¨<code>serverå±‚</code>ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸º<code>å…ƒæ•°æ®é”</code>ï¼ˆè‹±æ–‡åï¼š<code>Metadata Locks</code>ï¼Œç®€ç§°<code>MDL</code>ï¼‰ç»“æ„æ¥å®ç°çš„ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ä¼šä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æä¾›çš„è¡¨çº§åˆ«çš„<code>Sé”</code>å’Œ<code>Xé”</code>ã€‚åªä¼šåœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”æ–¹è¯´<code>å´©æºƒæ¢å¤</code>è¿‡ç¨‹ä¸­ç”¨åˆ°ã€‚æ¯”å¦‚ï¼Œåœ¨ç³»ç»Ÿå˜é‡<code>autocommit=0ï¼Œinnodb_table_locks = 1</code>æ—¶ï¼Œ<code>æ‰‹åŠ¨</code>è·å–InnoDBå­˜å‚¨å¼•æ“æä¾›çš„è¡¨t çš„<code>Sé”</code>æˆ–è€…<code>Xé”</code>å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><ul><li><p><code>LOCK TABLES t READ</code>ï¼šInnoDBå­˜å‚¨å¼•æ“ä¼šå¯¹è¡¨<code>t</code>åŠ è¡¨çº§åˆ«çš„<code>Sé”</code>ã€‚</p></li><li><p><code>LOCK TABLES t WRITE</code>ï¼šInnoDBå­˜å‚¨å¼•æ“ä¼šå¯¹è¡¨<code>t</code>åŠ è¡¨çº§åˆ«çš„<code>Xé”</code>ã€‚</p></li></ul><p>æ€»ç»“ï¼šMyISAMåœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œå¢åˆ æ”¹æ“ä½œå‰ï¼Œä¼šç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚<code>InnoDB</code>å­˜å‚¨å¼•æ“æ˜¯ä¸ä¼šä¸ºè¿™ä¸ªè¡¨æ·»åŠ è¡¨çº§åˆ«çš„<code>è¯»é”</code>æˆ–è€…<code>å†™é”</code>çš„ã€‚</p><p><strong>â‘¡ æ„å‘é” ï¼ˆintention lockï¼‰</strong></p><p>InnoDB æ”¯æŒ<code>å¤šç²’åº¦é”ï¼ˆmultiple granularity lockingï¼‰</code>ï¼Œå®ƒå…è®¸<code>è¡Œçº§é”</code>ä¸<code>è¡¨çº§é”</code>å…±å­˜ï¼Œè€Œ<strong>æ„å‘é”</strong>å°±æ˜¯å…¶ä¸­çš„ä¸€ç§<code>è¡¨é”</code>ã€‚</p><p>1ã€æ„å‘é”çš„å­˜åœ¨æ˜¯ä¸ºäº†åè°ƒè¡Œé”å’Œè¡¨é”çš„å…³ç³»ï¼Œæ”¯æŒå¤šç²’åº¦ï¼ˆè¡¨é”ä¸è¡Œé”ï¼‰çš„é”å¹¶å­˜ã€‚</p><p>2ã€æ„å‘é”æ˜¯ä¸€ç§<code>ä¸ä¸è¡Œçº§é”å†²çªçš„è¡¨çº§é”</code>ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚</p><p>3ã€è¡¨æ˜â€œæŸä¸ªäº‹åŠ¡æ­£åœ¨æŸäº›è¡ŒæŒæœ‰äº†é”æˆ–è¯¥äº‹åŠ¡å‡†å¤‡å»æŒæœ‰é”â€</p><p>æ„å‘é”åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li><strong>æ„å‘å…±äº«é”</strong>ï¼ˆintention shared lock, ISï¼‰ï¼šäº‹åŠ¡æœ‰æ„å‘å¯¹è¡¨ä¸­çš„æŸäº›è¡ŒåŠ <strong>å…±äº«é”</strong>ï¼ˆSé”ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- äº‹åŠ¡è¦è·å–æŸäº›è¡Œçš„ S é”ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IS é”ã€‚ </span><br><span class="line">SELECT column FROM table ... LOCK IN SHARE MODE;</span><br></pre></td></tr></table></figure><ul><li><strong>æ„å‘æ’ä»–é”</strong>ï¼ˆintention exclusive lock, IXï¼‰ï¼šäº‹åŠ¡æœ‰æ„å‘å¯¹è¡¨ä¸­çš„æŸäº›è¡ŒåŠ <strong>æ’ä»–é”</strong>ï¼ˆXé”ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- äº‹åŠ¡è¦è·å–æŸäº›è¡Œçš„ X é”ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IX é”ã€‚ </span><br><span class="line">SELECT column FROM table ... FOR UPDATE;</span><br></pre></td></tr></table></figure><p>å³ï¼šæ„å‘é”æ˜¯ç”±å­˜å‚¨å¼•æ“<code>è‡ªå·±ç»´æŠ¤çš„</code>ï¼Œç”¨æˆ·æ— æ³•æ‰‹åŠ¨æ“ä½œæ„å‘é”ï¼Œåœ¨ä¸ºæ•°æ®è¡ŒåŠ å…±äº« / æ’ä»–é”ä¹‹å‰ï¼ŒInooDB ä¼šå…ˆè·å–è¯¥æ•°æ®è¡Œ<code>æ‰€åœ¨æ•°æ®è¡¨çš„å¯¹åº”æ„å‘é”</code>ã€‚</p><p><strong>1. æ„å‘é”è¦è§£å†³çš„é—®é¢˜</strong></p><p>ç°åœ¨æœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼Œåˆ†åˆ«æ˜¯T1å’ŒT2ï¼Œå…¶ä¸­T2è¯•å›¾åœ¨è¯¥è¡¨çº§åˆ«ä¸Šåº”ç”¨å…±äº«æˆ–æ’å®ƒé”ï¼Œå¦‚æœæ²¡æœ‰æ„å‘é”å­˜åœ¨ï¼Œé‚£ä¹ˆT2å°±éœ€è¦å»æ£€æŸ¥å„ä¸ªé¡µæˆ–è¡Œæ˜¯å¦å­˜åœ¨é”ï¼›å¦‚æœå­˜åœ¨æ„å‘é”ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šå—åˆ°ç”±T1æ§åˆ¶çš„<code>è¡¨çº§åˆ«æ„å‘é”çš„é˜»å¡</code>ã€‚T2åœ¨é”å®šè¯¥è¡¨å‰ä¸å¿…æ£€æŸ¥å„ä¸ªé¡µæˆ–è¡Œé”ï¼Œè€Œåªéœ€æ£€æŸ¥è¡¨ä¸Šçš„æ„å‘é”ã€‚ç®€å•æ¥è¯´å°±æ˜¯ç»™æ›´å¤§ä¸€çº§çº§åˆ«çš„ç©ºé—´ç¤ºæ„é‡Œé¢æ˜¯å¦å·²ç»ä¸Šè¿‡é”ã€‚</p><p>åœ¨æ•°æ®è¡¨çš„åœºæ™¯ä¸­ï¼Œ<strong>å¦‚æœæˆ‘ä»¬ç»™æŸä¸€è¡Œæ•°æ®åŠ ä¸Šäº†æ’å®ƒé”ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨ç»™æ›´å¤§ä¸€çº§çš„ç©ºé—´ï¼Œæ¯”å¦‚æ•°æ®é¡µæˆ–æ•°æ®è¡¨åŠ ä¸Šæ„å‘é”ï¼Œå‘Šè¯‰å…¶ä»–äººè¿™ä¸ªæ•°æ®é¡µæˆ–æ•°æ®è¡¨å·²ç»æœ‰äººä¸Šè¿‡æ’å®ƒé”äº†</strong>ï¼Œè¿™æ ·å½“å…¶ä»–äººæƒ³è¦è·å–æ•°æ®è¡¨æ’å®ƒé”çš„æ—¶å€™ï¼Œåªéœ€è¦äº†è§£æ˜¯å¦æœ‰äººå·²ç»è·å–äº†è¿™ä¸ªæ•°æ®è¡¨çš„æ„å‘æ’å®ƒé”å³å¯ã€‚</p><ul><li>å¦‚æœäº‹åŠ¡æƒ³è¦è·å–æ•°æ®è¡¨ä¸­æŸäº›è®°å½•çš„å…±äº«é”ï¼Œå°±éœ€è¦åœ¨æ•°æ®è¡¨ä¸Š<code>æ·»åŠ æ„å‘å…±äº«é”</code></li><li>å¦‚æœäº‹åŠ¡æƒ³è¦è·å–æ•°æ®è¡¨ä¸­æŸäº›è®°å½•çš„æ’å®ƒé”ï¼Œå°±éœ€è¦åœ¨æ•°æ®è¡¨ä¸Š<code>æ·»åŠ æ„å‘æ’ä»–é”</code></li></ul><p>è¿™æ—¶ï¼Œæ„å‘é”ä¼šå‘Šè¯‰å…¶ä»–äº‹åŠ¡å·²ç»æœ‰äººé”å®šäº†è¡¨ä¸­çš„æŸäº›è®°å½•ã€‚</p><p><strong>â‘¢ è‡ªå¢é”ï¼ˆAUTO-INCé”ï¼‰</strong></p><p><strong>1. â€œSimple insertsâ€</strong> <strong>ï¼ˆç®€å•æ’å…¥ï¼‰</strong></p><p>å¯ä»¥<code>é¢„å…ˆç¡®å®šè¦æ’å…¥çš„è¡Œæ•°</code>ï¼ˆå½“è¯­å¥è¢«åˆå§‹å¤„ç†æ—¶ï¼‰çš„è¯­å¥ã€‚åŒ…æ‹¬æ²¡æœ‰åµŒå¥—å­æŸ¥è¯¢çš„å•è¡Œå’Œå¤šè¡Œ<code>INSERT...VALUES()</code>å’Œ<code>REPLACE</code>è¯­å¥ã€‚</p><p><strong>2. â€œBulk insertsâ€</strong> <strong>ï¼ˆæ‰¹é‡æ’å…¥ï¼‰</strong></p><p><code>äº‹å…ˆä¸çŸ¥é“è¦æ’å…¥çš„è¡Œæ•°</code>ï¼ˆå’Œæ‰€éœ€è‡ªåŠ¨é€’å¢å€¼çš„æ•°é‡ï¼‰çš„è¯­å¥ã€‚æ¯”å¦‚<code>INSERT ... SELECT</code>ï¼Œ<code>REPLACE ... SELECT</code>å’Œ<code>LOAD DATA</code>è¯­å¥ï¼Œä½†ä¸åŒ…æ‹¬çº¯INSERTã€‚ InnoDBåœ¨æ¯å¤„ç†ä¸€è¡Œï¼Œä¸ºAUTO_INCREMENTåˆ—åˆ†é…ä¸€ä¸ªæ–°å€¼ã€‚</p><p><strong>3. â€œMixed-mode insertsâ€</strong> <strong>ï¼ˆæ··åˆæ¨¡å¼æ’å…¥ï¼‰</strong></p><p>è¿™äº›æ˜¯â€œSimple insertsâ€è¯­å¥ä½†æ˜¯æŒ‡å®šéƒ¨åˆ†æ–°è¡Œçš„è‡ªåŠ¨é€’å¢å€¼ã€‚ä¾‹å¦‚<code>INSERT INTO teacher (id,name) VALUES (1,'a'), (NULL,'b'), (5,'c'), (NULL,'d');</code>åªæ˜¯æŒ‡å®šäº†éƒ¨åˆ†idçš„å€¼ã€‚å¦ä¸€ç§ç±»å‹çš„â€œæ··åˆæ¨¡å¼æ’å…¥â€æ˜¯<code>INSERT ... ON DUPLICATE KEY UPDATE</code>ã€‚</p><p>å¯¹äºä¸Šé¢æ•°æ®æ’å…¥çš„æ¡ˆä¾‹ï¼ŒMySQLé‡‡ç”¨äº†<code>è‡ªå¢é”</code>çš„æ–¹å¼æ¥å®ç°ï¼Œ<strong>AUTO-INTé”æ˜¯å½“å‘ä½¿ç”¨å«æœ‰AUTO_INCREMENTåˆ—çš„è¡¨ä¸­æ’å…¥æ•°æ®æ—¶éœ€è¦è·å–çš„ä¸€ç§ç‰¹æ®Šçš„è¡¨çº§é”</strong>ï¼Œåœ¨æ‰§è¡Œæ’å…¥è¯­å¥æ—¶å°±åœ¨è¡¨çº§åˆ«åŠ ä¸€ä¸ªAUTO-INTé”ï¼Œç„¶åä¸ºæ¯æ¡å¾…æ’å…¥è®°å½•çš„AUTO_INCREMENTä¿®é¥°çš„åˆ—åˆ†é…é€’å¢çš„å€¼ï¼Œåœ¨è¯¥è¯­å¥æ‰§è¡Œç»“æŸåï¼Œå†æŠŠAUTO-INTé”é‡Šæ”¾æ‰ã€‚<strong>ä¸€ä¸ªäº‹åŠ¡åœ¨æŒæœ‰AUTO-INCé”çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–äº‹åŠ¡çš„æ’å…¥è¯­å¥éƒ½è¦è¢«é˜»å¡</strong>ï¼Œå¯ä»¥ä¿è¯ä¸€ä¸ªè¯­å¥ä¸­åˆ†é…çš„é€’å¢å€¼æ˜¯è¿ç»­çš„ã€‚ä¹Ÿæ­£å› ä¸ºæ­¤ï¼Œå…¶å¹¶å‘æ€§æ˜¾ç„¶å¹¶ä¸é«˜ï¼Œ<strong>å½“æˆ‘ä»¬å‘ä¸€ä¸ªæœ‰AUTO_INCREMENTå…³é”®å­—çš„ä¸»é”®æ’å…¥å€¼çš„æ—¶å€™ï¼Œæ¯æ¡è¯­å¥éƒ½è¦å¯¹è¿™ä¸ªè¡¨é”è¿›è¡Œç«äº‰</strong>ï¼Œè¿™æ ·çš„å¹¶å‘æ½œåŠ›å…¶å®æ˜¯å¾ˆä½ä¸‹çš„ï¼Œæ‰€ä»¥innodbé€šè¿‡<code>innodb_autoinc_lock_mode</code>çš„ä¸åŒå–å€¼æ¥æä¾›ä¸åŒçš„é”å®šæœºåˆ¶ï¼Œæ¥æ˜¾è‘—æé«˜SQLè¯­å¥çš„å¯ä¼¸ç¼©æ€§å’Œæ€§èƒ½ã€‚</p><p>innodb_autoinc_lock_modeæœ‰ä¸‰ç§å–å€¼ï¼Œåˆ†åˆ«å¯¹åº”ä¸ä¸åŒé”å®šæ¨¡å¼ï¼š</p><p><code>ï¼ˆ1ï¼‰innodb_autoinc_lock_mode = 0(â€œä¼ ç»Ÿâ€é”å®šæ¨¡å¼)</code></p><p>åœ¨æ­¤é”å®šæ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ç±»å‹çš„insertè¯­å¥éƒ½ä¼šè·å¾—ä¸€ä¸ªç‰¹æ®Šçš„è¡¨çº§AUTO-INCé”ï¼Œç”¨äºæ’å…¥å…·æœ‰AUTO_INCREMENTåˆ—çš„è¡¨ã€‚è¿™ç§æ¨¡å¼å…¶å®å°±å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œå³æ¯å½“æ‰§è¡Œinsertçš„æ—¶å€™ï¼Œéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªè¡¨çº§é”(AUTO-INCé”)ï¼Œä½¿å¾—è¯­å¥ä¸­ç”Ÿæˆçš„auto_incrementä¸ºé¡ºåºï¼Œä¸”åœ¨binlogä¸­é‡æ”¾çš„æ—¶å€™ï¼Œå¯ä»¥ä¿è¯masterä¸slaveä¸­æ•°æ®çš„auto_incrementæ˜¯ç›¸åŒçš„ã€‚å› ä¸ºæ˜¯è¡¨çº§é”ï¼Œå½“åœ¨åŒä¸€æ—¶é—´å¤šä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œinsertçš„æ—¶å€™ï¼Œå¯¹äºAUTO-INCé”çš„äº‰å¤ºä¼š<code>é™åˆ¶å¹¶å‘</code>èƒ½åŠ›ã€‚</p><p><code>ï¼ˆ2ï¼‰innodb_autoinc_lock_mode = 1(â€œè¿ç»­â€é”å®šæ¨¡å¼)</code></p><p>åœ¨ MySQL 8.0 ä¹‹å‰ï¼Œè¿ç»­é”å®šæ¨¡å¼æ˜¯<code>é»˜è®¤</code>çš„ã€‚</p><p>åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œâ€œbulk insertsâ€ä»ç„¶ä½¿ç”¨AUTO-INCè¡¨çº§é”ï¼Œå¹¶ä¿æŒåˆ°è¯­å¥ç»“æŸã€‚è¿™é€‚ç”¨äºæ‰€æœ‰INSERT â€¦ SELECTï¼ŒREPLACE â€¦ SELECTå’ŒLOAD DATAè¯­å¥ã€‚åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¯­å¥å¯ä»¥æŒæœ‰AUTO-INCé”ã€‚</p><p>å¯¹äºâ€œSimple insertsâ€ï¼ˆè¦æ’å…¥çš„è¡Œæ•°äº‹å…ˆå·²çŸ¥ï¼‰ï¼Œåˆ™é€šè¿‡åœ¨<code>mutexï¼ˆè½»é‡é”ï¼‰</code>çš„æ§åˆ¶ä¸‹è·å¾—æ‰€éœ€æ•°é‡çš„è‡ªåŠ¨é€’å¢å€¼æ¥é¿å…è¡¨çº§AUTO-INCé”ï¼Œ å®ƒåªåœ¨åˆ†é…è¿‡ç¨‹çš„æŒç»­æ—¶é—´å†…ä¿æŒï¼Œè€Œä¸æ˜¯ç›´åˆ°è¯­å¥å®Œæˆã€‚ä¸ä½¿ç”¨è¡¨çº§AUTO-INCé”ï¼Œé™¤éAUTO-INCé”ç”±å¦ä¸€ä¸ªäº‹åŠ¡ä¿æŒã€‚å¦‚æœå¦ä¸€ä¸ªäº‹åŠ¡ä¿æŒAUTO-INCé”ï¼Œåˆ™â€œSimple insertsâ€ç­‰å¾…AUTO-INCé”ï¼Œå¦‚åŒå®ƒæ˜¯ä¸€ä¸ªâ€œbulk insertsâ€ã€‚</p><p><code>ï¼ˆ3ï¼‰innodb_autoinc_lock_mode = 2(â€œäº¤é”™â€é”å®šæ¨¡å¼)</code></p><p>ä» MySQL 8.0 å¼€å§‹ï¼Œäº¤é”™é”æ¨¡å¼æ˜¯<code>é»˜è®¤</code>è®¾ç½®ã€‚</p><p>åœ¨è¿™ç§é”å®šæ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ç±»INSERTè¯­å¥éƒ½ä¸ä¼šä½¿ç”¨è¡¨çº§AUTO-INCé”ï¼Œå¹¶ä¸”å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªè¯­å¥ã€‚è¿™æ˜¯æœ€å¿«å’Œæœ€å¯æ‹“å±•çš„é”å®šæ¨¡å¼ï¼Œä½†æ˜¯å½“ä½¿ç”¨åŸºäºè¯­å¥çš„å¤åˆ¶æˆ–æ¢å¤æ–¹æ¡ˆæ—¶ï¼Œ<strong>ä»äºŒè¿›åˆ¶æ—¥å¿—é‡æ’­SQLè¯­å¥æ—¶ï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„ã€‚</strong></p><p>åœ¨æ­¤é”å®šæ¨¡å¼ä¸‹ï¼Œè‡ªåŠ¨é€’å¢å€¼<code>ä¿è¯</code>åœ¨æ‰€æœ‰å¹¶å‘æ‰§è¡Œçš„æ‰€æœ‰ç±»å‹çš„insertè¯­å¥ä¸­æ˜¯<code>å”¯ä¸€</code>ä¸”<code>å•è°ƒé€’å¢</code>çš„ã€‚ä½†æ˜¯ï¼Œç”±äºå¤šä¸ªè¯­å¥å¯ä»¥åŒæ—¶ç”Ÿæˆæ•°å­—ï¼ˆå³ï¼Œè·¨è¯­å¥äº¤å‰ç¼–å·ï¼‰ï¼Œ<strong>ä¸ºä»»ä½•ç»™å®šè¯­å¥æ’å…¥çš„è¡Œç”Ÿæˆçš„å€¼å¯èƒ½ä¸æ˜¯è¿ç»­çš„ã€‚</strong></p><p><strong>â‘£ å…ƒæ•°æ®é”ï¼ˆMDLé”ï¼‰</strong></p><p>MySQL5.5å¼•å…¥äº†meta data lockï¼Œç®€ç§°MDLé”ï¼Œå±äºè¡¨é”èŒƒç•´ã€‚MDL çš„ä½œç”¨æ˜¯ï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢æ­£åœ¨éå†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ‰§è¡ŒæœŸé—´å¦ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ª<code>è¡¨ç»“æ„åšå˜æ›´</code>ï¼Œå¢åŠ äº†ä¸€åˆ—ï¼Œé‚£ä¹ˆæŸ¥è¯¢çº¿ç¨‹æ‹¿åˆ°çš„ç»“æœè·Ÿè¡¨ç»“æ„å¯¹ä¸ä¸Šï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚</p><p>å› æ­¤ï¼Œ<strong>å½“å¯¹ä¸€ä¸ªè¡¨åšå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼›å½“è¦å¯¹è¡¨åšç»“æ„å˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚</strong></p><p><strong>2. InnoDBä¸­çš„è¡Œé”</strong></p><p>è¡Œé”ï¼ˆRow Lockï¼‰ä¹Ÿç§°ä¸ºè®°å½•é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é”ä½æŸä¸€è¡Œï¼ˆæŸæ¡è®°å½•rowï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLæœåŠ¡å™¨å±‚å¹¶æ²¡æœ‰å®ç°è¡Œé”æœºåˆ¶ï¼Œ<strong>è¡Œçº§é”åªåœ¨å­˜å‚¨å¼•æ“å±‚å®ç°ã€‚</strong></p><p>**ä¼˜ç‚¹ï¼š**é”å®šåŠ›åº¦å°ï¼Œå‘ç”Ÿ<code>é”å†²çªæ¦‚ç‡ä½</code>ï¼Œå¯ä»¥å®ç°çš„<code>å¹¶å‘åº¦é«˜</code></p><p>**ç¼ºç‚¹ï¼š**å¯¹äº<code>é”çš„å¼€é”€æ¯”è¾ƒå¤§</code>ï¼ŒåŠ é”ä¼šæ¯”è¾ƒæ…¢ï¼Œå®¹æ˜“å‡ºç°<code>æ­»é”</code>æƒ…å†µ</p><p>InnoDBä¸MyISAMçš„æœ€å¤§ä¸åŒæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯æ”¯æŒäº‹åŠ¡ï¼›äºŒæ˜¯é‡‡ç”¨äº†è¡Œçº§é”ã€‚</p><p><strong>â‘  è®°å½•é”ï¼ˆRecord Locksï¼‰</strong></p><p>è®°å½•é”ä¹Ÿå°±æ˜¯ä»…ä»…æŠŠä¸€æ¡è®°å½•é”ä¸Šï¼Œå®˜æ–¹çš„ç±»å‹åç§°ä¸ºï¼š<code>LOCK_REC_NOT_GAP</code>ã€‚</p><p>è®°å½•é”æ˜¯æœ‰Sé”å’ŒXé”ä¹‹åˆ†çš„ï¼Œç§°ä¹‹ä¸º<code>Så‹è®°å½•é”</code>å’Œ<code>Xå‹è®°å½•é”</code>ã€‚</p><ul><li>å½“ä¸€ä¸ªäº‹åŠ¡è·å–äº†ä¸€æ¡è®°å½•çš„Så‹è®°å½•é”åï¼Œå…¶ä»–äº‹åŠ¡ä¹Ÿå¯ä»¥ç»§ç»­è·å–è¯¥è®°å½•çš„Så‹è®°å½•é”ï¼Œä½†ä¸å¯ä»¥ç»§ç»­è·å–Xå‹è®°å½•é”ï¼›</li><li>å½“ä¸€ä¸ªäº‹åŠ¡è·å–äº†ä¸€æ¡è®°å½•çš„Xå‹è®°å½•é”åï¼Œå…¶ä»–äº‹åŠ¡æ—¢ä¸å¯ä»¥ç»§ç»­è·å–è¯¥è®°å½•çš„Så‹è®°å½•é”ï¼Œä¹Ÿä¸å¯ä»¥ç»§ç»­è·å–Xå‹è®°å½•é”ã€‚</li></ul><p><strong>â‘¡ é—´éš™é”ï¼ˆGap Locksï¼‰</strong></p><p><code>MySQL</code>åœ¨<code>REPEATABLE READ</code>éš”ç¦»çº§åˆ«ä¸‹æ˜¯å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜çš„ï¼Œè§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œå¯ä»¥ä½¿ç”¨<code>MVCC</code>æ–¹æ¡ˆè§£å†³ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨<code>åŠ é”</code>æ–¹æ¡ˆè§£å†³ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨åŠ é”æ–¹æ¡ˆè§£å†³æ—¶æœ‰ä¸ªå¤§é—®é¢˜ï¼Œå°±æ˜¯äº‹åŠ¡åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œè¯»å–æ“ä½œæ—¶ï¼Œé‚£äº›å¹»å½±è®°å½•å°šä¸å­˜åœ¨ï¼Œæˆ‘ä»¬æ— æ³•ç»™è¿™äº›<code>å¹»å½±è®°å½•</code>åŠ ä¸Š<code>è®°å½•é”</code>ã€‚InnoDBæå‡ºäº†ä¸€ç§ç§°ä¹‹ä¸º<code>Gap Locks</code>çš„é”ï¼Œå®˜æ–¹çš„ç±»å‹åç§°ä¸ºï¼š<code>LOCK_GAP</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç®€ç§°ä¸º<code>gapé”</code>ã€‚</p><p><strong>gapé”çš„æå‡ºä»…ä»…æ˜¯ä¸ºäº†é˜²æ­¢æ’å…¥å¹»å½±è®°å½•è€Œæå‡ºçš„</strong>ã€‚è™½ç„¶æœ‰<code>å…±äº«gapé”</code>å’Œ<code>ç‹¬å gapé”</code>è¿™æ ·çš„è¯´æ³•ï¼Œä½†æ˜¯å®ƒä»¬èµ·åˆ°çš„ä½œç”¨æ˜¯ç›¸åŒçš„ã€‚è€Œä¸”å¦‚æœå¯¹ä¸€æ¡è®°å½•åŠ äº†gapé”ï¼ˆä¸è®ºæ˜¯å…±äº«gapé”è¿˜æ˜¯ç‹¬å gapé”ï¼‰ï¼Œå¹¶ä¸ä¼šé™åˆ¶å…¶ä»–äº‹åŠ¡å¯¹è¿™æ¡è®°å½•åŠ è®°å½•é”æˆ–è€…ç»§ç»­åŠ gapé”ã€‚</p><p><strong>â‘¢ ä¸´é”®é”ï¼ˆNext-Key Locksï¼‰</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬æ—¢æƒ³<code>é”ä½æŸæ¡è®°å½•</code>ï¼Œåˆæƒ³<code>é˜»æ­¢</code>å…¶ä»–äº‹åŠ¡åœ¨è¯¥è®°å½•å‰è¾¹çš„<code>é—´éš™æ’å…¥æ–°è®°å½•</code>ï¼Œæ‰€ä»¥InnoDBå°±æå‡ºäº†ä¸€ç§ç§°ä¹‹ä¸º<code>Next-Key Locks</code>çš„é”ï¼Œå®˜æ–¹çš„ç±»å‹åç§°ä¸ºï¼š<code>LOCK_ORDINARY</code>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€ç§°ä¸º<code>next-keyé”</code>ã€‚Next-Key Locksæ˜¯åœ¨å­˜å‚¨å¼•æ“<code>innodb</code>ã€äº‹åŠ¡çº§åˆ«åœ¨<code>å¯é‡å¤è¯»</code>çš„æƒ…å†µä¸‹ä½¿ç”¨çš„æ•°æ®åº“é”ï¼Œinnodbé»˜è®¤çš„é”å°±æ˜¯Next-Key locksã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin; </span><br><span class="line">select * from student where id &lt;=8 and id &gt; 3 for update;</span><br></pre></td></tr></table></figure><p><strong>â‘£ æ’å…¥æ„å‘é”ï¼ˆInsert Intention Locksï¼‰</strong></p><p>æˆ‘ä»¬è¯´ä¸€ä¸ªäº‹åŠ¡åœ¨<code>æ’å…¥</code>ä¸€æ¡è®°å½•æ—¶éœ€è¦åˆ¤æ–­ä¸€ä¸‹æ’å…¥ä½ç½®æ˜¯ä¸æ˜¯è¢«åˆ«çš„äº‹åŠ¡åŠ äº†<code>gapé”</code>ï¼ˆ<code>next-keyé”</code>ä¹ŸåŒ…å«<code>gapé”</code>ï¼‰ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œæ’å…¥æ“ä½œéœ€è¦ç­‰å¾…ï¼Œç›´åˆ°æ‹¥æœ‰<code>gapé”</code>çš„é‚£ä¸ªäº‹åŠ¡æäº¤ã€‚ä½†æ˜¯<strong>InnoDBè§„å®šäº‹åŠ¡åœ¨ç­‰å¾…çš„æ—¶å€™ä¹Ÿéœ€è¦åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªé”ç»“æ„</strong>ï¼Œè¡¨æ˜æœ‰äº‹åŠ¡æƒ³åœ¨æŸä¸ª<code>é—´éš™</code>ä¸­<code>æ’å…¥</code>æ–°è®°å½•ï¼Œä½†æ˜¯ç°åœ¨åœ¨ç­‰å¾…ã€‚InnoDBå°±æŠŠè¿™ç§ç±»å‹çš„é”å‘½åä¸º<code>Insert Intention Locks</code>ï¼Œå®˜æ–¹çš„ç±»å‹åç§°ä¸ºï¼š<code>LOCK_INSERT_INTENTION</code>ï¼Œæˆ‘ä»¬ç§°ä¸º<code>æ’å…¥æ„å‘é”</code>ã€‚æ’å…¥æ„å‘é”æ˜¯ä¸€ç§<code>Gapé”</code>ï¼Œä¸æ˜¯æ„å‘é”ï¼Œåœ¨insertæ“ä½œæ—¶äº§ç”Ÿã€‚</p><p>æ’å…¥æ„å‘é”æ˜¯åœ¨æ’å…¥ä¸€æ¡è®°å½•è¡Œå‰ï¼Œç”±<code>INSERT æ“ä½œäº§ç”Ÿçš„ä¸€ç§é—´éš™é”</code>ã€‚</p><p>äº‹å®ä¸Š<strong>æ’å…¥æ„å‘é”å¹¶ä¸ä¼šé˜»æ­¢åˆ«çš„äº‹åŠ¡ç»§ç»­è·å–è¯¥è®°å½•ä¸Šä»»ä½•ç±»å‹çš„é”ã€‚</strong></p><p><strong>3.</strong> <strong>é¡µé”</strong></p><p>é¡µé”å°±æ˜¯åœ¨<code>é¡µçš„ç²’åº¦</code>ä¸Šè¿›è¡Œé”å®šï¼Œé”å®šçš„æ•°æ®èµ„æºæ¯”è¡Œé”è¦å¤šï¼Œå› ä¸ºä¸€ä¸ªé¡µä¸­å¯ä»¥æœ‰å¤šä¸ªè¡Œè®°å½•ã€‚å½“æˆ‘ä»¬ä½¿ç”¨é¡µé”çš„æ—¶å€™ï¼Œä¼šå‡ºç°æ•°æ®æµªè´¹çš„ç°è±¡ï¼Œä½†è¿™æ ·çš„æµªè´¹æœ€å¤šä¹Ÿå°±æ˜¯ä¸€ä¸ªé¡µä¸Šçš„æ•°æ®è¡Œã€‚<strong>é¡µé”çš„å¼€é”€ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œä¼šå‡ºç°æ­»é”ã€‚é”å®šç²’åº¦ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œå¹¶å‘åº¦ä¸€èˆ¬ã€‚</strong></p><p>æ¯ä¸ªå±‚çº§çš„é”æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œå› ä¸ºé”ä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œ<code>é”ç©ºé—´çš„å¤§å°æ˜¯æœ‰é™çš„</code>ã€‚å½“æŸä¸ªå±‚çº§çš„é”æ•°é‡è¶…è¿‡äº†è¿™ä¸ªå±‚çº§çš„é˜ˆå€¼æ—¶ï¼Œå°±ä¼šè¿›è¡Œ<code>é”å‡çº§</code>ã€‚é”å‡çº§å°±æ˜¯ç”¨æ›´å¤§ç²’åº¦çš„é”æ›¿ä»£å¤šä¸ªæ›´å°ç²’åº¦çš„é”ï¼Œæ¯”å¦‚InnoDB ä¸­è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å ç”¨çš„é”ç©ºé—´é™ä½äº†ï¼Œä½†åŒæ—¶æ•°æ®çš„å¹¶å‘åº¦ä¹Ÿä¸‹é™äº†ã€‚</p><h5 id="3-3-ä»å¯¹å¾…é”çš„æ€åº¦åˆ’åˆ†-ä¹è§‚é”ã€æ‚²è§‚é”"><strong>3.3</strong> <strong>ä»å¯¹å¾…é”çš„æ€åº¦åˆ’åˆ†:ä¹è§‚é”ã€æ‚²è§‚é”</strong></h5><p>ä»å¯¹å¾…é”çš„æ€åº¦æ¥çœ‹é”çš„è¯ï¼Œå¯ä»¥å°†é”åˆ†æˆä¹è§‚é”å’Œæ‚²è§‚é”ï¼Œä»åå­—ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºè¿™ä¸¤ç§é”æ˜¯ä¸¤ç§çœ‹å¾…<code>æ•°æ®å¹¶å‘çš„æ€ç»´æ–¹å¼</code>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¹è§‚é”å’Œæ‚²è§‚é”å¹¶ä¸æ˜¯é”ï¼Œè€Œæ˜¯é”çš„<code>è®¾è®¡æ€æƒ³</code>ã€‚</p><p><strong>1.</strong> <strong>æ‚²è§‚é”ï¼ˆPessimistic Lockingï¼‰</strong></p><p>æ‚²è§‚é”æ€»æ˜¯å‡è®¾æœ€åçš„æƒ…å†µï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼š<code>é˜»å¡</code>ç›´åˆ°å®ƒæ‹¿åˆ°é”ï¼ˆ<strong>å…±äº«èµ„æºæ¯æ¬¡åªç»™ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œå…¶å®ƒçº¿ç¨‹é˜»å¡ï¼Œç”¨å®Œåå†æŠŠèµ„æºè½¬è®©ç»™å…¶å®ƒçº¿ç¨‹</strong>ï¼‰ã€‚æ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ï¼Œå½“å…¶ä»–çº¿ç¨‹æƒ³è¦è®¿é—®æ•°æ®æ—¶ï¼Œéƒ½éœ€è¦é˜»å¡æŒ‚èµ·ã€‚Javaä¸­<code>synchronized</code>å’Œ<code>ReentrantLock</code>ç­‰ç‹¬å é”å°±æ˜¯æ‚²è§‚é”æ€æƒ³çš„å®ç°ã€‚</p><p>æ³¨æ„ï¼š<strong>select â€¦ for update è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰æ‰«æçš„è¡Œéƒ½ä¼šè¢«é”ä¸Šï¼Œå› æ­¤åœ¨MySQLä¸­ç”¨æ‚²è§‚é”å¿…é¡»ç¡®å®šä½¿ç”¨äº†ç´¢å¼•ï¼Œè€Œä¸æ˜¯å…¨è¡¨æ‰«æï¼Œå¦åˆ™å°†ä¼šæŠŠæ•´ä¸ªè¡¨é”ä½ã€‚</strong></p><p><strong>2.</strong> <strong>ä¹è§‚é”ï¼ˆOptimistic Lockingï¼‰</strong></p><p>ä¹è§‚é”è®¤ä¸ºå¯¹åŒä¸€æ•°æ®çš„å¹¶å‘æ“ä½œä¸ä¼šæ€»å‘ç”Ÿï¼Œå±äºå°æ¦‚ç‡äº‹ä»¶ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¯¹æ•°æ®ä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸é‡‡ç”¨æ•°æ®åº“è‡ªèº«çš„é”æœºåˆ¶ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºæ¥å®ç°</strong>ã€‚åœ¨ç¨‹åºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>ç‰ˆæœ¬å·æœºåˆ¶</code>æˆ–è€…<code>CASæœºåˆ¶</code>å®ç°ã€‚<strong>ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡</strong>ã€‚åœ¨Javaä¸­<code>java.util.concurrent.atomic</code>åŒ…ä¸‹çš„åŸå­å˜é‡ç±»å°±æ˜¯ä½¿ç”¨äº†ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ï¼šCASå®ç°çš„ã€‚</p><p><strong>1.</strong> <strong>ä¹è§‚é”çš„ç‰ˆæœ¬å·æœºåˆ¶</strong></p><p>åœ¨è¡¨ä¸­è®¾è®¡ä¸€ä¸ª<code>ç‰ˆæœ¬å­—æ®µ version</code>ï¼Œç¬¬ä¸€æ¬¡è¯»çš„æ—¶å€™ï¼Œä¼šè·å– version å­—æ®µçš„å–å€¼ã€‚ç„¶åå¯¹æ•°æ®è¿›è¡Œæ›´æ–°æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œä¼šæ‰§è¡Œ<code>UPDATE ... SET version=version+1 WHERE version=version</code>ã€‚æ­¤æ—¶å¦‚æœå·²ç»æœ‰äº‹åŠ¡å¯¹è¿™æ¡æ•°æ®è¿›è¡Œäº†æ›´æ”¹ï¼Œä¿®æ”¹å°±ä¸ä¼šæˆåŠŸã€‚</p><p><strong>2.</strong> <strong>ä¹è§‚é”çš„æ—¶é—´æˆ³æœºåˆ¶</strong></p><p>æ—¶é—´æˆ³å’Œç‰ˆæœ¬å·æœºåˆ¶ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨æ›´æ–°æäº¤çš„æ—¶å€™ï¼Œå°†å½“å‰æ•°æ®çš„æ—¶é—´æˆ³å’Œæ›´æ–°ä¹‹å‰å–å¾—çš„æ—¶é—´æˆ³è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ä¸€è‡´åˆ™æ›´æ–°æˆåŠŸï¼Œå¦åˆ™å°±æ˜¯ç‰ˆæœ¬å†²çªã€‚</p><p>ä½ èƒ½çœ‹åˆ°ä¹è§‚é”å°±æ˜¯ç¨‹åºå‘˜è‡ªå·±æ§åˆ¶æ•°æ®å¹¶å‘æ“ä½œçš„æƒé™ï¼ŒåŸºæœ¬æ˜¯é€šè¿‡ç»™æ•°æ®è¡Œå¢åŠ ä¸€ä¸ªæˆ³ï¼ˆç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³ï¼‰ï¼Œä»è€Œè¯æ˜å½“å‰æ‹¿åˆ°çš„æ•°æ®æ˜¯å¦æœ€æ–°ã€‚</p><p><strong>3.</strong> <strong>ä¸¤ç§é”çš„é€‚ç”¨åœºæ™¯</strong></p><p>ä»è¿™ä¸¤ç§é”çš„è®¾è®¡æ€æƒ³ä¸­ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¹è§‚é”å’Œæ‚²è§‚é”çš„é€‚ç”¨åœºæ™¯ï¼š</p><ol><li><p><code>ä¹è§‚é”</code>é€‚åˆ<code>è¯»æ“ä½œå¤š</code>çš„åœºæ™¯ï¼Œç›¸å¯¹æ¥è¯´å†™çš„æ“ä½œæ¯”è¾ƒå°‘ã€‚å®ƒçš„ä¼˜ç‚¹åœ¨äº<code>ç¨‹åºå®ç°</code>ï¼Œ<code>ä¸å­˜åœ¨æ­»é”</code>é—®é¢˜ï¼Œä¸è¿‡é€‚ç”¨åœºæ™¯ä¹Ÿä¼šç›¸å¯¹ä¹è§‚ï¼Œå› ä¸ºå®ƒé˜»æ­¢ä¸äº†é™¤äº†ç¨‹åºä»¥å¤–çš„æ•°æ®åº“æ“ä½œã€‚</p></li><li><p><code>æ‚²è§‚é”</code>é€‚åˆ<code>å†™æ“ä½œå¤š</code>çš„åœºæ™¯ï¼Œå› ä¸ºå†™çš„æ“ä½œå…·æœ‰<code>æ’å®ƒæ€§</code>ã€‚é‡‡ç”¨æ‚²è§‚é”çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨æ•°æ®åº“å±‚é¢é˜»æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥æ•°æ®çš„æ“ä½œæƒé™ï¼Œé˜²æ­¢<code>è¯» - å†™</code>å’Œ<code>å†™ - å†™</code>çš„å†²çªã€‚</p></li></ol><h5 id="3-4-æŒ‰åŠ é”çš„æ–¹å¼åˆ’åˆ†ï¼šæ˜¾å¼é”ã€éšå¼é”"><strong>3.4</strong> <strong>æŒ‰åŠ é”çš„æ–¹å¼åˆ’åˆ†ï¼šæ˜¾å¼é”ã€éšå¼é”</strong></h5><p><strong>1.</strong> <strong>éšå¼é”</strong></p><ul><li><p>**æƒ…æ™¯ä¸€ï¼š**å¯¹äºèšç°‡ç´¢å¼•è®°å½•æ¥è¯´ï¼Œæœ‰ä¸€ä¸ª<code>trx_id</code>éšè—åˆ—ï¼Œè¯¥éšè—åˆ—è®°å½•ç€æœ€åæ”¹åŠ¨è¯¥è®°å½•çš„<code>äº‹åŠ¡id</code>ã€‚é‚£ä¹ˆå¦‚æœåœ¨å½“å‰äº‹åŠ¡ä¸­æ–°æ’å…¥ä¸€æ¡èšç°‡ç´¢å¼•è®°å½•åï¼Œè¯¥è®°å½•çš„<code>trx_id</code>éšè—åˆ—ä»£è¡¨çš„çš„å°±æ˜¯å½“å‰äº‹åŠ¡çš„<code>äº‹åŠ¡id</code>ï¼Œå¦‚æœå…¶ä»–äº‹åŠ¡æ­¤æ—¶æƒ³å¯¹è¯¥è®°å½•æ·»åŠ <code>Sé”</code>æˆ–è€…<code>Xé”</code>æ—¶ï¼Œé¦–å…ˆä¼šçœ‹ä¸€ä¸‹è¯¥è®°å½•çš„<code>trx_id</code>éšè—åˆ—ä»£è¡¨çš„äº‹åŠ¡æ˜¯å¦æ˜¯å½“å‰çš„æ´»è·ƒäº‹åŠ¡ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆå°±å¸®åŠ©å½“å‰äº‹åŠ¡åˆ›å»ºä¸€ä¸ª<code>Xé”</code>ï¼ˆä¹Ÿå°±æ˜¯ä¸ºå½“å‰äº‹åŠ¡åˆ›å»ºä¸€ä¸ªé”ç»“æ„ï¼Œ<code>is_waiting</code>å±æ€§æ˜¯<code>false</code>ï¼‰ï¼Œç„¶åè‡ªå·±è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯ä¸ºè‡ªå·±ä¹Ÿåˆ›å»ºä¸€ä¸ªé”ç»“æ„ï¼Œ<code>is_waiting</code>å±æ€§æ˜¯<code>true</code>ï¼‰ã€‚</p></li><li><p>**æƒ…æ™¯äºŒï¼š**å¯¹äºäºŒçº§ç´¢å¼•è®°å½•æ¥è¯´ï¼Œæœ¬èº«å¹¶æ²¡æœ‰<code>trx_id</code>éšè—åˆ—ï¼Œä½†æ˜¯åœ¨äºŒçº§ç´¢å¼•é¡µé¢çš„<code>Page Header</code>éƒ¨åˆ†æœ‰ä¸€ä¸ª<code>PAGE_MAX_TRX_ID</code>å±æ€§ï¼Œè¯¥å±æ€§ä»£è¡¨å¯¹è¯¥é¡µé¢åšæ”¹åŠ¨çš„æœ€å¤§çš„<code>äº‹åŠ¡id</code>ï¼Œå¦‚æœ<code>PAGE_MAX_TRX_ID</code>å±æ€§å€¼å°äºå½“å‰æœ€å°çš„æ´»è·ƒ<code>äº‹åŠ¡id</code>ï¼Œé‚£ä¹ˆè¯´æ˜å¯¹è¯¥é¡µé¢åšä¿®æ”¹çš„äº‹åŠ¡éƒ½å·²ç»æäº¤äº†ï¼Œå¦åˆ™å°±éœ€è¦åœ¨é¡µé¢ä¸­å®šä½åˆ°å¯¹åº”çš„äºŒçº§ç´¢å¼•è®°å½•ï¼Œç„¶åå›è¡¨æ‰¾åˆ°å®ƒå¯¹åº”çš„èšç°‡ç´¢å¼•è®°å½•ï¼Œç„¶åå†é‡å¤<code>æƒ…æ™¯ä¸€</code>çš„åšæ³•ã€‚</p></li></ul><p>å³ï¼šä¸€ä¸ªäº‹åŠ¡å¯¹æ–°æ’å…¥çš„è®°å½•å¯ä»¥ä¸æ˜¾ç¤ºçš„åŠ é”ï¼ˆç”Ÿæˆä¸€ä¸ªé”ç»“æ„ï¼‰ï¼Œä½†æ˜¯ç”±äº<code>äº‹åŠ¡id</code>çš„å­˜åœ¨ï¼Œç›¸å½“äºåŠ äº†ä¸€ä¸ª<code>éšå¼é”</code>ã€‚åˆ«çš„äº‹åŠ¡åœ¨å¯¹è¿™æ¡è®°å½•åŠ <code>Sé”</code>æˆ–è€…<code>Xé”</code>æ—¶ï¼Œç”±äº<code>éšå¼é”</code>çš„å­˜åœ¨ï¼Œä¼šå…ˆå¸®åŠ©å½“å‰äº‹åŠ¡ç”Ÿæˆä¸€ä¸ªé”ç»“æ„ï¼Œç„¶åè‡ªå·±å†ç”Ÿæˆä¸€ä¸ªé”ç»“æ„åè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚éšå¼é”æ˜¯ä¸€ç§<code>å»¶è¿ŸåŠ é”</code>çš„æœºåˆ¶ï¼Œä»è€Œæ¥å‡å°‘åŠ é”çš„æ•°é‡ã€‚</p><p><strong>2.</strong> <strong>æ˜¾å¼é”</strong></p><p>é€šè¿‡ç‰¹å®šçš„è¯­å¥è¿›è¡ŒåŠ é”ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºæ˜¾ç¤ºåŠ é”ã€‚</p><h5 id="3-5-å…¶å®ƒé”ä¹‹ï¼šå…¨å±€é”"><strong>3.5</strong> <strong>å…¶å®ƒé”ä¹‹ï¼šå…¨å±€é”</strong></h5><p>å…¨å±€é”å°±æ˜¯å¯¹<code>æ•´ä¸ªæ•°æ®åº“å®ä¾‹</code>åŠ é”ã€‚å½“ä½ éœ€è¦è®©æ•´ä¸ªåº“å¤„äº<code>åªè¯»çŠ¶æ€</code>çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œä¹‹åå…¶ä»–çº¿ç¨‹çš„ä»¥ä¸‹è¯­å¥ä¼šè¢«é˜»å¡ï¼šæ•°æ®æ›´æ–°è¯­å¥ï¼ˆæ•°æ®çš„å¢åˆ æ”¹ï¼‰ã€æ•°æ®å®šä¹‰è¯­å¥ï¼ˆåŒ…æ‹¬å»ºè¡¨ã€ä¿®æ”¹è¡¨ç»“æ„ç­‰ï¼‰å’Œæ›´æ–°ç±»äº‹åŠ¡çš„æäº¤è¯­å¥ã€‚å…¨å±€é”çš„å…¸å‹ä½¿ç”¨<code>åœºæ™¯</code>æ˜¯ï¼šåš<code>å…¨åº“é€»è¾‘å¤‡ä»½</code>ã€‚</p><p>å…¨å±€é”çš„å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Flush tables with read lock</span><br></pre></td></tr></table></figure><h5 id="3-6-å…¶å®ƒé”ä¹‹ï¼šæ­»é”"><strong>3.6</strong> <strong>å…¶å®ƒé”ä¹‹ï¼šæ­»é”</strong></h5><p>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡åœ¨åŒä¸€èµ„æºä¸Šç›¸äº’å ç”¨ï¼Œå¹¶è¯·æ±‚é”å®šå¯¹æ–¹å ç”¨çš„èµ„æºï¼Œä»è€Œå¯¼è‡´æ¶æ€§å¾ªç¯ã€‚</p><p><strong>1. å¦‚ä½•å¤„ç†æ­»é”</strong></p><p>**æ–¹å¼1ï¼š**ç­‰å¾…ï¼Œç›´åˆ°è¶…æ—¶ï¼ˆinnodb_lock_wait_timeout=50sï¼‰</p><p>å³å½“ä¸¤ä¸ªäº‹åŠ¡äº’ç›¸ç­‰å¾…æ—¶ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡ç­‰å¾…æ—¶é—´è¶…è¿‡è®¾ç½®çš„é˜ˆå€¼æ—¶ï¼Œå°±å°†å…¶<code>å›æ»š</code>ï¼Œå¦å¤–äº‹åŠ¡ç»§ç»­è¿›è¡Œã€‚</p><p>**æ–¹å¼2ï¼š**ä½¿ç”¨æ­»é”æ£€æµ‹è¿›è¡Œæ­»é”å¤„ç†</p><p>å‘èµ·æ­»é”æ£€æµ‹ï¼Œå‘ç°æ­»é”åï¼Œä¸»åŠ¨å›æ»šæ­»é”é“¾æ¡ä¸­çš„æŸä¸€ä¸ªäº‹åŠ¡ï¼ˆå°†æŒæœ‰æœ€å°‘è¡Œçº§æ’ä»–é”çš„äº‹åŠ¡è¿›è¡Œå›æ»šï¼‰ï¼Œè®©å…¶ä»–äº‹åŠ¡å¾—ä»¥ç»§ç»­æ‰§è¡Œã€‚</p><h4 id="4-é”çš„å†…å­˜ç»“æ„"><strong>4.</strong> <strong>é”çš„å†…å­˜ç»“æ„</strong></h4><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051514736.png" alt="image-20220405151409557"></p><p>ç»“æ„è§£æï¼š</p><p><code>1. é”æ‰€åœ¨çš„äº‹åŠ¡ä¿¡æ¯</code>ï¼š</p><p>ä¸è®ºæ˜¯<code>è¡¨é”</code>è¿˜æ˜¯<code>è¡Œé”</code>ï¼Œéƒ½æ˜¯åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ï¼Œå“ªä¸ªäº‹åŠ¡ç”Ÿæˆäº†è¿™ä¸ª é”ç»“æ„ ï¼Œè¿™é‡Œå°±è®°å½•è¿™ä¸ªäº‹åŠ¡çš„ä¿¡æ¯ã€‚</p><p>æ­¤<code>é”æ‰€åœ¨çš„äº‹åŠ¡ä¿¡æ¯</code>åœ¨å†…å­˜ç»“æ„ä¸­åªæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œé€šè¿‡æŒ‡é’ˆå¯ä»¥æ‰¾åˆ°å†…å­˜ä¸­å…³äºè¯¥äº‹åŠ¡çš„æ›´å¤šä¿¡æ¯ï¼Œæ¯”æ–¹è¯´äº‹åŠ¡idç­‰ã€‚</p><p><code>2. ç´¢å¼•ä¿¡æ¯</code>ï¼š</p><p>å¯¹äº<code>è¡Œé”</code>æ¥è¯´ï¼Œéœ€è¦è®°å½•ä¸€ä¸‹åŠ é”çš„è®°å½•æ˜¯å±äºå“ªä¸ªç´¢å¼•çš„ã€‚è¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚</p><p><code>3. è¡¨é”ï¼è¡Œé”ä¿¡æ¯</code>ï¼š</p><p><code>è¡¨é”ç»“æ„</code>å’Œ<code>è¡Œé”ç»“æ„</code>åœ¨è¿™ä¸ªä½ç½®çš„å†…å®¹æ˜¯ä¸åŒçš„ï¼š</p><ul><li>è¡¨é”ï¼šè®°è½½ç€æ˜¯å¯¹å“ªä¸ªè¡¨åŠ çš„é”ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›ä¿¡æ¯ã€‚</li><li>è¡Œé”ï¼šè®°è½½äº†ä¸‰ä¸ªé‡è¦çš„ä¿¡æ¯ï¼š<ul><li>Space ID ï¼šè®°å½•æ‰€åœ¨è¡¨ç©ºé—´ã€‚</li><li>Page Number ï¼šè®°å½•æ‰€åœ¨é¡µå·ã€‚</li><li>n_bits ï¼šå¯¹äºè¡Œé”æ¥è¯´ï¼Œä¸€æ¡è®°å½•å°±å¯¹åº”ç€ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œä¸€ä¸ªé¡µé¢ä¸­åŒ…å«å¾ˆå¤šè®°å½•ï¼Œç”¨ä¸åŒçš„æ¯”ç‰¹ä½æ¥åŒºåˆ†åˆ°åº•æ˜¯å“ªä¸€æ¡è®°å½•åŠ äº†é”ã€‚ä¸ºæ­¤åœ¨è¡Œé”ç»“æ„çš„æœ«å°¾æ”¾ç½®äº†ä¸€å †æ¯”ç‰¹ä½ï¼Œè¿™ä¸ªn_bits å±æ€§ä»£è¡¨ä½¿ç”¨äº†å¤šå°‘æ¯”ç‰¹ä½ã€‚</li></ul></li></ul><blockquote><p>n_bitsçš„å€¼ä¸€èˆ¬éƒ½æ¯”é¡µé¢ä¸­è®°å½•æ¡æ•°å¤šä¸€äº›ã€‚ä¸»è¦æ˜¯ä¸ºäº†ä¹‹ååœ¨é¡µé¢ä¸­æ’å…¥äº†æ–°è®°å½•åä¹Ÿä¸è‡³äºé‡æ–°åˆ†é…é”ç»“æ„</p></blockquote><p><code>4. type_mode</code>ï¼š</p><p>è¿™æ˜¯ä¸€ä¸ª32ä½çš„æ•°ï¼Œè¢«åˆ†æˆäº†<code>lock_mode</code>ã€<code>lock_type</code>å’Œ<code>rec_lock_type</code>ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204051518659.png" alt="image-20220405151829547"></p><ul><li>é”çš„æ¨¡å¼ï¼ˆ<code>lock_mode</code>ï¼‰ï¼Œå ç”¨ä½4ä½ï¼Œå¯é€‰çš„å€¼å¦‚ä¸‹ï¼š<ul><li><code>LOCK_IS</code>ï¼ˆåè¿›åˆ¶çš„<code>0</code>ï¼‰ï¼šè¡¨ç¤ºå…±äº«æ„å‘é”ï¼Œä¹Ÿå°±æ˜¯<code>ISé”</code>ã€‚</li><li><code>LOCK_IX</code>ï¼ˆåè¿›åˆ¶çš„<code>1</code>ï¼‰ï¼šè¡¨ç¤ºç‹¬å æ„å‘é”ï¼Œä¹Ÿå°±æ˜¯<code>IXé”</code>ã€‚</li><li><code>LOCK_S</code>ï¼ˆåè¿›åˆ¶çš„<code>2</code>ï¼‰ï¼šè¡¨ç¤ºå…±äº«é”ï¼Œä¹Ÿå°±æ˜¯<code>Sé”</code>ã€‚</li><li><code>LOCK_X</code>ï¼ˆåè¿›åˆ¶çš„<code>3</code>ï¼‰ï¼šè¡¨ç¤ºç‹¬å é”ï¼Œä¹Ÿå°±æ˜¯<code>Xé”</code>ã€‚</li><li><code>LOCK_AUTO_INC</code>ï¼ˆåè¿›åˆ¶çš„<code>4</code>ï¼‰ï¼šè¡¨ç¤º<code>AUTO-INCé”</code>ã€‚</li></ul></li></ul><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼ŒLOCK_ISï¼ŒLOCK_IXï¼ŒLOCK_AUTO_INCéƒ½ç®—æ˜¯è¡¨çº§é”çš„æ¨¡å¼ï¼ŒLOCK_Så’Œ LOCK_Xæ—¢å¯ä»¥ç®—æ˜¯è¡¨çº§é”çš„æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡Œçº§é”çš„æ¨¡å¼ã€‚</p><ul><li>é”çš„ç±»å‹ï¼ˆ<code>lock_type</code>ï¼‰ï¼Œå ç”¨ç¬¬5ï½8ä½ï¼Œä¸è¿‡ç°é˜¶æ®µåªæœ‰ç¬¬5ä½å’Œç¬¬6ä½è¢«ä½¿ç”¨ï¼š<ul><li><code>LOCK_TABLE</code>ï¼ˆåè¿›åˆ¶çš„<code>16</code>ï¼‰ï¼Œä¹Ÿå°±æ˜¯å½“ç¬¬5ä¸ªæ¯”ç‰¹ä½ç½®ä¸º1æ—¶ï¼Œè¡¨ç¤ºè¡¨çº§é”ã€‚</li><li><code>LOCK_REC</code>ï¼ˆåè¿›åˆ¶çš„<code>32</code>ï¼‰ï¼Œä¹Ÿå°±æ˜¯å½“ç¬¬6ä¸ªæ¯”ç‰¹ä½ç½®ä¸º1æ—¶ï¼Œè¡¨ç¤ºè¡Œçº§é”ã€‚</li></ul></li><li>è¡Œé”çš„å…·ä½“ç±»å‹ï¼ˆ<code>rec_lock_type</code>ï¼‰ï¼Œä½¿ç”¨å…¶ä½™çš„ä½æ¥è¡¨ç¤ºã€‚åªæœ‰åœ¨ <code>lock_type</code>çš„å€¼ä¸º<code>LOCK_REC</code>æ—¶ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨è¯¥é”ä¸ºè¡Œçº§é”æ—¶ï¼Œæ‰ä¼šè¢«ç»†åˆ†ä¸ºæ›´å¤šçš„ç±»å‹ï¼š<ul><li><code>LOCK_ORDINARY</code>ï¼ˆåè¿›åˆ¶çš„<code>0</code>ï¼‰ï¼šè¡¨ç¤º<code>next-keyé”</code>ã€‚</li><li><code>LOCK_GAP</code>ï¼ˆåè¿›åˆ¶çš„<code>512</code>ï¼‰ï¼šä¹Ÿå°±æ˜¯å½“ç¬¬10ä¸ªæ¯”ç‰¹ä½ç½®ä¸º1æ—¶ï¼Œè¡¨ç¤º<code>gapé”</code>ã€‚</li><li><code>LOCK_REC_NOT_GAP</code>ï¼ˆåè¿›åˆ¶çš„<code>1024</code>ï¼‰ï¼šä¹Ÿå°±æ˜¯å½“ç¬¬11ä¸ªæ¯”ç‰¹ä½ç½®ä¸º1æ—¶ï¼Œè¡¨ç¤ºæ­£ç»<code>è®°å½•é”</code>ã€‚</li><li><code>LOCK_INSERT_INTENTION</code>ï¼ˆåè¿›åˆ¶çš„<code>2048</code>ï¼‰ï¼šä¹Ÿå°±æ˜¯å½“ç¬¬12ä¸ªæ¯”ç‰¹ä½ç½®ä¸º1æ—¶ï¼Œè¡¨ç¤ºæ’å…¥æ„å‘é”ã€‚å…¶ä»–çš„ç±»å‹ï¼šè¿˜æœ‰ä¸€äº›ä¸å¸¸ç”¨çš„ç±»å‹æˆ‘ä»¬å°±ä¸å¤šè¯´äº†ã€‚</li></ul></li><li><code>is_waiting</code>å±æ€§å‘¢ï¼ŸåŸºäºå†…å­˜ç©ºé—´çš„èŠ‚çœï¼Œæ‰€ä»¥æŠŠ is_waiting å±æ€§æ”¾åˆ°äº† type_mode è¿™ä¸ª32ä½çš„æ•°å­—ä¸­ï¼š<ul><li><code>LOCK_WAIT</code>ï¼ˆåè¿›åˆ¶çš„<code>256</code>ï¼‰ ï¼šå½“ç¬¬9ä¸ªæ¯”ç‰¹ä½ç½®ä¸º<code>1</code>æ—¶ï¼Œè¡¨ç¤º<code>is_waiting</code>ä¸º<code>true</code>ï¼Œä¹Ÿå°±æ˜¯å½“å‰äº‹åŠ¡å°šæœªè·å–åˆ°é”ï¼Œå¤„åœ¨ç­‰å¾…çŠ¶æ€ï¼›å½“è¿™ä¸ªæ¯”ç‰¹ä½ä¸º<code>0</code>æ—¶ï¼Œè¡¨ç¤º<code>is_waiting</code>ä¸º<code>false</code>ï¼Œä¹Ÿå°±æ˜¯å½“å‰äº‹åŠ¡è·å–é”æˆåŠŸã€‚</li></ul></li></ul><p><code>5. å…¶ä»–ä¿¡æ¯</code>ï¼š</p><p>ä¸ºäº†æ›´å¥½çš„ç®¡ç†ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„å„ç§é”ç»“æ„è€Œè®¾è®¡äº†å„ç§å“ˆå¸Œè¡¨å’Œé“¾è¡¨ã€‚</p><p><code>6. ä¸€å †æ¯”ç‰¹ä½</code>ï¼š</p><p>å¦‚æœæ˜¯<code>è¡Œé”ç»“æ„</code>çš„è¯ï¼Œåœ¨è¯¥ç»“æ„æœ«å°¾è¿˜æ”¾ç½®äº†ä¸€å †æ¯”ç‰¹ä½ï¼Œæ¯”ç‰¹ä½çš„æ•°é‡æ˜¯ç”±ä¸Šè¾¹æåˆ°çš„<code>n_bits</code>å±æ€§è¡¨ç¤ºçš„ã€‚InnoDBæ•°æ®é¡µä¸­çš„æ¯æ¡è®°å½•åœ¨<code>è®°å½•å¤´ä¿¡æ¯</code>ä¸­éƒ½åŒ…å«ä¸€ä¸ª heap_no å±æ€§ï¼Œä¼ªè®°å½•<code>Infimum</code>çš„<code>heap_no</code>å€¼ä¸º<code>0</code>ï¼Œ<code>Supremum</code>çš„<code>heap_no</code>å€¼ä¸º<code>1</code>ï¼Œä¹‹åæ¯æ’å…¥ä¸€æ¡è®°å½•ï¼Œ<code>heap_no</code>å€¼å°±å¢1ã€‚<code>é”ç»“æ„</code>æœ€åçš„ä¸€å †æ¯”ç‰¹ä½å°±å¯¹åº”ç€ä¸€ä¸ªé¡µé¢ä¸­çš„è®°å½•ï¼Œä¸€ä¸ªæ¯”ç‰¹ä½æ˜ å°„ä¸€ä¸ª<code>heap_no</code>ï¼Œå³ä¸€ä¸ªæ¯”ç‰¹ä½æ˜ å°„åˆ°é¡µå†…çš„ä¸€æ¡è®°å½•ã€‚</p><h4 id="5-é”ç›‘æ§"><strong>5.</strong> <strong>é”ç›‘æ§</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show status like &#x27;innodb_row_lock%&#x27;;</span><br></pre></td></tr></table></figure><ul><li>Innodb_row_lock_current_waitsï¼šå½“å‰æ­£åœ¨ç­‰å¾…é”å®šçš„æ•°é‡ï¼›</li><li><code>Innodb_row_lock_time</code>ï¼šä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨é”å®šæ€»æ—¶é—´é•¿åº¦ï¼›ï¼ˆç­‰å¾…æ€»æ—¶é•¿ï¼‰</li><li><code>Innodb_row_lock_time_avg</code>ï¼šæ¯æ¬¡ç­‰å¾…æ‰€èŠ±å¹³å‡æ—¶é—´ï¼›ï¼ˆç­‰å¾…å¹³å‡æ—¶é•¿ï¼‰</li><li>Innodb_row_lock_time_maxï¼šä»ç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨ç­‰å¾…æœ€å¸¸çš„ä¸€æ¬¡æ‰€èŠ±çš„æ—¶é—´ï¼›</li><li><code>Innodb_row_lock_waits</code>ï¼šç³»ç»Ÿå¯åŠ¨ååˆ°ç°åœ¨æ€»å…±ç­‰å¾…çš„æ¬¡æ•°ï¼›ï¼ˆç­‰å¾…æ€»æ¬¡æ•°ï¼‰</li></ul><p><strong>å…¶ä»–ç›‘æ§æ–¹æ³•ï¼š</strong></p><p>MySQLæŠŠäº‹åŠ¡å’Œé”çš„ä¿¡æ¯è®°å½•åœ¨äº†<code>information_schema</code>åº“ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨åˆ†åˆ«æ˜¯<code>INNODB_TRX</code>ã€<code>INNODB_LOCKS</code>å’Œ<code>INNODB_LOCK_WAITS</code>ã€‚</p><p><code>MySQL5.7åŠä¹‹å‰</code>ï¼Œå¯ä»¥é€šè¿‡information_schema.INNODB_LOCKSæŸ¥çœ‹äº‹åŠ¡çš„é”æƒ…å†µï¼Œä½†åªèƒ½çœ‹åˆ°é˜»å¡äº‹åŠ¡çš„é”ï¼›å¦‚æœäº‹åŠ¡å¹¶æœªè¢«é˜»å¡ï¼Œåˆ™åœ¨è¯¥è¡¨ä¸­çœ‹ä¸åˆ°è¯¥äº‹åŠ¡çš„é”æƒ…å†µã€‚</p><p>MySQL8.0åˆ é™¤äº†information_schema.INNODB_LOCKSï¼Œæ·»åŠ äº†<code>performance_schema.data_locks</code>ï¼Œå¯ä»¥é€šè¿‡performance_schema.data_locksæŸ¥çœ‹äº‹åŠ¡çš„é”æƒ…å†µï¼Œå’ŒMySQL5.7åŠä¹‹å‰ä¸åŒï¼Œperformance_schema.data_locksä¸ä½†å¯ä»¥çœ‹åˆ°é˜»å¡è¯¥äº‹åŠ¡çš„é”ï¼Œè¿˜å¯ä»¥çœ‹åˆ°è¯¥äº‹åŠ¡æ‰€æŒæœ‰çš„é”ã€‚</p><p>åŒæ—¶ï¼Œinformation_schema.INNODB_LOCK_WAITSä¹Ÿè¢«<code>performance_schema.data_lock_waits</code>æ‰€ä»£æ›¿ã€‚</p>]]></content>
    
    
    <summary type="html">ã€æ¦‚è¿°ã€MySQLå¹¶å‘äº‹åŠ¡è®¿é—®ç›¸åŒè®°å½•ã€é”çš„ä¸åŒè§’åº¦åˆ†ç±»ã€é”çš„å†…å­˜ç»“æ„ã€é”ç›‘æ§ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬14ç«  MySQLäº‹åŠ¡æ—¥å¿—</title>
    <link href="https://angus9823.github.io/posts/34db5f02.html"/>
    <id>https://angus9823.github.io/posts/34db5f02.html</id>
    <published>2023-04-18T07:37:26.000Z</published>
    <updated>2023-04-18T08:25:56.541Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬14ç« -MySQLäº‹åŠ¡æ—¥å¿—">ç¬¬14ç«  MySQLäº‹åŠ¡æ—¥å¿—</h3><p>äº‹åŠ¡æœ‰4ç§ç‰¹æ€§ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ã€‚é‚£ä¹ˆäº‹åŠ¡çš„å››ç§ç‰¹æ€§åˆ°åº•æ˜¯åŸºäºä»€ä¹ˆæœºåˆ¶å®ç°å‘¢ï¼Ÿ</p><ul><li>äº‹åŠ¡çš„éš”ç¦»æ€§ç”±<code>é”æœºåˆ¶</code>å®ç°ã€‚</li><li>è€Œäº‹åŠ¡çš„åŸå­æ€§ã€ä¸€è‡´æ€§å’ŒæŒä¹…æ€§ç”±äº‹åŠ¡çš„ redo æ—¥å¿—å’Œundo æ—¥å¿—æ¥ä¿è¯ã€‚<ul><li>REDO LOG ç§°ä¸º<code>é‡åšæ—¥å¿—</code>ï¼Œæä¾›å†å†™å…¥æ“ä½œï¼Œæ¢å¤æäº¤äº‹åŠ¡ä¿®æ”¹çš„é¡µæ“ä½œï¼Œç”¨æ¥ä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ã€‚</li><li>UNDO LOG ç§°ä¸º<code>å›æ»šæ—¥å¿—</code>ï¼Œå›æ»šè¡Œè®°å½•åˆ°æŸä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œç”¨æ¥ä¿è¯äº‹åŠ¡çš„åŸå­æ€§ã€ä¸€è‡´æ€§ã€‚</li></ul></li></ul><h4 id="1-redoæ—¥å¿—"><strong>1. redoæ—¥å¿—</strong></h4><h5 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦REDOæ—¥å¿—"><strong>1.1</strong> <strong>ä¸ºä»€ä¹ˆéœ€è¦REDOæ—¥å¿—</strong></h5><p>ä¸€æ–¹é¢ï¼Œç¼“å†²æ± å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¶ˆé™¤CPUå’Œç£ç›˜ä¹‹é—´çš„é¸¿æ²Ÿï¼Œcheckpointæœºåˆ¶å¯ä»¥ä¿è¯æ•°æ®çš„æœ€ç»ˆè½ç›˜ï¼Œç„¶è€Œç”±äºcheckpoint<code>å¹¶ä¸æ˜¯æ¯æ¬¡å˜æ›´çš„æ—¶å€™å°±è§¦å‘</code>çš„ï¼Œè€Œæ˜¯masterçº¿ç¨‹éš”ä¸€æ®µæ—¶é—´å»å¤„ç†çš„ã€‚æ‰€ä»¥æœ€åçš„æƒ…å†µå°±æ˜¯äº‹åŠ¡æäº¤åï¼Œåˆšå†™å®Œç¼“å†²æ± ï¼Œæ•°æ®åº“å®•æœºäº†ï¼Œé‚£ä¹ˆè¿™æ®µæ•°æ®å°±æ˜¯ä¸¢å¤±çš„ï¼Œæ— æ³•æ¢å¤ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œäº‹åŠ¡åŒ…å«<code>æŒä¹…æ€§</code>çš„ç‰¹æ€§ï¼Œå°±æ˜¯è¯´å¯¹äºä¸€ä¸ªå·²ç»æäº¤çš„äº‹åŠ¡ï¼Œåœ¨äº‹åŠ¡æäº¤åå³ä½¿ç³»ç»Ÿå‘ç”Ÿäº†å´©æºƒï¼Œè¿™ä¸ªäº‹åŠ¡å¯¹æ•°æ®åº“ä¸­æ‰€åšçš„æ›´æ”¹ä¹Ÿä¸èƒ½ä¸¢å¤±ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•ä¿è¯è¿™ä¸ªæŒä¹…æ€§å‘¢ï¼Ÿ<code>ä¸€ä¸ªç®€å•çš„åšæ³•</code>ï¼šåœ¨äº‹åŠ¡æäº¤å®Œæˆä¹‹å‰æŠŠè¯¥äº‹åŠ¡æ‰€ä¿®æ”¹çš„æ‰€æœ‰é¡µé¢éƒ½åˆ·æ–°åˆ°ç£ç›˜ï¼Œä½†æ˜¯è¿™ä¸ªç®€å•ç²—æš´çš„åšæ³•æœ‰äº›é—®é¢˜</p><p><code>å¦ä¸€ä¸ªè§£å†³çš„æ€è·¯</code>ï¼šæˆ‘ä»¬åªæ˜¯æƒ³è®©å·²ç»æäº¤äº†çš„äº‹åŠ¡å¯¹æ•°æ®åº“ä¸­æ•°æ®æ‰€åšçš„ä¿®æ”¹æ°¸ä¹…ç”Ÿæ•ˆï¼Œå³ä½¿åæ¥ç³»ç»Ÿå´©æºƒï¼Œåœ¨é‡å¯åä¹Ÿèƒ½æŠŠè¿™ç§ä¿®æ”¹æ¢å¤å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å…¶å®æ²¡æœ‰å¿…è¦åœ¨æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶å°±æŠŠè¯¥äº‹åŠ¡åœ¨å†…å­˜ä¸­ä¿®æ”¹è¿‡çš„å…¨éƒ¨é¡µé¢åˆ·æ–°åˆ°ç£ç›˜ï¼Œåªéœ€è¦æŠŠ<code>ä¿®æ”¹</code>äº†å“ªäº›ä¸œè¥¿<code>è®°å½•ä¸€ä¸‹</code>å°±å¥½ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªäº‹åŠ¡å°†ç³»ç»Ÿè¡¨ç©ºé—´ä¸­<code>ç¬¬10å·</code>é¡µé¢ä¸­åç§»é‡ä¸º<code>100</code>å¤„çš„é‚£ä¸ªå­—èŠ‚çš„å€¼<code>1</code>æ”¹æˆ<code>2</code>ã€‚æˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸‹ï¼šå°†ç¬¬0å·è¡¨ç©ºé—´çš„10å·é¡µé¢çš„åç§»é‡ä¸º100å¤„çš„å€¼æ›´æ–°ä¸º 2 ã€‚</p><h5 id="1-2-REDOæ—¥å¿—çš„å¥½å¤„ã€ç‰¹ç‚¹"><strong>1.2 REDOæ—¥å¿—çš„å¥½å¤„ã€ç‰¹ç‚¹</strong></h5><p><strong>1.</strong> <strong>å¥½å¤„</strong></p><ul><li><strong>redoæ—¥å¿—é™ä½äº†åˆ·ç›˜é¢‘ç‡</strong></li><li><strong>redoæ—¥å¿—å ç”¨çš„ç©ºé—´éå¸¸å°</strong></li></ul><p><strong>2.</strong> <strong>ç‰¹ç‚¹</strong></p><ul><li><strong>redoæ—¥å¿—æ˜¯é¡ºåºå†™å…¥ç£ç›˜çš„</strong></li><li><strong>äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œredo logä¸æ–­è®°å½•</strong></li></ul><h5 id="1-3-redoçš„ç»„æˆ"><strong>1.3 redoçš„ç»„æˆ</strong></h5><p>Redo logå¯ä»¥ç®€å•åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><code>é‡åšæ—¥å¿—çš„ç¼“å†² (redo log buffer) </code>ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ˜¯æ˜“å¤±çš„ã€‚</li></ul><p><strong>å‚æ•°è®¾ç½®ï¼šinnodb_log_buffer_sizeï¼š</strong></p><p>redo log buffer å¤§å°ï¼Œé»˜è®¤<code>16M</code>ï¼Œæœ€å¤§å€¼æ˜¯4096Mï¼Œæœ€å°å€¼ä¸º1Mã€‚</p><ul><li><code>é‡åšæ—¥å¿—æ–‡ä»¶ (redo log file)</code>ï¼Œä¿å­˜åœ¨ç¡¬ç›˜ä¸­ï¼Œæ˜¯æŒä¹…çš„ã€‚</li></ul><h5 id="1-4-redoçš„æ•´ä½“æµç¨‹"><strong>1.4 redoçš„æ•´ä½“æµç¨‹</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031147714.png" alt="image-20220403114709581"></p><p>ç¬¬1æ­¥ï¼šå…ˆå°†åŸå§‹æ•°æ®ä»ç£ç›˜ä¸­è¯»å…¥å†…å­˜ä¸­æ¥ï¼Œä¿®æ”¹æ•°æ®çš„å†…å­˜æ‹·è´</p><p>ç¬¬2æ­¥ï¼šç”Ÿæˆä¸€æ¡é‡åšæ—¥å¿—å¹¶å†™å…¥redo log bufferï¼Œè®°å½•çš„æ˜¯æ•°æ®è¢«ä¿®æ”¹åçš„å€¼</p><p>ç¬¬3æ­¥ï¼šå½“äº‹åŠ¡commitæ—¶ï¼Œå°†redo log bufferä¸­çš„å†…å®¹åˆ·æ–°åˆ° redo log fileï¼Œå¯¹ redo log fileé‡‡ç”¨è¿½åŠ å†™çš„æ–¹å¼</p><p>ç¬¬4æ­¥ï¼šå®šæœŸå°†å†…å­˜ä¸­ä¿®æ”¹çš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­</p><blockquote><p>Write-Ahead Log(é¢„å…ˆæ—¥å¿—æŒä¹…åŒ–)ï¼šåœ¨æŒä¹…åŒ–ä¸€ä¸ªæ•°æ®é¡µä¹‹å‰ï¼Œå…ˆå°†å†…å­˜ä¸­ç›¸åº”çš„æ—¥å¿—é¡µæŒä¹…åŒ–ã€‚</p></blockquote><h5 id="1-5-redo-logçš„åˆ·ç›˜ç­–ç•¥"><strong>1.5 redo logçš„åˆ·ç›˜ç­–ç•¥</strong></h5><p>redo log bufferåˆ·ç›˜åˆ°redo log fileçš„è¿‡ç¨‹å¹¶ä¸æ˜¯çœŸæ­£çš„åˆ·åˆ°ç£ç›˜ä¸­å»ï¼Œåªæ˜¯åˆ·å…¥åˆ°<code>æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</code>ï¼ˆpage cacheï¼‰ä¸­å»ï¼ˆè¿™æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿä¸ºäº†æé«˜æ–‡ä»¶å†™å…¥æ•ˆç‡åšçš„ä¸€ä¸ªä¼˜åŒ–ï¼‰ï¼ŒçœŸæ­£çš„å†™å…¥ä¼šäº¤ç»™ç³»ç»Ÿè‡ªå·±æ¥å†³å®šï¼ˆæ¯”å¦‚page cacheè¶³å¤Ÿå¤§äº†ï¼‰ã€‚é‚£ä¹ˆå¯¹äºInnoDBæ¥è¯´å°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœäº¤ç»™ç³»ç»Ÿæ¥åŒæ­¥ï¼ŒåŒæ ·å¦‚æœç³»ç»Ÿå®•æœºï¼Œé‚£ä¹ˆæ•°æ®ä¹Ÿä¸¢å¤±äº†ï¼ˆè™½ç„¶æ•´ä¸ªç³»ç»Ÿå®•æœºçš„æ¦‚ç‡è¿˜æ˜¯æ¯”è¾ƒå°çš„ï¼‰ã€‚</p><p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒInnoDBç»™å‡º<code>innodb_flush_log_at_trx_commit</code>å‚æ•°ï¼Œè¯¥å‚æ•°æ§åˆ¶ commitæäº¤äº‹åŠ¡æ—¶ï¼Œå¦‚ä½•å°† redo log buffer ä¸­çš„æ—¥å¿—åˆ·æ–°åˆ° redo log file ä¸­ã€‚å®ƒæ”¯æŒä¸‰ç§ç­–ç•¥ï¼š</p><ul><li><code>è®¾ç½®ä¸º0</code>ï¼šè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ä¸è¿›è¡Œåˆ·ç›˜æ“ä½œã€‚ï¼ˆç³»ç»Ÿé»˜è®¤master threadæ¯éš”1sè¿›è¡Œä¸€æ¬¡é‡åšæ—¥å¿—çš„åŒæ­¥ï¼‰</li><li><code>è®¾ç½®ä¸º1</code>ï¼šè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°†è¿›è¡ŒåŒæ­¥ï¼Œåˆ·ç›˜æ“ä½œï¼ˆ<code>é»˜è®¤å€¼</code>ï¼‰</li><li><code>è®¾ç½®ä¸º2</code>ï¼šè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½åªæŠŠ redo log buffer å†…å®¹å†™å…¥ page cacheï¼Œä¸è¿›è¡ŒåŒæ­¥ã€‚ç”±osè‡ªå·±å†³å®šä»€ä¹ˆæ—¶å€™åŒæ­¥åˆ°ç£ç›˜æ–‡ä»¶ã€‚</li></ul><h5 id="1-6-ä¸åŒåˆ·ç›˜ç­–ç•¥æ¼”ç¤º"><strong>1.6</strong> <strong>ä¸åŒåˆ·ç›˜ç­–ç•¥æ¼”ç¤º</strong></h5><p><strong>1.</strong> <strong>æµç¨‹å›¾</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031152952.png" alt="image-20220403115232833"></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031152607.png" alt="image-20220403115249492"></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031153931.png" alt="image-20220403115300809"></p><h5 id="1-7-å†™å…¥redo-log-bufferè¿‡ç¨‹"><strong>1.7</strong> <strong>å†™å…¥redo log bufferè¿‡ç¨‹</strong></h5><p><strong>1.</strong> <strong>è¡¥å……æ¦‚å¿µï¼šMini-Transaction</strong></p><p>ä¸€ä¸ªäº‹åŠ¡å¯ä»¥åŒ…å«è‹¥å¹²æ¡è¯­å¥ï¼Œæ¯ä¸€æ¡è¯­å¥å…¶å®æ˜¯ç”±è‹¥å¹²ä¸ª<code>mtr</code>ç»„æˆï¼Œæ¯ä¸€ä¸ª<code>mtr</code>åˆå¯ä»¥åŒ…å«è‹¥å¹²æ¡redoæ—¥å¿—</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040912119.png" alt="image-20220404091224993"></p><p><strong>2. redo</strong> <strong>æ—¥å¿—å†™å…¥log buffer</strong></p><p>ä¸åŒçš„äº‹åŠ¡å¯èƒ½æ˜¯<code>å¹¶å‘</code>æ‰§è¡Œçš„ï¼Œæ‰€ä»¥<code>äº‹åŠ¡T1</code>ã€<code>äº‹åŠ¡T2</code>ä¹‹é—´çš„<code>mtr</code>å¯èƒ½æ˜¯<code>äº¤æ›¿æ‰§è¡Œ</code>çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040915708.png" alt="image-20220404091511602"></p><h5 id="1-8-redo-log-file"><strong>1.8 redo log file</strong></h5><p><strong>1.</strong> <strong>ç›¸å…³å‚æ•°è®¾ç½®</strong></p><ul><li><p><code>innodb_log_group_home_dir</code>ï¼šæŒ‡å®š redo log æ–‡ä»¶ç»„æ‰€åœ¨çš„è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º<code>./</code>ï¼Œè¡¨ç¤ºåœ¨æ•°æ®åº“çš„æ•°æ®ç›®å½•ä¸‹ã€‚MySQLçš„é»˜è®¤æ•°æ®ç›®å½•ï¼ˆ<code>var/lib/mysql</code>ï¼‰ä¸‹é»˜è®¤æœ‰ä¸¤ä¸ªåä¸º<code>ib_logfile0</code>å’Œ<code>ib_logfile1</code>çš„æ–‡ä»¶ï¼Œlog bufferä¸­çš„æ—¥å¿—é»˜è®¤æƒ…å†µä¸‹å°±æ˜¯åˆ·æ–°åˆ°è¿™ä¸¤ä¸ªç£ç›˜æ–‡ä»¶ä¸­ã€‚æ­¤redoæ—¥å¿—æ–‡ä»¶ä½ç½®è¿˜å¯ä»¥ä¿®æ”¹ã€‚</p></li><li><p><code>innodb_log_files_in_group</code>ï¼šæŒ‡æ˜redo log fileçš„ä¸ªæ•°ï¼Œå‘½åæ–¹å¼å¦‚ï¼šib_logfile0ï¼Œib_logfile1â€¦ ib_logfilenã€‚é»˜è®¤2ä¸ªï¼Œæœ€å¤§100ä¸ªã€‚</p></li><li><p><code>innodb_flush_log_at_trx_commit</code>ï¼šæ§åˆ¶ redo log åˆ·æ–°åˆ°ç£ç›˜çš„ç­–ç•¥ï¼Œé»˜è®¤ä¸º<code>1</code>ã€‚</p></li><li><p><code>innodb_log_file_size</code>ï¼šå•ä¸ª redo log æ–‡ä»¶è®¾ç½®å¤§å°ï¼Œé»˜è®¤å€¼ä¸º 48M ã€‚æœ€å¤§å€¼ä¸º512Gï¼Œæ³¨æ„æœ€å¤§å€¼æŒ‡çš„æ˜¯æ•´ä¸ª redo log ç³»åˆ—æ–‡ä»¶ä¹‹å’Œï¼Œå³ï¼ˆinnodb_log_files_in_group * innodb_log_file_size ï¼‰ä¸èƒ½å¤§äºæœ€å¤§å€¼512Gã€‚</p></li></ul><p><strong>2.</strong> <strong>æ—¥å¿—æ–‡ä»¶ç»„</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040920532.png" alt="image-20220404092038421"></p><p><strong>3. checkpoint</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040921715.png" alt="image-20220404092106617"></p><p>å¦‚æœ write pos è¿½ä¸Š checkpoint ï¼Œè¡¨ç¤º<strong>æ—¥å¿—æ–‡ä»¶ç»„</strong>æ»¡äº†ï¼Œè¿™æ—¶å€™ä¸èƒ½å†å†™å…¥æ–°çš„ redo logè®°å½•ï¼ŒMySQL å¾—åœä¸‹æ¥ï¼Œæ¸…ç©ºä¸€äº›è®°å½•ï¼ŒæŠŠ checkpoint æ¨è¿›ä¸€ä¸‹ã€‚</p><h4 id="2-Undoæ—¥å¿—"><strong>2. Undoæ—¥å¿—</strong></h4><p>redo logæ˜¯äº‹åŠ¡æŒä¹…æ€§çš„ä¿è¯ï¼Œundo logæ˜¯äº‹åŠ¡åŸå­æ€§çš„ä¿è¯ã€‚åœ¨äº‹åŠ¡ä¸­<code>æ›´æ–°æ•°æ®</code>çš„<code>å‰ç½®æ“ä½œ</code>å…¶å®æ˜¯è¦å…ˆå†™å…¥ä¸€ä¸ª undo log ã€‚</p><h5 id="2-1-å¦‚ä½•ç†è§£Undoæ—¥å¿—"><strong>2.1</strong> <strong>å¦‚ä½•ç†è§£Undoæ—¥å¿—</strong></h5><p>äº‹åŠ¡éœ€è¦ä¿è¯<code>åŸå­æ€§</code>ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆä»€ä¹ˆä¹Ÿä¸åšã€‚ä½†æœ‰æ—¶å€™äº‹åŠ¡æ‰§è¡Œåˆ°ä¸€åŠä¼šå‡ºç°ä¸€äº›æƒ…å†µï¼Œæ¯”å¦‚ï¼š</p><ul><li>æƒ…å†µä¸€ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°å„ç§é”™è¯¯ï¼Œæ¯”å¦‚<code>æœåŠ¡å™¨æœ¬èº«çš„é”™è¯¯</code>ï¼Œ<code>æ“ä½œç³»ç»Ÿé”™è¯¯</code>ï¼Œç”šè‡³æ˜¯çªç„¶<code>æ–­ç”µ</code>å¯¼è‡´çš„é”™è¯¯ã€‚</li><li>æƒ…å†µäºŒï¼šç¨‹åºå‘˜å¯ä»¥åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰‹åŠ¨è¾“å…¥<code>ROLLBACK</code>è¯­å¥ç»“æŸå½“å‰äº‹åŠ¡çš„æ‰§è¡Œã€‚</li></ul><p>ä»¥ä¸Šæƒ…å†µå‡ºç°ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®æ”¹å›åŸå…ˆçš„æ ·å­ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸º<code>å›æ»š</code>ï¼Œè¿™æ ·å°±å¯ä»¥é€ æˆä¸€ä¸ªå‡è±¡ï¼šè¿™ä¸ªäº‹åŠ¡çœ‹èµ·æ¥ä»€ä¹ˆéƒ½æ²¡åšï¼Œæ‰€ä»¥ç¬¦åˆ<code>åŸå­æ€§</code>è¦æ±‚ã€‚</p><h5 id="2-2-Undoæ—¥å¿—çš„ä½œç”¨"><strong>2.2 Undoæ—¥å¿—çš„ä½œç”¨</strong></h5><ul><li><strong>ä½œç”¨1ï¼šå›æ»šæ•°æ®</strong></li><li><strong>ä½œç”¨2ï¼šMVCCï¼ˆè¯¦æƒ…çœ‹ç¬¬16ç« ï¼‰</strong></li></ul><h5 id="2-3-undoçš„å­˜å‚¨ç»“æ„"><strong>2.3 undoçš„å­˜å‚¨ç»“æ„</strong></h5><p><strong>1.</strong> <strong>å›æ»šæ®µä¸undoé¡µ</strong></p><p>InnoDBå¯¹undo logçš„ç®¡ç†é‡‡ç”¨æ®µçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯<code>å›æ»šæ®µï¼ˆrollback segmentï¼‰</code>ã€‚æ¯ä¸ªå›æ»šæ®µè®°å½•äº†<code>1024</code>ä¸ª<code>undo log segment</code>ï¼Œè€Œåœ¨æ¯ä¸ªundo log segmentæ®µä¸­è¿›è¡Œ<code>undoé¡µ</code>çš„ç”³è¯·ã€‚</p><p><strong>2.</strong> <strong>å›æ»šæ®µä¸äº‹åŠ¡</strong></p><ol><li><p>æ¯ä¸ªäº‹åŠ¡åªä¼šä½¿ç”¨ä¸€ä¸ªå›æ»šæ®µï¼Œä¸€ä¸ªå›æ»šæ®µåœ¨åŒä¸€æ—¶åˆ»å¯èƒ½ä¼šæœåŠ¡äºå¤šä¸ªäº‹åŠ¡ã€‚</p></li><li><p>å½“ä¸€ä¸ªäº‹åŠ¡å¼€å§‹çš„æ—¶å€™ï¼Œä¼šåˆ¶å®šä¸€ä¸ªå›æ»šæ®µï¼Œåœ¨äº‹åŠ¡è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå½“æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼ŒåŸå§‹çš„æ•°æ®ä¼šè¢«å¤åˆ¶åˆ°å›æ»šæ®µã€‚</p></li><li><p>åœ¨å›æ»šæ®µä¸­ï¼Œäº‹åŠ¡ä¼šä¸æ–­å¡«å……ç›˜åŒºï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæˆ–æ‰€æœ‰çš„ç©ºé—´è¢«ç”¨å®Œã€‚å¦‚æœå½“å‰çš„ç›˜åŒºä¸å¤Ÿç”¨ï¼Œäº‹åŠ¡ä¼šåœ¨æ®µä¸­è¯·æ±‚æ‰©å±•ä¸‹ä¸€ä¸ªç›˜åŒºï¼Œå¦‚æœæ‰€æœ‰å·²åˆ†é…çš„ç›˜åŒºéƒ½è¢«ç”¨å®Œï¼Œäº‹åŠ¡ä¼šè¦†ç›–æœ€åˆçš„ç›˜åŒºæˆ–è€…åœ¨å›æ»šæ®µå…è®¸çš„æƒ…å†µä¸‹æ‰©å±•æ–°çš„ç›˜åŒºæ¥ä½¿ç”¨ã€‚</p></li><li><p>å›æ»šæ®µå­˜åœ¨äºundoè¡¨ç©ºé—´ä¸­ï¼Œåœ¨æ•°æ®åº“ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªundoè¡¨ç©ºé—´ï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½ä½¿ç”¨ä¸€ä¸ªundoè¡¨ç©ºé—´ã€‚</p></li><li><p>å½“äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šåšä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…ï¼š</p><ul><li>å°†undo logæ”¾å…¥åˆ—è¡¨ä¸­ï¼Œä»¥ä¾›ä¹‹åçš„purgeæ“ä½œ</li><li>åˆ¤æ–­undo logæ‰€åœ¨çš„é¡µæ˜¯å¦å¯ä»¥é‡ç”¨ï¼Œè‹¥å¯ä»¥åˆ†é…ç»™ä¸‹ä¸ªäº‹åŠ¡ä½¿ç”¨</li></ul></li></ol><p><strong>3.</strong> <strong>å›æ»šæ®µä¸­çš„æ•°æ®åˆ†ç±»</strong></p><ol><li><p>æœªæäº¤çš„å›æ»šæ•°æ®(uncommitted undo information)</p></li><li><p>å·²ç»æäº¤ä½†æœªè¿‡æœŸçš„å›æ»šæ•°æ®(committed undo information)</p></li><li><p>äº‹åŠ¡å·²ç»æäº¤å¹¶è¿‡æœŸçš„æ•°æ®(expired undo information)</p></li></ol><h5 id="2-4-undoçš„ç±»å‹"><strong>2.4 undoçš„ç±»å‹</strong></h5><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œundo logåˆ†ä¸ºï¼š</p><ul><li>insert undo log</li><li>update undo log</li></ul><h5 id="2-5-undo-logçš„ç”Ÿå‘½å‘¨æœŸ"><strong>2.5 undo logçš„ç”Ÿå‘½å‘¨æœŸ</strong></h5><p><strong>1.</strong> <strong>ç®€è¦ç”Ÿæˆè¿‡ç¨‹</strong></p><p><strong>åªæœ‰Buffer Poolçš„æµç¨‹ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040937761.png" alt="image-20220404093706650"></p><p><strong>æœ‰äº†Redo Logå’ŒUndo Logä¹‹åï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040938657.png" alt="image-20220404093832512"></p><p><strong>2.</strong> <strong>è¯¦ç»†ç”Ÿæˆè¿‡ç¨‹</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040939231.png" alt="image-20220404093950136"></p><p><strong>å½“æˆ‘ä»¬æ‰§è¡ŒINSERTæ—¶ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin; </span><br><span class="line">INSERT INTO user (name) VALUES (&quot;tom&quot;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040940543.png" alt="image-20220404094033441"></p><p><strong>å½“æˆ‘ä»¬æ‰§è¡ŒUPDATEæ—¶ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040941624.png" alt="image-20220404094105525"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user SET id=2 WHERE id=1;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040941449.png" alt="image-20220404094142337"></p><p><strong>3. undo logæ˜¯å¦‚ä½•å›æ»šçš„</strong></p><p>ä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå‡è®¾æ‰§è¡Œrollbackï¼Œé‚£ä¹ˆå¯¹åº”çš„æµç¨‹åº”è¯¥æ˜¯è¿™æ ·ï¼š</p><ol><li><p>é€šè¿‡undo no=3çš„æ—¥å¿—æŠŠid=2çš„æ•°æ®åˆ é™¤</p></li><li><p>é€šè¿‡undo no=2çš„æ—¥å¿—æŠŠid=1çš„æ•°æ®çš„deletemarkè¿˜åŸæˆ0</p></li><li><p>é€šè¿‡undo no=1çš„æ—¥å¿—æŠŠid=1çš„æ•°æ®çš„nameè¿˜åŸæˆTom</p></li><li><p>é€šè¿‡undo no=0çš„æ—¥å¿—æŠŠid=1çš„æ•°æ®åˆ é™¤</p></li></ol><p><strong>4. undo logçš„åˆ é™¤</strong></p><ul><li>é’ˆå¯¹äºinsert undo log</li></ul><p>å› ä¸ºinsertæ“ä½œçš„è®°å½•ï¼Œåªå¯¹äº‹åŠ¡æœ¬èº«å¯è§ï¼Œå¯¹å…¶ä»–äº‹åŠ¡ä¸å¯è§ã€‚æ•…è¯¥undo logå¯ä»¥åœ¨äº‹åŠ¡æäº¤åç›´æ¥åˆ é™¤ï¼Œä¸éœ€è¦è¿›è¡Œpurgeæ“ä½œã€‚</p><ul><li>é’ˆå¯¹äºupdate undo log</li></ul><p>è¯¥undo logå¯èƒ½éœ€è¦æä¾›MVCCæœºåˆ¶ï¼Œå› æ­¤ä¸èƒ½åœ¨äº‹åŠ¡æäº¤æ—¶å°±è¿›è¡Œåˆ é™¤ã€‚æäº¤æ—¶æ”¾å…¥undo logé“¾è¡¨ï¼Œç­‰å¾…purgeçº¿ç¨‹è¿›è¡Œæœ€åçš„åˆ é™¤ã€‚</p><h5 id="2-6-å°ç»“"><strong>2.6</strong> <strong>å°ç»“</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204040944948.png" alt="image-20220404094436830"></p><p>undo logæ˜¯é€»è¾‘æ—¥å¿—ï¼Œå¯¹äº‹åŠ¡å›æ»šæ—¶ï¼Œåªæ˜¯å°†æ•°æ®åº“é€»è¾‘åœ°æ¢å¤åˆ°åŸæ¥çš„æ ·å­ã€‚</p><p>redo logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼Œundo logä¸æ˜¯redo logçš„é€†è¿‡ç¨‹ã€‚</p>]]></content>
    
    
    <summary type="html">ã€ redoæ—¥å¿—ã€Undoæ—¥å¿—ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬13ç«  äº‹åŠ¡åŸºç¡€çŸ¥è¯†</title>
    <link href="https://angus9823.github.io/posts/dc3b6682.html"/>
    <id>https://angus9823.github.io/posts/dc3b6682.html</id>
    <published>2023-04-18T07:37:11.000Z</published>
    <updated>2023-04-18T08:25:56.547Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬13ç« -äº‹åŠ¡åŸºç¡€çŸ¥è¯†">ç¬¬13ç«  äº‹åŠ¡åŸºç¡€çŸ¥è¯†</h3><h4 id="1-æ•°æ®åº“äº‹åŠ¡æ¦‚è¿°"><strong>1.</strong> <strong>æ•°æ®åº“äº‹åŠ¡æ¦‚è¿°</strong></h4><h5 id="1-1-åŸºæœ¬æ¦‚å¿µ"><strong>1.1</strong> <strong>åŸºæœ¬æ¦‚å¿µ</strong></h5><p>**äº‹åŠ¡ï¼š**ä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼Œä½¿æ•°æ®ä»ä¸€ç§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚</p><p>**äº‹åŠ¡å¤„ç†çš„åŸåˆ™ï¼š**ä¿è¯æ‰€æœ‰äº‹åŠ¡éƒ½ä½œä¸º<code>ä¸€ä¸ªå·¥ä½œå•å…ƒ</code>æ¥æ‰§è¡Œï¼Œå³ä½¿å‡ºç°äº†æ•…éšœï¼Œéƒ½ä¸èƒ½æ”¹å˜è¿™ç§æ‰§è¡Œæ–¹å¼ã€‚å½“åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œæ—¶ï¼Œè¦ä¹ˆæ‰€æœ‰çš„äº‹åŠ¡éƒ½è¢«æäº¤(<code>commit</code>)ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹å°±<code>æ°¸ä¹…</code>åœ°ä¿å­˜ä¸‹æ¥ï¼›è¦ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå°†<code>æ”¾å¼ƒ</code>æ‰€ä½œçš„æ‰€æœ‰<code>ä¿®æ”¹</code>ï¼Œæ•´ä¸ªäº‹åŠ¡å›æ»š(<code>rollback</code>)åˆ°æœ€åˆçŠ¶æ€ã€‚</p><h5 id="1-2-äº‹åŠ¡çš„ACIDç‰¹æ€§"><strong>1.2</strong> <strong>äº‹åŠ¡çš„ACIDç‰¹æ€§</strong></h5><ul><li><strong>åŸå­æ€§ï¼ˆatomicityï¼‰ï¼š</strong></li></ul><p>åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œè¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚</p><ul><li><strong>ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ï¼š</strong></li></ul><p>ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®ä»ä¸€ä¸ª<code>åˆæ³•æ€§çŠ¶æ€</code>å˜æ¢åˆ°å¦å¤–ä¸€ä¸ª<code>åˆæ³•æ€§çŠ¶æ€</code>ã€‚è¿™ç§çŠ¶æ€æ˜¯<code>è¯­ä¹‰ä¸Š</code>çš„è€Œä¸æ˜¯è¯­æ³•ä¸Šçš„ï¼Œè·Ÿå…·ä½“çš„ä¸šåŠ¡æœ‰å…³ã€‚</p><ul><li><strong>éš”ç¦»å‹ï¼ˆisolationï¼‰ï¼š</strong></li></ul><p>äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œ<code>ä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°</code>ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹<code>å¹¶å‘</code>çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚</p><ul><li><strong>æŒä¹…æ€§ï¼ˆdurabilityï¼‰ï¼š</strong></li></ul><p>æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯<code>æ°¸ä¹…æ€§çš„</code>ï¼Œæ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚</p><p>æŒä¹…æ€§æ˜¯é€šè¿‡<code>äº‹åŠ¡æ—¥å¿—</code>æ¥ä¿è¯çš„ã€‚æ—¥å¿—åŒ…æ‹¬äº†<code>é‡åšæ—¥å¿—</code>å’Œ<code>å›æ»šæ—¥å¿—</code>ã€‚å½“æˆ‘ä»¬é€šè¿‡äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå°†æ•°æ®åº“çš„å˜åŒ–ä¿¡æ¯è®°å½•åˆ°é‡åšæ—¥å¿—ä¸­ï¼Œç„¶åå†å¯¹æ•°æ®åº“ä¸­å¯¹åº”çš„è¡Œè¿›è¡Œä¿®æ”¹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå³ä½¿æ•°æ®åº“ç³»ç»Ÿå´©æºƒï¼Œæ•°æ®åº“é‡å¯åä¹Ÿèƒ½æ‰¾åˆ°æ²¡æœ‰æ›´æ–°åˆ°æ•°æ®åº“ç³»ç»Ÿä¸­çš„é‡åšæ—¥å¿—ï¼Œé‡æ–°æ‰§è¡Œï¼Œä»è€Œä½¿äº‹åŠ¡å…·æœ‰æŒä¹…æ€§ã€‚</p><h5 id="1-3-äº‹åŠ¡çš„çŠ¶æ€"><strong>1.3</strong> <strong>äº‹åŠ¡çš„çŠ¶æ€</strong></h5><ul><li><strong>æ´»åŠ¨çš„ï¼ˆactiveï¼‰</strong></li></ul><p>äº‹åŠ¡å¯¹åº”çš„æ•°æ®åº“æ“ä½œæ­£åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨<code>æ´»åŠ¨çš„</code>çŠ¶æ€ã€‚</p><ul><li><strong>éƒ¨åˆ†æäº¤çš„ï¼ˆpartially committedï¼‰</strong></li></ul><p>å½“äº‹åŠ¡ä¸­çš„æœ€åä¸€ä¸ªæ“ä½œæ‰§è¡Œå®Œæˆï¼Œä½†ç”±äºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­æ‰§è¡Œï¼Œæ‰€é€ æˆçš„å½±å“å¹¶<code>æ²¡æœ‰åˆ·æ–°åˆ°ç£ç›˜</code>æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨<code>éƒ¨åˆ†æäº¤çš„</code>çŠ¶æ€ã€‚</p><ul><li><strong>å¤±è´¥çš„ï¼ˆfailedï¼‰</strong></li></ul><p>å½“äº‹åŠ¡å¤„åœ¨<code>æ´»åŠ¨çš„</code>æˆ–è€…<code>éƒ¨åˆ†æäº¤çš„</code>çŠ¶æ€æ—¶ï¼Œå¯èƒ½é‡åˆ°äº†æŸäº›é”™è¯¯ï¼ˆæ•°æ®åº“è‡ªèº«çš„é”™è¯¯ã€æ“ä½œç³»ç»Ÿé”™è¯¯æˆ–è€…ç›´æ¥æ–­ç”µç­‰ï¼‰è€Œæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œæˆ–è€…äººä¸ºçš„åœæ­¢å½“å‰äº‹åŠ¡çš„æ‰§è¡Œï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨<code>å¤±è´¥çš„</code>çŠ¶æ€ã€‚</p><ul><li><strong>ä¸­æ­¢çš„ï¼ˆabortedï¼‰</strong></li></ul><p>å¦‚æœäº‹åŠ¡æ‰§è¡Œäº†ä¸€éƒ¨åˆ†è€Œå˜ä¸º<code>å¤±è´¥çš„</code>çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠå·²ç»ä¿®æ”¹çš„äº‹åŠ¡ä¸­çš„æ“ä½œè¿˜åŸåˆ°äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¦æ’¤é”€å¤±è´¥äº‹åŠ¡å¯¹å½“å‰æ•°æ®åº“é€ æˆçš„å½±å“ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªæ’¤é”€çš„è¿‡ç¨‹ç§°ä¹‹ä¸º<code>å›æ»š</code>ã€‚å½“<code>å›æ»š</code>æ“ä½œæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“æ¢å¤åˆ°äº†æ‰§è¡Œäº‹åŠ¡ä¹‹å‰çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨äº†<code>ä¸­æ­¢çš„</code>çŠ¶æ€ã€‚</p><ul><li><strong>æäº¤çš„ï¼ˆcommittedï¼‰</strong></li></ul><p>å½“ä¸€ä¸ªå¤„åœ¨<code>éƒ¨åˆ†æäº¤çš„</code>çŠ¶æ€çš„äº‹åŠ¡å°†ä¿®æ”¹è¿‡çš„æ•°æ®éƒ½<code>åŒæ­¥åˆ°ç£ç›˜</code>ä¸Šä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´è¯¥äº‹åŠ¡å¤„åœ¨äº†<code>æäº¤çš„</code>çŠ¶æ€ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031104063.png" alt="image-20220403110448951"></p><h4 id="2-å¦‚ä½•ä½¿ç”¨äº‹åŠ¡"><strong>2.</strong> <strong>å¦‚ä½•ä½¿ç”¨äº‹åŠ¡</strong></h4><h5 id="2-1-æ˜¾å¼äº‹åŠ¡"><strong>2.1</strong> <strong>æ˜¾å¼äº‹åŠ¡</strong></h5><p><strong>æ­¥éª¤1ï¼š</strong> <code>START TRANSACTION</code>æˆ–è€…<code>BEGIN</code>ï¼Œä½œç”¨æ˜¯æ˜¾å¼å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; BEGIN; </span><br><span class="line">#æˆ–è€… </span><br><span class="line">mysql&gt; START TRANSACTION;</span><br></pre></td></tr></table></figure><p><code>START TRANSACTION</code>è¯­å¥ç›¸è¾ƒäº<code>BEGIN</code>ç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼Œåè¾¹èƒ½è·Ÿéšå‡ ä¸ª<code>ä¿®é¥°ç¬¦</code>ï¼š</p><p>â‘ <code>READ ONLY</code>ï¼šæ ‡è¯†å½“å‰äº‹åŠ¡æ˜¯ä¸€ä¸ª<code>åªè¯»äº‹åŠ¡</code>ï¼Œä¹Ÿå°±æ˜¯å±äºè¯¥äº‹åŠ¡çš„æ•°æ®åº“æ“ä½œåªèƒ½è¯»å–æ•°æ®ï¼Œè€Œä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</p><p>â‘¡<code>READ WRITE</code>ï¼šæ ‡è¯†å½“å‰äº‹åŠ¡æ˜¯ä¸€ä¸ª<code>è¯»å†™äº‹åŠ¡</code>ï¼Œä¹Ÿå°±æ˜¯å±äºè¯¥äº‹åŠ¡çš„æ•°æ®åº“æ“ä½œæ—¢å¯ä»¥è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ•°æ®ã€‚</p><p>â‘¢<code>WITH CONSISTENT SNAPSHOT</code>ï¼šå¯åŠ¨ä¸€è‡´æ€§è¯»ã€‚</p><p>**æ­¥éª¤2ï¼š**ä¸€ç³»åˆ—äº‹åŠ¡ä¸­çš„æ“ä½œï¼ˆä¸»è¦æ˜¯DMLï¼Œä¸å«DDLï¼‰</p><p>**æ­¥éª¤3ï¼š**æäº¤äº‹åŠ¡ æˆ– ä¸­æ­¢äº‹åŠ¡ï¼ˆå³å›æ»šäº‹åŠ¡ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æäº¤äº‹åŠ¡ã€‚å½“æäº¤äº‹åŠ¡åï¼Œå¯¹æ•°æ®åº“çš„ä¿®æ”¹æ˜¯æ°¸ä¹…æ€§çš„ã€‚</span><br><span class="line">mysql&gt; COMMIT;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å›æ»šäº‹åŠ¡ã€‚å³æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æ²¡æœ‰æäº¤çš„ä¿®æ”¹ </span><br><span class="line">mysql&gt; ROLLBACK; </span><br><span class="line"></span><br><span class="line"># å°†äº‹åŠ¡å›æ»šåˆ°æŸä¸ªä¿å­˜ç‚¹ã€‚ </span><br><span class="line">mysql&gt; ROLLBACK TO [SAVEPOINT]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å…³äºSAVEPOINTç›¸å…³æ“ä½œæœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¿å­˜ç‚¹ï¼Œæ–¹ä¾¿åç»­é’ˆå¯¹ä¿å­˜ç‚¹è¿›è¡Œå›æ»šã€‚ä¸€ä¸ªäº‹ç‰©ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªä¿å­˜ç‚¹ã€‚</span><br><span class="line">SAVEPOINT ä¿å­˜ç‚¹åç§°;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åˆ é™¤æŸä¸ªä¿å­˜ç‚¹</span><br><span class="line">RELEASE SAVEPOINT ä¿å­˜ç‚¹åç§°;</span><br></pre></td></tr></table></figure><h5 id="2-2-éšå¼äº‹åŠ¡"><strong>2.2</strong> <strong>éšå¼äº‹åŠ¡</strong></h5><ul><li>æ˜¾å¼çš„çš„ä½¿ç”¨<code>START TRANSACTION</code>æˆ–è€…<code>BEGIN</code>è¯­å¥å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚è¿™æ ·åœ¨æœ¬æ¬¡äº‹åŠ¡æäº¤æˆ–è€…å›æ»šå‰ä¼šæš‚æ—¶å…³é—­æ‰è‡ªåŠ¨æäº¤çš„åŠŸèƒ½ã€‚</li><li>æŠŠç³»ç»Ÿå˜é‡<code>autocommit</code>çš„å€¼è®¾ç½®ä¸º<code>OFF</code></li></ul><h5 id="2-3-éšå¼æäº¤æ•°æ®çš„æƒ…å†µ"><strong>2.3</strong> <strong>éšå¼æäº¤æ•°æ®çš„æƒ…å†µ</strong></h5><ul><li><p><strong>æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData definition languageï¼Œç¼©å†™ä¸ºï¼šDDLï¼‰</strong></p></li><li><p><strong>éšå¼ä½¿ç”¨æˆ–ä¿®æ”¹mysqlæ•°æ®åº“ä¸­çš„è¡¨</strong></p></li><li><p><strong>äº‹åŠ¡æ§åˆ¶æˆ–å…³äºé”å®šçš„è¯­å¥</strong></p><ul><li>å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æˆ–è€…å›æ»šæ—¶å°±åˆä½¿ç”¨<code>START TRANSACTION</code>æˆ–è€…<code>BEGIN</code>è¯­å¥å¼€å¯äº†å¦ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œä¼š<code>éšå¼çš„æäº¤</code>ä¸Šä¸€ä¸ªäº‹åŠ¡ã€‚</li><li>å½“å‰çš„<code>autocommit</code>ç³»ç»Ÿå˜é‡çš„å€¼ä¸º<code>OFF</code>ï¼Œæˆ‘ä»¬æ‰‹åŠ¨æŠŠå®ƒè°ƒä¸º<code>ON</code>æ—¶ï¼Œä¹Ÿä¼š<code>éšå¼çš„æäº¤</code>å‰è¾¹è¯­å¥æ‰€å±çš„äº‹åŠ¡ã€‚</li><li>ä½¿ç”¨<code>LOCK TABLES</code>ã€<code>UNLOCK TABLES</code>ç­‰å…³äºé”å®šçš„è¯­å¥ä¹Ÿä¼š<code>éšå¼çš„æäº¤</code>å‰è¾¹è¯­å¥æ‰€å±çš„äº‹åŠ¡ã€‚</li></ul></li></ul><h4 id="3-äº‹åŠ¡éš”ç¦»çº§åˆ«"><strong>3.</strong> <strong>äº‹åŠ¡éš”ç¦»çº§åˆ«</strong></h4><h5 id="3-1-æ•°æ®å¹¶å‘é—®é¢˜"><strong>3.1</strong> <strong>æ•°æ®å¹¶å‘é—®é¢˜</strong></h5><p><strong>1.</strong> <strong>è„å†™ï¼ˆ</strong><code>Dirty Write</code><strong>ï¼‰</strong></p><p>å¯¹äºä¸¤ä¸ªäº‹åŠ¡ Session Aã€Session Bï¼Œå¦‚æœäº‹åŠ¡Session A<code>ä¿®æ”¹äº†</code>å¦ä¸€ä¸ª<code>æœªæäº¤</code>äº‹åŠ¡Session B<code>ä¿®æ”¹è¿‡</code>çš„æ•°æ®ï¼Œé‚£å°±æ„å‘³ç€å‘ç”Ÿäº†<code>è„å†™</code></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124086.png" alt="image-20220403112416944"></p><p><strong>2.</strong> <strong>è„è¯»ï¼ˆ</strong><code>Dirty Read</code><strong>ï¼‰</strong></p><p>å¯¹äºä¸¤ä¸ªäº‹åŠ¡ Session Aã€Session Bï¼ŒSession A<code>è¯»å–</code>äº†å·²ç»è¢« Session B<code>æ›´æ–°</code>ä½†è¿˜<code>æ²¡æœ‰è¢«æäº¤</code>çš„å­—æ®µã€‚ä¹‹åè‹¥ Session B<code>å›æ»š</code>ï¼ŒSession A<code>è¯»å–</code>çš„å†…å®¹å°±æ˜¯<code>ä¸´æ—¶ä¸”æ— æ•ˆ</code>çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124136.png" alt="image-20220403112435995"></p><p><strong>3.</strong> <strong>ä¸å¯é‡å¤è¯»ï¼ˆ</strong><code>Non-Repeatable Read</code><strong>ï¼‰</strong></p><p>å¯¹äºä¸¤ä¸ªäº‹åŠ¡Session Aã€Session Bï¼ŒSession A<code>è¯»å–</code>äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶å Session B<code>æ›´æ–°</code>äº†è¯¥å­—æ®µã€‚ ä¹‹åSession A<code>å†æ¬¡è¯»å–</code>åŒä¸€ä¸ªå­—æ®µï¼Œ<code>å€¼å°±ä¸åŒ</code>äº†ã€‚é‚£å°±æ„å‘³ç€å‘ç”Ÿäº†ä¸å¯é‡å¤è¯»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124331.png" alt="image-20220403112458183"></p><p><strong>4.</strong> <strong>å¹»è¯»ï¼ˆ</strong><code>Phantom</code><strong>ï¼‰</strong></p><p>å¯¹äºä¸¤ä¸ªäº‹åŠ¡Session Aã€Session B, Session A ä»ä¸€ä¸ªè¡¨ä¸­<code>è¯»å–</code>äº†ä¸€ä¸ªå­—æ®µ, ç„¶å Session B åœ¨è¯¥è¡¨ä¸­<code>æ’å…¥</code>äº†ä¸€äº›æ–°çš„è¡Œã€‚ ä¹‹å, å¦‚æœ Session A<code>å†æ¬¡è¯»å–</code>åŒä¸€ä¸ªè¡¨, å°±ä¼šå¤šå‡ºå‡ è¡Œã€‚é‚£å°±æ„å‘³ç€å‘ç”Ÿäº†å¹»è¯»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031125847.png" alt="image-20220403112514712"></p><p><strong>æ³¨æ„1ï¼š</strong></p><p>æœ‰çš„åŒå­¦ä¼šæœ‰ç–‘é—®ï¼Œé‚£å¦‚æœSession Bä¸­<code>å‰”é™¤äº†</code>ä¸€äº›ç¬¦åˆ<code>studentno &gt; 0</code>çš„è®°å½•è€Œä¸æ˜¯æ’å…¥æ–°è®°å½•ï¼Œé‚£ä¹ˆSession Aä¹‹åå†æ ¹æ®<code>studentno &gt; 0</code>çš„æ¡ä»¶è¯»å–çš„<code>è®°å½•å˜å°‘äº†</code>ï¼Œè¿™ç§ç°è±¡ç®—ä¸ç®—<code>å¹»è¯»</code>å‘¢ï¼Ÿè¿™ç§ç°è±¡<code>ä¸å±äºå¹»è¯»</code>ï¼Œå¹»è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹ç‰©æŒ‰ç…§æŸä¸ª<code>ç›¸åŒæ¡ä»¶å¤šæ¬¡è¯»å–</code>è®°å½•æ—¶ï¼Œåè¯»å–æ—¶è¯»åˆ°äº†ä¹‹å‰<code>æ²¡æœ‰è¯»åˆ°çš„è®°å½•</code>ã€‚</p><p><strong>æ³¨æ„2ï¼š</strong></p><p>é‚£å¯¹äºå…ˆå‰å·²ç»è¯»åˆ°çš„è®°å½•ï¼Œä¹‹ååˆè¯»å–ä¸åˆ°è¿™ç§æƒ…å†µï¼Œç®—å•¥å‘¢ï¼Ÿè¿™ç›¸å½“äºå¯¹æ¯ä¸€æ¡è®°å½•éƒ½å‘ç”Ÿäº†<code>ä¸å¯é‡å¤è¯»</code>çš„ç°è±¡ã€‚å¹»è¯»åªæ˜¯é‡ç‚¹å¼ºè°ƒäº†è¯»å–åˆ°ä¹‹å‰è¯»å–æ²¡æœ‰è·å–åˆ°çš„è®°å½•ã€‚</p><h5 id="3-2-SQLä¸­çš„å››ç§éš”ç¦»çº§åˆ«"><strong>3.2 SQLä¸­çš„å››ç§éš”ç¦»çº§åˆ«</strong></h5><p><code>SQLæ ‡å‡†</code>ä¸­è®¾ç«‹äº†4ä¸ª<code>éš”ç¦»çº§åˆ«</code>ï¼š</p><ul><li><code>READ UNCOMMITTED</code>ï¼šè¯»æœªæäº¤ï¼Œåœ¨è¯¥éš”ç¦»çº§åˆ«ï¼Œæ‰€æœ‰äº‹åŠ¡éƒ½å¯ä»¥çœ‹åˆ°å…¶ä»–æœªæäº¤äº‹åŠ¡çš„æ‰§è¡Œç»“æœã€‚ä¸èƒ½é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚</li><li><code>READ COMMITTED</code>ï¼šè¯»å·²æäº¤ï¼Œå®ƒæ»¡è¶³äº†éš”ç¦»çš„ç®€å•å®šä¹‰ï¼šä¸€ä¸ªäº‹åŠ¡åªèƒ½çœ‹è§å·²ç»æäº¤äº‹åŠ¡æ‰€åšçš„æ”¹å˜ã€‚è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿçš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼ˆä½†ä¸æ˜¯MySQLé»˜è®¤çš„ï¼‰ã€‚å¯ä»¥é¿å…è„è¯»ï¼Œä½†ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ä»ç„¶å­˜åœ¨ã€‚</li><li><code>REPEATABLE READ</code>ï¼šå¯é‡å¤è¯»ï¼Œäº‹åŠ¡Aåœ¨è¯»åˆ°ä¸€æ¡æ•°æ®ä¹‹åï¼Œæ­¤æ—¶äº‹åŠ¡Bå¯¹è¯¥æ•°æ®è¿›è¡Œäº†ä¿®æ”¹å¹¶æäº¤ï¼Œé‚£ä¹ˆäº‹åŠ¡Aå†è¯»è¯¥æ•°æ®ï¼Œè¯»åˆ°çš„è¿˜æ˜¯åŸæ¥çš„å†…å®¹ã€‚å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»é—®é¢˜ä»ç„¶å­˜åœ¨ã€‚<code>è¿™æ˜¯MySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«</code>ã€‚</li><li><code>SERIALIZABLE</code>ï¼šå¯ä¸²è¡ŒåŒ–ï¼Œç¡®ä¿äº‹åŠ¡å¯ä»¥ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–ç›¸åŒçš„è¡Œã€‚åœ¨è¿™ä¸ªäº‹åŠ¡æŒç»­æœŸé—´ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚æ‰€æœ‰çš„å¹¶å‘é—®é¢˜éƒ½å¯ä»¥é¿å…ï¼Œä½†æ€§èƒ½ååˆ†ä½ä¸‹ã€‚èƒ½é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031127542.png" alt="image-20220403112740425"></p><h5 id="3-3-å¦‚ä½•è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><strong>3.3</strong> <strong>å¦‚ä½•è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SET [GLOBAL|SESSION] TRANSACTION ISOLATION LEVEL éš”ç¦»çº§åˆ«; </span><br><span class="line">#å…¶ä¸­ï¼Œéš”ç¦»çº§åˆ«æ ¼å¼ï¼š </span><br><span class="line">&gt; READ UNCOMMITTED </span><br><span class="line">&gt; READ COMMITTED </span><br><span class="line">&gt; REPEATABLE READ </span><br><span class="line">&gt; SERIALIZABLE</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SET [GLOBAL|SESSION] TRANSACTION_ISOLATION = &#x27;éš”ç¦»çº§åˆ«&#x27; </span><br><span class="line">#å…¶ä¸­ï¼Œéš”ç¦»çº§åˆ«æ ¼å¼ï¼š </span><br><span class="line">&gt; READ-UNCOMMITTED </span><br><span class="line">&gt; READ-COMMITTED </span><br><span class="line">&gt; REPEATABLE-READ </span><br><span class="line">&gt; SERIALIZABLE</span><br></pre></td></tr></table></figure><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€æ•°æ®åº“äº‹åŠ¡æ¦‚è¿°ã€å¦‚ä½•ä½¿ç”¨äº‹åŠ¡ã€äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬12ç«  æ•°æ®åº“å…¶å®ƒè°ƒä¼˜ç­–ç•¥</title>
    <link href="https://angus9823.github.io/posts/18534046.html"/>
    <id>https://angus9823.github.io/posts/18534046.html</id>
    <published>2023-04-18T07:36:58.000Z</published>
    <updated>2023-04-18T08:25:56.537Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬12ç« -æ•°æ®åº“å…¶å®ƒè°ƒä¼˜ç­–ç•¥">ç¬¬12ç«  æ•°æ®åº“å…¶å®ƒè°ƒä¼˜ç­–ç•¥</h3><h4 id="1-æ•°æ®åº“è°ƒä¼˜çš„æªæ–½"><strong>1.</strong> <strong>æ•°æ®åº“è°ƒä¼˜çš„æªæ–½</strong></h4><h5 id="1-1-è°ƒä¼˜çš„ç›®æ ‡"><strong>1.1</strong> <strong>è°ƒä¼˜çš„ç›®æ ‡</strong></h5><ul><li>å°½å¯èƒ½<code>èŠ‚çœç³»ç»Ÿèµ„æº</code>ï¼Œä»¥ä¾¿ç³»ç»Ÿå¯ä»¥æä¾›æ›´å¤§è´Ÿè·çš„æœåŠ¡ã€‚ï¼ˆååé‡æ›´å¤§ï¼‰</li><li>åˆç†çš„ç»“æ„è®¾è®¡å’Œå‚æ•°è°ƒæ•´ï¼Œä»¥æé«˜ç”¨æˆ·æ“<code> å“åº”çš„é€Ÿåº¦</code>ã€‚ï¼ˆå“åº”é€Ÿåº¦æ›´å¿«ï¼‰</li><li>å‡å°‘ç³»ç»Ÿçš„ç“¶é¢ˆï¼Œæé«˜MySQLæ•°æ®åº“æ•´ä½“çš„æ€§èƒ½ã€‚</li></ul><h5 id="1-2-å¦‚ä½•å®šä½è°ƒä¼˜é—®é¢˜"><strong>1.2</strong> <strong>å¦‚ä½•å®šä½è°ƒä¼˜é—®é¢˜</strong></h5><ul><li><strong>ç”¨æˆ·çš„åé¦ˆï¼ˆä¸»è¦ï¼‰</strong></li><li><strong>æ—¥å¿—åˆ†æï¼ˆä¸»è¦ï¼‰</strong></li><li><strong>æœåŠ¡å™¨èµ„æºä½¿ç”¨ç›‘æ§</strong></li><li><strong>æ•°æ®åº“å†…éƒ¨çŠ¶å†µç›‘æ§</strong></li><li><strong>å…¶å®ƒ</strong></li></ul><h5 id="1-3-è°ƒä¼˜çš„ç»´åº¦å’Œæ­¥éª¤"><strong>1.3</strong> <strong>è°ƒä¼˜çš„ç»´åº¦å’Œæ­¥éª¤</strong></h5><p><strong>ç¬¬1æ­¥ï¼šé€‰æ‹©é€‚åˆçš„</strong> <strong>DBMS</strong></p><p><strong>ç¬¬2æ­¥ï¼šä¼˜åŒ–è¡¨è®¾è®¡</strong></p><p><strong>ç¬¬3æ­¥ï¼šä¼˜åŒ–é€»è¾‘æŸ¥è¯¢</strong></p><p><strong>ç¬¬4æ­¥ï¼šä¼˜åŒ–ç‰©ç†æŸ¥è¯¢</strong></p><p>ç‰©ç†æŸ¥è¯¢ä¼˜åŒ–æ˜¯åœ¨ç¡®å®šäº†é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–ä¹‹åï¼Œé‡‡ç”¨ç‰©ç†ä¼˜åŒ–æŠ€æœ¯ï¼ˆæ¯”å¦‚ç´¢å¼•ç­‰ï¼‰ï¼Œé€šè¿‡è®¡ç®—ä»£ä»·æ¨¡å‹å¯¹å„ç§å¯èƒ½çš„è®¿é—®è·¯å¾„è¿›è¡Œä¼°ç®—ï¼Œä»è€Œæ‰¾åˆ°æ‰§è¡Œæ–¹å¼ä¸­ä»£ä»·æœ€å°çš„ä½œä¸ºæ‰§è¡Œè®¡åˆ’ã€‚</p><p><strong>ç¬¬5æ­¥ï¼šä½¿ç”¨</strong> <strong>Redis</strong> <strong>æˆ–</strong> <strong>Memcached</strong> <strong>ä½œä¸ºç¼“å­˜</strong></p><p><strong>ç¬¬6æ­¥ï¼šåº“çº§ä¼˜åŒ–</strong></p><p><strong>1ã€è¯»å†™åˆ†ç¦»</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031025279.png" alt="image-20220403102536170"></p><p><strong>2ã€æ•°æ®åˆ†ç‰‡</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031026743.png" alt="image-20220403102618627"></p><h4 id="2-ä¼˜åŒ–MySQLæœåŠ¡å™¨"><strong>2.</strong> <strong>ä¼˜åŒ–MySQLæœåŠ¡å™¨</strong></h4><h5 id="2-1-ä¼˜åŒ–æœåŠ¡å™¨ç¡¬ä»¶"><strong>2.1</strong> <strong>ä¼˜åŒ–æœåŠ¡å™¨ç¡¬ä»¶</strong></h5><p>**æœåŠ¡å™¨çš„ç¡¬ä»¶æ€§èƒ½ç›´æ¥å†³å®šç€MySQLæ•°æ®åº“çš„æ€§èƒ½ã€‚**ç¡¬ä»¶çš„æ€§èƒ½ç“¶é¢ˆç›´æ¥å†³å®šMySQLæ•°æ®åº“çš„è¿è¡Œé€Ÿåº¦å’Œæ•ˆç‡ã€‚é’ˆå¯¹æ€§èƒ½ç“¶é¢ˆæé«˜ç¡¬ä»¶é…ç½®ï¼Œå¯ä»¥æé«˜MySQLæ•°æ®åº“æŸ¥è¯¢ã€æ›´æ–°çš„é€Ÿåº¦ã€‚</p><p>ï¼ˆ1ï¼‰<code>é…ç½®è¾ƒå¤§çš„å†…å­˜</code></p><p>ï¼ˆ2ï¼‰<code>é…ç½®é«˜é€Ÿç£ç›˜ç³»ç»Ÿ</code></p><p>ï¼ˆ3ï¼‰<code>åˆç†åˆ†å¸ƒç£ç›˜I/O</code></p><p>ï¼ˆ4ï¼‰<code>é…ç½®å¤šå¤„ç†å™¨</code></p><h5 id="2-2-ä¼˜åŒ–MySQLçš„å‚æ•°"><strong>2.2</strong> <strong>ä¼˜åŒ–MySQLçš„å‚æ•°</strong></h5><ul><li><code>innodb_buffer_pool_size</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯Mysqlæ•°æ®åº“æœ€é‡è¦çš„å‚æ•°ä¹‹ä¸€ï¼Œè¡¨ç¤ºInnoDBç±»å‹çš„<code>è¡¨å’Œç´¢å¼•çš„æœ€å¤§ç¼“å­˜</code>ã€‚å®ƒä¸ä»…ä»…ç¼“å­˜<code>ç´¢å¼•æ•°æ®</code>ï¼Œè¿˜ä¼šç¼“å­˜<code>è¡¨çš„æ•°æ®</code>ã€‚è¿™ä¸ªå€¼è¶Šå¤§ï¼ŒæŸ¥è¯¢çš„é€Ÿåº¦å°±ä¼šè¶Šå¿«ã€‚ä½†æ˜¯è¿™ä¸ªå€¼å¤ªå¤§ä¼šå½±å“æ“ä½œç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li><code>key_buffer_size</code>ï¼šè¡¨ç¤º<code>ç´¢å¼•ç¼“å†²åŒºçš„å¤§å°</code>ã€‚ç´¢å¼•ç¼“å†²åŒºæ˜¯æ‰€æœ‰çš„<code>çº¿ç¨‹å…±äº«</code>ã€‚å¢åŠ ç´¢å¼•ç¼“å†²åŒºå¯ä»¥å¾—åˆ°æ›´å¥½å¤„ç†çš„ç´¢å¼•ï¼ˆå¯¹æ‰€æœ‰è¯»å’Œå¤šé‡å†™ï¼‰ã€‚å½“ç„¶ï¼Œè¿™ä¸ªå€¼ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œå®ƒçš„å¤§å°å–å†³äºå†…å­˜çš„å¤§å°ã€‚å¦‚æœè¿™ä¸ªå€¼å¤ªå¤§ï¼Œå°±ä¼šå¯¼è‡´æ“ä½œç³»ç»Ÿé¢‘ç¹æ¢é¡µï¼Œä¹Ÿä¼šé™ä½ç³»ç»Ÿæ€§èƒ½ã€‚å¯¹äºå†…å­˜åœ¨<code>4GB</code>å·¦å³çš„æœåŠ¡å™¨è¯¥å‚æ•°å¯è®¾ç½®ä¸º<code>256M</code>æˆ–<code>384M</code>ã€‚</li><li><code>table_cache</code>ï¼šè¡¨ç¤º<code>åŒæ—¶æ‰“å¼€çš„è¡¨çš„ä¸ªæ•°</code>ã€‚è¿™ä¸ªå€¼è¶Šå¤§ï¼Œèƒ½å¤ŸåŒæ—¶æ‰“å¼€çš„è¡¨çš„ä¸ªæ•°è¶Šå¤šã€‚ç‰©ç†å†…å­˜è¶Šå¤§ï¼Œè®¾ç½®å°±è¶Šå¤§ã€‚é»˜è®¤ä¸º2402ï¼Œè°ƒåˆ°512-1024æœ€ä½³ã€‚è¿™ä¸ªå€¼ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œå› ä¸ºåŒæ—¶æ‰“å¼€çš„è¡¨å¤ªå¤šä¼šå½±å“æ“ä½œç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li><code>query_cache_size</code>ï¼šè¡¨ç¤º<code>æŸ¥è¯¢ç¼“å†²åŒºçš„å¤§å°</code>ã€‚å¯ä»¥é€šè¿‡åœ¨MySQLæ§åˆ¶å°è§‚å¯Ÿï¼Œå¦‚æœQcache_lowmem_prunesçš„å€¼éå¸¸å¤§ï¼Œåˆ™è¡¨æ˜ç»å¸¸å‡ºç°ç¼“å†²ä¸å¤Ÿçš„æƒ…å†µï¼Œå°±è¦å¢åŠ Query_cache_sizeçš„å€¼ï¼›å¦‚æœQcache_hitsçš„å€¼éå¸¸å¤§ï¼Œåˆ™è¡¨æ˜æŸ¥è¯¢ç¼“å†²ä½¿ç”¨éå¸¸é¢‘ç¹ï¼Œå¦‚æœè¯¥å€¼è¾ƒå°åè€Œä¼šå½±å“æ•ˆç‡ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä¸ç”¨æŸ¥è¯¢ç¼“å­˜ï¼›Qcache_free_blocksï¼Œå¦‚æœè¯¥å€¼éå¸¸å¤§ï¼Œåˆ™è¡¨æ˜ç¼“å†²åŒºä¸­ç¢ç‰‡å¾ˆå¤šã€‚MySQL8.0ä¹‹åå¤±æ•ˆã€‚è¯¥å‚æ•°éœ€è¦å’Œquery_cache_typeé…åˆä½¿ç”¨ã€‚</li><li><code>query_cache_type</code>çš„å€¼æ˜¯0æ—¶ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½ä¸ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜åŒºã€‚ä½†æ˜¯query_cache_type=0å¹¶ä¸ä¼šå¯¼è‡´MySQLé‡Šæ”¾query_cache_sizeæ‰€é…ç½®çš„ç¼“å­˜åŒºå†…å­˜ã€‚<ul><li>å½“query_cache_type=1æ—¶ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢éƒ½å°†ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜åŒºï¼Œé™¤éåœ¨æŸ¥è¯¢è¯­å¥ä¸­æŒ‡å®š<code>SQL_NO_CACHE</code>ï¼Œå¦‚SELECT SQL_NO_CACHE * FROM tbl_nameã€‚</li><li>å½“query_cache_type=2æ—¶ï¼Œåªæœ‰åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨<code>SQL_CACHE</code>å…³é”®å­—ï¼ŒæŸ¥è¯¢æ‰ä¼šä½¿ç”¨æŸ¥è¯¢ç¼“å­˜åŒºã€‚ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜åŒºå¯ä»¥æé«˜æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œè¿™ç§æ–¹å¼åªé€‚ç”¨äºä¿®æ”¹æ“ä½œå°‘ä¸”ç»å¸¸æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢æ“ä½œçš„æƒ…å†µã€‚</li></ul></li><li><code>sort_buffer_size</code>ï¼šè¡¨ç¤ºæ¯ä¸ª<code>éœ€è¦è¿›è¡Œæ’åºçš„çº¿ç¨‹åˆ†é…çš„ç¼“å†²åŒºçš„å¤§å°</code>ã€‚å¢åŠ è¿™ä¸ªå‚æ•°çš„å€¼å¯ä»¥æé«˜<code>ORDER BY</code>æˆ–<code>GROUP BY</code>æ“ä½œçš„é€Ÿåº¦ã€‚é»˜è®¤æ•°å€¼æ˜¯2 097 144å­—èŠ‚ï¼ˆçº¦2MBï¼‰ã€‚å¯¹äºå†…å­˜åœ¨4GBå·¦å³çš„æœåŠ¡å™¨æ¨èè®¾ç½®ä¸º6-8Mï¼Œå¦‚æœæœ‰100ä¸ªè¿æ¥ï¼Œé‚£ä¹ˆå®é™…åˆ†é…çš„æ€»å…±æ’åºç¼“å†²åŒºå¤§å°ä¸º100 Ã— 6 ï¼ 600MBã€‚</li><li><code>join_buffer_size = 8M</code>ï¼šè¡¨ç¤º<code>è”åˆæŸ¥è¯¢æ“ä½œæ‰€èƒ½ä½¿ç”¨çš„ç¼“å†²åŒºå¤§å°</code>ï¼Œå’Œsort_buffer_sizeä¸€æ ·ï¼Œè¯¥å‚æ•°å¯¹åº”çš„åˆ†é…å†…å­˜ä¹Ÿæ˜¯æ¯ä¸ªè¿æ¥ç‹¬äº«ã€‚</li><li><code>read_buffer_size</code>ï¼šè¡¨ç¤º<code>æ¯ä¸ªçº¿ç¨‹è¿ç»­æ‰«ææ—¶ä¸ºæ‰«æçš„æ¯ä¸ªè¡¨åˆ†é…çš„ç¼“å†²åŒºçš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰</code>ã€‚å½“çº¿ç¨‹ä»è¡¨ä¸­è¿ç»­è¯»å–è®°å½•æ—¶éœ€è¦ç”¨åˆ°è¿™ä¸ªç¼“å†²åŒºã€‚SET SESSION read_buffer_size=nå¯ä»¥ä¸´æ—¶è®¾ç½®è¯¥å‚æ•°çš„å€¼ã€‚é»˜è®¤ä¸º64Kï¼Œå¯ä»¥è®¾ç½®ä¸º4Mã€‚</li><li><code>innodb_flush_log_at_trx_commit</code>ï¼šè¡¨ç¤º<code>ä½•æ—¶å°†ç¼“å†²åŒºçš„æ•°æ®å†™å…¥æ—¥å¿—æ–‡ä»¶</code>ï¼Œå¹¶ä¸”å°†æ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜ä¸­ã€‚è¯¥å‚æ•°å¯¹äºinnoDBå¼•æ“éå¸¸é‡è¦ã€‚è¯¥å‚æ•°æœ‰3ä¸ªå€¼ï¼Œåˆ†åˆ«ä¸º0ã€1å’Œ2ã€‚è¯¥å‚æ•°çš„é»˜è®¤å€¼ä¸º1ã€‚<ul><li>å€¼ä¸º<code>0</code>æ—¶ï¼Œè¡¨ç¤º<code>æ¯ç§’1æ¬¡</code>çš„é¢‘ç‡å°†æ•°æ®å†™å…¥æ—¥å¿—æ–‡ä»¶å¹¶å°†æ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜ã€‚æ¯ä¸ªäº‹åŠ¡çš„commitå¹¶ä¸ä¼šè§¦å‘å‰é¢çš„ä»»ä½•æ“ä½œã€‚è¯¥æ¨¡å¼é€Ÿåº¦æœ€å¿«ï¼Œä½†ä¸å¤ªå®‰å…¨ï¼Œmysqldè¿›ç¨‹çš„å´©æºƒä¼šå¯¼è‡´ä¸Šä¸€ç§’é’Ÿæ‰€æœ‰äº‹åŠ¡æ•°æ®çš„ä¸¢å¤±ã€‚</li><li>å€¼ä¸º<code>1</code>æ—¶ï¼Œè¡¨ç¤º<code>æ¯æ¬¡æäº¤äº‹åŠ¡æ—¶</code>å°†æ•°æ®å†™å…¥æ—¥å¿—æ–‡ä»¶å¹¶å°†æ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜è¿›è¡ŒåŒæ­¥ã€‚è¯¥æ¨¡å¼æ˜¯æœ€å®‰å…¨çš„ï¼Œä½†ä¹Ÿæ˜¯æœ€æ…¢çš„ä¸€ç§æ–¹å¼ã€‚å› ä¸ºæ¯æ¬¡äº‹åŠ¡æäº¤æˆ–äº‹åŠ¡å¤–çš„æŒ‡ä»¤éƒ½éœ€è¦æŠŠæ—¥å¿—å†™å…¥ï¼ˆflushï¼‰ç¡¬ç›˜ã€‚</li><li>å€¼ä¸º<code>2</code>æ—¶ï¼Œè¡¨ç¤º<code>æ¯æ¬¡æäº¤äº‹åŠ¡æ—¶</code>å°†æ•°æ®å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œ<code>æ¯éš”1ç§’</code>å°†æ—¥å¿—æ–‡ä»¶å†™å…¥ç£ç›˜ã€‚è¯¥æ¨¡å¼é€Ÿåº¦è¾ƒå¿«ï¼Œä¹Ÿæ¯”0å®‰å…¨ï¼Œåªæœ‰åœ¨æ“ä½œç³»ç»Ÿå´©æºƒæˆ–è€…ç³»ç»Ÿæ–­ç”µçš„æƒ…å†µä¸‹ï¼Œä¸Šä¸€ç§’é’Ÿæ‰€æœ‰äº‹åŠ¡æ•°æ®æ‰å¯èƒ½ä¸¢å¤±ã€‚</li></ul></li><li><code>innodb_log_buffer_size</code>ï¼šè¿™æ˜¯ InnoDB å­˜å‚¨å¼•æ“çš„<code>äº‹åŠ¡æ—¥å¿—æ‰€ä½¿ç”¨çš„ç¼“å†²åŒº</code>ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¹Ÿæ˜¯å…ˆå°†ä¿¡æ¯å†™å…¥ Innodb Log Buffer ä¸­ï¼Œå½“æ»¡è¶³ innodb_flush_log_trx_commit å‚æ•°æ‰€è®¾ç½®çš„ç›¸åº”æ¡ä»¶ï¼ˆæˆ–è€…æ—¥å¿—ç¼“å†²åŒºå†™æ»¡ï¼‰ä¹‹åï¼Œæ‰ä¼šå°†æ—¥å¿—å†™åˆ°æ–‡ä»¶ï¼ˆæˆ–è€…åŒæ­¥åˆ°ç£ç›˜ï¼‰ä¸­ã€‚</li><li><code>max_connections</code>ï¼šè¡¨ç¤º å…è®¸è¿æ¥åˆ°MySQLæ•°æ®åº“çš„æœ€å¤§æ•°é‡ ï¼Œé»˜è®¤å€¼æ˜¯ 151 ã€‚å¦‚æœçŠ¶æ€å˜é‡connection_errors_max_connections ä¸ä¸ºé›¶ï¼Œå¹¶ä¸”ä¸€ç›´å¢é•¿ï¼Œåˆ™è¯´æ˜ä¸æ–­æœ‰è¿æ¥è¯·æ±‚å› æ•°æ®åº“è¿æ¥æ•°å·²è¾¾åˆ°å…è®¸æœ€å¤§å€¼è€Œå¤±è´¥ï¼Œè¿™æ˜¯å¯ä»¥è€ƒè™‘å¢å¤§max_connections çš„å€¼ã€‚åœ¨Linux å¹³å°ä¸‹ï¼Œæ€§èƒ½å¥½çš„æœåŠ¡å™¨ï¼Œæ”¯æŒ 500-1000 ä¸ªè¿æ¥ä¸æ˜¯éš¾äº‹ï¼Œéœ€è¦æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è¿›è¡Œè¯„ä¼°è®¾å®šã€‚è¿™ä¸ªè¿æ¥æ•° ä¸æ˜¯è¶Šå¤§ è¶Šå¥½ ï¼Œå› ä¸ºè¿™äº›è¿æ¥ä¼šæµªè´¹å†…å­˜çš„èµ„æºã€‚è¿‡å¤šçš„è¿æ¥å¯èƒ½ä¼šå¯¼è‡´MySQLæœåŠ¡å™¨åƒµæ­»ã€‚</li><li><code>back_log</code>ï¼šç”¨äº<code>æ§åˆ¶MySQLç›‘å¬TCPç«¯å£æ—¶è®¾ç½®çš„ç§¯å‹è¯·æ±‚æ ˆå¤§å°</code>ã€‚å¦‚æœMySqlçš„è¿æ¥æ•°è¾¾åˆ°max_connectionsæ—¶ï¼Œæ–°æ¥çš„è¯·æ±‚å°†ä¼šè¢«å­˜åœ¨å †æ ˆä¸­ï¼Œä»¥ç­‰å¾…æŸä¸€è¿æ¥é‡Šæ”¾èµ„æºï¼Œè¯¥å †æ ˆçš„æ•°é‡å³back_logï¼Œå¦‚æœç­‰å¾…è¿æ¥çš„æ•°é‡è¶…è¿‡back_logï¼Œå°†ä¸è¢«æˆäºˆè¿æ¥èµ„æºï¼Œå°†ä¼šæŠ¥é”™ã€‚5.6.6 ç‰ˆæœ¬ä¹‹å‰é»˜è®¤å€¼ä¸º 50 ï¼Œ ä¹‹åçš„ç‰ˆæœ¬é»˜è®¤ä¸º 50 + ï¼ˆmax_connections / 5ï¼‰ï¼Œ å¯¹äºLinuxç³»ç»Ÿæ¨èè®¾ç½®ä¸ºå°äº512çš„æ•´æ•°ï¼Œä½†æœ€å¤§ä¸è¶…è¿‡900ã€‚å¦‚æœéœ€è¦æ•°æ®åº“åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…å¤„ç†å¤§é‡è¿æ¥è¯·æ±‚ï¼Œ å¯ä»¥è€ƒè™‘é€‚å½“å¢å¤§back_log çš„å€¼ã€‚</li><li><code>thread_cache_size</code>ï¼š<code>çº¿ç¨‹æ± ç¼“å­˜çº¿ç¨‹æ•°é‡çš„å¤§å°</code>ï¼Œå½“å®¢æˆ·ç«¯æ–­å¼€è¿æ¥åå°†å½“å‰çº¿ç¨‹ç¼“å­˜èµ·æ¥ï¼Œå½“åœ¨æ¥åˆ°æ–°çš„è¿æ¥è¯·æ±‚æ—¶å¿«é€Ÿå“åº”æ— éœ€åˆ›å»ºæ–°çš„çº¿ç¨‹ ã€‚è¿™å°¤å…¶å¯¹é‚£äº›ä½¿ç”¨çŸ­è¿æ¥çš„åº”ç”¨ç¨‹åºæ¥è¯´å¯ä»¥æå¤§çš„æé«˜åˆ›å»ºè¿æ¥çš„æ•ˆç‡ã€‚é‚£ä¹ˆä¸ºäº†æé«˜æ€§èƒ½å¯ä»¥å¢å¤§è¯¥å‚æ•°çš„å€¼ã€‚é»˜è®¤ä¸º60ï¼Œå¯ä»¥è®¾ç½®ä¸º120ã€‚</li><li><code>wait_timeout</code>ï¼šæŒ‡å®š<code>ä¸€ä¸ªè¯·æ±‚çš„æœ€å¤§è¿æ¥æ—¶é—´</code>ï¼Œå¯¹äº4GBå·¦å³å†…å­˜çš„æœåŠ¡å™¨å¯ä»¥è®¾ç½®ä¸º5-10ã€‚</li><li><code>interactive_timeout</code>ï¼šè¡¨ç¤ºæœåŠ¡å™¨åœ¨å…³é—­è¿æ¥å‰ç­‰å¾…è¡ŒåŠ¨çš„ç§’æ•°ã€‚</li></ul><h4 id="3-ä¼˜åŒ–æ•°æ®åº“ç»“æ„"><strong>3.</strong> <strong>ä¼˜åŒ–æ•°æ®åº“ç»“æ„</strong></h4><h5 id="3-1-æ‹†åˆ†è¡¨ï¼šå†·çƒ­æ•°æ®åˆ†ç¦»"><strong>3.1</strong> <strong>æ‹†åˆ†è¡¨ï¼šå†·çƒ­æ•°æ®åˆ†ç¦»</strong></h5><h5 id="3-2-å¢åŠ ä¸­é—´è¡¨"><strong>3.2</strong> <strong>å¢åŠ ä¸­é—´è¡¨</strong></h5><h5 id="3-3-å¢åŠ å†—ä½™å­—æ®µ"><strong>3.3</strong> <strong>å¢åŠ å†—ä½™å­—æ®µ</strong></h5><h5 id="3-4-ä¼˜åŒ–æ•°æ®ç±»å‹"><strong>3.4</strong> <strong>ä¼˜åŒ–æ•°æ®ç±»å‹</strong></h5><p><strong>æƒ…å†µ1ï¼šå¯¹æ•´æ•°ç±»å‹æ•°æ®è¿›è¡Œä¼˜åŒ–ã€‚</strong></p><p>é‡åˆ°æ•´æ•°ç±»å‹çš„å­—æ®µå¯ä»¥ç”¨<code>INT å‹</code>ã€‚è¿™æ ·åšçš„ç†ç”±æ˜¯ï¼ŒINT å‹æ•°æ®æœ‰è¶³å¤Ÿå¤§çš„å–å€¼èŒƒå›´ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®è¶…å‡ºå–å€¼èŒƒå›´çš„é—®é¢˜ã€‚åˆšå¼€å§‹åšé¡¹ç›®çš„æ—¶å€™ï¼Œé¦–å…ˆè¦ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œè¿™æ ·è®¾è®¡å­—æ®µç±»å‹æ˜¯å¯ä»¥çš„ã€‚ä½†åœ¨æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œæ•°æ®ç±»å‹çš„å®šä¹‰ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¼šå½±å“åˆ°ç³»ç»Ÿæ•´ä½“çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>å¯¹äº<code>éè´Ÿå‹</code>çš„æ•°æ®ï¼ˆå¦‚è‡ªå¢IDã€æ•´å‹IPï¼‰æ¥è¯´ï¼Œè¦ä¼˜å…ˆä½¿ç”¨æ— ç¬¦å·æ•´å‹<code>UNSIGNED</code>æ¥å­˜å‚¨ã€‚å› ä¸ºæ— ç¬¦å·ç›¸å¯¹äºæœ‰ç¬¦å·ï¼ŒåŒæ ·çš„å­—èŠ‚æ•°ï¼Œå­˜å‚¨çš„æ•°å€¼èŒƒå›´æ›´å¤§ã€‚å¦‚tinyintæœ‰ç¬¦å·ä¸º-128-127ï¼Œæ— ç¬¦å·ä¸º0-255ï¼Œå¤šå‡ºä¸€å€çš„å­˜å‚¨ç©ºé—´ã€‚</p><p><strong>æƒ…å†µ2ï¼šæ—¢å¯ä»¥ä½¿ç”¨æ–‡æœ¬ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨æ•´æ•°ç±»å‹çš„å­—æ®µï¼Œè¦é€‰æ‹©ä½¿ç”¨æ•´æ•°ç±»å‹</strong>ã€‚</p><p>è·Ÿæ–‡æœ¬ç±»å‹æ•°æ®ç›¸æ¯”ï¼Œå¤§æ•´æ•°å¾€å¾€å ç”¨<code>æ›´å°‘çš„å­˜å‚¨ç©ºé—´</code>ï¼Œå› æ­¤ï¼Œåœ¨å­˜å–å’Œæ¯”å¯¹çš„æ—¶å€™ï¼Œå¯ä»¥å ç”¨æ›´å°‘çš„å†…å­˜ç©ºé—´ã€‚æ‰€ä»¥ï¼Œåœ¨äºŒè€…çš†å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨æ•´æ•°ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚å¦‚ï¼šå°†IPåœ°å€è½¬æ¢æˆæ•´å‹æ•°æ®ã€‚</p><p><strong>æƒ…å†µ3ï¼šé¿å…ä½¿ç”¨TEXTã€BLOBæ•°æ®ç±»å‹</strong></p><p><strong>æƒ…å†µ4ï¼šé¿å…ä½¿ç”¨ENUMç±»å‹</strong></p><p><strong>æƒ…å†µ5ï¼šä½¿ç”¨TIMESTAMPå­˜å‚¨æ—¶é—´</strong></p><p><strong>æƒ…å†µ6ï¼šç”¨DECIMALä»£æ›¿FLOATå’ŒDOUBLEå­˜å‚¨ç²¾ç¡®æµ®ç‚¹æ•°</strong></p><p><strong>æ€»ä¹‹ï¼Œé‡åˆ°æ•°æ®é‡å¤§çš„é¡¹ç›®æ—¶ï¼Œä¸€å®šè¦åœ¨å……åˆ†äº†è§£ä¸šåŠ¡éœ€æ±‚çš„å‰æä¸‹ï¼Œåˆç†ä¼˜åŒ–æ•°æ®ç±»å‹ï¼Œè¿™æ ·æ‰èƒ½å……åˆ†å‘æŒ¥èµ„æºçš„æ•ˆç‡ï¼Œä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ä¼˜</strong>ã€‚</p><h5 id="3-5-ä¼˜åŒ–æ’å…¥è®°å½•çš„é€Ÿåº¦"><strong>3.5</strong> <strong>ä¼˜åŒ–æ’å…¥è®°å½•çš„é€Ÿåº¦</strong></h5><p><strong>1. MyISAMå¼•æ“çš„è¡¨ï¼š</strong></p><p><strong>â‘  ç¦ç”¨ç´¢å¼•</strong></p><p><strong>â‘¡ ç¦ç”¨å”¯ä¸€æ€§æ£€æŸ¥</strong></p><p><strong>â‘¢ ä½¿ç”¨æ‰¹é‡æ’å…¥</strong></p><p><strong>â‘£ ä½¿ç”¨LOAD DATA INFILE æ‰¹é‡å¯¼å…¥</strong></p><p><strong>2. InnoDBå¼•æ“çš„è¡¨ï¼š</strong></p><p><strong>â‘  ç¦ç”¨å”¯ä¸€æ€§æ£€æŸ¥</strong></p><p><strong>â‘¡ ç¦ç”¨å¤–é”®æ£€æŸ¥</strong></p><p><strong>â‘¢ ç¦æ­¢è‡ªåŠ¨æäº¤</strong></p><h5 id="3-6-ä½¿ç”¨éç©ºçº¦æŸ"><strong>3.6</strong> <strong>ä½¿ç”¨éç©ºçº¦æŸ</strong></h5><p><strong>åœ¨è®¾è®¡å­—æ®µçš„æ—¶å€™ï¼Œå¦‚æœä¸šåŠ¡å…è®¸ï¼Œå»ºè®®å°½é‡ä½¿ç”¨éç©ºçº¦æŸ</strong></p><h5 id="3-7-åˆ†æè¡¨ã€æ£€æŸ¥è¡¨ä¸ä¼˜åŒ–è¡¨"><strong>3.7</strong> <strong>åˆ†æè¡¨ã€æ£€æŸ¥è¡¨ä¸ä¼˜åŒ–è¡¨</strong></h5><p><strong>1.</strong> <strong>åˆ†æè¡¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name[,tbl_name]â€¦</span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„ï¼ŒMySQLæœåŠ¡ä¼šå°† ANALYZE TABLEè¯­å¥å†™åˆ°binlogä¸­ï¼Œä»¥ä¾¿åœ¨ä¸»ä»æ¶æ„ä¸­ï¼Œä»æœåŠ¡èƒ½å¤ŸåŒæ­¥æ•°æ®ã€‚å¯ä»¥æ·»åŠ å‚æ•°LOCAL æˆ–è€… NO_WRITE_TO_BINLOGå–æ¶ˆå°†è¯­å¥å†™åˆ°binlogä¸­ã€‚</p><p>ä½¿ç”¨<code>ANALYZE TABLE</code>åˆ†æè¡¨çš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨å¯¹è¡¨åŠ ä¸€ä¸ª<code>åªè¯»é”</code>ã€‚åœ¨åˆ†ææœŸé—´ï¼Œåªèƒ½è¯»å–è¡¨ä¸­çš„è®°å½•ï¼Œä¸èƒ½æ›´æ–°å’Œæ’å…¥è®°å½•ã€‚ANALYZE TABLEè¯­å¥èƒ½å¤Ÿåˆ†æInnoDBå’ŒMyISAMç±»å‹çš„è¡¨ï¼Œä½†æ˜¯ä¸èƒ½ä½œç”¨äºè§†å›¾ã€‚</p><p>ANALYZE TABLEåˆ†æåçš„ç»Ÿè®¡ç»“æœä¼šååº”åˆ°<code>cardinality</code>çš„å€¼ï¼Œè¯¥å€¼ç»Ÿè®¡äº†è¡¨ä¸­æŸä¸€é”®æ‰€åœ¨çš„åˆ—ä¸é‡å¤çš„å€¼çš„ä¸ªæ•°ã€‚<strong>è¯¥å€¼è¶Šæ¥è¿‘è¡¨ä¸­çš„æ€»è¡Œæ•°ï¼Œåˆ™åœ¨è¡¨è¿æ¥æŸ¥è¯¢æˆ–è€…ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œå°±è¶Šä¼˜å…ˆè¢«ä¼˜åŒ–å™¨é€‰æ‹©ä½¿ç”¨ã€‚</strong></p><p><strong>2.</strong> <strong>æ£€æŸ¥è¡¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHECK TABLE tbl_name [, tbl_name] ... [option] ... option = &#123;QUICK | FAST | MEDIUM | EXTENDED | CHANGED&#125;</span><br></pre></td></tr></table></figure><p>MySQLä¸­å¯ä»¥ä½¿ç”¨<code>CHECK TABLE</code>è¯­å¥æ¥æ£€æŸ¥è¡¨ã€‚CHECK TABLEè¯­å¥èƒ½å¤Ÿæ£€æŸ¥InnoDBå’ŒMyISAMç±»å‹çš„è¡¨æ˜¯å¦å­˜åœ¨é”™è¯¯ã€‚CHECK TABLEè¯­å¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¼šç»™è¡¨åŠ ä¸Š<code>åªè¯»é”</code>ã€‚</p><p><strong>3.</strong> <strong>ä¼˜åŒ–è¡¨</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure><p>MySQLä¸­ä½¿ç”¨<code>OPTIMIZE TABLE</code>è¯­å¥æ¥ä¼˜åŒ–è¡¨ã€‚ä½†æ˜¯ï¼ŒOPTILMIZE TABLEè¯­å¥åªèƒ½ä¼˜åŒ–è¡¨ä¸­çš„<code>VARCHAR</code>ã€<code>BLOB</code>æˆ–<code>TEXT</code>ç±»å‹çš„å­—æ®µã€‚ä¸€ä¸ªè¡¨ä½¿ç”¨äº†è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œè‹¥å·²ç»<code>åˆ é™¤</code>äº†è¡¨çš„ä¸€å¤§éƒ¨åˆ†æ•°æ®ï¼Œæˆ–è€…å·²ç»å¯¹å«æœ‰å¯å˜é•¿åº¦è¡Œçš„è¡¨ï¼ˆå«æœ‰VARCHARã€BLOBæˆ–TEXTåˆ—çš„è¡¨ï¼‰è¿›è¡Œäº†å¾ˆå¤š<code>æ›´æ–°</code>ï¼Œåˆ™åº”ä½¿ç”¨OPTIMIZE TABLEæ¥é‡æ–°åˆ©ç”¨æœªä½¿ç”¨çš„ç©ºé—´ï¼Œå¹¶æ•´ç†æ•°æ®æ–‡ä»¶çš„<code>ç¢ç‰‡</code>ã€‚</p><p>OPTIMIZE TABLE è¯­å¥å¯¹InnoDBå’ŒMyISAMç±»å‹çš„è¡¨éƒ½æœ‰æ•ˆã€‚è¯¥è¯­å¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¼šç»™è¡¨åŠ ä¸Š<code>åªè¯»é”</code>ã€‚</p>]]></content>
    
    
    <summary type="html">ã€æ•°æ®åº“è°ƒä¼˜çš„æªæ–½ã€ä¼˜åŒ–MySQLæœåŠ¡å™¨ã€ä¼˜åŒ–æ•°æ®åº“ç»“æ„ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬11ç«  æ•°æ®åº“çš„è®¾è®¡è§„èŒƒ</title>
    <link href="https://angus9823.github.io/posts/ecfbdaa6.html"/>
    <id>https://angus9823.github.io/posts/ecfbdaa6.html</id>
    <published>2023-04-18T07:36:46.000Z</published>
    <updated>2023-04-18T08:25:56.582Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬11ç« -æ•°æ®åº“çš„è®¾è®¡è§„èŒƒ">ç¬¬11ç«  æ•°æ®åº“çš„è®¾è®¡è§„èŒƒ</h3><h4 id="1-èŒƒ-å¼"><strong>1.</strong> <strong>èŒƒ å¼</strong></h4><h5 id="1-1-èŒƒå¼ç®€ä»‹"><strong>1.1</strong> <strong>èŒƒå¼ç®€ä»‹</strong></h5><p>**åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå…³äºæ•°æ®è¡¨è®¾è®¡çš„åŸºæœ¬åŸåˆ™ã€è§„åˆ™å°±ç§°ä¸ºèŒƒå¼ã€‚**å¯ä»¥ç†è§£ä¸ºï¼Œä¸€å¼ æ•°æ®è¡¨çš„è®¾è®¡ç»“æ„éœ€è¦æ»¡è¶³çš„æŸç§è®¾è®¡æ ‡å‡†çš„<code>çº§åˆ«</code>ã€‚è¦æƒ³è®¾è®¡ä¸€ä¸ªç»“æ„åˆç†çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå¿…é¡»æ»¡è¶³ä¸€å®šçš„èŒƒå¼ã€‚</p><h5 id="1-2-èŒƒå¼éƒ½åŒ…æ‹¬å“ªäº›"><strong>1.2</strong> <strong>èŒƒå¼éƒ½åŒ…æ‹¬å“ªäº›</strong></h5><p>ç›®å‰å…³ç³»å‹æ•°æ®åº“æœ‰å…­ç§å¸¸è§èŒƒå¼ï¼ŒæŒ‰ç…§èŒƒå¼çº§åˆ«ï¼Œä»ä½åˆ°é«˜åˆ†åˆ«æ˜¯ï¼š<strong>ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ã€å·´æ–¯-ç§‘å¾·èŒƒå¼ï¼ˆBCNFï¼‰ã€ç¬¬å››èŒƒå¼(4NFï¼‰å’Œç¬¬äº”èŒƒå¼ï¼ˆ5NFï¼Œåˆç§°å®Œç¾èŒƒå¼ï¼‰</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204030928295.png" alt="image-20220403092826169"></p><h5 id="1-3-é”®å’Œç›¸å…³å±æ€§çš„æ¦‚å¿µ"><strong>1.3</strong> <strong>é”®å’Œç›¸å…³å±æ€§çš„æ¦‚å¿µ</strong></h5><p>è¿™é‡Œæœ‰ä¸¤ä¸ªè¡¨ï¼š</p><p><code>çƒå‘˜è¡¨(player)</code>ï¼šçƒå‘˜ç¼–å· | å§“å | èº«ä»½è¯å· | å¹´é¾„ | çƒé˜Ÿç¼–å·</p><p><code>çƒé˜Ÿè¡¨(team)</code>ï¼šçƒé˜Ÿç¼–å· | ä¸»æ•™ç»ƒ | çƒé˜Ÿæ‰€åœ¨åœ°</p><ul><li><code>è¶…é”®</code>ï¼šå¯¹äºçƒå‘˜è¡¨æ¥è¯´ï¼Œè¶…é”®å°±æ˜¯åŒ…æ‹¬çƒå‘˜ç¼–å·æˆ–è€…èº«ä»½è¯å·çš„ä»»æ„ç»„åˆï¼Œæ¯”å¦‚ï¼ˆçƒå‘˜ç¼–å·ï¼‰ï¼ˆçƒå‘˜ç¼–å·ï¼Œå§“åï¼‰ï¼ˆèº«ä»½è¯å·ï¼Œå¹´é¾„ï¼‰ç­‰ã€‚</li><li><code>å€™é€‰é”®</code>ï¼šå°±æ˜¯æœ€å°çš„è¶…é”®ï¼Œå¯¹äºçƒå‘˜è¡¨æ¥è¯´ï¼Œå€™é€‰é”®å°±æ˜¯ï¼ˆçƒå‘˜ç¼–å·ï¼‰æˆ–è€…ï¼ˆèº«ä»½è¯å·ï¼‰ã€‚</li><li><code>ä¸»é”®</code>ï¼šæˆ‘ä»¬è‡ªå·±é€‰å®šï¼Œä¹Ÿå°±æ˜¯ä»å€™é€‰é”®ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œæ¯”å¦‚ï¼ˆçƒå‘˜ç¼–å·ï¼‰ã€‚</li><li><code>å¤–é”®</code>ï¼šçƒå‘˜è¡¨ä¸­çš„çƒé˜Ÿç¼–å·ã€‚</li><li><code>ä¸»å±æ€§</code>ã€<code>éä¸»å±æ€§</code>ï¼šåœ¨çƒå‘˜è¡¨ä¸­ï¼Œä¸»å±æ€§æ˜¯ï¼ˆçƒå‘˜ç¼–å·ï¼‰ï¼ˆèº«ä»½è¯å·ï¼‰ï¼Œå…¶ä»–çš„å±æ€§ï¼ˆå§“åï¼‰ï¼ˆå¹´é¾„ï¼‰ï¼ˆçƒé˜Ÿç¼–å·ï¼‰éƒ½æ˜¯éä¸»å±æ€§ã€‚</li></ul><h5 id="1-4-ç¬¬ä¸€èŒƒå¼-1st-NF"><strong>1.4</strong> <strong>ç¬¬ä¸€èŒƒå¼(1st NF)</strong></h5><p>ç¬¬ä¸€èŒƒå¼ä¸»è¦æ˜¯ç¡®ä¿æ•°æ®è¡¨ä¸­æ¯ä¸ªå­—æ®µçš„å€¼å¿…é¡»å…·æœ‰<code>åŸå­æ€§</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®è¡¨ä¸­æ¯ä¸ªå­—æ®µçš„å€¼ä¸º<code>ä¸å¯å†æ¬¡æ‹†åˆ†</code>çš„æœ€å°æ•°æ®å•ä½ã€‚</p><h5 id="1-5-ç¬¬äºŒèŒƒå¼-2nd-NF"><strong>1.5</strong> <strong>ç¬¬äºŒèŒƒå¼(2nd NF)</strong></h5><p>ç¬¬äºŒèŒƒå¼è¦æ±‚ï¼Œåœ¨æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šï¼Œè¿˜è¦**æ»¡è¶³æ•°æ®è¡¨é‡Œçš„æ¯ä¸€æ¡æ•°æ®è®°å½•ï¼Œéƒ½æ˜¯å¯å”¯ä¸€æ ‡è¯†çš„ã€‚è€Œä¸”æ‰€æœ‰éä¸»é”®å­—æ®µï¼Œéƒ½å¿…é¡»å®Œå…¨ä¾èµ–ä¸»é”®ï¼Œä¸èƒ½åªä¾èµ–ä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚**å¦‚æœçŸ¥é“ä¸»é”®çš„æ‰€æœ‰å±æ€§çš„å€¼ï¼Œå°±å¯ä»¥æ£€ç´¢åˆ°ä»»ä½•å…ƒç»„ï¼ˆè¡Œï¼‰çš„ä»»ä½•å±æ€§çš„ä»»ä½•å€¼ã€‚</p><h5 id="1-6-ç¬¬ä¸‰èŒƒå¼-3rd-NF"><strong>1.6</strong> <strong>ç¬¬ä¸‰èŒƒå¼(3rd NF)</strong></h5><p>ç¬¬ä¸‰èŒƒå¼æ˜¯åœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šï¼Œç¡®ä¿æ•°æ®è¡¨ä¸­çš„æ¯ä¸€ä¸ªéä¸»é”®å­—æ®µéƒ½å’Œä¸»é”®å­—æ®µç›´æ¥ç›¸å…³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>è¦æ±‚æ•°æ®è¡¨ä¸­çš„æ‰€æœ‰éä¸»é”®å­—æ®µä¸èƒ½ä¾èµ–äºå…¶ä»–éä¸»é”®å­—æ®µã€‚</strong>ï¼ˆå³ï¼Œä¸èƒ½å­˜åœ¨éä¸»å±æ€§Aä¾èµ–äºéä¸»å±æ€§Bï¼Œéä¸»å±æ€§Bä¾èµ–äºä¸»é”®Cçš„æƒ…å†µï¼Œå³å­˜åœ¨&quot;Aâ€“&gt;Bâ€“&gt;C&quot;çš„å†³å®šå…³ç³»ï¼‰é€šä¿—åœ°è®²ï¼Œè¯¥è§„åˆ™çš„æ„æ€æ˜¯æ‰€æœ‰<code>éä¸»é”®å±æ€§</code>ä¹‹é—´ä¸èƒ½æœ‰ä¾èµ–å…³ç³»ï¼Œå¿…é¡»<code>ç›¸äº’ç‹¬ç«‹</code>ã€‚</p><h5 id="1-7-å°ç»“">1.7 å°ç»“</h5><p>å…³äºæ•°æ®è¡¨çš„è®¾è®¡ï¼Œæœ‰ä¸‰ä¸ªèŒƒå¼è¦éµå¾ªã€‚</p><p>ï¼ˆ1ï¼‰ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ï¼Œç¡®ä¿æ¯åˆ—ä¿æŒ<code>åŸå­æ€§</code></p><p>æ•°æ®åº“çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ï¼Œä¸å¯å†åˆ†çš„æœ€å°æ•°æ®å•å…ƒï¼Œè€Œä¸èƒ½æ˜¯é›†åˆã€æ•°ç»„ã€è®°å½•ç­‰éåŸå­æ•°æ®é¡¹ã€‚</p><p>ï¼ˆ2ï¼‰ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ï¼Œç¡®ä¿æ¯åˆ—éƒ½å’Œä¸»é”®<code>å®Œå…¨ä¾èµ–</code></p><p>å°¤å…¶åœ¨å¤åˆä¸»é”®çš„æƒ…å†µå‘ä¸‹ï¼Œéä¸»é”®éƒ¨åˆ†ä¸åº”è¯¥ä¾èµ–äºéƒ¨åˆ†ä¸»é”®ã€‚</p><p>ï¼ˆ3ï¼‰ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ï¼Œç¡®ä¿æ¯åˆ—éƒ½å’Œä¸»é”®<code>ç›´æ¥ç›¸å…³</code>ï¼Œè€Œä¸æ˜¯é—´æ¥ç›¸å…³</p><p>**èŒƒå¼çš„ä¼˜ç‚¹ï¼š**æ•°æ®çš„æ ‡å‡†åŒ–æœ‰åŠ©äºæ¶ˆé™¤æ•°æ®åº“ä¸­çš„<code>æ•°æ®å†—ä½™</code>ï¼Œç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰é€šå¸¸è¢«è®¤ä¸ºåœ¨æ€§èƒ½ã€æ‹“å±•æ€§å’Œæ•°æ®å®Œæ•´æ€§æ–¹é¢è¾¾åˆ°äº†æœ€å¥½çš„å¹³è¡¡ã€‚</p><p>**èŒƒå¼çš„ç¼ºç‚¹ï¼š**èŒƒå¼çš„ä½¿ç”¨ï¼Œå¯èƒ½<code>é™ä½æŸ¥è¯¢çš„æ•ˆç‡</code>ã€‚å› ä¸ºèŒƒå¼ç­‰çº§è¶Šé«˜ï¼Œè®¾è®¡å‡ºæ¥çš„æ•°æ®è¡¨å°±è¶Šå¤šã€è¶Šç²¾ç»†ï¼Œæ•°æ®çš„å†—ä½™åº¦å°±è¶Šä½ï¼Œè¿›è¡Œæ•°æ®æŸ¥è¯¢çš„æ—¶å€™å°±å¯èƒ½éœ€è¦<code>å…³è”å¤šå¼ è¡¨</code>ï¼Œè¿™ä¸ä½†ä»£ä»·æ˜‚è´µï¼Œä¹Ÿå¯èƒ½ä½¿ä¸€äº›<code>ç´¢å¼•ç­–ç•¥æ— æ•ˆ</code>ã€‚</p><p>èŒƒå¼åªæ˜¯æå‡ºäº†è®¾è®¡çš„æ ‡å‡†ï¼Œå®é™…ä¸Šè®¾è®¡æ•°æ®è¡¨æ—¶ï¼Œæœªå¿…ä¸€å®šè¦ç¬¦åˆè¿™äº›æ ‡å‡†ã€‚å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šå‡ºç°ä¸ºäº†æ€§èƒ½å’Œè¯»å–æ•ˆç‡è¿åèŒƒå¼åŒ–çš„åŸåˆ™ï¼Œé€šè¿‡<code>å¢åŠ å°‘é‡çš„å†—ä½™</code>æˆ–é‡å¤çš„æ•°æ®æ¥æé«˜æ•°æ®åº“çš„<code>è¯»æ€§èƒ½</code>ï¼Œå‡å°‘å…³è”æŸ¥è¯¢ï¼Œjoinè¡¨çš„æ¬¡æ•°ï¼Œå®ç°<code>ç©ºé—´æ¢å–æ—¶é—´</code>çš„ç›®çš„ã€‚å› æ­¤åœ¨å®é™…çš„è®¾è®¡è¿‡ç¨‹ä¸­è¦ç†è®ºç»“åˆå®é™…ï¼Œçµæ´»è¿ç”¨ã€‚</p><h4 id="2-åèŒƒå¼åŒ–"><strong>2.</strong> <strong>åèŒƒå¼åŒ–</strong></h4><h5 id="2-1-æ¦‚è¿°"><strong>2.1</strong> <strong>æ¦‚è¿°</strong></h5><p><strong>è§„èŒƒåŒ–</strong> <strong>vs</strong> <strong>æ€§èƒ½</strong></p><ol><li><p>ä¸ºæ»¡è¶³æŸç§å•†ä¸šç›®æ ‡ , æ•°æ®åº“æ€§èƒ½æ¯”è§„èŒƒåŒ–æ•°æ®åº“æ›´é‡è¦</p></li><li><p>åœ¨æ•°æ®è§„èŒƒåŒ–çš„åŒæ—¶ , è¦ç»¼åˆè€ƒè™‘æ•°æ®åº“çš„æ€§èƒ½</p></li><li><p>é€šè¿‡åœ¨ç»™å®šçš„è¡¨ä¸­æ·»åŠ é¢å¤–çš„å­—æ®µï¼Œä»¥å¤§é‡å‡å°‘éœ€è¦ä»ä¸­æœç´¢ä¿¡æ¯æ‰€éœ€çš„æ—¶é—´</p></li><li><p>é€šè¿‡åœ¨ç»™å®šçš„è¡¨ä¸­æ’å…¥è®¡ç®—åˆ—ï¼Œä»¥æ–¹ä¾¿æŸ¥è¯¢</p></li></ol><h5 id="2-2-åèŒƒå¼çš„æ–°é—®é¢˜"><strong>2.2</strong> <strong>åèŒƒå¼çš„æ–°é—®é¢˜</strong></h5><ul><li>å­˜å‚¨<code>ç©ºé—´å˜å¤§</code>äº†</li><li>ä¸€ä¸ªè¡¨ä¸­å­—æ®µåšäº†ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªè¡¨ä¸­å†—ä½™çš„å­—æ®µä¹Ÿéœ€è¦åšåŒæ­¥ä¿®æ”¹ï¼Œå¦åˆ™<code>æ•°æ®ä¸ä¸€è‡´</code></li><li>è‹¥é‡‡ç”¨å­˜å‚¨è¿‡ç¨‹æ¥æ”¯æŒæ•°æ®çš„æ›´æ–°ã€åˆ é™¤ç­‰é¢å¤–æ“ä½œï¼Œå¦‚æœæ›´æ–°é¢‘ç¹ï¼Œä¼šéå¸¸<code>æ¶ˆè€—ç³»ç»Ÿèµ„æº</code></li><li>åœ¨<code>æ•°æ®é‡å°</code>çš„æƒ…å†µä¸‹ï¼ŒåèŒƒå¼ä¸èƒ½ä½“ç°æ€§èƒ½çš„ä¼˜åŠ¿ï¼Œå¯èƒ½è¿˜ä¼šè®©æ•°æ®åº“çš„è®¾è®¡æ›´åŠ <code>å¤æ‚</code></li></ul><h5 id="2-3-åèŒƒå¼çš„é€‚ç”¨åœºæ™¯"><strong>2.3</strong> <strong>åèŒƒå¼çš„é€‚ç”¨åœºæ™¯</strong></h5><p>å½“å†—ä½™ä¿¡æ¯æœ‰ä»·å€¼æˆ–è€…èƒ½<code>å¤§å¹…åº¦æé«˜æŸ¥è¯¢æ•ˆç‡</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä¼šé‡‡å–åèŒƒå¼çš„ä¼˜åŒ–ã€‚</p><p><strong>1.</strong> <strong>å¢åŠ å†—ä½™å­—æ®µçš„å»ºè®®</strong></p><p>1ï¼‰è¿™ä¸ªå†—ä½™å­—æ®µ<code>ä¸éœ€è¦ç»å¸¸è¿›è¡Œä¿®æ”¹</code></p><p>2ï¼‰è¿™ä¸ªå†—ä½™å­—æ®µ<code>æŸ¥è¯¢çš„æ—¶å€™ä¸å¯æˆ–ç¼º</code></p><p><strong>2.</strong> <strong>å†å²å¿«ç…§ã€å†å²æ•°æ®çš„éœ€è¦</strong></p><p>åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€äº›å†—ä½™ä¿¡æ¯ï¼Œæ¯”å¦‚è®¢å•ä¸­çš„æ”¶è´§äººä¿¡æ¯ï¼ŒåŒ…æ‹¬å§“åã€ç”µè¯å’Œåœ°å€ç­‰ã€‚æ¯æ¬¡å‘ç”Ÿçš„<code>è®¢å•æ”¶è´§ä¿¡æ¯</code>éƒ½å±äº<code>å†å²å¿«ç…§</code>ï¼Œéœ€è¦è¿›è¡Œä¿å­˜ï¼Œä½†ç”¨æˆ·å¯ä»¥éšæ—¶ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯ï¼Œè¿™æ—¶ä¿å­˜è¿™äº›å†—ä½™ä¿¡æ¯æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p><p>åèŒƒå¼ä¼˜åŒ–ä¹Ÿå¸¸ç”¨åœ¨<code>æ•°æ®ä»“åº“</code>çš„è®¾è®¡ä¸­ï¼Œå› ä¸ºæ•°æ®ä»“åº“é€šå¸¸<code>å­˜å‚¨å†å²æ•°æ®</code>ï¼Œå¯¹å¢åˆ æ”¹çš„å®æ—¶æ€§è¦æ±‚ä¸å¼ºï¼Œå¯¹å†å²æ•°æ®çš„åˆ†æéœ€æ±‚å¼ºã€‚è¿™æ—¶é€‚å½“å…è®¸æ•°æ®çš„å†—ä½™åº¦ï¼Œæ›´æ–¹ä¾¿è¿›è¡Œæ•°æ®åˆ†æã€‚</p><h4 id="3-BCNF-å·´æ–¯èŒƒå¼"><strong>3. BCNF(å·´æ–¯èŒƒå¼)</strong></h4><p>ä¸»å±æ€§ï¼ˆä»“åº“åï¼‰å¯¹äºå€™é€‰é”®ï¼ˆç®¡ç†å‘˜ï¼Œç‰©å“åï¼‰æ˜¯éƒ¨åˆ†ä¾èµ–çš„å…³ç³»ï¼Œè¿™æ ·å°±æœ‰å¯èƒ½å¯¼è‡´å¼‚å¸¸æƒ…å†µã€‚å› æ­¤å¼•å…¥BCNFï¼Œ<strong>å®ƒåœ¨</strong> <strong>3NF</strong> <strong>çš„åŸºç¡€ä¸Šæ¶ˆé™¤äº†ä¸»å±æ€§å¯¹å€™é€‰é”®çš„éƒ¨åˆ†ä¾èµ–æˆ–è€…ä¼ é€’ä¾èµ–å…³ç³»</strong>ã€‚</p><p>å¦‚æœåœ¨å…³ç³»Rä¸­ï¼ŒUä¸ºä¸»é”®ï¼ŒAå±æ€§æ˜¯ä¸»é”®çš„ä¸€ä¸ªå±æ€§ï¼Œè‹¥å­˜åœ¨A-&gt;Yï¼ŒYä¸ºä¸»å±æ€§ï¼Œåˆ™è¯¥å…³ç³»ä¸å±äºBCNFã€‚</p><h4 id="4-ERæ¨¡å‹"><strong>4. ERæ¨¡å‹</strong></h4><p>ERæ¨¡å‹ä¹Ÿå«åš<code>å®ä½“å…³ç³»æ¨¡å‹</code>ï¼Œæ˜¯ç”¨æ¥æè¿°ç°å®ç”Ÿæ´»ä¸­å®¢è§‚å­˜åœ¨çš„äº‹ç‰©ã€äº‹ç‰©çš„å±æ€§ï¼Œä»¥åŠäº‹ç‰©ä¹‹é—´å…³ç³»çš„ä¸€ç§æ•°æ®æ¨¡å‹ã€‚<strong>åœ¨å¼€å‘åŸºäºæ•°æ®åº“çš„ä¿¡æ¯ç³»ç»Ÿçš„è®¾è®¡é˜¶æ®µï¼Œé€šå¸¸ä½¿ç”¨ERæ¨¡å‹æ¥æè¿°ä¿¡æ¯éœ€è¦å’Œä¿¡æ¯ç‰¹æ€§ï¼Œå¸®åŠ©æˆ‘ä»¬ç†æ¸…ä¸šåŠ¡é€»è¾‘ï¼Œä»è€Œè®¾è®¡å‡ºä¼˜ç§€çš„æ•°æ®åº“ã€‚</strong></p><h5 id="4-1-ER-æ¨¡å‹åŒ…æ‹¬é‚£äº›è¦ç´ ï¼Ÿ">4.1 ER æ¨¡å‹åŒ…æ‹¬é‚£äº›è¦ç´ ï¼Ÿ</h5><p><strong>ER</strong> <strong>æ¨¡å‹ä¸­æœ‰ä¸‰ä¸ªè¦ç´ ï¼Œåˆ†åˆ«æ˜¯å®ä½“ã€å±æ€§å’Œå…³ç³»</strong>ã€‚</p><p><code>å®ä½“</code>ï¼Œå¯ä»¥çœ‹åšæ˜¯æ•°æ®å¯¹è±¡ï¼Œå¾€å¾€å¯¹åº”äºç°å®ç”Ÿæ´»ä¸­çš„çœŸå®å­˜åœ¨çš„ä¸ªä½“ã€‚åœ¨ ER æ¨¡å‹ä¸­ï¼Œç”¨<code>çŸ©å½¢</code>æ¥è¡¨ç¤ºã€‚å®ä½“åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯<code>å¼ºå®ä½“</code>å’Œ<code>å¼±å®ä½“</code>ã€‚å¼ºå®ä½“æ˜¯æŒ‡ä¸ä¾èµ–äºå…¶ä»–å®ä½“çš„å®ä½“ï¼›å¼±å®ä½“æ˜¯æŒ‡å¯¹å¦ä¸€ä¸ªå®ä½“æœ‰å¾ˆå¼ºçš„ä¾èµ–å…³ç³»çš„å®ä½“ã€‚</p><p><code>å±æ€§</code>ï¼Œåˆ™æ˜¯æŒ‡å®ä½“çš„ç‰¹æ€§ã€‚æ¯”å¦‚è¶…å¸‚çš„åœ°å€ã€è”ç³»ç”µè¯ã€å‘˜å·¥æ•°ç­‰ã€‚åœ¨ ER æ¨¡å‹ä¸­ç”¨<code>æ¤­åœ†å½¢</code>æ¥è¡¨ç¤ºã€‚</p><p><code>å…³ç³»</code>ï¼Œåˆ™æ˜¯æŒ‡å®ä½“ä¹‹é—´çš„è”ç³»ã€‚æ¯”å¦‚è¶…å¸‚æŠŠå•†å“å–ç»™é¡¾å®¢ï¼Œå°±æ˜¯ä¸€ç§è¶…å¸‚ä¸é¡¾å®¢ä¹‹é—´çš„è”ç³»ã€‚åœ¨ ER æ¨¡å‹ä¸­ç”¨<code>è±å½¢</code>æ¥è¡¨ç¤ºã€‚</p><p>æ³¨æ„ï¼šå®ä½“å’Œå±æ€§ä¸å®¹æ˜“åŒºåˆ†ã€‚è¿™é‡Œæä¾›ä¸€ä¸ªåŸåˆ™ï¼šæˆ‘ä»¬è¦ä»ç³»ç»Ÿæ•´ä½“çš„è§’åº¦å‡ºå‘å»çœ‹ï¼Œ<strong>å¯ä»¥ç‹¬ç«‹å­˜åœ¨çš„æ˜¯å®ä½“ï¼Œä¸å¯å†åˆ†çš„æ˜¯å±æ€§</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå±æ€§ä¸èƒ½åŒ…å«å…¶ä»–å±æ€§ã€‚</p><h5 id="4-2-å…³ç³»çš„ç±»å‹"><strong>4.2</strong> <strong>å…³ç³»çš„ç±»å‹</strong></h5><p>åœ¨ ER æ¨¡å‹çš„ 3 ä¸ªè¦ç´ ä¸­ï¼Œå…³ç³»åˆå¯ä»¥åˆ†ä¸º 3 ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€‚</p><p><code>ä¸€å¯¹ä¸€</code>ï¼šæŒ‡å®ä½“ä¹‹é—´çš„å…³ç³»æ˜¯ä¸€ä¸€å¯¹åº”çš„</p><p><code>ä¸€å¯¹å¤š</code>ï¼šæŒ‡ä¸€è¾¹çš„å®ä½“é€šè¿‡å…³ç³»ï¼Œå¯ä»¥å¯¹åº”å¤šä¸ªå¦å¤–ä¸€è¾¹çš„å®ä½“ã€‚ç›¸åï¼Œå¦å¤–ä¸€è¾¹çš„å®ä½“é€šè¿‡è¿™ä¸ªå…³ç³»ï¼Œåˆ™åªèƒ½å¯¹åº”å”¯ä¸€çš„ä¸€è¾¹çš„å®ä½“</p><p><code>å¤šå¯¹å¤š</code>ï¼šæŒ‡å…³ç³»ä¸¤è¾¹çš„å®ä½“éƒ½å¯ä»¥é€šè¿‡å…³ç³»å¯¹åº”å¤šä¸ªå¯¹æ–¹çš„å®ä½“</p><h4 id="5-æ•°æ®è¡¨çš„è®¾è®¡åŸåˆ™"><strong>5.</strong> <strong>æ•°æ®è¡¨çš„è®¾è®¡åŸåˆ™</strong></h4><p>æ•°æ®è¡¨è®¾è®¡çš„ä¸€èˆ¬åŸåˆ™ï¼šâ€œä¸‰å°‘ä¸€å¤šâ€</p><p><strong>1.</strong> <strong>æ•°æ®è¡¨çš„ä¸ªæ•°è¶Šå°‘è¶Šå¥½</strong></p><p><strong>2.</strong> <strong>æ•°æ®è¡¨ä¸­çš„å­—æ®µä¸ªæ•°è¶Šå°‘è¶Šå¥½</strong></p><p><strong>3.</strong> <strong>æ•°æ®è¡¨ä¸­è”åˆä¸»é”®çš„å­—æ®µä¸ªæ•°è¶Šå°‘è¶Šå¥½</strong></p><p><strong>4.</strong> <strong>ä½¿ç”¨ä¸»é”®å’Œå¤–é”®è¶Šå¤šè¶Šå¥½</strong></p><blockquote><p>æ³¨æ„ï¼šè¿™ä¸ªåŸåˆ™å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç‰ºç‰²æ•°æ®çš„å†—ä½™åº¦æ¥æ¢å–æ•°æ®å¤„ç†çš„æ•ˆç‡ã€‚</p></blockquote><h4 id="6-æ•°æ®åº“å¯¹è±¡ç¼–å†™å»ºè®®"><strong>6.</strong> <strong>æ•°æ®åº“å¯¹è±¡ç¼–å†™å»ºè®®</strong></h4><h5 id="6-1-å…³äºåº“"><strong>6.1</strong> <strong>å…³äºåº“</strong></h5><ol><li><p>ã€å¼ºåˆ¶ã€‘åº“çš„åç§°å¿…é¡»æ§åˆ¶åœ¨32ä¸ªå­—ç¬¦ä»¥å†…ï¼Œåªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œå»ºè®®ä»¥è‹±æ–‡å­—æ¯å¼€å¤´ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘åº“åä¸­è‹±æ–‡<code>ä¸€å¾‹å°å†™</code>ï¼Œä¸åŒå•è¯é‡‡ç”¨<code>ä¸‹åˆ’çº¿</code>åˆ†å‰²ã€‚é¡»è§åçŸ¥æ„ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘åº“çš„åç§°æ ¼å¼ï¼šä¸šåŠ¡ç³»ç»Ÿåç§°_å­ç³»ç»Ÿåã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘åº“åç¦æ­¢ä½¿ç”¨å…³é”®å­—ï¼ˆå¦‚type,orderç­‰ï¼‰ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘åˆ›å»ºæ•°æ®åº“æ—¶å¿…é¡»<code>æ˜¾å¼æŒ‡å®šå­—ç¬¦é›†</code>ï¼Œå¹¶ä¸”å­—ç¬¦é›†åªèƒ½æ˜¯utf8æˆ–è€…utf8mb4ã€‚åˆ›å»ºæ•°æ®åº“SQLä¸¾ä¾‹ï¼šCREATE DATABASE crm_fund <code>DEFAULT CHARACTER SET 'utf8'</code>;</p></li><li><p>ã€å»ºè®®ã€‘å¯¹äºç¨‹åºè¿æ¥æ•°æ®åº“è´¦å·ï¼Œéµå¾ª<code>æƒé™æœ€å°åŸåˆ™</code>ã€‚ä½¿ç”¨æ•°æ®åº“è´¦å·åªèƒ½åœ¨ä¸€ä¸ªDBä¸‹ä½¿ç”¨ï¼Œä¸å‡†è·¨åº“ã€‚ç¨‹åºä½¿ç”¨çš„è´¦å·<code>åŸåˆ™ä¸Šä¸å‡†æœ‰dropæƒé™</code>ã€‚</p></li><li><p>ã€å»ºè®®ã€‘ä¸´æ—¶åº“ä»¥<code>tmp_</code>ä¸ºå‰ç¼€ï¼Œå¹¶ä»¥æ—¥æœŸä¸ºåç¼€ï¼›å¤‡ä»½åº“ä»¥<code>bak_</code>ä¸ºå‰ç¼€ï¼Œå¹¶ä»¥æ—¥æœŸä¸ºåç¼€ã€‚</p></li></ol><h5 id="6-2-å…³äºè¡¨ã€åˆ—"><strong>6.2</strong> <strong>å…³äºè¡¨ã€åˆ—</strong></h5><ol><li><p>ã€å¼ºåˆ¶ã€‘è¡¨å’Œåˆ—çš„åç§°å¿…é¡»æ§åˆ¶åœ¨32ä¸ªå­—ç¬¦ä»¥å†…ï¼Œè¡¨ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œå»ºè®®ä»¥<code>è‹±æ–‡å­—æ¯å¼€å¤´</code>ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘ <code>è¡¨åã€åˆ—åä¸€å¾‹å°å†™</code>ï¼Œä¸åŒå•è¯é‡‡ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ã€‚é¡»è§åçŸ¥æ„ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘è¡¨åè¦æ±‚æœ‰æ¨¡å—åå¼ºç›¸å…³ï¼ŒåŒä¸€æ¨¡å—çš„è¡¨åå°½é‡ä½¿ç”¨<code>ç»Ÿä¸€å‰ç¼€</code>ã€‚æ¯”å¦‚ï¼šcrm_fund_item</p></li><li><p>ã€å¼ºåˆ¶ã€‘åˆ›å»ºè¡¨æ—¶å¿…é¡»<code>æ˜¾å¼æŒ‡å®šå­—ç¬¦é›†</code>ä¸ºutf8æˆ–utf8mb4ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘è¡¨åã€åˆ—åç¦æ­¢ä½¿ç”¨å…³é”®å­—ï¼ˆå¦‚type,orderç­‰ï¼‰ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘åˆ›å»ºè¡¨æ—¶å¿…é¡»<code>æ˜¾å¼æŒ‡å®šè¡¨å­˜å‚¨å¼•æ“</code>ç±»å‹ã€‚å¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€å¾‹ä¸ºInnoDBã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘å»ºè¡¨å¿…é¡»æœ‰commentã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘å­—æ®µå‘½ååº”å°½å¯èƒ½ä½¿ç”¨è¡¨è¾¾å®é™…å«ä¹‰çš„è‹±æ–‡å•è¯æˆ–<code>ç¼©å†™</code>ã€‚å¦‚ï¼šå…¬å¸ IDï¼Œä¸è¦ä½¿ç”¨ corporation_id, è€Œç”¨corp_id å³å¯ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘å¸ƒå°”å€¼ç±»å‹çš„å­—æ®µå‘½åä¸º<code>is_æè¿°</code>ã€‚å¦‚memberè¡¨ä¸Šè¡¨ç¤ºæ˜¯å¦ä¸ºenabledçš„ä¼šå‘˜çš„å­—æ®µå‘½åä¸º is_enabledã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘ç¦æ­¢åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å›¾ç‰‡ã€æ–‡ä»¶ç­‰å¤§çš„äºŒè¿›åˆ¶æ•°æ®ã€‚é€šå¸¸æ–‡ä»¶å¾ˆå¤§ï¼ŒçŸ­æ—¶é—´å†…é€ æˆæ•°æ®é‡å¿«é€Ÿå¢é•¿ï¼Œæ•°æ®åº“è¿›è¡Œæ•°æ®åº“è¯»å–æ—¶ï¼Œé€šå¸¸ä¼šè¿›è¡Œå¤§é‡çš„éšæœºIOæ“ä½œï¼Œæ–‡ä»¶å¾ˆå¤§æ—¶ï¼ŒIOæ“ä½œå¾ˆè€—æ—¶ã€‚é€šå¸¸å­˜å‚¨äºæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ•°æ®åº“åªå­˜å‚¨æ–‡ä»¶åœ°å€ä¿¡æ¯ã€‚</p></li><li><p>ã€å»ºè®®ã€‘å»ºè¡¨æ—¶å…³äºä¸»é”®ï¼š<code>è¡¨å¿…é¡»æœ‰ä¸»é”® </code>(1)å¼ºåˆ¶è¦æ±‚ä¸»é”®ä¸ºidï¼Œç±»å‹ä¸ºintæˆ–bigintï¼Œä¸”ä¸ºauto_increment å»ºè®®ä½¿ç”¨unsignedæ— ç¬¦å·å‹ã€‚ (2)æ ‡è¯†è¡¨é‡Œæ¯ä¸€è¡Œä¸»ä½“çš„å­—æ®µä¸è¦è®¾ä¸ºä¸»é”®ï¼Œå»ºè®®è®¾ä¸ºå…¶ä»–å­—æ®µå¦‚user_idï¼Œorder_idç­‰ï¼Œå¹¶å»ºç«‹unique keyç´¢å¼•ã€‚å› ä¸ºå¦‚æœè®¾ä¸ºä¸»é”®ä¸”ä¸»é”®å€¼ä¸ºéšæœºæ’å…¥ï¼Œåˆ™ä¼šå¯¼è‡´innodbå†…éƒ¨é¡µåˆ†è£‚å’Œå¤§é‡éšæœºI/Oï¼Œæ€§èƒ½ä¸‹é™ã€‚</p></li><li><p>ã€å»ºè®®ã€‘æ ¸å¿ƒè¡¨ï¼ˆå¦‚ç”¨æˆ·è¡¨ï¼‰å¿…é¡»æœ‰è¡Œæ•°æ®çš„<code>åˆ›å»ºæ—¶é—´å­—æ®µ</code>ï¼ˆcreate_timeï¼‰å’Œ<code>æœ€åæ›´æ–°æ—¶é—´å­—æ®µ</code>ï¼ˆupdate_timeï¼‰ï¼Œä¾¿äºæŸ¥é—®é¢˜ã€‚</p></li><li><p>ã€å»ºè®®ã€‘è¡¨ä¸­æ‰€æœ‰å­—æ®µå°½é‡éƒ½æ˜¯<code>NOT NULL</code>å±æ€§ï¼Œä¸šåŠ¡å¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰<code>DEFAULTå€¼</code>ã€‚ å› ä¸ºä½¿ç”¨NULLå€¼ä¼šå­˜åœ¨æ¯ä¸€è¡Œéƒ½ä¼šå ç”¨é¢å¤–å­˜å‚¨ç©ºé—´ã€æ•°æ®è¿ç§»å®¹æ˜“å‡ºé”™ã€èšåˆå‡½æ•°è®¡ç®—ç»“æœåå·®ç­‰é—®é¢˜ã€‚</p></li><li><p>ã€å»ºè®®ã€‘æ‰€æœ‰å­˜å‚¨ç›¸åŒæ•°æ®çš„<code>åˆ—åå’Œåˆ—ç±»å‹å¿…é¡»ä¸€è‡´</code>ï¼ˆä¸€èˆ¬ä½œä¸ºå…³è”åˆ—ï¼Œå¦‚æœæŸ¥è¯¢æ—¶å…³è”åˆ—ç±»å‹ä¸ä¸€è‡´ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®ç±»å‹éšå¼è½¬æ¢ï¼Œä¼šé€ æˆåˆ—ä¸Šçš„ç´¢å¼•å¤±æ•ˆï¼Œå¯¼è‡´æŸ¥è¯¢æ•ˆç‡é™ä½ï¼‰ã€‚</p></li><li><p>ã€å»ºè®®ã€‘ä¸­é—´è¡¨ï¼ˆæˆ–ä¸´æ—¶è¡¨ï¼‰ç”¨äºä¿ç•™ä¸­é—´ç»“æœé›†ï¼Œåç§°ä»¥<code>tmp_</code>å¼€å¤´ã€‚å¤‡ä»½è¡¨ç”¨äºå¤‡ä»½æˆ–æŠ“å–æºè¡¨å¿«ç…§ï¼Œåç§°ä»¥<code>bak_</code>å¼€å¤´ã€‚ä¸­é—´è¡¨å’Œå¤‡ä»½è¡¨å®šæœŸæ¸…ç†ã€‚</p></li><li><p>ã€ç¤ºèŒƒã€‘ä¸€ä¸ªè¾ƒä¸ºè§„èŒƒçš„å»ºè¡¨è¯­å¥ï¼š</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user_info ( </span><br><span class="line">    `id` int unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;è‡ªå¢ä¸»é”®&#x27;, </span><br><span class="line">    `user_id` bigint(11) NOT NULL COMMENT &#x27;ç”¨æˆ·id&#x27;, </span><br><span class="line">    `username` varchar(45) NOT NULL COMMENT &#x27;çœŸå®å§“å&#x27;, </span><br><span class="line">    `email` varchar(30) NOT NULL COMMENT &#x27;ç”¨æˆ·é‚®ç®±&#x27;, </span><br><span class="line">    `nickname` varchar(45) NOT NULL COMMENT &#x27;æ˜µç§°&#x27;, </span><br><span class="line">    `birthday` date NOT NULL COMMENT &#x27;ç”Ÿæ—¥&#x27;, </span><br><span class="line">    `sex` tinyint(4) DEFAULT &#x27;0&#x27; COMMENT &#x27;æ€§åˆ«&#x27;, </span><br><span class="line">    `short_introduce` varchar(150) DEFAULT NULL COMMENT &#x27;ä¸€å¥è¯ä»‹ç»è‡ªå·±ï¼Œæœ€å¤š50ä¸ªæ±‰å­—&#x27;, </span><br><span class="line">    `user_resume` varchar(300) NOT NULL COMMENT &#x27;ç”¨æˆ·æäº¤çš„ç®€å†å­˜æ”¾åœ°å€&#x27;, </span><br><span class="line">    `user_register_ip` int NOT NULL COMMENT &#x27;ç”¨æˆ·æ³¨å†Œæ—¶çš„æºip&#x27;, </span><br><span class="line">    `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;, </span><br><span class="line">    `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &#x27;ä¿®æ”¹æ—¶é—´&#x27;, </span><br><span class="line">    `user_review_status` tinyint NOT NULL COMMENT &#x27;ç”¨æˆ·èµ„æ–™å®¡æ ¸çŠ¶æ€ï¼Œ1ä¸ºé€šè¿‡ï¼Œ2ä¸ºå®¡æ ¸ä¸­ï¼Œ3ä¸ºæœª é€šè¿‡ï¼Œ4ä¸ºè¿˜æœªæäº¤å®¡æ ¸&#x27;,</span><br><span class="line">    PRIMARY KEY (`id`), </span><br><span class="line">    UNIQUE KEY `uniq_user_id` (`user_id`), </span><br><span class="line">    KEY `idx_username`(`username`), </span><br><span class="line">    KEY `idx_create_time_status`(`create_time`,`user_review_status`) </span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#x27;ç½‘ç«™ç”¨æˆ·åŸºæœ¬ä¿¡æ¯&#x27;</span><br></pre></td></tr></table></figure><ol start="17"><li>ã€å»ºè®®ã€‘åˆ›å»ºè¡¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¯è§†åŒ–å·¥å…·ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¡¨ã€å­—æ®µç›¸å…³çš„çº¦å®šéƒ½èƒ½è®¾ç½®ä¸Šã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬é€šå¸¸å¾ˆå°‘è‡ªå·±å†™ DDL è¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å¯è§†åŒ–å·¥å…·æ¥åˆ›å»ºå’Œæ“ä½œæ•°æ®åº“å’Œæ•°æ®è¡¨ã€‚å¯è§†åŒ–å·¥å…·é™¤äº†æ–¹ä¾¿ï¼Œè¿˜èƒ½ç›´æ¥å¸®æˆ‘ä»¬å°†æ•°æ®åº“çš„ç»“æ„å®šä¹‰è½¬åŒ–æˆ SQL è¯­è¨€ï¼Œæ–¹ä¾¿æ•°æ®åº“å’Œæ•°æ®è¡¨ç»“æ„çš„å¯¼å‡ºå’Œå¯¼å…¥ã€‚</li></ol><h5 id="6-3-å…³äºç´¢å¼•"><strong>6.3</strong> <strong>å…³äºç´¢å¼•</strong></h5><ol><li><p>ã€å¼ºåˆ¶ã€‘InnoDBè¡¨å¿…é¡»ä¸»é”®ä¸ºid int/bigint auto_incrementï¼Œä¸”ä¸»é”®å€¼<code>ç¦æ­¢è¢«æ›´æ–°</code>ã€‚</p></li><li><p>ã€å¼ºåˆ¶ã€‘InnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“è¡¨ï¼Œç´¢å¼•ç±»å‹å¿…é¡»ä¸º<code>BTREE</code>ã€‚</p></li><li><p>ã€å»ºè®®ã€‘ä¸»é”®çš„åç§°ä»¥<code>pk_</code>å¼€å¤´ï¼Œå”¯ä¸€é”®ä»¥<code>uni_</code>æˆ–<code>uk_</code>å¼€å¤´ï¼Œæ™®é€šç´¢å¼•ä»¥<code>idx_</code>å¼€å¤´ï¼Œä¸€å¾‹ä½¿ç”¨å°å†™æ ¼å¼ï¼Œä»¥å­—æ®µçš„åç§°æˆ–ç¼©å†™ä½œä¸ºåç¼€ã€‚</p></li><li><p>ã€å»ºè®®ã€‘å¤šå•è¯ç»„æˆçš„columnnameï¼Œå–å‰å‡ ä¸ªå•è¯é¦–å­—æ¯ï¼ŒåŠ æœ«å•è¯ç»„æˆcolumn_nameã€‚å¦‚: sample è¡¨ member_id ä¸Šçš„ç´¢å¼•ï¼šidx_sample_midã€‚</p></li><li><p>ã€å»ºè®®ã€‘å•ä¸ªè¡¨ä¸Šçš„ç´¢å¼•ä¸ªæ•°<code>ä¸èƒ½è¶…è¿‡6ä¸ª</code>ã€‚</p></li><li><p>ã€å»ºè®®ã€‘åœ¨å»ºç«‹ç´¢å¼•æ—¶ï¼Œå¤šè€ƒè™‘å»ºç«‹<code>è”åˆç´¢å¼•</code>ï¼Œå¹¶æŠŠåŒºåˆ†åº¦æœ€é«˜çš„å­—æ®µæ”¾åœ¨æœ€å‰é¢ã€‚</p></li><li><p>ã€å»ºè®®ã€‘åœ¨å¤šè¡¨ JOIN çš„SQLé‡Œï¼Œä¿è¯è¢«é©±åŠ¨è¡¨çš„è¿æ¥åˆ—ä¸Šæœ‰ç´¢å¼•ï¼Œè¿™æ ·JOIN æ‰§è¡Œæ•ˆç‡æœ€é«˜ã€‚</p></li><li><p>ã€å»ºè®®ã€‘å»ºè¡¨æˆ–åŠ ç´¢å¼•æ—¶ï¼Œä¿è¯è¡¨é‡Œäº’ç›¸ä¸å­˜åœ¨<code>å†—ä½™ç´¢å¼•</code>ã€‚ æ¯”å¦‚ï¼šå¦‚æœè¡¨é‡Œå·²ç»å­˜åœ¨key(a,b)ï¼Œ åˆ™key(a)ä¸ºå†—ä½™ç´¢å¼•ï¼Œéœ€è¦åˆ é™¤ã€‚</p></li></ol><h5 id="6-4-SQLç¼–å†™"><strong>6.4 SQLç¼–å†™</strong></h5><ol><li><p>ã€å¼ºåˆ¶ã€‘ç¨‹åºç«¯SELECTè¯­å¥å¿…é¡»æŒ‡å®šå…·ä½“å­—æ®µåç§°ï¼Œç¦æ­¢å†™æˆ *ã€‚</p></li><li><p>ã€å»ºè®®ã€‘ç¨‹åºç«¯insertè¯­å¥æŒ‡å®šå…·ä½“å­—æ®µåç§°ï¼Œä¸è¦å†™æˆINSERT INTO t1 VALUES(â€¦)ã€‚</p></li><li><p>ã€å»ºè®®ã€‘é™¤é™æ€è¡¨æˆ–å°è¡¨ï¼ˆ100è¡Œä»¥å†…ï¼‰ï¼ŒDMLè¯­å¥å¿…é¡»æœ‰WHEREæ¡ä»¶ï¼Œä¸”ä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾ã€‚</p></li><li><p>ã€å»ºè®®ã€‘INSERT INTOâ€¦VALUES(XX),(XX),(XX)â€¦ è¿™é‡ŒXXçš„å€¼ä¸è¦è¶…è¿‡5000ä¸ªã€‚ å€¼è¿‡å¤šè™½ç„¶ä¸Šçº¿å¾ˆå¿«ï¼Œä½†ä¼šå¼•èµ·ä¸»ä»åŒæ­¥å»¶è¿Ÿã€‚</p></li><li><p>ã€å»ºè®®ã€‘SELECTè¯­å¥ä¸è¦ä½¿ç”¨UNIONï¼Œæ¨èä½¿ç”¨UNION ALLï¼Œå¹¶ä¸”UNIONå­å¥ä¸ªæ•°é™åˆ¶åœ¨5ä¸ªä»¥å†…ã€‚</p></li><li><p>ã€å»ºè®®ã€‘çº¿ä¸Šç¯å¢ƒï¼Œå¤šè¡¨ JOIN ä¸è¦è¶…è¿‡5ä¸ªè¡¨ã€‚</p></li><li><p>ã€å»ºè®®ã€‘å‡å°‘ä½¿ç”¨ORDER BYï¼Œå’Œä¸šåŠ¡æ²Ÿé€šèƒ½ä¸æ’åºå°±ä¸æ’åºï¼Œæˆ–å°†æ’åºæ”¾åˆ°ç¨‹åºç«¯å»åšã€‚ORDER BYã€GROUP BYã€DISTINCT è¿™äº›è¯­å¥è¾ƒä¸ºè€—è´¹CPUï¼Œæ•°æ®åº“çš„CPUèµ„æºæ˜¯æå…¶å®è´µçš„ã€‚</p></li><li><p>ã€å»ºè®®ã€‘åŒ…å«äº†ORDER BYã€GROUP BYã€DISTINCT è¿™äº›æŸ¥è¯¢çš„è¯­å¥ï¼ŒWHERE æ¡ä»¶è¿‡æ»¤å‡ºæ¥çš„ç»“æœé›†è¯·ä¿æŒåœ¨1000è¡Œä»¥å†…ï¼Œå¦åˆ™SQLä¼šå¾ˆæ…¢ã€‚</p></li><li><p>ã€å»ºè®®ã€‘å¯¹å•è¡¨çš„å¤šæ¬¡alteræ“ä½œå¿…é¡»åˆå¹¶ä¸ºä¸€æ¬¡ã€‚å¯¹äºè¶…è¿‡100Wè¡Œçš„å¤§è¡¨è¿›è¡Œalter tableï¼Œå¿…é¡»ç»è¿‡DBAå®¡æ ¸ï¼Œå¹¶åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œï¼Œå¤šä¸ªalteréœ€æ•´åˆåœ¨ä¸€èµ·ã€‚ å› ä¸ºalter tableä¼šäº§ç”Ÿ<code>è¡¨é”</code>ï¼ŒæœŸé—´é˜»å¡å¯¹äºè¯¥è¡¨çš„æ‰€æœ‰å†™å…¥ï¼Œå¯¹äºä¸šåŠ¡å¯èƒ½ä¼šäº§ç”Ÿæå¤§å½±å“ã€‚</p></li><li><p>ã€å»ºè®®ã€‘æ‰¹é‡æ“ä½œæ•°æ®æ—¶ï¼Œéœ€è¦æ§åˆ¶äº‹åŠ¡å¤„ç†é—´éš”æ—¶é—´ï¼Œè¿›è¡Œå¿…è¦çš„sleepã€‚</p></li><li><p>ã€å»ºè®®ã€‘äº‹åŠ¡é‡ŒåŒ…å«SQLä¸è¶…è¿‡5ä¸ªã€‚å› ä¸ºè¿‡é•¿çš„äº‹åŠ¡ä¼šå¯¼è‡´é”æ•°æ®è¾ƒä¹…ï¼ŒMySQLå†…éƒ¨ç¼“å­˜ã€è¿æ¥æ¶ˆè€—è¿‡å¤šç­‰é—®é¢˜ã€‚</p></li><li><p>ã€å»ºè®®ã€‘äº‹åŠ¡é‡Œæ›´æ–°è¯­å¥å°½é‡åŸºäºä¸»é”®æˆ–UNIQUE KEYï¼Œå¦‚UPDATEâ€¦ WHERE id=XX;å¦åˆ™ä¼šäº§ç”Ÿé—´éš™é”ï¼Œå†…éƒ¨æ‰©å¤§é”å®šèŒƒå›´ï¼Œå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™ï¼Œäº§ç”Ÿæ­»é”ã€‚</p></li></ol>]]></content>
    
    
    <summary type="html">ã€èŒƒ å¼ã€åèŒƒå¼åŒ–ã€BCNF(å·´æ–¯èŒƒå¼)ã€ERæ¨¡å‹ã€æ•°æ®è¡¨çš„è®¾è®¡åŸåˆ™ã€æ•°æ®åº“å¯¹è±¡ç¼–å†™å»ºè®®ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬10ç«  ç´¢å¼•ä¼˜åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–</title>
    <link href="https://angus9823.github.io/posts/92b02ef1.html"/>
    <id>https://angus9823.github.io/posts/92b02ef1.html</id>
    <published>2023-04-18T07:36:31.000Z</published>
    <updated>2023-04-18T08:25:56.531Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬10ç« -ç´¢å¼•ä¼˜åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–">ç¬¬10ç«  ç´¢å¼•ä¼˜åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–</h3><h4 id="1-ç´¢å¼•å¤±æ•ˆæ¡ˆä¾‹"><strong>1.</strong> <strong>ç´¢å¼•å¤±æ•ˆæ¡ˆä¾‹</strong></h4><p>MySQLä¸­<code>æé«˜æ€§èƒ½</code>çš„ä¸€ä¸ªæœ€æœ‰æ•ˆçš„æ–¹å¼æ˜¯å¯¹æ•°æ®è¡¨<code>è®¾è®¡åˆç†çš„ç´¢å¼•</code>ã€‚ç´¢å¼•æä¾›äº†è®¿é—®é«˜æ•ˆæ•°æ®çš„æ–¹æ³•ï¼Œå¹¶ä¸”åŠ å¿«æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œå› æ­¤ç´¢å¼•å¯¹æŸ¥è¯¢çš„é€Ÿåº¦æœ‰ç€è‡³å…³é‡è¦çš„å½±å“ã€‚</p><ul><li>ä½¿ç”¨ç´¢å¼•å¯ä»¥<code>å¿«é€Ÿåœ°å®šä½</code>è¡¨ä¸­çš„æŸæ¡è®°å½•ï¼Œä»è€Œæé«˜æ•°æ®åº“æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œæé«˜æ•°æ®åº“çš„æ€§èƒ½ã€‚</li><li>å¦‚æœæŸ¥è¯¢æ—¶æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼ŒæŸ¥è¯¢è¯­å¥å°±ä¼š<code>æ‰«æè¡¨ä¸­çš„æ‰€æœ‰è®°å½•</code>ã€‚åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·æŸ¥è¯¢çš„é€Ÿåº¦ä¼šå¾ˆæ…¢ã€‚</li></ul><p>å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ï¼ˆé»˜è®¤ï¼‰é‡‡ç”¨<code>B+æ ‘</code>æ¥æ„å»ºç´¢å¼•ã€‚åªæ˜¯ç©ºé—´åˆ—ç±»å‹çš„ç´¢å¼•ä½¿ç”¨<code>R-æ ‘</code>ï¼Œå¹¶ä¸”MEMORYè¡¨è¿˜æ”¯æŒ<code>hashç´¢å¼•</code>ã€‚</p><p>å…¶å®ï¼Œç”¨ä¸ç”¨ç´¢å¼•ï¼Œæœ€ç»ˆéƒ½æ˜¯ä¼˜åŒ–å™¨è¯´äº†ç®—ã€‚ä¼˜åŒ–å™¨æ˜¯åŸºäºä»€ä¹ˆçš„ä¼˜åŒ–å™¨ï¼ŸåŸºäº<code>costå¼€é”€(CostBaseOptimizer)</code>ï¼Œå®ƒä¸æ˜¯åŸºäº<code>è§„åˆ™(Rule-BasedOptimizer)</code>ï¼Œä¹Ÿä¸æ˜¯åŸºäº<code>è¯­ä¹‰</code>ã€‚æ€ä¹ˆæ ·å¼€é”€å°å°±æ€ä¹ˆæ¥ã€‚å¦å¤–ï¼Œ<strong>SQLè¯­å¥æ˜¯å¦ä½¿ç”¨ç´¢å¼•ï¼Œè·Ÿæ•°æ®åº“ç‰ˆæœ¬ã€æ•°æ®é‡ã€æ•°æ®é€‰æ‹©åº¦éƒ½æœ‰å…³ç³»ã€‚</strong></p><h5 id="1-1-å…¨å€¼åŒ¹é…æˆ‘æœ€çˆ±"><strong>1.1</strong> <strong>å…¨å€¼åŒ¹é…æˆ‘æœ€çˆ±</strong></h5><h5 id="1-2-æœ€ä½³å·¦å‰ç¼€æ³•åˆ™"><strong>1.2</strong> <strong>æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</strong></h5><p>åœ¨MySQLå»ºç«‹è”åˆç´¢å¼•æ—¶ä¼šéµå®ˆæœ€ä½³å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œå³æœ€å·¦ä¼˜å…ˆï¼Œåœ¨æ£€ç´¢æ•°æ®æ—¶ä»è”åˆç´¢å¼•çš„æœ€å·¦è¾¹å¼€å§‹åŒ¹é…ã€‚</p><p>ç»“è®ºï¼šMySQLå¯ä»¥ä¸ºå¤šä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•å¯ä»¥åŒ…æ‹¬16ä¸ªå­—æ®µã€‚å¯¹äºå¤šåˆ—ç´¢å¼•ï¼Œ**è¿‡æ»¤æ¡ä»¶è¦ä½¿ç”¨ç´¢å¼•å¿…é¡»æŒ‰ç…§ç´¢å¼•å»ºç«‹æ—¶çš„é¡ºåºï¼Œä¾æ¬¡æ»¡è¶³ï¼Œä¸€æ—¦è·³è¿‡æŸä¸ªå­—æ®µï¼Œç´¢å¼•åé¢çš„å­—æ®µéƒ½æ— æ³•è¢«ä½¿ç”¨ã€‚**å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨è¿™äº›å­—æ®µä¸­ç¬¬1ä¸ªå­—æ®µæ—¶ï¼Œå¤šåˆ—ï¼ˆæˆ–è”åˆï¼‰ç´¢å¼•ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p><h5 id="1-3-ä¸»é”®æ’å…¥é¡ºåº"><strong>1.3</strong> <strong>ä¸»é”®æ’å…¥é¡ºåº</strong></h5><p>å¯¹äºä¸€ä¸ªä½¿ç”¨<code>InnoDB</code>å­˜å‚¨å¼•æ“çš„è¡¨æ¥è¯´ï¼Œåœ¨æˆ‘ä»¬æ²¡æœ‰æ˜¾ç¤ºçš„åˆ›å»ºç´¢å¼•æ—¶ï¼Œè¡¨ä¸­çš„æ•°æ®å®é™…ä¸Šéƒ½æ˜¯å­˜å‚¨åœ¨<code>èšç°‡ç´¢å¼•</code>çš„å¶å­èŠ‚ç‚¹çš„ã€‚è€Œè®°å½•åˆå­˜å‚¨åœ¨æ•°æ®é¡µä¸­çš„ï¼Œæ•°æ®é¡µå’Œè®°å½•åˆæ˜¯æŒ‰ç…§è®°å½•<code>ä¸»é”®å€¼ä»å°åˆ°å¤§</code>çš„é¡ºåºè¿›è¡Œæ’åºï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬<code>æ’å…¥</code>çš„è®°å½•çš„<code>ä¸»é”®å€¼æ˜¯ä¾æ¬¡å¢å¤§</code>çš„è¯ï¼Œé‚£æˆ‘ä»¬æ¯æ’æ»¡ä¸€ä¸ªæ•°æ®é¡µå°±æ¢åˆ°ä¸‹ä¸€ä¸ªæ•°æ®é¡µç»§ç»­æ’ï¼Œè€Œå¦‚æœæˆ‘ä»¬æ’å…¥çš„<code>ä¸»é”®å€¼å¿½å°å¿½å¤§</code>çš„è¯ï¼Œåˆ™å¯èƒ½ä¼šé€ æˆ<code>é¡µé¢åˆ†è£‚</code>å’Œ<code>è®°å½•ç§»ä½</code>ã€‚</p><h5 id="1-4-è®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢-è‡ªåŠ¨æˆ–æ‰‹åŠ¨-å¯¼è‡´ç´¢å¼•å¤±æ•ˆ"><strong>1.4</strong> <strong>è®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢(è‡ªåŠ¨æˆ–æ‰‹åŠ¨)å¯¼è‡´ç´¢å¼•å¤±æ•ˆ</strong></h5><h5 id="1-5-ç±»å‹è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆ"><strong>1.5</strong> <strong>ç±»å‹è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆ</strong></h5><h5 id="1-6-èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—ç´¢å¼•å¤±æ•ˆ"><strong>1.6</strong> <strong>èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—ç´¢å¼•å¤±æ•ˆ</strong></h5><blockquote><p>åº”ç”¨å¼€å‘ä¸­èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šé‡‘é¢æŸ¥è¯¢ï¼Œæ—¥æœŸæŸ¥è¯¢å¾€å¾€éƒ½æ˜¯èŒƒå›´æŸ¥è¯¢ã€‚åº”å°†æŸ¥è¯¢æ¡ä»¶æ”¾ç½®whereè¯­å¥æœ€åã€‚ï¼ˆåˆ›å»ºçš„è”åˆç´¢å¼•ä¸­ï¼ŒåŠ¡å¿…æŠŠèŒƒå›´æ¶‰åŠåˆ°çš„å­—æ®µå†™åœ¨æœ€åï¼‰</p></blockquote><h5 id="1-7-ä¸ç­‰äº-æˆ–è€…-ç´¢å¼•å¤±æ•ˆ"><strong>1.7</strong> <strong>ä¸ç­‰äº(!= æˆ–è€…&lt;&gt;)ç´¢å¼•å¤±æ•ˆ</strong></h5><h5 id="1-8-is-nullå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œis-not-nullæ— æ³•ä½¿ç”¨ç´¢å¼•"><strong>1.8 is nullå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œis not nullæ— æ³•ä½¿ç”¨ç´¢å¼•</strong></h5><blockquote><p>ç»“è®ºï¼šæœ€å¥½åœ¨è®¾è®¡æ•°æ®è¡¨çš„æ—¶å€™å°±å°†<code>å­—æ®µè®¾ç½®ä¸º NOT NULL çº¦æŸ</code>ï¼Œæ¯”å¦‚ä½ å¯ä»¥å°†INTç±»å‹çš„å­—æ®µï¼Œé»˜è®¤å€¼è®¾ç½®ä¸º0ã€‚å°†å­—ç¬¦ç±»å‹çš„é»˜è®¤å€¼è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²(â€˜â€™)</p><p>æ‹“å±•ï¼šåŒç†ï¼Œåœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨<code>not like</code>ä¹Ÿæ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œå¯¼è‡´å…¨è¡¨æ‰«æ</p></blockquote><h5 id="1-9-likeä»¥é€šé…ç¬¦-å¼€å¤´ç´¢å¼•å¤±æ•ˆ"><strong>1.9 likeä»¥é€šé…ç¬¦%å¼€å¤´ç´¢å¼•å¤±æ•ˆ</strong></h5><blockquote><p>æ‹“å±•ï¼šAlibabaã€ŠJavaå¼€å‘æ‰‹å†Œã€‹</p><p>ã€å¼ºåˆ¶ã€‘é¡µé¢æœç´¢ä¸¥ç¦å·¦æ¨¡ç³Šæˆ–è€…å…¨æ¨¡ç³Šï¼Œå¦‚æœéœ€è¦è¯·èµ°æœç´¢å¼•æ“æ¥è§£å†³ã€‚</p></blockquote><h5 id="1-10-OR-å‰åå­˜åœ¨éç´¢å¼•çš„åˆ—ï¼Œç´¢å¼•å¤±æ•ˆ"><strong>1.10 OR</strong> <strong>å‰åå­˜åœ¨éç´¢å¼•çš„åˆ—ï¼Œç´¢å¼•å¤±æ•ˆ</strong></h5><p>åœ¨WHEREå­å¥ä¸­ï¼Œå¦‚æœåœ¨ORå‰çš„æ¡ä»¶åˆ—è¿›è¡Œäº†ç´¢å¼•ï¼Œè€Œåœ¨ORåçš„æ¡ä»¶åˆ—æ²¡æœ‰è¿›è¡Œç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•ä¼šå¤±æ•ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ORå‰åçš„ä¸¤ä¸ªæ¡ä»¶ä¸­çš„åˆ—éƒ½æ˜¯ç´¢å¼•æ—¶ï¼ŒæŸ¥è¯¢ä¸­æ‰ä½¿ç”¨ç´¢å¼•ã€‚</strong></p><h5 id="1-11-æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨utf8mb4"><strong>1.11</strong> <strong>æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨utf8mb4</strong></h5><p>ç»Ÿä¸€ä½¿ç”¨utf8mb4( 5.5.3ç‰ˆæœ¬ä»¥ä¸Šæ”¯æŒ)å…¼å®¹æ€§æ›´å¥½ï¼Œç»Ÿä¸€å­—ç¬¦é›†å¯ä»¥é¿å…ç”±äºå­—ç¬¦é›†è½¬æ¢äº§ç”Ÿçš„ä¹±ç ã€‚ä¸åŒçš„<code>å­—ç¬¦é›†</code>è¿›è¡Œæ¯”è¾ƒå‰éœ€è¦è¿›è¡Œ<code>è½¬æ¢</code>ä¼šé€ æˆç´¢å¼•å¤±æ•ˆã€‚</p><h4 id="2-å…³è”æŸ¥è¯¢ä¼˜åŒ–"><strong>2.</strong> <strong>å…³è”æŸ¥è¯¢ä¼˜åŒ–</strong></h4><blockquote><p>ç»“è®º1ï¼šå¯¹äºå†…è¿æ¥æ¥è¯´ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å¯ä»¥å†³å®šè°æ¥ä½œä¸ºé©±åŠ¨è¡¨ï¼Œè°ä½œä¸ºè¢«é©±åŠ¨è¡¨å‡ºç°</p><p>ç»“è®º2ï¼šå¯¹äºå†…è¿æ¥æ¥è®²ï¼Œå¦‚æœè¡¨çš„è¿æ¥æ¡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªå­—æ®µæœ‰ç´¢å¼•ï¼Œåˆ™æœ‰ç´¢å¼•çš„å­—æ®µæ‰€åœ¨çš„è¡¨ä¼šè¢«ä½œä¸ºè¢«é©±åŠ¨è¡¨</p><p>ç»“è®º3ï¼šå¯¹äºå†…è¿æ¥æ¥è¯´ï¼Œåœ¨ä¸¤ä¸ªè¡¨çš„è¿æ¥æ¡ä»¶éƒ½å­˜åœ¨ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ã€‚<code>å°è¡¨é©±åŠ¨å¤§è¡¨</code></p></blockquote><h5 id="2-1-Index-Nested-Loop-Joinï¼ˆç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ï¼‰">2.1 Index Nested-Loop Joinï¼ˆç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ï¼‰</h5><p>Index Nested-Loop Joinå…¶ä¼˜åŒ–çš„æ€è·¯ä¸»è¦æ˜¯ä¸ºäº†<code>å‡å°‘å†…å±‚è¡¨æ•°æ®çš„åŒ¹é…æ¬¡æ•°</code>ï¼Œæ‰€ä»¥è¦æ±‚è¢«é©±åŠ¨è¡¨ä¸Šå¿…é¡»<code>æœ‰ç´¢å¼•</code>æ‰è¡Œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204011826671.png" alt="image-20220401182649509"></p><h5 id="2-2-Block-Nested-Loop-Joinï¼ˆå—åµŒå¥—å¾ªç¯è¿æ¥ï¼‰">2.2 Block Nested-Loop Joinï¼ˆå—åµŒå¥—å¾ªç¯è¿æ¥ï¼‰</h5><p>å¦‚æœå­˜åœ¨ç´¢å¼•ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨indexçš„æ–¹å¼è¿›è¡Œjoinï¼Œå¦‚æœjoinçš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œè¢«é©±åŠ¨è¡¨è¦æ‰«æçš„æ¬¡æ•°å¤ªå¤šäº†ã€‚æ¯æ¬¡è®¿é—®è¢«é©±åŠ¨è¡¨ï¼Œå…¶è¡¨ä¸­çš„è®°å½•éƒ½ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åå†ä»é©±åŠ¨è¡¨ä¸­å–ä¸€æ¡ä¸å…¶åŒ¹é…ï¼ŒåŒ¹é…ç»“æŸåæ¸…é™¤å†…å­˜ï¼Œç„¶åå†ä»é©±åŠ¨è¡¨ä¸­åŠ è½½ä¸€æ¡è®°å½•ï¼Œç„¶åæŠŠè¢«é©±åŠ¨è¡¨çš„è®°å½•å†åŠ è½½åˆ°å†…å­˜åŒ¹é…ï¼Œè¿™æ ·å‘¨è€Œå¤å§‹ï¼Œå¤§å¤§å¢åŠ äº†IOçš„æ¬¡æ•°ã€‚ä¸ºäº†å‡å°‘è¢«é©±åŠ¨è¡¨çš„IOæ¬¡æ•°ï¼Œå°±å‡ºç°äº†Block Nested-Loop Joinçš„æ–¹å¼ã€‚</p><p>ä¸å†æ˜¯é€æ¡è·å–é©±åŠ¨è¡¨çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸€å—ä¸€å—çš„è·å–ï¼Œå¼•å…¥äº†<code>join bufferç¼“å†²åŒº</code>ï¼Œå°†é©±åŠ¨è¡¨joinç›¸å…³çš„éƒ¨åˆ†æ•°æ®åˆ—ï¼ˆå¤§å°å—join bufferçš„é™åˆ¶ï¼‰ç¼“å­˜åˆ°join bufferä¸­ï¼Œç„¶åå…¨è¡¨æ‰«æè¢«é©±åŠ¨è¡¨ï¼Œè¢«é©±åŠ¨è¡¨çš„æ¯ä¸€æ¡è®°å½•ä¸€æ¬¡æ€§å’Œjoin bufferä¸­çš„æ‰€æœ‰é©±åŠ¨è¡¨è®°å½•è¿›è¡ŒåŒ¹é…ï¼ˆå†…å­˜ä¸­æ“ä½œï¼‰ï¼Œå°†ç®€å•åµŒå¥—å¾ªç¯ä¸­çš„å¤šæ¬¡æ¯”è¾ƒåˆå¹¶æˆä¸€æ¬¡ï¼Œé™ä½äº†è¢«é©±åŠ¨è¡¨çš„è®¿é—®é¢‘ç‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204011833000.png" alt="image-20220401183344880"></p><h5 id="2-3-Hash-Join">2.3 Hash Join</h5><p><strong>ä»MySQLçš„8.0.20ç‰ˆæœ¬å¼€å§‹å°†åºŸå¼ƒBNLJï¼Œå› ä¸ºä»MySQL8.0.18ç‰ˆæœ¬å¼€å§‹å°±åŠ å…¥äº†hash joiné»˜è®¤éƒ½ä¼šä½¿ç”¨hash join</strong></p><ul><li>Nested Loopï¼šå¯¹äºè¢«è¿æ¥çš„æ•°æ®å­é›†è¾ƒå°çš„æƒ…å†µä¸‹ï¼ŒNested Loopæ˜¯ä¸ªè¾ƒå¥½çš„é€‰æ‹©ã€‚</li><li>Hash Joinæ˜¯åš<code>å¤§æ•°æ®é›†è¿æ¥</code>æ—¶çš„å¸¸ç”¨æ–¹å¼ï¼Œä¼˜åŒ–å™¨ä½¿ç”¨ä¸¤ä¸ªè¡¨ä¸­è¾ƒå°ï¼ˆç›¸å¯¹è¾ƒå°ï¼‰çš„è¡¨åˆ©ç”¨Join Keyåœ¨å†…å­˜ä¸­å»ºç«‹<code>æ•£åˆ—å€¼</code>ï¼Œç„¶åæ‰«æè¾ƒå¤§çš„è¡¨å¹¶æ¢æµ‹æ•£åˆ—å€¼ï¼Œæ‰¾å‡ºä¸Hashè¡¨åŒ¹é…çš„è¡Œã€‚<ul><li>è¿™ç§æ–¹å¼é€‚ç”¨äºè¾ƒå°çš„è¡¨å®Œå…¨å¯ä»¥æ”¾å…¥å†…å­˜ä¸­çš„æƒ…å†µï¼Œè¿™æ ·æ€»æˆæœ¬å°±æ˜¯è®¿é—®ä¸¤ä¸ªè¡¨çš„æˆæœ¬ä¹‹å’Œã€‚</li><li>åœ¨è¡¨å¾ˆå¤§çš„æƒ…å†µä¸‹å¹¶ä¸èƒ½å®Œå…¨æ”¾å…¥å†…å­˜ï¼Œè¿™æ—¶ä¼˜åŒ–å™¨ä¼šå°†å®ƒåˆ†å‰²æˆ<code>è‹¥å¹²ä¸åŒçš„åˆ†åŒº</code>ï¼Œä¸èƒ½æ”¾å…¥å†…å­˜çš„éƒ¨åˆ†å°±æŠŠè¯¥åˆ†åŒºå†™å…¥ç£ç›˜çš„ä¸´æ—¶æ®µï¼Œæ­¤æ—¶è¦æ±‚æœ‰è¾ƒå¤§çš„ä¸´æ—¶æ®µä»è€Œå°½é‡æé«˜I/Oçš„æ€§èƒ½ã€‚</li><li>å®ƒèƒ½å¤Ÿå¾ˆå¥½çš„å·¥ä½œäºæ²¡æœ‰ç´¢å¼•çš„å¤§è¡¨å’Œå¹¶è¡ŒæŸ¥è¯¢çš„ç¯å¢ƒä¸­ï¼Œå¹¶æä¾›æœ€å¥½çš„æ€§èƒ½ã€‚Hash Joinåªèƒ½åº”ç”¨äºç­‰å€¼è¿æ¥ï¼Œè¿™æ˜¯ç”±Hashçš„ç‰¹ç‚¹å†³å®šçš„ã€‚</li></ul></li></ul><h4 id="3-å­æŸ¥è¯¢ä¼˜åŒ–"><strong>3.</strong> <strong>å­æŸ¥è¯¢ä¼˜åŒ–</strong></h4><p><strong>å­æŸ¥è¯¢æ˜¯</strong> <strong>MySQL</strong> <strong>çš„ä¸€é¡¹é‡è¦çš„åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª</strong> <strong>SQL</strong> **è¯­å¥å®ç°æ¯”è¾ƒå¤æ‚çš„æŸ¥è¯¢ã€‚ä½†æ˜¯ï¼Œå­æŸ¥è¯¢çš„æ‰§è¡Œæ•ˆç‡ä¸é«˜ã€‚**åŸå› ï¼š</p><p>â‘  æ‰§è¡Œå­æŸ¥è¯¢æ—¶ï¼ŒMySQLéœ€è¦ä¸ºå†…å±‚æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢ç»“æœ<code>å»ºç«‹ä¸€ä¸ªä¸´æ—¶è¡¨</code>ï¼Œç„¶åå¤–å±‚æŸ¥è¯¢è¯­å¥ä»ä¸´æ—¶è¡¨ä¸­æŸ¥è¯¢è®°å½•ã€‚æŸ¥è¯¢å®Œæ¯•åï¼Œå†<code>æ’¤é”€è¿™äº›ä¸´æ—¶è¡¨</code>ã€‚è¿™æ ·ä¼šæ¶ˆè€—è¿‡å¤šçš„CPUå’ŒIOèµ„æºï¼Œäº§ç”Ÿå¤§é‡çš„æ…¢æŸ¥è¯¢ã€‚</p><p>â‘¡ å­æŸ¥è¯¢çš„ç»“æœé›†å­˜å‚¨çš„ä¸´æ—¶è¡¨ï¼Œä¸è®ºæ˜¯å†…å­˜ä¸´æ—¶è¡¨è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨éƒ½<code>ä¸ä¼šå­˜åœ¨ç´¢å¼•</code>ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ä¼šå—åˆ°ä¸€å®šçš„å½±å“ã€‚</p><p>â‘¢ å¯¹äºè¿”å›ç»“æœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ä¹Ÿå°±è¶Šå¤§ã€‚</p><p>**åœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¿æ¥ï¼ˆJOINï¼‰æŸ¥è¯¢æ¥æ›¿ä»£å­æŸ¥è¯¢ã€‚**è¿æ¥æŸ¥è¯¢<code>ä¸éœ€è¦å»ºç«‹ä¸´æ—¶è¡¨</code>ï¼Œå…¶<code>é€Ÿåº¦æ¯”å­æŸ¥è¯¢è¦å¿«</code>ï¼Œå¦‚æœæŸ¥è¯¢ä¸­ä½¿ç”¨ç´¢å¼•çš„è¯ï¼Œæ€§èƒ½å°±ä¼šæ›´å¥½ã€‚</p><blockquote><p>ç»“è®ºï¼šå°½é‡ä¸è¦ä½¿ç”¨NOT IN æˆ–è€… NOT EXISTSï¼Œç”¨LEFT JOIN xxx ON xx WHERE xx IS NULLæ›¿ä»£</p></blockquote><h4 id="4-æ’åºä¼˜åŒ–"><strong>4.</strong> <strong>æ’åºä¼˜åŒ–</strong></h4><ol><li><p>SQL ä¸­ï¼Œå¯ä»¥åœ¨ WHERE å­å¥å’Œ ORDER BY å­å¥ä¸­ä½¿ç”¨ç´¢å¼•ï¼Œç›®çš„æ˜¯åœ¨ WHERE å­å¥ä¸­ <code>é¿å…å…¨è¡¨æ‰«æ</code>ï¼Œåœ¨ ORDER BY å­å¥<code>é¿å…ä½¿ç”¨ FileSort æ’åº</code>ã€‚å½“ç„¶ï¼ŒæŸäº›æƒ…å†µä¸‹å…¨è¡¨æ‰«æï¼Œæˆ–è€… FileSort æ’åºä¸ä¸€å®šæ¯”ç´¢å¼•æ…¢ã€‚ä½†æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦é¿å…ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p></li><li><p>å°½é‡ä½¿ç”¨ Index å®Œæˆ ORDER BY æ’åºã€‚å¦‚æœ WHERE å’Œ ORDER BY åé¢æ˜¯ç›¸åŒçš„åˆ—å°±ä½¿ç”¨å•ç´¢å¼•åˆ—ï¼›å¦‚æœä¸åŒå°±ä½¿ç”¨è”åˆç´¢å¼•ã€‚</p></li><li><p>æ— æ³•ä½¿ç”¨ Index æ—¶ï¼Œéœ€è¦å¯¹ FileSort æ–¹å¼è¿›è¡Œè°ƒä¼˜ã€‚</p></li></ol><h4 id="5-GROUP-BYä¼˜åŒ–"><strong>5. GROUP BYä¼˜åŒ–</strong></h4><ul><li>group by ä½¿ç”¨ç´¢å¼•çš„åŸåˆ™å‡ ä¹è·Ÿorder byä¸€è‡´ ï¼Œgroup by å³ä½¿æ²¡æœ‰è¿‡æ»¤æ¡ä»¶ç”¨åˆ°ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç´¢å¼•ã€‚</li><li>group by å…ˆæ’åºå†åˆ†ç»„ï¼Œéµç…§ç´¢å¼•å»ºçš„æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</li><li>å½“æ— æ³•ä½¿ç”¨ç´¢å¼•åˆ—ï¼Œå¯ä»¥å¢å¤§<code>max_length_for_sort_data</code>å’Œ<code>sort_buffer_size</code>å‚æ•°çš„è®¾ç½®</li><li>whereæ•ˆç‡é«˜äºhavingï¼Œèƒ½å†™åœ¨whereé™å®šçš„æ¡ä»¶å°±ä¸è¦å†™åœ¨havingä¸­äº†</li><li>å‡å°‘ä½¿ç”¨order byï¼Œå’Œä¸šåŠ¡æ²Ÿé€šèƒ½ä¸æ’åºå°±ä¸æ’åºï¼Œæˆ–å°†æ’åºæ”¾åˆ°ç¨‹åºç«¯å»åšã€‚Order byã€group byã€distinctè¿™äº›è¯­å¥è¾ƒä¸ºè€—è´¹CPUï¼Œæ•°æ®åº“çš„CPUèµ„æºæ˜¯æå…¶å®è´µçš„ã€‚</li><li>åŒ…å«äº†order byã€group byã€distinctè¿™äº›æŸ¥è¯¢çš„è¯­å¥ï¼Œwhereæ¡ä»¶è¿‡æ»¤å‡ºæ¥çš„ç»“æœé›†è¯·ä¿æŒåœ¨1000è¡Œä»¥å†…ï¼Œå¦åˆ™SQLä¼šå¾ˆæ…¢ã€‚</li></ul><h4 id="6-ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢"><strong>6.</strong> <strong>ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢</strong></h4><p><strong>ä¼˜åŒ–æ€è·¯ä¸€</strong></p><p>åœ¨ç´¢å¼•ä¸Šå®Œæˆæ’åºåˆ†é¡µæ“ä½œï¼Œæœ€åæ ¹æ®ä¸»é”®å…³è”å›åŸè¡¨æŸ¥è¯¢æ‰€éœ€è¦çš„å…¶ä»–åˆ—å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student t,(SELECT id FROM student ORDER BY id LIMIT 2000000,10) a</span><br><span class="line">WHERE t.id = a.id;</span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–æ€è·¯äºŒ</strong></p><p>è¯¥æ–¹æ¡ˆé€‚ç”¨äºä¸»é”®è‡ªå¢çš„è¡¨ï¼Œå¯ä»¥æŠŠLimit æŸ¥è¯¢è½¬æ¢æˆæŸä¸ªä½ç½®çš„æŸ¥è¯¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student WHERE id &gt; 2000000 LIMIT 10;</span><br></pre></td></tr></table></figure><h4 id="7-ä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼•"><strong>7.</strong> <strong>ä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼•</strong></h4><h5 id="7-1-ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ"><strong>7.1</strong> <strong>ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•ï¼Ÿ</strong></h5><p><strong>ç†è§£æ–¹å¼ä¸€</strong>ï¼šç´¢å¼•æ˜¯é«˜æ•ˆæ‰¾åˆ°è¡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ä¸€èˆ¬æ•°æ®åº“ä¹Ÿèƒ½ä½¿ç”¨ç´¢å¼•æ‰¾åˆ°ä¸€ä¸ªåˆ—çš„æ•°æ®ï¼Œå› æ­¤å®ƒä¸å¿…è¯»å–æ•´ä¸ªè¡Œã€‚æ¯•ç«Ÿç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨äº†å®ƒä»¬ç´¢å¼•çš„æ•°æ®ï¼›å½“èƒ½é€šè¿‡è¯»å–ç´¢å¼•å°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„æ•°æ®ï¼Œé‚£å°±ä¸éœ€è¦è¯»å–è¡Œäº†ã€‚<strong>ä¸€ä¸ªç´¢å¼•åŒ…å«äº†æ»¡è¶³æŸ¥è¯¢ç»“æœçš„æ•°æ®å°±å«åšè¦†ç›–ç´¢å¼•ã€‚</strong></p><p><strong>ç†è§£æ–¹å¼äºŒ</strong>ï¼šéèšç°‡å¤åˆç´¢å¼•çš„ä¸€ç§å½¢å¼ï¼Œå®ƒåŒ…æ‹¬åœ¨æŸ¥è¯¢é‡Œçš„SELECTã€JOINå’ŒWHEREå­å¥ç”¨åˆ°çš„æ‰€æœ‰åˆ—ï¼ˆå³å»ºç´¢å¼•çš„å­—æ®µæ­£å¥½æ˜¯è¦†ç›–æŸ¥è¯¢æ¡ä»¶ä¸­æ‰€æ¶‰åŠçš„å­—æ®µï¼‰ã€‚</p><p>ç®€å•è¯´å°±æ˜¯ï¼Œ<code>ç´¢å¼•åˆ—+ä¸»é”®</code>åŒ…å«<code>SELECT åˆ° FROMä¹‹é—´æŸ¥è¯¢çš„åˆ—</code>ã€‚</p><h5 id="7-2-è¦†ç›–ç´¢å¼•çš„åˆ©å¼Š"><strong>7.2</strong> <strong>è¦†ç›–ç´¢å¼•çš„åˆ©å¼Š</strong></h5><p><strong>å¥½å¤„ï¼š</strong></p><p><strong>1.</strong> <strong>é¿å…Innodbè¡¨è¿›è¡Œç´¢å¼•çš„äºŒæ¬¡æŸ¥è¯¢ï¼ˆå›è¡¨ï¼‰</strong></p><p><strong>2.</strong> <strong>å¯ä»¥æŠŠéšæœºIOå˜æˆé¡ºåºIOåŠ å¿«æŸ¥è¯¢æ•ˆç‡</strong></p><p><strong>å¼Šç«¯ï¼š</strong></p><p><code>ç´¢å¼•å­—æ®µçš„ç»´æŠ¤</code>æ€»æ˜¯æœ‰ä»£ä»·çš„ã€‚å› æ­¤ï¼Œåœ¨å»ºç«‹å†—ä½™ç´¢å¼•æ¥æ”¯æŒè¦†ç›–ç´¢å¼•æ—¶å°±éœ€è¦æƒè¡¡è€ƒè™‘äº†ã€‚è¿™æ˜¯ä¸šåŠ¡DBAï¼Œæˆ–è€…ç§°ä¸ºä¸šåŠ¡æ•°æ®æ¶æ„å¸ˆçš„å·¥ä½œã€‚</p><h4 id="8-ç´¢å¼•æ¡ä»¶ä¸‹æ¨"><strong>8.</strong> <strong>ç´¢å¼•æ¡ä»¶ä¸‹æ¨</strong></h4><h5 id="8-1-ä½¿ç”¨å‰åçš„æ‰«æè¿‡ç¨‹"><strong>8.1</strong> <strong>ä½¿ç”¨å‰åçš„æ‰«æè¿‡ç¨‹</strong></h5><p><strong>åœ¨ä¸ä½¿ç”¨ICPç´¢å¼•æ‰«æçš„è¿‡ç¨‹ï¼š</strong></p><p>storageå±‚ï¼šåªå°†æ»¡è¶³index keyæ¡ä»¶çš„ç´¢å¼•è®°å½•å¯¹åº”çš„æ•´è¡Œè®°å½•å–å‡ºï¼Œè¿”å›ç»™serverå±‚</p><p>server å±‚ï¼šå¯¹è¿”å›çš„æ•°æ®ï¼Œä½¿ç”¨åé¢çš„whereæ¡ä»¶è¿‡æ»¤ï¼Œç›´è‡³è¿”å›æœ€åä¸€è¡Œã€‚</p><p><strong>ä½¿ç”¨ICPæ‰«æçš„è¿‡ç¨‹ï¼š</strong></p><p>storageå±‚ï¼šé¦–å…ˆå°†index keyæ¡ä»¶æ»¡è¶³çš„ç´¢å¼•è®°å½•åŒºé—´ç¡®å®šï¼Œç„¶ååœ¨ç´¢å¼•ä¸Šä½¿ç”¨index filterè¿›è¡Œè¿‡æ»¤ã€‚å°†æ»¡è¶³çš„index filteræ¡ä»¶çš„ç´¢å¼•è®°å½•æ‰å»å›è¡¨å–å‡ºæ•´è¡Œè®°å½•è¿”å›serverå±‚ã€‚ä¸æ»¡è¶³index filteræ¡ä»¶çš„ç´¢å¼•è®°å½•ä¸¢å¼ƒï¼Œä¸å›è¡¨ã€ä¹Ÿä¸ä¼šè¿”å›serverå±‚ã€‚</p><p>server å±‚ï¼šå¯¹è¿”å›çš„æ•°æ®ï¼Œä½¿ç”¨table filteræ¡ä»¶åšæœ€åçš„è¿‡æ»¤ã€‚</p><h4 id="9-å…¶å®ƒæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥"><strong>9.</strong> <strong>å…¶å®ƒæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥</strong></h4><h5 id="9-1-EXISTS-å’Œ-IN-çš„åŒºåˆ†"><strong>9.1 EXISTS</strong> <strong>å’Œ</strong> <strong>IN</strong> <strong>çš„åŒºåˆ†</strong></h5><p>ç´¢å¼•æ˜¯ä¸ªå‰æï¼Œå…¶å®é€‰æ‹©ä¸å¦è¿˜ä¼šè¦çœ‹è¡¨çš„å¤§å°ã€‚ä½ å¯ä»¥å°†é€‰æ‹©çš„æ ‡å‡†ç†è§£ä¸º<code>å°è¡¨é©±åŠ¨å¤§è¡¨</code>ã€‚</p><h5 id="9-2-COUNT-ä¸COUNT-å…·ä½“å­—æ®µ-æ•ˆç‡"><strong>9.2 COUNT(*)ä¸COUNT(å…·ä½“å­—æ®µ)æ•ˆç‡</strong></h5><p><strong>ç¯èŠ‚1ï¼š</strong><code>COUNT(*)</code>å’Œ<code>COUNT(1)</code>éƒ½æ˜¯å¯¹æ‰€æœ‰ç»“æœè¿›è¡Œ<code>COUNT</code>ï¼Œ<code>COUNT(*)</code>å’Œ<code>COUNT(1)</code>æœ¬è´¨ä¸Šå¹¶æ²¡æœ‰åŒºåˆ«ï¼ˆäºŒè€…æ‰§è¡Œæ—¶é—´å¯èƒ½ç•¥æœ‰å·®åˆ«ï¼Œä¸è¿‡ä½ è¿˜æ˜¯å¯ä»¥æŠŠå®ƒä¿©çš„æ‰§è¡Œæ•ˆç‡çœ‹æˆæ˜¯ç›¸ç­‰çš„ï¼‰ã€‚å¦‚æœæœ‰WHEREå­å¥ï¼Œåˆ™æ˜¯å¯¹æ‰€æœ‰ç¬¦åˆç­›é€‰æ¡ä»¶çš„æ•°æ®è¡Œè¿›è¡Œç»Ÿè®¡ï¼›å¦‚æœæ²¡æœ‰WHEREå­å¥ï¼Œåˆ™æ˜¯å¯¹æ•°æ®è¡¨çš„æ•°æ®è¡Œæ•°è¿›è¡Œç»Ÿè®¡ã€‚</p><p>**ç¯èŠ‚2ï¼š**å¦‚æœæ˜¯MyISAMå­˜å‚¨å¼•æ“ï¼Œç»Ÿè®¡æ•°æ®è¡¨çš„è¡Œæ•°åªéœ€è¦<code>O(1)</code>çš„å¤æ‚åº¦ï¼Œè¿™æ˜¯å› ä¸ºæ¯å¼ MyISAMçš„æ•°æ®è¡¨éƒ½æœ‰ä¸€ä¸ªmetaä¿¡æ¯å­˜å‚¨äº†<code>row_count</code>å€¼ï¼Œè€Œä¸€è‡´æ€§åˆ™æ˜¯ç”±è¡¨çº§é”æ¥ä¿è¯çš„ã€‚</p><p>å¦‚æœæ˜¯InnoDBå­˜å‚¨å¼•æ“ï¼Œå› ä¸ºInnoDBæ”¯æŒäº‹åŠ¡ï¼Œé‡‡ç”¨è¡Œçº§é”å’ŒMVCCæœºåˆ¶ï¼Œæ‰€ä»¥æ— æ³•åƒMyISAMä¸€æ ·ï¼Œç»´æŠ¤ä¸€ä¸ªrow_countå˜é‡ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨<code>æ‰«æå…¨è¡¨</code>ï¼Œæ˜¯<code>O(n)</code>çš„å¤æ‚åº¦ï¼Œè¿›è¡Œå¾ªç¯+è®¡æ•°çš„æ–¹å¼æ¥å®Œæˆç»Ÿè®¡ã€‚</p><p>**ç¯èŠ‚3ï¼š**åœ¨InnoDBå¼•æ“ä¸­ï¼Œå¦‚æœé‡‡ç”¨<code>COUNT(å…·ä½“å­—æ®µ)</code>æ¥ç»Ÿè®¡æ•°æ®è¡Œæ•°ï¼Œè¦å°½é‡é‡‡ç”¨äºŒçº§ç´¢å¼•ã€‚å› ä¸ºä¸»é”®é‡‡ç”¨çš„ç´¢å¼•æ˜¯èšç°‡ç´¢å¼•ï¼Œèšç°‡ç´¢å¼•åŒ…å«çš„ä¿¡æ¯å¤šï¼Œæ˜æ˜¾ä¼šå¤§äºäºŒçº§ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ã€‚å¯¹äº<code>COUNT(*)</code>å’Œ<code>COUNT(1)</code>æ¥è¯´ï¼Œå®ƒä»¬ä¸éœ€è¦æŸ¥æ‰¾å…·ä½“çš„è¡Œï¼Œåªæ˜¯ç»Ÿè®¡è¡Œæ•°ï¼Œç³»ç»Ÿä¼š<code>è‡ªåŠ¨</code>é‡‡ç”¨å ç”¨ç©ºé—´æ›´å°çš„äºŒçº§ç´¢å¼•æ¥è¿›è¡Œç»Ÿè®¡ã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªäºŒçº§ç´¢å¼•ï¼Œä¼šä½¿ç”¨key_lenå°çš„äºŒçº§ç´¢å¼•è¿›è¡Œæ‰«æã€‚å½“æ²¡æœ‰äºŒçº§ç´¢å¼•çš„æ—¶å€™ï¼Œæ‰ä¼šé‡‡ç”¨ä¸»é”®ç´¢å¼•æ¥è¿›è¡Œç»Ÿè®¡ã€‚</p><h5 id="9-3-å…³äºSELECT"><strong>9.3</strong> <strong>å…³äºSELECT(*)</strong></h5><p>åœ¨è¡¨æŸ¥è¯¢ä¸­ï¼Œå»ºè®®æ˜ç¡®å­—æ®µï¼Œä¸è¦ä½¿ç”¨ * ä½œä¸ºæŸ¥è¯¢çš„å­—æ®µåˆ—è¡¨ï¼Œæ¨èä½¿ç”¨SELECT &lt;å­—æ®µåˆ—è¡¨&gt; æŸ¥è¯¢ã€‚åŸå› ï¼š</p><p>â‘  MySQL åœ¨è§£æçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé€šè¿‡<code>æŸ¥è¯¢æ•°æ®å­—å…¸</code>å°†&quot;*&quot;æŒ‰åºè½¬æ¢æˆæ‰€æœ‰åˆ—åï¼Œè¿™ä¼šå¤§å¤§çš„è€—è´¹èµ„æºå’Œæ—¶é—´ã€‚</p><p>â‘¡ æ— æ³•ä½¿ç”¨<code>è¦†ç›–ç´¢å¼•</code></p><h5 id="9-4-LIMIT-1-å¯¹ä¼˜åŒ–çš„å½±å“"><strong>9.4 LIMIT 1</strong> <strong>å¯¹ä¼˜åŒ–çš„å½±å“</strong></h5><p>é’ˆå¯¹çš„æ˜¯ä¼šæ‰«æå…¨è¡¨çš„ SQL è¯­å¥ï¼Œå¦‚æœä½ å¯ä»¥ç¡®å®šç»“æœé›†åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆåŠ ä¸Š<code>LIMIT 1</code>çš„æ—¶å€™ï¼Œå½“æ‰¾åˆ°ä¸€æ¡ç»“æœçš„æ—¶å€™å°±ä¸ä¼šç»§ç»­æ‰«æäº†ï¼Œè¿™æ ·ä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p>å¦‚æœæ•°æ®è¡¨å·²ç»å¯¹å­—æ®µå»ºç«‹äº†å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸ä¼šå…¨è¡¨æ‰«æçš„è¯ï¼Œå°±ä¸éœ€è¦åŠ ä¸Š<code>LIMIT 1</code>äº†ã€‚</p><h5 id="9-5-å¤šä½¿ç”¨COMMIT"><strong>9.5</strong> <strong>å¤šä½¿ç”¨COMMIT</strong></h5><p>åªè¦æœ‰å¯èƒ½ï¼Œåœ¨ç¨‹åºä¸­å°½é‡å¤šä½¿ç”¨ COMMITï¼Œè¿™æ ·ç¨‹åºçš„æ€§èƒ½å¾—åˆ°æé«˜ï¼Œéœ€æ±‚ä¹Ÿä¼šå› ä¸º COMMIT æ‰€é‡Šæ”¾çš„èµ„æºè€Œå‡å°‘ã€‚</p><p>COMMIT æ‰€é‡Šæ”¾çš„èµ„æºï¼š</p><ul><li><p>å›æ»šæ®µä¸Šç”¨äºæ¢å¤æ•°æ®çš„ä¿¡æ¯</p></li><li><p>è¢«ç¨‹åºè¯­å¥è·å¾—çš„é”</p></li><li><p>redo / undo log buffer ä¸­çš„ç©ºé—´</p></li><li><p>ç®¡ç†ä¸Šè¿° 3 ç§èµ„æºä¸­çš„å†…éƒ¨èŠ±è´¹</p></li></ul><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€ç´¢å¼•å¤±æ•ˆæ¡ˆä¾‹ã€å…³è”æŸ¥è¯¢ä¼˜åŒ–ã€å­æŸ¥è¯¢ä¼˜åŒ–ã€æ’åºä¼˜åŒ–ã€GROUP BYä¼˜åŒ–ã€ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢ã€ä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼•ã€ç´¢å¼•æ¡ä»¶ä¸‹æ¨ã€å…¶å®ƒæŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬09ç«  æ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨</title>
    <link href="https://angus9823.github.io/posts/7ccee7a8.html"/>
    <id>https://angus9823.github.io/posts/7ccee7a8.html</id>
    <published>2023-04-18T07:36:07.000Z</published>
    <updated>2023-04-18T08:25:56.523Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬09ç« -æ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨">ç¬¬09ç«  æ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨</h3><h4 id="1-ç»Ÿè®¡SQLçš„æŸ¥è¯¢æˆæœ¬ï¼šlast-query-cost"><strong>1.</strong> <strong>ç»Ÿè®¡SQLçš„æŸ¥è¯¢æˆæœ¬ï¼šlast_query_cost</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW STATUS LIKE &#x27;last_query_cost&#x27;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åœºæ™¯ï¼šå®ƒå¯¹äºæ¯”è¾ƒå¼€é”€æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æœ‰å¥½å‡ ç§æŸ¥è¯¢æ–¹å¼å¯é€‰çš„æ—¶å€™ã€‚</p><blockquote><p>SQL æŸ¥è¯¢æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼Œä»é¡µåŠ è½½çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¸¤ç‚¹ç»“è®ºï¼š</p><ol><li><code>ä½ç½®å†³å®šæ•ˆç‡</code>ã€‚å¦‚æœé¡µå°±åœ¨æ•°æ®åº“<code>ç¼“å†²æ± </code>ä¸­ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¦åˆ™è¿˜éœ€è¦ä»<code>å†…å­˜</code>æˆ–è€…<code>ç£ç›˜</code>ä¸­è¿›è¡Œè¯»å–ï¼Œå½“ç„¶é’ˆå¯¹å•ä¸ªé¡µçš„è¯»å–æ¥è¯´ï¼Œå¦‚æœé¡µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¼šæ¯”åœ¨ç£ç›˜ä¸­è¯»å–æ•ˆç‡é«˜å¾ˆå¤šã€‚</li><li><code>æ‰¹é‡å†³å®šæ•ˆç‡</code>ã€‚å¦‚æœæˆ‘ä»¬ä»ç£ç›˜ä¸­å¯¹å•ä¸€é¡µè¿›è¡Œéšæœºè¯»ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯å¾ˆä½çš„ï¼ˆå·®ä¸å¤š10msï¼‰ï¼Œè€Œé‡‡ç”¨é¡ºåºè¯»å–çš„æ–¹å¼ï¼Œæ‰¹é‡å¯¹é¡µè¿›è¡Œè¯»å–ï¼Œå¹³å‡ä¸€é¡µçš„è¯»å–æ•ˆç‡å°±ä¼šæå‡å¾ˆå¤šï¼Œç”šè‡³è¦å¿«äºå•ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­çš„éšæœºè¯»å–ã€‚</li></ol><p>æ‰€ä»¥è¯´ï¼Œé‡åˆ°I/Oå¹¶ä¸ç”¨æ‹…å¿ƒï¼Œæ–¹æ³•æ‰¾å¯¹äº†ï¼Œæ•ˆç‡è¿˜æ˜¯å¾ˆé«˜çš„ã€‚æˆ‘ä»¬é¦–å…ˆè¦è€ƒè™‘æ•°æ®å­˜æ”¾çš„ä½ç½®ï¼Œå¦‚æœæ˜¯ç»å¸¸ä½¿ç”¨çš„æ•°æ®å°±è¦å°½é‡æ”¾åˆ°<code>ç¼“å†²æ± </code>ä¸­ï¼Œå…¶æ¬¡æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜çš„ååèƒ½åŠ›ï¼Œä¸€æ¬¡æ€§æ‰¹é‡è¯»å–æ•°æ®ï¼Œè¿™æ ·å•ä¸ªé¡µçš„è¯»å–æ•ˆç‡ä¹Ÿå°±å¾—åˆ°äº†æå‡ã€‚</p></blockquote><h4 id="2-å®šä½æ‰§è¡Œæ…¢çš„SQLï¼šæ…¢æŸ¥è¯¢æ—¥å¿—"><strong>2.</strong> <strong>å®šä½æ‰§è¡Œæ…¢çš„SQLï¼šæ…¢æŸ¥è¯¢æ—¥å¿—</strong></h4><p>MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç”¨æ¥è®°å½•åœ¨MySQLä¸­<code>å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼</code>çš„è¯­å¥ï¼Œå…·ä½“æŒ‡è¿è¡Œæ—¶é—´è¶…è¿‡<code>long_query_time</code>çš„å€¼çš„SQLï¼Œåˆ™ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚long_query_timeçš„é»˜è®¤å€¼ä¸º<code>10</code>ï¼Œæ„æ€æ˜¯è¿è¡Œ10ç§’ä»¥ä¸Šï¼ˆä¸å«10ç§’ï¼‰çš„è¯­å¥ï¼Œè®¤ä¸ºæ˜¯è¶…å‡ºäº†æˆ‘ä»¬çš„æœ€å¤§å¿è€æ—¶é—´å€¼ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLæ•°æ®åº“<code>æ²¡æœ‰å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</code>ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥è®¾ç½®è¿™ä¸ªå‚æ•°ã€‚<code>å¦‚æœä¸æ˜¯è°ƒä¼˜éœ€è¦çš„è¯ï¼Œä¸€èˆ¬ä¸å»ºè®®å¯åŠ¨è¯¥å‚æ•°</code>ï¼Œå› ä¸ºå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ä¼šæˆ–å¤šæˆ–å°‘å¸¦æ¥ä¸€å®šçš„æ€§èƒ½å½±å“ã€‚</p><h5 id="2-1-å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å‚æ•°"><strong>2.1</strong> <strong>å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å‚æ•°</strong></h5><p><strong>1.</strong> <strong>å¼€å¯slow_query_log</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global slow_query_log=&#x27;ON&#x27;;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸‹æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯å¦å¼€å¯ï¼Œä»¥åŠæ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like `%slow_query_log%`;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä¿®æ”¹long_query_timeé˜ˆå€¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;%long_query_time%&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æµ‹è¯•å‘ç°ï¼šè®¾ç½®globalçš„æ–¹å¼å¯¹å½“å‰sessionçš„long_query_timeå¤±æ•ˆã€‚å¯¹æ–°è¿æ¥çš„å®¢æˆ·ç«¯æœ‰æ•ˆã€‚æ‰€ä»¥å¯ä»¥ä¸€å¹¶ æ‰§è¡Œä¸‹è¿°è¯­å¥ </span><br><span class="line">mysql &gt; set global long_query_time = 1; </span><br><span class="line">mysql&gt; show global variables like &#x27;%long_query_time%&#x27;; </span><br><span class="line"></span><br><span class="line">mysql&gt; set long_query_time=1; </span><br><span class="line">mysql&gt; show variables like &#x27;%long_query_time%&#x27;;</span><br></pre></td></tr></table></figure><h5 id="2-2-æŸ¥çœ‹æ…¢æŸ¥è¯¢æ•°ç›®"><strong>2.2</strong> <strong>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ•°ç›®</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GLOBAL STATUS LIKE &#x27;%Slow_queries%&#x27;;</span><br></pre></td></tr></table></figure><h5 id="2-3-æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ï¼šmysqldumpslow"><strong>2.3</strong> <strong>æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ï¼šmysqldumpslow</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQL</span> </span><br><span class="line">mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL</span> </span><br><span class="line">mysqldumpslow -s c -t 10 /var/lib/mysql/atguigu-slow.log</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥</span> </span><br><span class="line">mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/atguigu-slow.log </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°çˆ†å±æƒ…å†µ</span> </span><br><span class="line">mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log | more</span><br></pre></td></tr></table></figure><h5 id="2-4-å…³é—­æ…¢æŸ¥è¯¢æ—¥å¿—"><strong>2.4</strong> <strong>å…³é—­æ…¢æŸ¥è¯¢æ—¥å¿—</strong></h5><p><strong>æ–¹å¼1ï¼šæ°¸ä¹…æ€§æ–¹å¼</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="attr">slow_query_log</span>=<span class="literal">OFF</span></span><br><span class="line"><span class="comment">#æˆ–</span></span><br><span class="line"><span class="section">[mysqld]</span> </span><br><span class="line"><span class="comment">#slow_query_log =OFF</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼2ï¼šä¸´æ—¶æ€§æ–¹å¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL slow_query_log=off;</span><br></pre></td></tr></table></figure><h4 id="3-æŸ¥çœ‹-SQL-æ‰§è¡Œæˆæœ¬ï¼šSHOW-PROFILE"><strong>3.</strong> <strong>æŸ¥çœ‹</strong> <strong>SQL</strong> <strong>æ‰§è¡Œæˆæœ¬ï¼šSHOW PROFILE</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;profiling&#x27;;</span><br><span class="line">#å¼€å¯</span><br><span class="line">set profiling = &#x27;ON&#x27;;</span><br><span class="line">#æŸ¥çœ‹</span><br><span class="line">show profiles;</span><br><span class="line">show profile cpu,block io for query 2;</span><br></pre></td></tr></table></figure><h4 id="4-åˆ†ææŸ¥è¯¢è¯­å¥ï¼šEXPLAIN"><strong>4.</strong> <strong>åˆ†ææŸ¥è¯¢è¯­å¥ï¼šEXPLAIN</strong></h4><h5 id="4-1-åŸºæœ¬è¯­æ³•"><strong>4.1</strong> <strong>åŸºæœ¬è¯­æ³•</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT select_options </span><br><span class="line">#æˆ–è€…</span><br><span class="line">DESCRIBE SELECT select_options</span><br></pre></td></tr></table></figure><p>EXPLAIN è¯­å¥è¾“å‡ºçš„å„ä¸ªåˆ—çš„ä½œç”¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åˆ—å</th><th>æè¿°</th></tr></thead><tbody><tr><td>id</td><td>åœ¨ä¸€ä¸ªå¤§çš„æŸ¥è¯¢è¯­å¥ä¸­æ¯ä¸ªSELECTå…³é”®å­—éƒ½å¯¹åº”ä¸€ä¸ª<code>å”¯ä¸€çš„id</code></td></tr><tr><td>select_type</td><td>SELECTå…³é”®å­—å¯¹åº”çš„é‚£ä¸ªæŸ¥è¯¢çš„ç±»å‹</td></tr><tr><td>table</td><td>è¡¨å</td></tr><tr><td>partitions</td><td>åŒ¹é…çš„åˆ†åŒºä¿¡æ¯</td></tr><tr><td>type</td><td>é’ˆå¯¹å•è¡¨çš„è®¿é—®æ–¹æ³•</td></tr><tr><td>possible_keys</td><td>å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</td></tr><tr><td>key</td><td>å®é™…ä¸Šä½¿ç”¨çš„ç´¢å¼•</td></tr><tr><td>key_len</td><td>å®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦</td></tr><tr><td>ref</td><td>å½“ä½¿ç”¨ç´¢å¼•åˆ—ç­‰å€¼æŸ¥è¯¢æ—¶ï¼Œä¸ç´¢å¼•åˆ—è¿›è¡Œç­‰å€¼åŒ¹é…çš„å¯¹è±¡ä¿¡æ¯</td></tr><tr><td>rows</td><td>é¢„ä¼°çš„éœ€è¦è¯»å–çš„è®°å½•æ¡æ•°</td></tr><tr><td>filtered</td><td>æŸä¸ªè¡¨ç»è¿‡æœç´¢æ¡ä»¶è¿‡æ»¤åå‰©ä½™è®°å½•æ¡æ•°çš„ç™¾åˆ†æ¯”</td></tr><tr><td>Extra</td><td>ä¸€äº›é¢å¤–çš„ä¿¡æ¯</td></tr></tbody></table><h5 id="4-2-EXPLAINå„åˆ—ä½œç”¨"><strong>4.2 EXPLAINå„åˆ—ä½œç”¨</strong></h5><p><strong>1. table</strong></p><p>ä¸è®ºæˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥æœ‰å¤šå¤æ‚ï¼ŒåŒ…å«äº†å¤šå°‘ä¸ªè¡¨ ï¼Œåˆ°æœ€åä¹Ÿæ˜¯éœ€è¦å¯¹æ¯ä¸ªè¡¨è¿›è¡Œ<code>å•è¡¨è®¿é—®</code>çš„ï¼Œæ‰€ä»¥MySQLè§„å®š<strong>EXPLAINè¯­å¥è¾“å‡ºçš„æ¯æ¡è®°å½•éƒ½å¯¹åº”ç€æŸä¸ªå•è¡¨çš„è®¿é—®æ–¹æ³•</strong>ï¼Œè¯¥æ¡è®°å½•çš„tableåˆ—ä»£è¡¨ç€è¯¥è¡¨çš„è¡¨åï¼ˆæœ‰æ—¶ä¸æ˜¯çœŸå®çš„è¡¨åå­—ï¼Œå¯èƒ½æ˜¯ç®€ç§°ï¼‰ã€‚</p><p><strong>2. id</strong></p><ul><li><strong>idå¦‚æœç›¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç»„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œ</strong></li><li><strong>åœ¨æ‰€æœ‰ç»„ä¸­ï¼Œidå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œ</strong></li><li><strong>å…³æ³¨ç‚¹ï¼šidå·æ¯ä¸ªå·ç ï¼Œè¡¨ç¤ºä¸€è¶Ÿç‹¬ç«‹çš„æŸ¥è¯¢,ä¸€ä¸ªsqlçš„æŸ¥è¯¢è¶Ÿæ•°è¶Šå°‘è¶Šå¥½</strong></li></ul><p><strong>3. select_type</strong></p><p><strong>4. partitions</strong></p><p><strong>5. typeï¼ˆé‡ç‚¹ï¼‰</strong></p><p><strong>ç»“æœå€¼ä»æœ€å¥½åˆ°æœ€åä¾æ¬¡æ˜¯ï¼š</strong> <strong>system &gt; const &gt; eq_ref &gt; ref</strong> <strong>&gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt;</strong> <strong>range &gt; index &gt; ALL</strong></p><p><strong>SQLæ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ° rangeçº§åˆ«ï¼Œè¦æ±‚æ˜¯refçº§åˆ«ï¼Œæœ€å¥½æ˜¯constsçº§åˆ«ã€‚ï¼ˆé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œè¦æ±‚ï¼‰</strong></p><p><strong>6. possible_keyså’Œkey</strong></p><p><strong>7. key_lenï¼ˆé‡ç‚¹ï¼‰</strong></p><p><strong>key_lençš„é•¿åº¦è®¡ç®—å…¬å¼ï¼š</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">varchar</span>(<span class="number">10</span>)å˜é•¿å­—æ®µä¸”å…è®¸NULL = <span class="number">10</span> * ( character setï¼š utf8=<span class="number">3</span>,gbk=<span class="number">2</span>,latin1=<span class="number">1</span>)+<span class="number">1</span>(NULL)+<span class="number">2</span>(å˜é•¿å­—æ®µ) </span><br><span class="line"></span><br><span class="line"><span class="attribute">varchar</span>(<span class="number">10</span>)å˜é•¿å­—æ®µä¸”ä¸å…è®¸NULL = <span class="number">10</span> * ( character setï¼šutf8=<span class="number">3</span>,gbk=<span class="number">2</span>,latin1=<span class="number">1</span>)+<span class="number">2</span>(å˜é•¿å­—æ®µ)</span><br><span class="line"></span><br><span class="line"><span class="attribute">char</span>(<span class="number">10</span>)å›ºå®šå­—æ®µä¸”å…è®¸NULL = <span class="number">10</span> * ( character setï¼šutf8=<span class="number">3</span>,gbk=<span class="number">2</span>,latin1=<span class="number">1</span>)+<span class="number">1</span>(NULL) </span><br><span class="line"></span><br><span class="line"><span class="attribute">char</span>(<span class="number">10</span>)å›ºå®šå­—æ®µä¸”ä¸å…è®¸NULL = <span class="number">10</span> * ( character setï¼šutf8=<span class="number">3</span>,gbk=<span class="number">2</span>,latin1=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><strong>8. ref</strong></p><p><strong>9. rowsï¼ˆé‡ç‚¹ï¼‰</strong></p><p>é¢„ä¼°çš„éœ€è¦è¯»å–çš„è®°å½•æ¡æ•°</p><p><strong>10. filtered</strong></p><p><strong>11. Extra</strong></p><h4 id="5-EXPLAINçš„è¿›ä¸€æ­¥ä½¿ç”¨"><strong>5. EXPLAINçš„è¿›ä¸€æ­¥ä½¿ç”¨</strong></h4><h5 id="5-1-EXPLAINå››ç§è¾“å‡ºæ ¼å¼"><strong>5.1 EXPLAINå››ç§è¾“å‡ºæ ¼å¼</strong></h5><p>è¿™é‡Œè°ˆè°ˆEXPLAINçš„è¾“å‡ºæ ¼å¼ã€‚EXPLAINå¯ä»¥è¾“å‡ºå››ç§æ ¼å¼ï¼š<code>ä¼ ç»Ÿæ ¼å¼</code>ï¼Œ<code>JSONæ ¼å¼</code>ï¼Œ<code>TREEæ ¼å¼</code>ä»¥åŠ<code>å¯è§†åŒ–è¾“å‡º</code>ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©é€‚ç”¨äºè‡ªå·±çš„æ ¼å¼ã€‚</p><p><strong>1.</strong> <strong>ä¼ ç»Ÿæ ¼å¼</strong></p><p><strong>2. JSONæ ¼å¼</strong></p><p>JSONæ ¼å¼ï¼šåœ¨EXPLAINå•è¯å’ŒçœŸæ­£çš„æŸ¥è¯¢è¯­å¥ä¸­é—´åŠ ä¸Š<code>FORMAT=JSON</code>ã€‚ç”¨äºæŸ¥çœ‹æ‰§è¡Œæˆæœ¬<code>cost_info</code></p><p><strong>3. TREEæ ¼å¼</strong></p><p>TREEæ ¼å¼æ˜¯8.0.16ç‰ˆæœ¬ä¹‹åå¼•å…¥çš„æ–°æ ¼å¼ï¼Œä¸»è¦æ ¹æ®æŸ¥è¯¢çš„<code>å„ä¸ªéƒ¨åˆ†ä¹‹é—´çš„å…³ç³»</code>å’Œ<code>å„éƒ¨åˆ†çš„æ‰§è¡Œé¡ºåº</code>æ¥æè¿°å¦‚ä½•æŸ¥è¯¢ã€‚</p><p><strong>4.</strong> <strong>å¯è§†åŒ–è¾“å‡º</strong></p><p>å¯è§†åŒ–è¾“å‡ºï¼Œå¯ä»¥é€šè¿‡MySQL Workbenchå¯è§†åŒ–æŸ¥çœ‹MySQLçš„æ‰§è¡Œè®¡åˆ’ã€‚</p><h5 id="5-2-SHOW-WARNINGSçš„ä½¿ç”¨"><strong>5.2 SHOW WARNINGSçš„ä½¿ç”¨</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT s1.key1, s2.key1 FROM s1 LEFT JOIN s2 ON s1.key1 = s2.key1 WHERE s2.common_field IS NOT NULL;</span><br><span class="line"># æŸ¥çœ‹ä¼˜åŒ–åçš„æ‰§è¡Œè¯­å¥</span><br><span class="line">mysql&gt; SHOW WARNINGS\G</span><br></pre></td></tr></table></figure><h4 id="6-åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’ï¼štrace"><strong>6.</strong> <strong>åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’ï¼štrace</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å¯</span><br><span class="line">SET optimizer_trace=&quot;enabled=on&quot;,end_markers_in_json=on; </span><br><span class="line"># è®¾ç½®å¤§å°</span><br><span class="line">set optimizer_trace_max_mem_size=1000000;</span><br><span class="line"># ä½¿ç”¨</span><br><span class="line">select * from student where id &lt; 10;</span><br><span class="line">select * from information_schema.optimizer_trace\G</span><br></pre></td></tr></table></figure><h4 id="7-MySQLç›‘æ§åˆ†æè§†å›¾-sys-schema"><strong>7. MySQLç›‘æ§åˆ†æè§†å›¾-sys schema</strong></h4><p><strong>7.1 Sys schemaè§†å›¾ä½¿ç”¨åœºæ™¯</strong></p><p><strong>ç´¢å¼•æƒ…å†µ</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#1. æŸ¥è¯¢å†—ä½™ç´¢å¼• </span><br><span class="line">select * from sys.schema_redundant_indexes; </span><br><span class="line">#2. æŸ¥è¯¢æœªä½¿ç”¨è¿‡çš„ç´¢å¼• </span><br><span class="line">select * from sys.schema_unused_indexes; </span><br><span class="line">#3. æŸ¥è¯¢ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ </span><br><span class="line">select index_name,rows_selected,rows_inserted,rows_updated,rows_deleted from sys.schema_index_statistics where table_schema=&#x27;dbname&#x27; ;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç›¸å…³</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 1. æŸ¥è¯¢è¡¨çš„è®¿é—®é‡ </span><br><span class="line">select table_schema,table_name,sum(io_read_requests+io_write_requests) as io from sys.schema_table_statistics group by table_schema,table_name order by io desc; </span><br><span class="line"># 2. æŸ¥è¯¢å ç”¨bufferpoolè¾ƒå¤šçš„è¡¨ </span><br><span class="line">select object_schema,object_name,allocated,data</span><br><span class="line">from sys.innodb_buffer_stats_by_table order by allocated limit 10; </span><br><span class="line"># 3. æŸ¥çœ‹è¡¨çš„å…¨è¡¨æ‰«ææƒ…å†µ </span><br><span class="line">select * from sys.statements_with_full_table_scans where db=&#x27;dbname&#x27;;</span><br></pre></td></tr></table></figure><p><strong>è¯­å¥ç›¸å…³</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#1. ç›‘æ§SQLæ‰§è¡Œçš„é¢‘ç‡ </span><br><span class="line">select db,exec_count,query from sys.statement_analysis order by exec_count desc; </span><br><span class="line">#2. ç›‘æ§ä½¿ç”¨äº†æ’åºçš„SQL </span><br><span class="line">select db,exec_count,first_seen,last_seen,query</span><br><span class="line">from sys.statements_with_sorting limit 1; </span><br><span class="line">#3. ç›‘æ§ä½¿ç”¨äº†ä¸´æ—¶è¡¨æˆ–è€…ç£ç›˜ä¸´æ—¶è¡¨çš„SQL </span><br><span class="line">select db,exec_count,tmp_tables,tmp_disk_tables,query</span><br><span class="line">from sys.statement_analysis where tmp_tables&gt;0 or tmp_disk_tables &gt;0 order by (tmp_tables+tmp_disk_tables) desc;</span><br></pre></td></tr></table></figure><p><strong>IOç›¸å…³</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#1. æŸ¥çœ‹æ¶ˆè€—ç£ç›˜IOçš„æ–‡ä»¶ </span><br><span class="line">select file,avg_read,avg_write,avg_read+avg_write as avg_io</span><br><span class="line">from sys.io_global_by_file_by_bytes order by avg_read limit 10;</span><br></pre></td></tr></table></figure><p><strong>Innodb</strong> <strong>ç›¸å…³</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#1. è¡Œé”é˜»å¡æƒ…å†µ </span><br><span class="line">select * from sys.innodb_lock_waits;</span><br></pre></td></tr></table></figure><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€ ç»Ÿè®¡SQLçš„æŸ¥è¯¢æˆæœ¬ï¼šlast_query_costã€å®šä½æ‰§è¡Œæ…¢çš„SQLï¼šæ…¢æŸ¥è¯¢æ—¥å¿—ã€**æŸ¥çœ‹** **SQL** **æ‰§è¡Œæˆæœ¬ï¼šSHOW PROFILEã€åˆ†ææŸ¥è¯¢è¯­å¥ï¼šEXPLAINã€EXPLAINçš„è¿›ä¸€æ­¥ä½¿ç”¨ã€åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’ï¼štraceã€ MySQLç›‘æ§åˆ†æè§†å›¾-sys schemaã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬08ç«  ç´¢å¼•çš„åˆ›å»ºä¸è®¾è®¡åŸåˆ™</title>
    <link href="https://angus9823.github.io/posts/50aa8303.html"/>
    <id>https://angus9823.github.io/posts/50aa8303.html</id>
    <published>2023-04-18T07:35:53.000Z</published>
    <updated>2023-04-18T08:25:56.526Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬08ç« -ç´¢å¼•çš„åˆ›å»ºä¸è®¾è®¡åŸåˆ™">ç¬¬08ç«  ç´¢å¼•çš„åˆ›å»ºä¸è®¾è®¡åŸåˆ™</h3><h4 id="1-ç´¢å¼•çš„å£°æ˜ä¸ä½¿ç”¨"><strong>1.</strong> <strong>ç´¢å¼•çš„å£°æ˜ä¸ä½¿ç”¨</strong></h4><h5 id="1-1-ç´¢å¼•çš„åˆ†ç±»"><strong>1.1</strong> <strong>ç´¢å¼•çš„åˆ†ç±»</strong></h5><ul><li>ä»<code>åŠŸèƒ½é€»è¾‘</code>ä¸Šè¯´ï¼Œç´¢å¼•ä¸»è¦æœ‰ 4 ç§ï¼Œåˆ†åˆ«æ˜¯æ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ã€‚</li><li>æŒ‰ç…§<code>ç‰©ç†å®ç°æ–¹å¼</code>ï¼Œç´¢å¼•å¯ä»¥åˆ†ä¸º 2 ç§ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ã€‚</li><li>æŒ‰ç…§<code>ä½œç”¨å­—æ®µä¸ªæ•°</code>è¿›è¡Œåˆ’åˆ†ï¼Œåˆ†æˆå•åˆ—ç´¢å¼•å’Œè”åˆç´¢å¼•ã€‚</li></ul><h5 id="1-2-åˆ›å»ºç´¢å¼•"><strong>1.2</strong> <strong>åˆ›å»ºç´¢å¼•</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name [col_name data_type] </span><br><span class="line">[UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY] [index_name] (col_name [length]) [ASC | DESC]</span><br></pre></td></tr></table></figure><ul><li><code>UNIQUE</code>ã€<code>FULLTEXT</code>å’Œ<code>SPATIAL</code>ä¸ºå¯é€‰å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•å’Œç©ºé—´ç´¢å¼•ï¼›</li><li><code>INDEX</code>ä¸<code>KEY</code>ä¸ºåŒä¹‰è¯ï¼Œä¸¤è€…çš„ä½œç”¨ç›¸åŒï¼Œç”¨æ¥æŒ‡å®šåˆ›å»ºç´¢å¼•ï¼›</li><li><code>index_name</code>æŒ‡å®šç´¢å¼•çš„åç§°ï¼Œä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆMySQLé»˜è®¤col_nameä¸ºç´¢å¼•åï¼›</li><li><code>col_name</code>ä¸ºéœ€è¦åˆ›å»ºç´¢å¼•çš„å­—æ®µåˆ—ï¼Œè¯¥åˆ—å¿…é¡»ä»æ•°æ®è¡¨ä¸­å®šä¹‰çš„å¤šä¸ªåˆ—ä¸­é€‰æ‹©ï¼›</li><li><code>length</code>ä¸ºå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºç´¢å¼•çš„é•¿åº¦ï¼Œåªæœ‰å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ‰èƒ½æŒ‡å®šç´¢å¼•é•¿åº¦ï¼›</li><li><code>ASC</code>æˆ–<code>DESC</code>æŒ‡å®šå‡åºæˆ–è€…é™åºçš„ç´¢å¼•å€¼å­˜å‚¨ã€‚</li></ul><p><strong>1.</strong> <strong>åˆ›å»ºæ™®é€šç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE book( </span><br><span class="line">    book_id INT , </span><br><span class="line">    book_name VARCHAR(100), </span><br><span class="line">    authors VARCHAR(100), </span><br><span class="line">    info VARCHAR(100) , </span><br><span class="line">    comment VARCHAR(100), </span><br><span class="line">    year_publication YEAR, </span><br><span class="line">    INDEX(year_publication) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>åˆ›å»ºå”¯ä¸€ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test1( </span><br><span class="line">    id INT NOT NULL, </span><br><span class="line">    name varchar(30) NOT NULL, </span><br><span class="line">    UNIQUE INDEX uk_idx_id(id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>ä¸»é”®ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student ( </span><br><span class="line">    id INT(10) UNSIGNED AUTO_INCREMENT, </span><br><span class="line">    student_no VARCHAR(200),</span><br><span class="line">    student_name VARCHAR(200), </span><br><span class="line">    PRIMARY KEY(id) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åˆ é™¤ä¸»é”®ç´¢å¼•</span><br><span class="line">ALTER TABLE student drop PRIMARY KEY ;</span><br></pre></td></tr></table></figure><p><strong>4.</strong> <strong>åˆ›å»ºå•åˆ—ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test2( </span><br><span class="line">    id INT NOT NULL, </span><br><span class="line">    name CHAR(50) NULL, </span><br><span class="line">    INDEX single_idx_name(name(20)) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>5.</strong> <strong>åˆ›å»ºç»„åˆç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test3( </span><br><span class="line">    id INT(11) NOT NULL, </span><br><span class="line">    name CHAR(30) NOT NULL, </span><br><span class="line">    age INT(11) NOT NULL, </span><br><span class="line">    info VARCHAR(255), </span><br><span class="line">    INDEX multi_idx(id,name,age) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>6.</strong> <strong>åˆ›å»ºå…¨æ–‡ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `papers` ( </span><br><span class="line">    id` int(10) unsigned NOT NULL AUTO_INCREMENT, </span><br><span class="line">    `title` varchar(200) DEFAULT NULL, </span><br><span class="line">    `content` text, PRIMARY KEY (`id`), </span><br><span class="line">    FULLTEXT KEY `title` (`title`,`content`) </span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM papers WHERE MATCH(title,content) AGAINST (â€˜æŸ¥è¯¢å­—ç¬¦ä¸²â€™);</span><br></pre></td></tr></table></figure><p><strong>7.</strong> <strong>åˆ›å»ºç©ºé—´ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test5( </span><br><span class="line">    geo GEOMETRY NOT NULL, </span><br><span class="line">    SPATIAL INDEX spa_idx_geo(geo) </span><br><span class="line">) ENGINE=MyISAM;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>åœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»ºç´¢å¼•</strong></p><p><strong>1.</strong> <strong>ä½¿ç”¨ALTER TABLEè¯­å¥åˆ›å»ºç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name </span><br><span class="line">ADD [UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY] [index_name] (col_name[length],...) [ASC | DESC]</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä½¿ç”¨CREATE INDEXåˆ›å»ºç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name </span><br><span class="line">ON table_name (col_name[length],...) [ASC | DESC]</span><br></pre></td></tr></table></figure><h5 id="1-3-åˆ é™¤ç´¢å¼•"><strong>1.3</strong> <strong>åˆ é™¤ç´¢å¼•</strong></h5><p><strong>1.</strong> <strong>ä½¿ç”¨ALTER TABLEåˆ é™¤ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name DROP INDEX index_name;</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>ä½¿ç”¨DROP INDEXè¯­å¥åˆ é™¤ç´¢å¼•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX index_name ON table_name;</span><br></pre></td></tr></table></figure><h4 id="2-MySQL8-0ç´¢å¼•æ–°ç‰¹æ€§"><strong>2. MySQL8.0ç´¢å¼•æ–°ç‰¹æ€§</strong></h4><h5 id="2-1-æ”¯æŒé™åºç´¢å¼•"><strong>2.1</strong> <strong>æ”¯æŒé™åºç´¢å¼•</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE ts1(a int,b int,index idx_a_b(a,b desc));</span><br></pre></td></tr></table></figure><h5 id="2-2-éšè—ç´¢å¼•"><strong>2.2</strong> <strong>éšè—ç´¢å¼•</strong></h5><p>ä»MySQL 8.xå¼€å§‹æ”¯æŒ<code>éšè—ç´¢å¼•ï¼ˆinvisible indexesï¼‰</code>ï¼Œåªéœ€è¦å°†å¾…åˆ é™¤çš„ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œä½¿æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸å†ä½¿ç”¨è¿™ä¸ªç´¢å¼•ï¼ˆå³ä½¿ä½¿ç”¨force indexï¼ˆå¼ºåˆ¶ä½¿ç”¨ç´¢å¼•ï¼‰ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨è¯¥ç´¢å¼•ï¼‰ï¼Œç¡®è®¤å°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•åç³»ç»Ÿä¸å—ä»»ä½•å“åº”ï¼Œå°±å¯ä»¥å½»åº•åˆ é™¤ç´¢å¼•ã€‚<code>è¿™ç§é€šè¿‡å…ˆå°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œå†åˆ é™¤ç´¢å¼•çš„æ–¹å¼å°±æ˜¯è½¯åˆ é™¤</code>ã€‚</p><p><strong>1.</strong> <strong>åˆ›å»ºè¡¨æ—¶ç›´æ¥åˆ›å»º</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tablename( </span><br><span class="line">    propname1 type1[CONSTRAINT1], </span><br><span class="line">    propname2 type2[CONSTRAINT2], </span><br><span class="line">    â€¦â€¦</span><br><span class="line">    propnamen typen, </span><br><span class="line">    INDEX [indexname](propname1 [(length)]) INVISIBLE </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><strong>2.</strong> <strong>åœ¨å·²ç»å­˜åœ¨çš„è¡¨ä¸Šåˆ›å»º</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX indexname </span><br><span class="line">ON tablename(propname[(length)]) INVISIBLE;</span><br></pre></td></tr></table></figure><p><strong>3.</strong> <strong>é€šè¿‡ALTER TABLEè¯­å¥åˆ›å»º</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tablename </span><br><span class="line">ADD INDEX indexname (propname [(length)]) INVISIBLE;</span><br></pre></td></tr></table></figure><p><strong>4.</strong> <strong>åˆ‡æ¢ç´¢å¼•å¯è§çŠ¶æ€</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tablename ALTER INDEX index_name INVISIBLE; #åˆ‡æ¢æˆéšè—ç´¢å¼• </span><br><span class="line">ALTER TABLE tablename ALTER INDEX index_name VISIBLE; #åˆ‡æ¢æˆééšè—ç´¢å¼•</span><br></pre></td></tr></table></figure><h4 id="3-ç´¢å¼•çš„è®¾è®¡åŸåˆ™"><strong>3.</strong> <strong>ç´¢å¼•çš„è®¾è®¡åŸåˆ™</strong></h4><h5 id="3-1-å“ªäº›æƒ…å†µé€‚åˆåˆ›å»ºç´¢å¼•"><strong>3.1</strong> <strong>å“ªäº›æƒ…å†µé€‚åˆåˆ›å»ºç´¢å¼•</strong></h5><p><strong>1.</strong> <strong>å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶</strong></p><p>ç´¢å¼•æœ¬èº«å¯ä»¥èµ·åˆ°çº¦æŸçš„ä½œç”¨ï¼Œæ¯”å¦‚å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•éƒ½å¯ä»¥èµ·åˆ°å”¯ä¸€æ€§çº¦æŸçš„ï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„æ•°æ®è¡¨ä¸­ï¼Œå¦‚æœ<code>æŸä¸ªå­—æ®µæ˜¯å”¯ä¸€çš„</code>ï¼Œå°±å¯ä»¥ç›´æ¥<code>åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•</code>ï¼Œæˆ–è€…<code>ä¸»é”®ç´¢å¼•</code>ã€‚è¿™æ ·å¯ä»¥æ›´å¿«é€Ÿåœ°é€šè¿‡è¯¥ç´¢å¼•æ¥ç¡®å®šæŸæ¡è®°å½•ã€‚</p><blockquote><p>ä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯ç»„åˆå­—æ®µï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼•ã€‚ï¼ˆæ¥æºï¼šAlibabaï¼‰</p><p>è¯´æ˜ï¼šä¸è¦ä»¥ä¸ºå”¯ä¸€ç´¢å¼•å½±å“äº†inserté€Ÿåº¦ï¼Œè¿™ä¸ªé€Ÿåº¦æŸè€—å¯ä»¥å¿½ç•¥ï¼Œä½†æé«˜æŸ¥æ‰¾é€Ÿåº¦æ˜¯æ˜æ˜¾çš„ã€‚</p></blockquote><p><strong>2.</strong> <strong>é¢‘ç¹ä½œä¸º</strong> <strong>WHERE</strong> <strong>æŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ</strong></p><p>æŸä¸ªå­—æ®µåœ¨SELECTè¯­å¥çš„ WHERE æ¡ä»¶ä¸­ç»å¸¸è¢«ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•äº†ã€‚å°¤å…¶æ˜¯åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºæ™®é€šç´¢å¼•å°±å¯ä»¥å¤§å¹…æå‡æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><p><strong>3.</strong> <strong>ç»å¸¸</strong> <strong>GROUP BY</strong> <strong>å’Œ</strong> <strong>ORDER BY</strong> <strong>çš„åˆ—</strong></p><p>ç´¢å¼•å°±æ˜¯è®©æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œå­˜å‚¨æˆ–æ£€ç´¢ï¼Œå› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨ GROUP BY å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œæˆ–è€…ä½¿ç”¨ ORDER BY å¯¹æ•°æ®è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œå°±éœ€è¦<code>å¯¹åˆ†ç»„æˆ–è€…æ’åºçš„å­—æ®µè¿›è¡Œç´¢å¼•</code>ã€‚å¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹<code>ç»„åˆç´¢å¼•</code>ã€‚</p><p><strong>4. UPDATEã€DELETE</strong> <strong>çš„</strong> <strong>WHERE</strong> <strong>æ¡ä»¶åˆ—</strong></p><p>å¯¹æ•°æ®æŒ‰ç…§æŸä¸ªæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢åå†è¿›è¡Œ UPDATE æˆ– DELETE çš„æ“ä½œï¼Œå¦‚æœå¯¹ WHERE å­—æ®µåˆ›å»ºäº†ç´¢å¼•ï¼Œå°±èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚åŸç†æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆæ ¹æ® WHERE æ¡ä»¶åˆ—æ£€ç´¢å‡ºæ¥è¿™æ¡è®°å½•ï¼Œç„¶åå†å¯¹å®ƒè¿›è¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚<strong>å¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ã€‚</strong></p><p><strong>5.DISTINCT</strong> <strong>å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªå­—æ®µè¿›è¡Œå»é‡ï¼Œä½¿ç”¨ DISTINCTï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¹Ÿä¼šæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p><p><strong>6.</strong> <strong>å¤šè¡¨</strong> <strong>JOIN</strong> <strong>è¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•æ³¨æ„äº‹é¡¹</strong></p><p>é¦–å…ˆï¼Œ<code>è¿æ¥è¡¨çš„æ•°é‡å°½é‡ä¸è¦è¶…è¿‡ 3 å¼ </code>ï¼Œå› ä¸ºæ¯å¢åŠ ä¸€å¼ è¡¨å°±ç›¸å½“äºå¢åŠ äº†ä¸€æ¬¡åµŒå¥—çš„å¾ªç¯ï¼Œæ•°é‡çº§å¢é•¿ä¼šéå¸¸å¿«ï¼Œä¸¥é‡å½±å“æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><p>å…¶æ¬¡ï¼Œ<code>å¯¹ WHERE æ¡ä»¶åˆ›å»ºç´¢å¼•</code>ï¼Œå› ä¸º WHERE æ‰æ˜¯å¯¹æ•°æ®æ¡ä»¶çš„è¿‡æ»¤ã€‚å¦‚æœåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ WHERE æ¡ä»¶è¿‡æ»¤æ˜¯éå¸¸å¯æ€•çš„ã€‚</p><p>æœ€åï¼Œ<code>å¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•</code>ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„<code>ç±»å‹å¿…é¡»ä¸€è‡´</code>ã€‚</p><p><strong>7.</strong> <strong>ä½¿ç”¨åˆ—çš„ç±»å‹å°çš„åˆ›å»ºç´¢å¼•</strong></p><p>æˆ‘ä»¬è¿™é‡Œæ‰€è¯´çš„<code>ç±»å‹å¤§å°</code>æŒ‡çš„å°±æ˜¯è¯¥ç±»å‹è¡¨ç¤ºçš„æ•°æ®èŒƒå›´çš„å¤§å°ã€‚</p><ul><li>æ•°æ®ç±»å‹è¶Šå°ï¼Œåœ¨æŸ¥è¯¢æ—¶è¿›è¡Œçš„æ¯”è¾ƒæ“ä½œè¶Šå¿«</li><li>æ•°æ®ç±»å‹è¶Šå°ï¼Œç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´å°±è¶Šå°‘ï¼Œåœ¨ä¸€ä¸ªæ•°æ®é¡µå†…å°±å¯ä»¥<code>æ”¾ä¸‹æ›´å¤šçš„è®°å½•</code>ï¼Œä»è€Œå‡å°‘ç£ç›˜<code>I/O</code>å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œä¹Ÿå°±æ„å‘³ç€å¯ä»¥æŠŠæ›´å¤šçš„æ•°æ®é¡µç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€ŒåŠ å¿«è¯»å†™æ•ˆç‡ã€‚</li></ul><p>è¿™ä¸ªå»ºè®®å¯¹äºè¡¨çš„<code>ä¸»é”®æ¥è¯´æ›´åŠ é€‚ç”¨</code>ï¼Œå› ä¸ºä¸ä»…æ˜¯èšç°‡ç´¢å¼•ä¸­ä¼šå­˜å‚¨ä¸»é”®å€¼ï¼Œå…¶ä»–æ‰€æœ‰çš„äºŒçº§ç´¢å¼•çš„èŠ‚ç‚¹å¤„éƒ½ä¼šå­˜å‚¨ä¸€ä»½è®°å½•çš„ä¸»é”®å€¼ï¼Œå¦‚æœä¸»é”®ä½¿ç”¨æ›´å°çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ„å‘³ç€èŠ‚çœæ›´å¤šçš„å­˜å‚¨ç©ºé—´å’Œæ›´é«˜æ•ˆçš„I/Oã€‚</p><p><strong>8.</strong> <strong>ä½¿ç”¨å­—ç¬¦ä¸²å‰ç¼€åˆ›å»ºç´¢å¼•</strong></p><p>åŒºåˆ†åº¦è®¡ç®—å…¬å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">count(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(*)</span><br></pre></td></tr></table></figure><p><strong>æ‹“å±•ï¼šAlibabaã€ŠJavaå¼€å‘æ‰‹å†Œã€‹</strong></p><p>ã€<code>å¼ºåˆ¶</code>ã€‘åœ¨ varchar å­—æ®µä¸Šå»ºç«‹ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œæ²¡å¿…è¦å¯¹å…¨å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œæ ¹æ®å®é™…æ–‡æœ¬åŒºåˆ†åº¦å†³å®šç´¢å¼•é•¿åº¦ã€‚</p><p>è¯´æ˜ï¼šç´¢å¼•çš„é•¿åº¦ä¸åŒºåˆ†åº¦æ˜¯ä¸€å¯¹çŸ›ç›¾ä½“ï¼Œä¸€èˆ¬å¯¹å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œé•¿åº¦ä¸º 20 çš„ç´¢å¼•ï¼ŒåŒºåˆ†åº¦ä¼š<code>é«˜è¾¾ 90% ä»¥ä¸Š</code>ã€‚</p><p><strong>9.</strong> <strong>åŒºåˆ†åº¦é«˜(æ•£åˆ—æ€§é«˜)çš„åˆ—é€‚åˆä½œä¸ºç´¢å¼•</strong></p><p><code>åˆ—çš„åŸºæ•°</code>æŒ‡çš„æ˜¯æŸä¸€åˆ—ä¸­ä¸é‡å¤æ•°æ®çš„ä¸ªæ•°ï¼Œæ¯”æ–¹è¯´æŸä¸ªåˆ—åŒ…å«å€¼<code>2,5,8,2,5,8,2,5,8</code>ï¼Œè™½ç„¶æœ‰<code>9</code>æ¡è®°å½•ï¼Œä½†è¯¥åˆ—çš„åŸºæ•°å´æ˜¯<code>3</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åœ¨è®°å½•è¡Œæ•°ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œåˆ—çš„åŸºæ•°è¶Šå¤§ï¼Œè¯¥åˆ—ä¸­çš„å€¼è¶Šåˆ†æ•£ï¼›åˆ—çš„åŸºæ•°è¶Šå°ï¼Œè¯¥åˆ—ä¸­çš„å€¼è¶Šé›†ä¸­ã€‚**è¿™ä¸ªåˆ—çš„åŸºæ•°æŒ‡æ ‡éå¸¸é‡è¦ï¼Œç›´æ¥å½±å“æˆ‘ä»¬æ˜¯å¦èƒ½æœ‰æ•ˆçš„åˆ©ç”¨ç´¢å¼•ã€‚æœ€å¥½ä¸ºåˆ—çš„åŸºæ•°å¤§çš„åˆ—å»ºç«‹ç´¢å¼•ï¼Œä¸ºåŸºæ•°å¤ªå°çš„åˆ—å»ºç«‹ç´¢å¼•æ•ˆæœå¯èƒ½ä¸å¥½ã€‚</p><p>å¯ä»¥ä½¿ç”¨å…¬å¼<code>select count(distinct a)/count(*) from t1</code>è®¡ç®—åŒºåˆ†åº¦ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½ï¼Œä¸€èˆ¬è¶…è¿‡<code>33%</code>å°±ç®—æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ç´¢å¼•äº†ã€‚</p><p>æ‹“å±•ï¼šè”åˆç´¢å¼•æŠŠåŒºåˆ†åº¦é«˜ï¼ˆæ•£åˆ—æ€§é«˜ï¼‰çš„åˆ—æ”¾åœ¨å‰é¢ã€‚</p><p><strong>10.</strong> <strong>ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§</strong></p><p><strong>11.</strong> <strong>åœ¨å¤šä¸ªå­—æ®µéƒ½è¦åˆ›å»ºç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè”åˆç´¢å¼•ä¼˜äºå•å€¼ç´¢å¼•</strong></p><h5 id="3-2-é™åˆ¶ç´¢å¼•çš„æ•°ç›®"><strong>3.2</strong> <strong>é™åˆ¶ç´¢å¼•çš„æ•°ç›®</strong></h5><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨æ„å¹³è¡¡ï¼Œç´¢å¼•çš„æ•°ç›®ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚æˆ‘ä»¬éœ€è¦é™åˆ¶æ¯å¼ è¡¨ä¸Šçš„ç´¢å¼•æ•°é‡ï¼Œå»ºè®®å•å¼ è¡¨ç´¢å¼•æ•°é‡<code>ä¸è¶…è¿‡6ä¸ª</code>ã€‚åŸå› ï¼š</p><ul><li>æ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å ç”¨<code>ç£ç›˜ç©ºé—´</code>ï¼Œç´¢å¼•è¶Šå¤šï¼Œéœ€è¦çš„ç£ç›˜ç©ºé—´å°±è¶Šå¤§ã€‚</li><li>ç´¢å¼•ä¼šå½±å“<code>INSERTã€DELETEã€UPDATEç­‰è¯­å¥çš„æ€§èƒ½</code>ï¼Œå› ä¸ºè¡¨ä¸­çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ï¼Œä¼šé€ æˆè´Ÿæ‹…ã€‚</li><li>ä¼˜åŒ–å™¨åœ¨é€‰æ‹©å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢æ—¶ï¼Œä¼šæ ¹æ®ç»Ÿä¸€ä¿¡æ¯ï¼Œå¯¹æ¯ä¸€ä¸ªå¯ä»¥ç”¨åˆ°çš„<code>ç´¢å¼•æ¥è¿›è¡Œè¯„ä¼°</code>ï¼Œä»¥ç”Ÿæˆå‡ºä¸€ä¸ªæœ€å¥½çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚æœåŒæ—¶æœ‰å¾ˆå¤šä¸ªç´¢å¼•éƒ½å¯ä»¥ç”¨äºæŸ¥è¯¢ï¼Œä¼šå¢åŠ MySQLä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ—¶é—´ï¼Œé™ä½æŸ¥è¯¢æ€§èƒ½ã€‚</li></ul><h5 id="3-3-å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•"><strong>3.3</strong> <strong>å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•</strong></h5><p><strong>1.</strong> <strong>åœ¨whereä¸­ä½¿ç”¨ä¸åˆ°çš„å­—æ®µï¼Œä¸è¦è®¾ç½®ç´¢å¼•</strong></p><p><strong>2.</strong> <strong>æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•</strong></p><p><strong>3.</strong> <strong>æœ‰å¤§é‡é‡å¤æ•°æ®çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•</strong></p><p><strong>4.</strong> <strong>é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼•</strong></p><p><strong>5.</strong> <strong>ä¸å»ºè®®ç”¨æ— åºçš„å€¼ä½œä¸ºç´¢å¼•</strong></p><p>ä¾‹å¦‚èº«ä»½è¯ã€UUID(åœ¨ç´¢å¼•æ¯”è¾ƒæ—¶éœ€è¦è½¬ä¸ºASCIIï¼Œå¹¶ä¸”æ’å…¥æ—¶å¯èƒ½é€ æˆé¡µåˆ†è£‚)ã€MD5ã€HASHã€æ— åºé•¿å­—ç¬¦ä¸²ç­‰ã€‚</p><p><strong>6.</strong> <strong>åˆ é™¤ä¸å†ä½¿ç”¨æˆ–è€…å¾ˆå°‘ä½¿ç”¨çš„ç´¢å¼•</strong></p><p><strong>7.</strong> <strong>ä¸è¦å®šä¹‰å†—ä½™æˆ–é‡å¤çš„ç´¢å¼•</strong></p>]]></content>
    
    
    <summary type="html">ã€ç´¢å¼•çš„å£°æ˜ä¸ä½¿ç”¨ã€MySQL8.0ç´¢å¼•æ–°ç‰¹æ€§ã€ç´¢å¼•çš„è®¾è®¡åŸåˆ™ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬07ç«  InnoDBæ•°æ®å­˜å‚¨ç»“æ„</title>
    <link href="https://angus9823.github.io/posts/47faf38c.html"/>
    <id>https://angus9823.github.io/posts/47faf38c.html</id>
    <published>2023-04-18T07:35:37.000Z</published>
    <updated>2023-04-18T08:25:56.576Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬07ç« -InnoDBæ•°æ®å­˜å‚¨ç»“æ„">ç¬¬07ç«  InnoDBæ•°æ®å­˜å‚¨ç»“æ„</h3><h4 id="1-æ•°æ®åº“çš„å­˜å‚¨ç»“æ„ï¼šé¡µ">1. æ•°æ®åº“çš„å­˜å‚¨ç»“æ„ï¼šé¡µ</h4><p>ç´¢å¼•ç»“æ„ç»™æˆ‘ä»¬æä¾›äº†é«˜æ•ˆçš„ç´¢å¼•æ–¹å¼ï¼Œä¸è¿‡ç´¢å¼•ä¿¡æ¯ä»¥åŠæ•°æ®è®°å½•éƒ½ä¿å­˜åœ¨æ–‡ä»¶ä¸Šçš„ï¼Œç¡®åˆ‡è¯´æ˜¯å­˜å‚¨åœ¨é¡µç»“æ„ä¸­ã€‚å¦ä¸€æ–¹é¢ï¼Œç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“ä¸­å®ç°çš„ï¼ŒMySQLæœåŠ¡å™¨ä¸Šçš„<code>å­˜å‚¨å¼•æ“</code>è´Ÿè´£å¯¹è¡¨ä¸­æ•°æ®çš„è¯»å–å’Œå†™å…¥å·¥ä½œã€‚ä¸åŒå­˜å‚¨å¼•æ“ä¸­<code>å­˜æ”¾çš„æ ¼å¼</code>ä¸€èˆ¬ä¸åŒçš„ï¼Œç”šè‡³æœ‰çš„å­˜å‚¨å¼•æ“æ¯”å¦‚Memoryéƒ½ä¸ç”¨ç£ç›˜æ¥å­˜å‚¨æ•°æ®ã€‚</p><p>ç”±äº<code>InnoDB</code>æ˜¯MySQLçš„<code>é»˜è®¤å­˜å‚¨å¼•æ“</code>ï¼Œæ‰€ä»¥æœ¬ç« å‰–æInooDBå­˜å‚¨å¼•æ“çš„æ•°æ®å­˜å‚¨ç»“æ„ã€‚</p><h5 id="1-1-ç£ç›˜ä¸å†…å­˜äº¤äº’åŸºæœ¬å•ä½ï¼šé¡µ">1.1 ç£ç›˜ä¸å†…å­˜äº¤äº’åŸºæœ¬å•ä½ï¼šé¡µ</h5><p>InnoDBå°†æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªé¡µï¼ŒInnoDBä¸­é¡µçš„å¤§å°é»˜è®¤ä¸º<code>16KB</code>ã€‚</p><p>ä»¥<code>é¡µ</code>ä½œä¸ºç£ç›˜å’Œå†…å­˜ä¹‹é—´äº¤äº’çš„åŸºæœ¬å•ä½ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡æœ€å°‘ä»ç£ç›˜ä¸­è¯»å–16KBçš„å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œä¸€æ¬¡æœ€å°‘æŠŠå†…å­˜ä¸­çš„16KBå†…å®¹åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åœ¨æ•°æ®åº“ä¸­ï¼Œä¸è®ºè¯»ä¸€è¡Œï¼Œè¿˜æ˜¯è¯»å¤šè¡Œï¼Œéƒ½æ˜¯å°†è¿™äº›è¡Œæ‰€åœ¨çš„é¡µè¿›è¡ŒåŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®åº“ç®¡ç†å­˜å‚¨ç©ºé—´çš„åŸºæœ¬å•ä½æ˜¯é¡µï¼ˆPageï¼‰ï¼Œæ•°æ®åº“I/Oæ“ä½œçš„æœ€å°å•ä½æ˜¯é¡µã€‚**ä¸€ä¸ªé¡µä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡Œè®°å½•ã€‚</p><blockquote><p>è®°å½•æ˜¯æŒ‰ç…§è¡Œæ¥å­˜å‚¨çš„ï¼Œä½†æ˜¯æ•°æ®åº“çš„è¯»å–å¹¶ä¸ä»¥è¡Œä¸ºå•ä½ï¼Œå¦åˆ™ä¸€æ¬¡è¯»å–ï¼ˆä¹Ÿå°±æ˜¯ä¸€æ¬¡I/Oæ“ä½œï¼‰åªèƒ½å¤„ç†ä¸€è¡Œæ•°æ®ï¼Œæ•ˆç‡ä¼šéå¸¸ä½ã€‚</p></blockquote><h5 id="1-2-é¡µç»“æ„æ¦‚è¿°">1.2 é¡µç»“æ„æ¦‚è¿°</h5><p>é¡µaã€é¡µbã€é¡µcâ€¦é¡µnè¿™äº›é¡µå¯ä»¥<code>ä¸åœ¨ç‰©ç†ç»“æ„ä¸Šç›¸è¿</code>ï¼Œåªè¦é€šè¿‡<code>åŒå‘é“¾è¡¨</code>ç›¸å…³è”å³å¯ã€‚æ¯ä¸ªæ•°æ®é¡µä¸­çš„è®°å½•ä¼šæŒ‰ç…§ä¸»é”®å€¼ä»å°åˆ°å¤§çš„é¡ºåºç»„æˆä¸€ä¸ª<code>å•å‘é“¾è¡¨</code>ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½ä¼šä¸ºå­˜å‚¨åœ¨å®ƒé‡Œè¾¹çš„è®°å½•ç”Ÿæˆä¸€ä¸ª<code>é¡µç›®å½•</code>ï¼Œåœ¨é€šè¿‡ä¸»é”®æŸ¥æ‰¾æŸæ¡è®°å½•çš„æ—¶å€™å¯ä»¥åœ¨é¡µç›®å½•ä¸­<code>ä½¿ç”¨äºŒåˆ†æ³•</code>å¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„æ§½ï¼Œç„¶åå†éå†è¯¥æ§½å¯¹åº”çš„åˆ†ç»„ä¸­çš„è®°å½•å³å¯å¿«é€Ÿæ‰¾åˆ°æŒ‡å®šçš„è®°å½•ã€‚</p><h5 id="1-3-é¡µçš„ä¸Šå±‚ç»“æ„">1.3 é¡µçš„ä¸Šå±‚ç»“æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301838071.png" alt="image-20220330183814954"></p><p>åŒºï¼ˆExtentï¼‰æ˜¯æ¯”é¡µå¤§ä¸€çº§çš„å­˜å‚¨ç»“æ„ï¼Œåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªåŒºä¼šåˆ†é…<code>64ä¸ªè¿ç»­çš„é¡µ</code>ã€‚å› ä¸ºInnoDBä¸­çš„é¡µå¤§å°é»˜è®¤æ˜¯16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯64*16KB=<code>1MB</code>ã€‚</p><p>æ®µï¼ˆSegmentï¼‰ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒºç»„æˆï¼ŒåŒºåœ¨æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿ç»­åˆ†é…çš„ç©ºé—´ï¼ˆåœ¨InnoDBä¸­æ˜¯è¿ç»­çš„64ä¸ªé¡µï¼‰ï¼Œä¸è¿‡åœ¨æ®µä¸­ä¸è¦æ±‚åŒºä¸åŒºä¹‹é—´æ˜¯ç›¸é‚»çš„ã€‚<code>æ®µæ˜¯æ•°æ®åº“ä¸­çš„åˆ†é…å•ä½ï¼Œä¸åŒç±»å‹çš„æ•°æ®åº“å¯¹è±¡ä»¥ä¸åŒçš„æ®µå½¢å¼å­˜åœ¨ã€‚</code>å½“æˆ‘ä»¬åˆ›å»ºæ•°æ®è¡¨ã€ç´¢å¼•çš„æ—¶å€™ï¼Œå°±ä¼šç›¸åº”åˆ›å»ºå¯¹åº”çš„æ®µï¼Œæ¯”å¦‚åˆ›å»ºä¸€å¼ è¡¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¡¨æ®µï¼Œåˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶ä¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•æ®µã€‚</p><p>è¡¨ç©ºé—´ï¼ˆTablespaceï¼‰æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç©ºé—´ç»„æˆï¼Œè¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸º<code>ç³»ç»Ÿè¡¨ç©ºé—´</code>ã€<code>ç”¨æˆ·è¡¨ç©ºé—´</code>ã€<code>æ’¤é”€è¡¨ç©ºé—´</code>ã€<code>ä¸´æ—¶è¡¨ç©ºé—´</code>ç­‰ã€‚</p><h4 id="2-é¡µçš„å†…éƒ¨ç»“æ„">2. é¡µçš„å†…éƒ¨ç»“æ„</h4><h5 id="2-1-ç¬¬1éƒ¨åˆ†ï¼šæ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨">2.1 ç¬¬1éƒ¨åˆ†ï¼šæ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨</h5><h6 id="2-1-1-File-Headerï¼ˆæ–‡ä»¶å¤´éƒ¨ï¼‰ï¼ˆ38å­—èŠ‚ï¼‰">2.1.1 File Headerï¼ˆæ–‡ä»¶å¤´éƒ¨ï¼‰ï¼ˆ38å­—èŠ‚ï¼‰</h6><p><strong>ä½œç”¨</strong>ï¼š<br>æè¿°å„ç§é¡µçš„é€šç”¨ä¿¡æ¯ã€‚ï¼ˆæ¯”å¦‚é¡µçš„ç¼–å·ã€å…¶ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µæ˜¯è°ç­‰ï¼‰</p><p><strong>å¤§å°</strong>ï¼š38å­—èŠ‚</p><table><thead><tr><th>åç§°</th><th>å ç”¨ç©ºé—´å¤§å°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>FIL_PAGE_SPACE_OR_CHKSUM</code></td><td><code>4</code>å­—èŠ‚</td><td>é¡µçš„æ ¡éªŒå’Œï¼ˆchecksumå€¼ï¼‰</td></tr><tr><td><code>FIL_PAGE_OFFSET</code></td><td><code>4</code>å­—èŠ‚</td><td>é¡µå·</td></tr><tr><td><code>FIL_PAGE_PREV</code></td><td><code>4</code>å­—èŠ‚</td><td>ä¸Šä¸€ä¸ªé¡µçš„é¡µå·</td></tr><tr><td><code>FIL_PAGE_NEXT</code></td><td><code>4</code>å­—èŠ‚</td><td>ä¸‹ä¸€ä¸ªé¡µçš„é¡µå·</td></tr><tr><td>FIL_PAGE_LSN</td><td><code>8</code>å­—èŠ‚</td><td>é¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®</td></tr><tr><td><code>FIL_PAGE_TYPE</code></td><td><code>2</code>å­—èŠ‚</td><td>è¯¥é¡µçš„ç±»å‹</td></tr><tr><td>FIL_PAGE_FILE_FLUSH_LSN</td><td><code>8</code>å­—èŠ‚</td><td>ä»…åœ¨ç³»ç»Ÿè¡¨ç©ºé—´çš„ä¸€ä¸ªé¡µä¸­å®šä¹‰ï¼Œä»£è¡¨æ–‡ä»¶è‡³å°‘è¢«åˆ·æ–°åˆ°äº†å¯¹åº”çš„LSNå€¼</td></tr><tr><td><code>FIL_PAGE_ARCH_LOG_NO_OR_SPACE_ID</code></td><td><code>4</code>å­—èŠ‚</td><td>é¡µå±äºå“ªä¸ªè¡¨ç©ºé—´</td></tr></tbody></table><ul><li><code>FIL_PAGE_OFFSETï¼ˆ4å­—èŠ‚ï¼‰</code>ï¼šæ¯ä¸€ä¸ªé¡µéƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„é¡µå·ï¼Œå°±è·Ÿä½ çš„èº«ä»½è¯å·ç ä¸€æ ·ï¼ŒInnoDBé€šè¿‡é¡µå·å¯ä»¥å”¯ä¸€å®šä½ä¸€ä¸ªé¡µã€‚</li><li><code>FIL_PAGE_TYPEï¼ˆ2å­—èŠ‚ï¼‰</code>ï¼šè¿™ä¸ªä»£è¡¨å½“å‰é¡µçš„ç±»å‹ã€‚</li></ul><table><thead><tr><th>ç±»å‹åç§°</th><th>åå…­è¿›åˆ¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>FIL_PAGE_TYPE_ALLOCATED</td><td>0x0000</td><td>æœ€æ–°åˆ†é…ï¼Œè¿˜æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td><code>FIL_PAGE_UNDO_LOG</code></td><td>0x0002</td><td>Undoæ—¥å¿—é¡µ</td></tr><tr><td>FIL_PAGE_INODE</td><td>0x0003</td><td>æ®µä¿¡æ¯èŠ‚ç‚¹</td></tr><tr><td>FIL_PAGE_IBUF_FREE_LIST</td><td>0x0004</td><td>Insert Bufferç©ºé—²åˆ—è¡¨</td></tr><tr><td>FIL_PAGE_IBUF_BITMAP</td><td>0x0005</td><td>Insert Bufferä½å›¾</td></tr><tr><td><code>FIL_PAGE_TYPE_SYS</code></td><td>0x0006</td><td>ç³»ç»Ÿé¡µ</td></tr><tr><td>FIL_PAGE_TYPE_TRX_SYS</td><td>0x0007</td><td>äº‹åŠ¡ç³»ç»Ÿæ•°æ®</td></tr><tr><td>FIL_PAGE_TYPE_FSP_HDR</td><td>0x0008</td><td>è¡¨ç©ºé—´å¤´éƒ¨ä¿¡æ¯</td></tr><tr><td>FIL_PAGE_TYPE_XDES</td><td>0x0009</td><td>æ‰©å±•æè¿°é¡µ</td></tr><tr><td>FIL_PAGE_TYPE_BLOB</td><td>0x000A</td><td>æº¢å‡ºé¡µ</td></tr><tr><td><code>FIL_PAGE_INDEX</code></td><td>0x45BF</td><td>ç´¢å¼•é¡µï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<code>æ•°æ®é¡µ</code></td></tr></tbody></table><ul><li><code>FIL_PAGE_PREVï¼ˆ4å­—èŠ‚ï¼‰å’ŒFIL_PAGE_NEXTï¼ˆ4å­—èŠ‚ï¼‰</code>ï¼šInnoDBéƒ½æ˜¯ä»¥é¡µä¸ºå•ä½å­˜æ”¾æ•°æ®çš„ï¼Œå¦‚æœæ•°æ®åˆ†æ•£åˆ°å¤šä¸ªä¸è¿ç»­çš„é¡µä¸­å­˜å‚¨çš„è¯éœ€è¦æŠŠè¿™äº›é¡µå…³è”èµ·æ¥ï¼ŒFIL_PAGE_PREVå’ŒFIL_PAGE_NEXTå°±åˆ†åˆ«ä»£è¡¨æœ¬é¡µçš„ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªé¡µçš„é¡µå·ã€‚è¿™æ ·é€šè¿‡å»ºç«‹ä¸€ä¸ªåŒå‘é“¾è¡¨æŠŠè®¸è®¸å¤šå¤šçš„é¡µå°±éƒ½ä¸²è”èµ·æ¥äº†ï¼Œä¿è¯è¿™äº›é¡µä¹‹é—´<strong>ä¸éœ€è¦æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ã€‚</strong></li><li><code>FIL_PAGE_SPACE_OR_CHKSUMï¼ˆ4å­—èŠ‚ï¼‰</code>ï¼šä»£è¡¨å½“å‰é¡µé¢çš„æ ¡éªŒå’Œï¼ˆchecksumï¼‰ã€‚æ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨éƒ½æœ‰å±æ€§ï¼šFIL_PAGE_SPACE_OR_CHKSUM</li></ul><p><strong>ä½œç”¨ï¼š</strong></p><p>InnoDBå­˜å‚¨å¼•æ“ä»¥é¡µä¸ºå•ä½æŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ï¼Œå¦‚æœè¯¥é¡µä¸­çš„æ•°æ®åœ¨å†…å­˜ä¸­è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆ<code>åœ¨ä¿®æ”¹åçš„æŸä¸ªæ—¶é—´éœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­ã€‚</code>ä½†æ˜¯åœ¨åŒæ­¥äº†ä¸€åŠçš„æ—¶å€™æ–­ç”µäº†ï¼Œé€ æˆäº†è¯¥é¡µä¼ è¾“çš„ä¸å®Œæ•´ã€‚</p><p>ä¸ºäº†æ£€æµ‹ä¸€ä¸ªé¡µæ˜¯å¦å®Œæ•´ï¼ˆä¹Ÿå°±æ˜¯åœ¨åŒæ­¥çš„æ—¶å€™æœ‰æ²¡æœ‰å‘ç”ŸåªåŒæ­¥ä¸€åŠçš„å°´å°¬æƒ…å†µï¼‰ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡æ–‡ä»¶å°¾çš„æ ¡éªŒå’Œï¼ˆchecksum å€¼ï¼‰ä¸æ–‡ä»¶å¤´çš„æ ¡éªŒå’Œåšæ¯”å¯¹ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸ç›¸ç­‰åˆ™è¯æ˜é¡µçš„ä¼ è¾“æœ‰é—®é¢˜ï¼Œéœ€è¦é‡æ–°è¿›è¡Œä¼ è¾“ï¼Œå¦åˆ™è®¤ä¸ºé¡µçš„ä¼ è¾“å·²ç»å®Œæˆã€‚</p><ul><li><code>FIL_PAGE_LSNï¼ˆ8å­—èŠ‚ï¼‰</code>ï¼šé¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆè‹±æ–‡åæ˜¯ï¼šLog Sequence Numberï¼‰</li></ul><h6 id="2-1-2-File-Trailerï¼ˆæ–‡ä»¶å°¾éƒ¨ï¼‰ï¼ˆ8å­—èŠ‚ï¼‰">2.1.2 File Trailerï¼ˆæ–‡ä»¶å°¾éƒ¨ï¼‰ï¼ˆ8å­—èŠ‚ï¼‰</h6><ul><li>å‰4ä¸ªå­—èŠ‚ä»£è¡¨é¡µçš„æ ¡éªŒå’Œï¼šè¿™ä¸ªéƒ¨åˆ†æ˜¯å’ŒFile Headerä¸­çš„æ ¡éªŒå’Œç›¸å¯¹åº”çš„ã€‚</li><li>å4ä¸ªå­—èŠ‚ä»£è¡¨é¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆLSNï¼‰ï¼šè¿™ä¸ªéƒ¨åˆ†ä¹Ÿæ˜¯ä¸ºäº†æ ¡éªŒé¡µçš„å®Œæ•´æ€§çš„ï¼Œå¦‚æœé¦–éƒ¨å’Œå°¾éƒ¨çš„LSNå€¼æ ¡éªŒä¸æˆåŠŸçš„è¯ï¼Œå°±è¯´æ˜åŒæ­¥è¿‡ç¨‹å‡ºç°äº†é—®é¢˜ã€‚</li></ul><h5 id="2-2-ç¬¬2éƒ¨åˆ†ï¼šç©ºé—²ç©ºé—´ã€ç”¨æˆ·è®°å½•å’Œæœ€å°æœ€å¤§è®°å½•">2.2 ç¬¬2éƒ¨åˆ†ï¼šç©ºé—²ç©ºé—´ã€ç”¨æˆ·è®°å½•å’Œæœ€å°æœ€å¤§è®°å½•</h5><h6 id="2-2-1-Free-Space-ç©ºé—²ç©ºé—´">2.2.1 Free Space (ç©ºé—²ç©ºé—´)</h6><p>æˆ‘ä»¬è‡ªå·±å­˜å‚¨çš„è®°å½•ä¼šæŒ‰ç…§æŒ‡å®šçš„<code>è¡Œæ ¼å¼</code>å­˜å‚¨åˆ°<code>User Records</code>éƒ¨åˆ†ã€‚ä½†æ˜¯åœ¨ä¸€å¼€å§‹ç”Ÿæˆé¡µçš„æ—¶å€™ï¼Œå…¶å®å¹¶æ²¡æœ‰User Recordsè¿™ä¸ªéƒ¨åˆ†ï¼Œ<code>æ¯å½“æˆ‘ä»¬æ’å…¥ä¸€æ¡è®°å½•ï¼Œéƒ½ä¼šä»Free Spaceéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å°šæœªä½¿ç”¨çš„å­˜å‚¨ç©ºé—´ä¸­ç”³è¯·ä¸€ä¸ªè®°å½•å¤§å°çš„ç©ºé—´åˆ’åˆ†åˆ°User Recordséƒ¨åˆ†</code>ï¼Œå½“Free Spaceéƒ¨åˆ†çš„ç©ºé—´å…¨éƒ¨è¢«User Recordséƒ¨åˆ†æ›¿ä»£æ‰ä¹‹åï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªé¡µä½¿ç”¨å®Œäº†ï¼Œå¦‚æœè¿˜æœ‰æ–°çš„è®°å½•æ’å…¥çš„è¯ï¼Œå°±éœ€è¦å»<code>ç”³è¯·æ–°çš„é¡µ</code>äº†ã€‚</p><h6 id="2-2-2-User-Records-ç”¨æˆ·è®°å½•">2.2.2 User Records (ç”¨æˆ·è®°å½•)</h6><p>User Recordsä¸­çš„è¿™äº›è®°å½•æŒ‰ç…§<code>æŒ‡å®šçš„è¡Œæ ¼å¼</code>ä¸€æ¡ä¸€æ¡æ‘†åœ¨User Recordséƒ¨åˆ†ï¼Œç›¸äº’ä¹‹é—´å½¢æˆ<code>å•é“¾è¡¨</code>ã€‚</p><h6 id="2-2-3-Infimum-Supremumï¼ˆæœ€å°æœ€å¤§è®°å½•ï¼‰">2.2.3 Infimum + Supremumï¼ˆæœ€å°æœ€å¤§è®°å½•ï¼‰</h6><p><strong>è®°å½•å¯ä»¥æ¯”è¾ƒå¤§å°å—</strong>ï¼Ÿ<br>æ˜¯çš„ï¼Œè®°å½•å¯ä»¥æ¯”å¤§å°ï¼Œå¯¹äºä¸€æ¡å®Œæ•´çš„è®°å½•æ¥è¯´ï¼Œæ¯”è¾ƒè®°å½•çš„å¤§å°å°±æ˜¯<code>æ¯”è¾ƒä¸»é”®</code>çš„å¤§å°ã€‚æ¯”æ–¹è¯´æˆ‘ä»¬æ’å…¥çš„4è¡Œè®°å½•çš„ä¸»é”®å€¼åˆ†åˆ«æ˜¯ï¼š1ã€2ã€3ã€4ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è¿™4æ¡è®°å½•æ˜¯ä»å°åˆ°å¤§ä¾æ¬¡é€’å¢ã€‚</p><p>InnoDBè§„å®šçš„æœ€å°è®°å½•ä¸æœ€å¤§è®°å½•è¿™ä¸¤æ¡è®°å½•çš„æ„é€ ååˆ†ç®€å•ï¼Œéƒ½æ˜¯ç”±5å­—èŠ‚å¤§å°çš„è®°å½•å¤´ä¿¡æ¯å’Œ8å­—èŠ‚å¤§å°çš„ä¸€ä¸ªå›ºå®šçš„éƒ¨åˆ†ç»„æˆçš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301913664.png" alt="image-20220330191335574"></p><p>è¿™ä¸¤æ¡è®°å½•<code>ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è®°å½•</code>ï¼Œæ‰€ä»¥å®ƒä»¬å¹¶ä¸å­˜æ”¾åœ¨é¡µçš„User Recordséƒ¨åˆ†ï¼Œä»–ä»¬è¢«å•ç‹¬æ”¾åœ¨ä¸€ä¸ªç§°ä¸ºInfimum + Supremumçš„éƒ¨åˆ†</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301914167.png" alt="image-20220330191446070"></p><h5 id="2-3-ç¬¬3éƒ¨åˆ†ï¼šé¡µç›®å½•å’Œé¡µé¢å¤´éƒ¨">2.3 ç¬¬3éƒ¨åˆ†ï¼šé¡µç›®å½•å’Œé¡µé¢å¤´éƒ¨</h5><h6 id="2-3-1-Page-Directoryï¼ˆé¡µç›®å½•ï¼‰">2.3.1 Page Directoryï¼ˆé¡µç›®å½•ï¼‰</h6><p><strong>ä¸ºä»€ä¹ˆéœ€è¦é¡µç›®å½•</strong>ï¼Ÿ<br>åœ¨é¡µä¸­ï¼Œè®°å½•æ˜¯ä»¥<code>å•å‘é“¾è¡¨</code>çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„ã€‚å•å‘é“¾è¡¨çš„ç‰¹ç‚¹å°±æ˜¯æ’å…¥ã€åˆ é™¤éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯<code>æ£€ç´¢æ•ˆç‡ä¸é«˜</code>ï¼Œæœ€å·®çš„æƒ…å†µä¸‹éœ€è¦éå†é“¾è¡¨ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹æ‰èƒ½å®Œæˆæ£€ç´¢ã€‚å› æ­¤åœ¨é¡µç»“æ„ä¸­ä¸“é—¨è®¾è®¡äº†é¡µç›®å½•è¿™ä¸ªæ¨¡å—ï¼Œ<code>ä¸“é—¨ç»™è®°å½•åšä¸€ä¸ªç›®å½•</code>ï¼Œé€šè¿‡<code>äºŒåˆ†æŸ¥æ‰¾æ³•</code>çš„æ–¹å¼è¿›è¡Œæ£€ç´¢ï¼Œæå‡æ•ˆç‡ã€‚</p><p><strong>é¡µç›®å½•ï¼ŒäºŒåˆ†æ³•æŸ¥æ‰¾</strong></p><ol><li>å°†æ‰€æœ‰çš„è®°å½•<code>åˆ†æˆå‡ ä¸ªç»„</code>ï¼Œè¿™äº›è®°å½•åŒ…æ‹¬æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ï¼Œä½†ä¸åŒ…æ‹¬æ ‡è®°ä¸ºâ€œå·²åˆ é™¤â€çš„è®°å½•ã€‚</li><li>ç¬¬ 1 ç»„ï¼Œä¹Ÿå°±æ˜¯æœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªæœ‰ 1 ä¸ªè®°å½•ï¼›<br>æœ€åä¸€ç»„ï¼Œå°±æ˜¯æœ€å¤§è®°å½•æ‰€åœ¨çš„åˆ†ç»„ï¼Œä¼šæœ‰ 1-8 æ¡è®°å½•ï¼›<br>å…¶ä½™çš„ç»„è®°å½•æ•°é‡åœ¨ 4-8 æ¡ä¹‹é—´ã€‚<br>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œé™¤äº†ç¬¬ 1 ç»„ï¼ˆæœ€å°è®°å½•æ‰€åœ¨ç»„ï¼‰ä»¥å¤–ï¼Œå…¶ä½™ç»„çš„è®°å½•æ•°ä¼š<code>å°½é‡å¹³åˆ†</code>ã€‚</li><li>åœ¨æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸º n_owned å­—æ®µã€‚</li><li><code>é¡µç›®å½•ç”¨æ¥å­˜å‚¨æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡</code>ï¼Œè¿™äº›åœ°å€åç§»é‡ä¼šæŒ‰ç…§<code>å…ˆåé¡ºåºå­˜å‚¨</code>èµ·æ¥ï¼Œæ¯ç»„çš„åœ°å€åç§»é‡ä¹Ÿè¢«ç§°ä¹‹ä¸º<code>æ§½ï¼ˆslotï¼‰</code>ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒç»„çš„æœ€åä¸€ä¸ªè®°å½•ã€‚</li></ol><p><strong>ä¸¾ä¾‹ï¼š</strong></p><p>ç°åœ¨çš„page_demoè¡¨ä¸­æ­£å¸¸çš„è®°å½•å…±æœ‰6æ¡ï¼ŒInnoDBä¼šæŠŠå®ƒä»¬åˆ†æˆä¸¤ç»„ï¼Œç¬¬ä¸€ç»„ä¸­åªæœ‰ä¸€ä¸ªæœ€å°è®°å½•ï¼Œç¬¬äºŒç»„ä¸­æ˜¯å‰©ä½™çš„5æ¡è®°å½•ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301921631.png" alt="image-20220330192130497"></p><p>ä»è¿™ä¸ªå›¾ä¸­æˆ‘ä»¬éœ€è¦æ³¨æ„è¿™ä¹ˆå‡ ç‚¹ï¼š</p><ul><li>ç°åœ¨é¡µç›®å½•éƒ¨åˆ†ä¸­æœ‰ä¸¤ä¸ªæ§½ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬çš„è®°å½•è¢«åˆ†æˆäº†ä¸¤ä¸ªç»„ï¼Œæ§½1ä¸­çš„å€¼æ˜¯112ï¼Œä»£è¡¨æœ€å¤§è®°å½•çš„åœ°å€åç§»é‡ï¼ˆå°±æ˜¯ä»é¡µé¢çš„0å­—èŠ‚å¼€å§‹æ•°ï¼Œæ•°112ä¸ªå­—èŠ‚ï¼‰ï¼›æ§½0ä¸­çš„å€¼æ˜¯99ï¼Œä»£è¡¨æœ€å°è®°å½•çš„åœ°å€åç§»é‡ã€‚</li><li>æ³¨æ„æœ€å°å’Œæœ€å¤§è®°å½•çš„å¤´ä¿¡æ¯ä¸­çš„n_ownedå±æ€§<ul><li>æœ€å°è®°å½•çš„n_ownedå€¼ä¸º1ï¼Œè¿™å°±ä»£è¡¨ç€ä»¥æœ€å°è®°å½•ç»“å°¾çš„è¿™ä¸ªåˆ†ç»„ä¸­åªæœ‰1æ¡è®°å½•ï¼Œä¹Ÿå°±æ˜¯æœ€å°è®°å½•æœ¬èº«ã€‚</li><li>æœ€å¤§è®°å½•çš„n_ownedå€¼ä¸º5ï¼Œè¿™å°±ä»£è¡¨ç€ä»¥æœ€å¤§è®°å½•ç»“å°¾çš„è¿™ä¸ªåˆ†ç»„ä¸­åªæœ‰5æ¡è®°å½•ï¼ŒåŒ…æ‹¬æœ€å¤§è®°å½•æœ¬èº«è¿˜æœ‰æˆ‘ä»¬è‡ªå·±æ’å…¥çš„4æ¡è®°å½•ã€‚</li></ul></li></ul><p>ç”¨ç®­å¤´æŒ‡å‘çš„æ–¹å¼æ›¿ä»£æ•°å­—ï¼Œè¿™æ ·æ›´æ˜“äºæˆ‘ä»¬ç†è§£ï¼Œä¿®æ”¹åå¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301924874.png" alt="image-20220330192413776"></p><p><strong>ä¸ºä»€ä¹ˆæœ€å°è®°å½•çš„n_ownedå€¼ä¸º1ï¼Œè€Œæœ€å¤§è®°å½•çš„n_ownedå€¼ä¸º5å‘¢ï¼Ÿ</strong></p><p>InnoDBè§„å®šï¼šå¯¹äºæœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªèƒ½æœ‰1æ¡è®°å½•ï¼Œæœ€å¤§è®°å½•æ‰€åœ¨çš„åˆ†ç»„æ‹¥æœ‰çš„è®°å½•æ¡æ•°åªèƒ½åœ¨1~8æ¡ä¹‹é—´ï¼Œå‰©ä¸‹çš„åˆ†ç»„ä¸­è®°å½•çš„æ¡æ•°èŒƒå›´åªèƒ½åœ¨æ˜¯ 4~8 æ¡ä¹‹é—´ã€‚</p><p>åˆ†ç»„æ˜¯æŒ‰ç…§ä¸‹è¾¹çš„æ­¥éª¤è¿›è¡Œçš„ï¼š</p><ul><li>åˆå§‹æƒ…å†µä¸‹ä¸€ä¸ªæ•°æ®é¡µé‡Œåªæœ‰æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ä¸¤æ¡è®°å½•ï¼Œå®ƒä»¬åˆ†å±äºä¸¤ä¸ªåˆ†ç»„ã€‚</li><li>ä¹‹åæ¯æ’å…¥ä¸€æ¡è®°å½•ï¼Œéƒ½ä¼šä»é¡µç›®å½•ä¸­æ‰¾åˆ°ä¸»é”®å€¼æ¯”æœ¬è®°å½•çš„ä¸»é”®å€¼å¤§å¹¶ä¸”å·®å€¼æœ€å°çš„æ§½ï¼Œç„¶åæŠŠè¯¥æ§½å¯¹åº”çš„è®°å½•çš„n_ownedå€¼åŠ 1ï¼Œè¡¨ç¤ºæœ¬ç»„å†…åˆæ·»åŠ äº†ä¸€æ¡è®°å½•ï¼Œç›´åˆ°è¯¥ç»„ä¸­çš„è®°å½•æ•°ç­‰äº8ä¸ªã€‚</li><li>åœ¨ä¸€ä¸ªç»„ä¸­çš„è®°å½•æ•°ç­‰äº8ä¸ªåå†æ’å…¥ä¸€æ¡è®°å½•æ—¶ï¼Œä¼šå°†ç»„ä¸­çš„è®°å½•æ‹†åˆ†æˆä¸¤ä¸ªç»„ï¼Œä¸€ä¸ªç»„ä¸­4æ¡è®°å½•ï¼Œå¦ä¸€ä¸ª5æ¡è®°å½•ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šåœ¨é¡µç›®å½•ä¸­æ–°å¢ä¸€ä¸ªæ§½æ¥è®°å½•è¿™ä¸ªæ–°å¢åˆ†ç»„ä¸­æœ€å¤§çš„é‚£æ¡è®°å½•çš„åç§»é‡ã€‚</li></ul><h6 id="2-3-2-Page-Headerï¼ˆé¡µé¢å¤´éƒ¨ï¼‰">2.3.2 Page Headerï¼ˆé¡µé¢å¤´éƒ¨ï¼‰</h6><p>ä¸ºäº†èƒ½å¾—åˆ°ä¸€ä¸ªæ•°æ®é¡µä¸­å­˜å‚¨çš„è®°å½•çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æœ¬é¡µä¸­å·²ç»å­˜å‚¨äº†å¤šå°‘æ¡è®°å½•ï¼Œç¬¬ä¸€æ¡è®°å½•çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Œé¡µç›®å½•ä¸­å­˜å‚¨äº†å¤šå°‘ä¸ªæ§½ç­‰ç­‰ï¼Œç‰¹æ„åœ¨é¡µä¸­å®šä¹‰äº†ä¸€ä¸ªå«Page Headerçš„éƒ¨åˆ†ï¼Œè¿™ä¸ªéƒ¨åˆ†å ç”¨å›ºå®šçš„56ä¸ªå­—èŠ‚ï¼Œä¸“é—¨å­˜å‚¨å„ç§çŠ¶æ€ä¿¡æ¯ã€‚</p><table><thead><tr><th>åç§°</th><th>å ç”¨ç©ºé—´å¤§å°</th><th>æè¿°</th></tr></thead><tbody><tr><td>PAGE_N_DIR_SLOTS</td><td>2å­—èŠ‚</td><td>åœ¨é¡µç›®å½•ä¸­çš„æ§½æ•°é‡</td></tr><tr><td>PAGE_HEAP_TOP</td><td>2å­—èŠ‚</td><td>è¿˜æœªä½¿ç”¨çš„ç©ºé—´æœ€å°åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´ä»è¯¥åœ°å€ä¹‹åå°±æ˜¯<code>Free Space</code></td></tr><tr><td>PAGE_N_HEAP</td><td>2å­—èŠ‚</td><td>æœ¬é¡µä¸­çš„è®°å½•çš„æ•°é‡ï¼ˆåŒ…æ‹¬æœ€å°å’Œæœ€å¤§è®°å½•ä»¥åŠæ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•ï¼‰</td></tr><tr><td>PAGE_FREE</td><td>2å­—èŠ‚</td><td>ç¬¬ä¸€ä¸ªå·²ç»æ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•çš„è®°å½•åœ°å€ï¼ˆå„ä¸ªå·²åˆ é™¤çš„è®°å½•é€šè¿‡<code>next_record</code>ä¹Ÿä¼šç»„æˆä¸€ä¸ªå•é“¾è¡¨ï¼Œè¿™ä¸ªå•é“¾è¡¨ä¸­çš„è®°å½•å¯ä»¥è¢«é‡æ–°åˆ©ç”¨ï¼‰</td></tr><tr><td>PAGE_GARBAGE</td><td>2å­—èŠ‚</td><td>å·²åˆ é™¤è®°å½•å ç”¨çš„å­—èŠ‚æ•°</td></tr><tr><td>PAGE_LAST_INSERT</td><td>2å­—èŠ‚</td><td>æœ€åæ’å…¥è®°å½•çš„ä½ç½®</td></tr><tr><td>PAGE_DIRECTION</td><td>2å­—èŠ‚</td><td>è®°å½•æ’å…¥çš„æ–¹å‘</td></tr><tr><td>PAGE_N_DIRECTION</td><td>2å­—èŠ‚</td><td>ä¸€ä¸ªæ–¹å‘è¿ç»­æ’å…¥çš„è®°å½•æ•°é‡</td></tr><tr><td>PAGE_N_RECS</td><td>2å­—èŠ‚</td><td>è¯¥é¡µä¸­è®°å½•çš„æ•°é‡ï¼ˆä¸åŒ…æ‹¬æœ€å°å’Œæœ€å¤§è®°å½•ä»¥åŠè¢«æ ‡è®°ä¸ºåˆ é™¤çš„è®°å½•ï¼‰</td></tr><tr><td>PAGE_MAX_TRX_ID</td><td>8å­—èŠ‚</td><td>ä¿®æ”¹å½“å‰é¡µçš„æœ€å¤§äº‹åŠ¡IDï¼Œè¯¥å€¼ä»…åœ¨äºŒçº§ç´¢å¼•ä¸­å®šä¹‰</td></tr><tr><td>PAGE_LEVEL</td><td>2å­—èŠ‚</td><td>å½“å‰é¡µåœ¨B+æ ‘ä¸­æ‰€å¤„çš„å±‚çº§</td></tr><tr><td>PAGE_INDEX_ID</td><td>8å­—èŠ‚</td><td>ç´¢å¼•IDï¼Œè¡¨ç¤ºå½“å‰é¡µå±äºå“ªä¸ªç´¢å¼•</td></tr><tr><td>PAGE_BTR_SEG_LEAF</td><td>10å­—èŠ‚</td><td>B+æ ‘å¶å­æ®µçš„å¤´éƒ¨ä¿¡æ¯ï¼Œä»…åœ¨B+æ ‘çš„Rooté¡µå®šä¹‰</td></tr><tr><td>PAGE_BTR_SEG_TOP</td><td>10å­—èŠ‚</td><td>B+æ ‘éå¶å­æ®µçš„å¤´éƒ¨ä¿¡æ¯ï¼Œä»…åœ¨B+æ ‘çš„Rooté¡µå®šä¹‰</td></tr></tbody></table><h4 id="3-InnoDBè¡Œæ ¼å¼ï¼ˆæˆ–è®°å½•æ ¼å¼ï¼‰">3. InnoDBè¡Œæ ¼å¼ï¼ˆæˆ–è®°å½•æ ¼å¼ï¼‰</h4><h5 id="3-1-æŒ‡å®šè¡Œæ ¼å¼çš„è¯­æ³•">3.1 æŒ‡å®šè¡Œæ ¼å¼çš„è¯­æ³•</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨å (åˆ—çš„ä¿¡æ¯) ROW_FORMAT=è¡Œæ ¼å¼åç§°</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE è¡¨å ROW_FORMAT=è¡Œæ ¼å¼åç§°</span><br></pre></td></tr></table></figure><h5 id="3-2-COMPACTè¡Œæ ¼å¼">3.2 COMPACTè¡Œæ ¼å¼</h5><p>åœ¨MySQL 5.1ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤è®¾ç½®ä¸ºCompactè¡Œæ ¼å¼ã€‚ä¸€æ¡å®Œæ•´çš„è®°å½•å…¶å®å¯ä»¥è¢«åˆ†ä¸ºè®°å½•çš„é¢å¤–ä¿¡æ¯å’Œè®°å½•çš„çœŸå®æ•°æ®ä¸¤å¤§éƒ¨åˆ†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301939611.png" alt="image-20220330193949517"></p><h6 id="3-2-1-å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨">3.2.1 å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</h6><p>MySQLæ”¯æŒä¸€äº›å˜é•¿çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚VARCHAR(M)ã€VARBINARY(M)ã€TEXTç±»å‹ï¼ŒBLOBç±»å‹ï¼Œè¿™äº›æ•°æ®ç±»å‹ä¿®é¥°åˆ—ç§°ä¸º<code>å˜é•¿å­—æ®µ</code>ï¼Œå˜é•¿å­—æ®µä¸­å­˜å‚¨å¤šå°‘å­—èŠ‚çš„æ•°æ®ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­˜å‚¨çœŸå®æ•°æ®çš„æ—¶å€™éœ€è¦é¡ºä¾¿æŠŠè¿™äº›æ•°æ®å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿå­˜èµ·æ¥ã€‚<code>åœ¨Compactè¡Œæ ¼å¼ä¸­ï¼ŒæŠŠæ‰€æœ‰å˜é•¿å­—æ®µçš„çœŸå®æ•°æ®å ç”¨çš„å­—èŠ‚é•¿åº¦éƒ½å­˜æ”¾åœ¨è®°å½•çš„å¼€å¤´éƒ¨ä½ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€‚</code></p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œé¢å­˜å‚¨çš„å˜é•¿é•¿åº¦å’Œå­—æ®µé¡ºåºæ˜¯åè¿‡æ¥çš„ã€‚æ¯”å¦‚ä¸¤ä¸ªvarcharå­—æ®µåœ¨è¡¨ç»“æ„çš„é¡ºåºæ˜¯a(10)ï¼Œb(15)ã€‚é‚£ä¹ˆåœ¨å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ä¸­å­˜å‚¨çš„é•¿åº¦é¡ºåºå°±æ˜¯15ï¼Œ10ï¼Œæ˜¯åè¿‡æ¥çš„ã€‚</p></blockquote><h6 id="3-2-2-NULLå€¼åˆ—è¡¨">3.2.2 NULLå€¼åˆ—è¡¨</h6><p>Compactè¡Œæ ¼å¼ä¼šæŠŠå¯ä»¥ä¸ºNULLçš„åˆ—ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œå­˜åœ¨ä¸€ä¸ªæ ‡è®°ä¸ºNULLå€¼åˆ—è¡¨ä¸­ã€‚å¦‚æœè¡¨ä¸­æ²¡æœ‰å…è®¸å­˜å‚¨ NULL çš„åˆ—ï¼Œåˆ™ NULLå€¼åˆ—è¡¨ä¹Ÿä¸å­˜åœ¨äº†ã€‚<br><strong>ä¸ºä»€ä¹ˆå®šä¹‰NULLå€¼åˆ—è¡¨ï¼Ÿ</strong><br>ä¹‹æ‰€ä»¥è¦å­˜å‚¨NULLæ˜¯å› ä¸ºæ•°æ®éƒ½æ˜¯éœ€è¦å¯¹é½çš„ï¼Œå¦‚æœ<code>æ²¡æœ‰æ ‡æ³¨å‡ºæ¥NULLå€¼çš„ä½ç½®</code>ï¼Œå°±æœ‰å¯èƒ½åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™<code>å‡ºç°æ··ä¹±</code>ã€‚å¦‚æœä½¿ç”¨<code>ä¸€ä¸ªç‰¹å®šçš„ç¬¦å·</code>æ”¾åˆ°ç›¸åº”çš„æ•°æ®ä½è¡¨ç¤ºç©ºç½®çš„è¯ï¼Œè™½ç„¶èƒ½è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯è¿™æ ·å¾ˆæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ç›´æ¥å°±åœ¨è¡Œæ•°æ®å¾—å¤´éƒ¨å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´ä¸“é—¨ç”¨æ¥è®°å½•è¯¥è¡Œæ•°æ®å“ªäº›æ˜¯éç©ºæ•°æ®ï¼Œå“ªäº›æ˜¯ç©ºæ•°æ®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><ol><li>äºŒè¿›åˆ¶ä½çš„å€¼ä¸º1æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ºNULLã€‚</li><li>äºŒè¿›åˆ¶ä½çš„å€¼ä¸º0æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ä¸ºNULLã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šåŒæ ·é¡ºåºä¹Ÿæ˜¯åè¿‡æ¥å­˜æ”¾çš„</p></blockquote><h6 id="3-2-3-è®°å½•å¤´ä¿¡æ¯ï¼ˆ5å­—èŠ‚ï¼‰">3.2.3 è®°å½•å¤´ä¿¡æ¯ï¼ˆ5å­—èŠ‚ï¼‰</h6><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301945235.png" alt="image-20220330194534127"></p><table><thead><tr><th>åç§°</th><th>å¤§å°ï¼ˆå•ä½ï¼šbitï¼‰</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>é¢„ç•™ä½1</code></td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td><code>é¢„ç•™ä½2</code></td><td>1</td><td>æ²¡æœ‰ä½¿ç”¨</td></tr><tr><td><code>delete_mask</code></td><td>1</td><td>æ ‡è®°è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤</td></tr><tr><td><code>mini_rec_mask</code></td><td>1</td><td>B+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°</td></tr><tr><td><code>n_owned</code></td><td>4</td><td>è¡¨ç¤ºå½“å‰è®°å½•æ‹¥æœ‰çš„è®°å½•æ•°</td></tr><tr><td><code>heap_no</code></td><td>13</td><td>è¡¨ç¤ºå½“å‰è®°å½•åœ¨è®°å½•å †çš„ä½ç½®ä¿¡æ¯</td></tr><tr><td><code>record_type</code></td><td>3</td><td>è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œ<code>0</code>è¡¨ç¤ºæ™®é€šè®°å½•ï¼Œ<code>1</code>è¡¨ç¤ºB+æ ‘éå¶å­èŠ‚ç‚¹è®°å½•ï¼Œ<code>2</code>è¡¨ç¤ºæœ€å°è®°å½•ï¼Œ<code>3</code>è¡¨ç¤ºæœ€å¤§è®°å½•</td></tr><tr><td><code>next_record</code></td><td>16</td><td>è¡¨ç¤ºä¸‹ä¸€æ¡è®°å½•çš„ç›¸å¯¹ä½ç½®</td></tr></tbody></table><ul><li><code>delete_mask</code>ï¼šè¿™ä¸ªå±æ€§æ ‡è®°ç€å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œå ç”¨1ä¸ªäºŒè¿›åˆ¶ä½ã€‚<ul><li>å€¼ä¸º0ï¼šä»£è¡¨è®°å½•å¹¶æ²¡æœ‰è¢«åˆ é™¤</li><li>å€¼ä¸º1ï¼šä»£è¡¨è®°å½•è¢«åˆ é™¤æ‰äº†</li></ul></li></ul><p><strong>è¢«åˆ é™¤çš„è®°å½•ä¸ºä»€ä¹ˆè¿˜åœ¨é¡µä¸­å­˜å‚¨å‘¢ï¼Ÿ</strong><br>ä½ ä»¥ä¸ºå®ƒåˆ é™¤äº†ï¼Œå¯å®ƒè¿˜åœ¨çœŸå®çš„ç£ç›˜ä¸Šã€‚è¿™äº›è¢«åˆ é™¤çš„è®°å½•ä¹‹æ‰€ä»¥ä¸ç«‹å³ä»ç£ç›˜ä¸Šç§»é™¤ï¼Œæ˜¯å› ä¸ºç§»é™¤å®ƒä»¬ä¹‹åå…¶ä»–çš„è®°å½•åœ¨ç£ç›˜ä¸Šéœ€è¦<code>é‡æ–°æ’åˆ—ï¼Œå¯¼è‡´æ€§èƒ½æ¶ˆè€—</code>ã€‚æ‰€ä»¥åªæ˜¯æ‰“ä¸€ä¸ªåˆ é™¤æ ‡è®°è€Œå·²ï¼Œæ‰€æœ‰è¢«åˆ é™¤æ‰çš„è®°å½•éƒ½ä¼šç»„æˆä¸€ä¸ªæ‰€è°“çš„<code>åƒåœ¾é“¾è¡¨</code>ï¼Œåœ¨è¿™ä¸ªé“¾è¡¨ä¸­çš„è®°å½•å ç”¨çš„ç©ºé—´ç§°ä¹‹ä¸º<code>å¯é‡ç”¨ç©ºé—´</code>ï¼Œä¹‹åå¦‚æœæœ‰æ–°è®°å½•æ’å…¥åˆ°è¡¨ä¸­çš„è¯ï¼Œå¯èƒ½æŠŠè¿™äº›è¢«åˆ é™¤çš„è®°å½•å ç”¨çš„å­˜å‚¨ç©ºé—´è¦†ç›–æ‰ã€‚</p><ul><li><code>min_rec_mask</code>ï¼šB+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°ï¼Œmin_rec_maskå€¼ä¸º1ã€‚æˆ‘ä»¬è‡ªå·±æ’å…¥çš„å››æ¡è®°å½•çš„min_rec_maskå€¼éƒ½æ˜¯0ï¼Œæ„å‘³ç€å®ƒä»¬éƒ½ä¸æ˜¯B+æ ‘çš„éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•ã€‚</li><li><code>record_type</code>ï¼šè¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œä¸€å…±æœ‰4ç§ç±»å‹çš„è®°å½•ï¼š<ul><li>0ï¼šè¡¨ç¤ºæ™®é€šè®°å½•</li><li>1ï¼šè¡¨ç¤ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•</li><li>2ï¼šè¡¨ç¤ºæœ€å°è®°å½•</li><li>3ï¼šè¡¨ç¤ºæœ€å¤§è®°å½•</li></ul></li><li><code>heap_no</code>ï¼šè¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®ã€‚</li></ul><p><strong>æ€ä¹ˆä¸è§heap_noå€¼ä¸º0å’Œ1çš„è®°å½•å‘¢</strong>ï¼Ÿ<br>MySQLä¼šè‡ªåŠ¨ç»™æ¯ä¸ªé¡µé‡ŒåŠ äº†ä¸¤ä¸ªè®°å½•ï¼Œç”±äºè¿™ä¸¤ä¸ªè®°å½•å¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ’å…¥çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿç§°ä¸º<code>ä¼ªè®°å½•</code>æˆ–è€…<code>è™šæ‹Ÿè®°å½•</code>ã€‚è¿™ä¸¤ä¸ªä¼ªè®°å½•ä¸€ä¸ªä»£è¡¨<code>æœ€å°è®°å½•</code>ï¼Œä¸€ä¸ªä»£è¡¨<code>æœ€å¤§è®°å½•</code>ã€‚æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•çš„heap_noå€¼åˆ†åˆ«æ˜¯0å’Œ1ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬çš„ä½ç½®æœ€é å‰</p><ul><li><code>n_owned</code>ï¼šé¡µç›®å½•ä¸­æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸º n_owned å­—æ®µ</li><li><code>next_record</code>ï¼šè®°å½•å¤´ä¿¡æ¯é‡Œè¯¥å±æ€§éå¸¸é‡è¦ï¼Œå®ƒè¡¨ç¤ºä»å½“å‰è®°å½•çš„çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„<code>åœ°å€åç§»é‡</code>ã€‚</li></ul><h6 id="3-2-4-è®°å½•çš„çœŸå®æ•°æ®">3.2.4 è®°å½•çš„çœŸå®æ•°æ®</h6><table><thead><tr><th>åˆ—å</th><th>æ˜¯å¦å¿…é¡»</th><th>å ç”¨ç©ºé—´</th><th>æè¿°</th></tr></thead><tbody><tr><td>row_id</td><td>å¦</td><td>6å­—èŠ‚</td><td>è¡ŒIDï¼Œå”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•</td></tr><tr><td>transaction_id</td><td>æ˜¯</td><td>6å­—èŠ‚</td><td>äº‹åŠ¡ID</td></tr><tr><td>roll_pointer</td><td>æ˜¯</td><td>7å­—èŠ‚</td><td>å›æ»šæŒ‡é’ˆ</td></tr></tbody></table><p>ä¸€ä¸ªè¡¨æ²¡æœ‰æ‰‹åŠ¨å®šä¹‰ä¸»é”®ï¼Œåˆ™ä¼šé€‰å–ä¸€ä¸ªUniqueé”®ä½œä¸ºä¸»é”®ï¼Œå¦‚æœè¿Uniqueé”®éƒ½æ²¡æœ‰å®šä¹‰çš„è¯ï¼Œåˆ™ä¼šä¸ºè¡¨é»˜è®¤æ·»åŠ ä¸€ä¸ªåä¸ºrow_idçš„éšè—åˆ—ä½œä¸ºä¸»é”®ã€‚æ‰€ä»¥row_idæ˜¯åœ¨æ²¡æœ‰è‡ªå®šä¹‰ä¸»é”®ä»¥åŠUniqueé”®çš„æƒ…å†µä¸‹æ‰ä¼šå­˜åœ¨çš„ã€‚</p><h5 id="3-3-Dynamicå’ŒCompressedè¡Œæ ¼å¼">3.3 Dynamicå’ŒCompressedè¡Œæ ¼å¼</h5><p>æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ªé¡µçš„å¤§å°ä¸€èˆ¬æ˜¯16KBï¼Œä¹Ÿå°±æ˜¯16384å­—èŠ‚ï¼Œè€Œä¸€ä¸ªVARCHAR(M)ç±»å‹çš„åˆ—å°±æœ€å¤šå¯ä»¥å­˜å‚¨65533ä¸ªå­—èŠ‚ï¼Œè¿™æ ·å°±å¯èƒ½å‡ºç°ä¸€ä¸ªé¡µå­˜æ”¾ä¸äº†ä¸€æ¡è®°å½•ï¼Œè¿™ç§ç°è±¡ç§°ä¸º<code>è¡Œæº¢å‡º</code></p><p>åœ¨Compactå’ŒReduntantè¡Œæ ¼å¼ä¸­ï¼Œå¯¹äºå ç”¨å­˜å‚¨ç©ºé—´éå¸¸å¤§çš„åˆ—ï¼Œåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„åªä¼šå­˜å‚¨è¯¥åˆ—çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒæŠŠå‰©ä½™çš„æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å‡ ä¸ªå…¶ä»–çš„é¡µä¸­è¿›è¡Œ<code>åˆ†é¡µå­˜å‚¨</code>ï¼Œç„¶åè®°å½•çš„çœŸå®æ•°æ®å¤„ç”¨20ä¸ªå­—èŠ‚å­˜å‚¨æŒ‡å‘è¿™äº›é¡µçš„åœ°å€ï¼ˆå½“ç„¶è¿™20ä¸ªå­—èŠ‚ä¸­è¿˜åŒ…æ‹¬è¿™äº›åˆ†æ•£åœ¨å…¶ä»–é¡µé¢ä¸­çš„æ•°æ®çš„å ç”¨çš„å­—èŠ‚æ•°ï¼‰ï¼Œä»è€Œå¯ä»¥æ‰¾åˆ°å‰©ä½™æ•°æ®æ‰€åœ¨çš„é¡µã€‚è¿™ç§°ä¸º<code>é¡µçš„æ‰©å±•</code>ã€‚</p><p>åœ¨MySQL 8.0ä¸­ï¼Œé»˜è®¤è¡Œæ ¼å¼å°±æ˜¯Dynamicï¼ŒDynamicã€Compressedè¡Œæ ¼å¼å’ŒCompactè¡Œæ ¼å¼æŒºåƒï¼Œåªä¸è¿‡åœ¨å¤„ç†è¡Œæº¢å‡ºæ•°æ®æ—¶æœ‰åˆ†æ­§</p><ul><li>Compressedå’ŒDynamicä¸¤ç§è®°å½•æ ¼å¼å¯¹äºå­˜æ”¾åœ¨BLOBä¸­çš„æ•°æ®é‡‡ç”¨äº†å®Œå…¨çš„è¡Œæº¢å‡ºçš„æ–¹å¼ã€‚å¦‚å›¾ï¼Œåœ¨æ•°æ®é¡µä¸­åªå­˜æ”¾20ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼ˆæº¢å‡ºé¡µçš„åœ°å€ï¼‰ï¼Œå®é™…çš„æ•°æ®éƒ½å­˜æ”¾åœ¨Off Pageï¼ˆæº¢å‡ºé¡µï¼‰ä¸­ã€‚</li><li>Compactå’ŒRedundantä¸¤ç§æ ¼å¼ä¼šåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆå­˜æ”¾768ä¸ªå‰ç¼€å­—èŠ‚ï¼‰ã€‚</li></ul><h4 id="4-åŒºã€æ®µå’Œç¢ç‰‡åŒº">4. åŒºã€æ®µå’Œç¢ç‰‡åŒº</h4><h5 id="4-1-ä¸ºä»€ä¹ˆè¦æœ‰åŒºï¼Ÿ">4.1 ä¸ºä»€ä¹ˆè¦æœ‰åŒºï¼Ÿ</h5><p><code>B+</code>æ ‘çš„æ¯ä¸€å±‚ä¸­çš„é¡µéƒ½ä¼šå½¢æˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¦‚æœæ˜¯ä»¥<code>é¡µä¸ºå•ä½</code>æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„è¯ï¼ŒåŒå‘é“¾è¡¨ç›¸é‚»çš„ä¸¤ä¸ªé¡µä¹‹é—´çš„<code>ç‰©ç†ä½ç½®å¯èƒ½ç¦»å¾—éå¸¸è¿œ</code>ã€‚æˆ‘ä»¬ä»‹ç»B+æ ‘ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯çš„æ—¶å€™ç‰¹åˆ«æåˆ°èŒƒå›´æŸ¥è¯¢åªéœ€è¦å®šä½åˆ°æœ€å·¦è¾¹çš„è®°å½•å’Œæœ€å³è¾¹çš„è®°å½•ï¼Œç„¶åæ²¿ç€åŒå‘é“¾è¡¨ä¸€ç›´æ‰«æå°±å¯ä»¥äº†ï¼Œè€Œå¦‚æœé“¾è¡¨ä¸­ç›¸é‚»çš„ä¸¤ä¸ªé¡µç‰©ç†ä½ç½®ç¦»å¾—éå¸¸è¿œï¼Œå°±æ˜¯æ‰€è°“çš„<code>éšæœºI/O</code>ã€‚å†ä¸€æ¬¡å¼ºè°ƒï¼Œç£ç›˜çš„é€Ÿåº¦å’Œå†…å­˜çš„é€Ÿåº¦å·®äº†å¥½å‡ ä¸ªæ•°é‡çº§ï¼Œ<code>éšæœºI/Oæ˜¯éå¸¸æ…¢</code>çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡è®©é“¾è¡¨ä¸­ç›¸é‚»çš„é¡µçš„ç‰©ç†ä½ç½®ä¹Ÿç›¸é‚»ï¼Œè¿™æ ·è¿›è¡ŒèŒƒå›´æŸ¥è¯¢çš„æ—¶å€™æ‰å¯ä»¥ä½¿ç”¨æ‰€è°“çš„<code>é¡ºåºI/O</code>ã€‚</p><p>å¼•å…¥<code>åŒº</code>çš„æ¦‚å¿µï¼Œä¸€ä¸ªåŒºå°±æ˜¯ç‰©ç†ä½ç½®ä¸Šè¿ç»­çš„<code>64ä¸ªé¡µ</code>ã€‚å› ä¸ºInnoDBä¸­çš„é¡µçš„å¤§å°é»˜è®¤æ˜¯16KBï¼Œæ‰€ä»¥ä¸€ä¸ªåŒºçš„å¤§å°æ˜¯64*16KB=<code>1MB</code>ã€‚åœ¨è¡¨ä¸­<code>æ•°æ®é‡å¤§</code>çš„æ—¶å€™ï¼Œä¸ºæŸä¸ªç´¢å¼•åˆ†é…ç©ºé—´çš„æ—¶å€™å°±ä¸å†æŒ‰ç…§é¡µçš„å•ä½åˆ†é…äº†ï¼Œè€Œæ˜¯æŒ‰ç…§<code>åŒºä¸ºå•ä½åˆ†é…</code>ï¼Œç”šè‡³åœ¨è¡¨ä¸­çš„æ•°æ®ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡æ€§åˆ†é…å¤šä¸ªè¿ç»­çš„åŒºã€‚è™½ç„¶å¯èƒ½é€ æˆ<code>ä¸€ç‚¹ç‚¹ç©ºé—´çš„æµªè´¹</code>ï¼ˆæ•°æ®ä¸è¶³ä»¥å¡«å……æ»¡æ•´ä¸ªåŒºï¼‰ï¼Œä½†æ˜¯ä»æ€§èƒ½è§’åº¦çœ‹ï¼Œå¯ä»¥æ¶ˆé™¤å¾ˆå¤šçš„éšæœºI/Oï¼Œ<code>åŠŸå¤§äºè¿‡</code>ï¼</p><h5 id="4-2-ä¸ºä»€ä¹ˆè¦æœ‰æ®µï¼Ÿ">4.2 ä¸ºä»€ä¹ˆè¦æœ‰æ®µï¼Ÿ</h5><p>å¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œå…¶å®æ˜¯å¯¹B+æ ‘å¶å­èŠ‚ç‚¹ä¸­çš„è®°å½•è¿›è¡Œé¡ºåºæ‰«æï¼Œè€Œå¦‚æœä¸åŒºåˆ†å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹ï¼Œç»Ÿç»ŸæŠŠèŠ‚ç‚¹ä»£è¡¨çš„é¡µé¢æ”¾åˆ°ç”³è¯·åˆ°çš„åŒºä¸­çš„è¯ï¼Œè¿›è¡ŒèŒƒå›´æ‰«æçš„æ•ˆæœå°±å¤§æ‰“æŠ˜æ‰£äº†ã€‚æ‰€ä»¥InnoDBå¯¹B+æ ‘çš„<code>å¶å­èŠ‚ç‚¹</code>å’Œ<code>éå¶å­èŠ‚ç‚¹</code>è¿›è¡Œäº†åŒºåˆ«å¯¹å¾…ï¼Œä¹Ÿå°±æ˜¯è¯´å¶å­èŠ‚ç‚¹æœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºï¼Œéå¶å­èŠ‚ç‚¹ä¹Ÿæœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºã€‚å­˜æ”¾å¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆå°±ç®—æ˜¯ä¸€ä¸ª<code>æ®µï¼ˆsegmentï¼‰</code>ï¼Œå­˜æ”¾éå¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆä¹Ÿç®—æ˜¯ä¸€ä¸ªæ®µã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œä¸€ä¸ª<code>å¶å­èŠ‚ç‚¹æ®µ</code>ï¼Œä¸€ä¸ª<code>éå¶å­èŠ‚ç‚¹æ®µ</code>ã€‚</p><p>é™¤äº†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ®µå’Œéå¶å­èŠ‚ç‚¹æ®µä¹‹å¤–ï¼ŒInnoDBä¸­è¿˜æœ‰ä¸ºå­˜å‚¨ä¸€äº›ç‰¹æ®Šçš„æ•°æ®è€Œå®šä¹‰çš„æ®µï¼Œæ¯”å¦‚å›æ»šæ®µã€‚æ‰€ä»¥ï¼Œå¸¸è§çš„æ®µæœ‰<code>æ•°æ®æ®µ</code>ã€<code>ç´¢å¼•æ®µ</code>ã€<code>å›æ»šæ®µ</code>ã€‚æ•°æ®æ®µå³ä¸ºB+æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œç´¢å¼•æ®µå³ä¸ºB+æ ‘çš„éå¶å­èŠ‚ç‚¹ã€‚</p><p>åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œå¯¹æ®µçš„ç®¡ç†éƒ½æ˜¯ç”±å¼•æ“è‡ªèº«æ‰€å®Œæˆï¼ŒDBAä¸èƒ½ä¹Ÿæ²¡æœ‰å¿…è¦å¯¹å…¶è¿›è¡Œæ§åˆ¶ã€‚è¿™ä»ä¸€å®šç¨‹åº¦ä¸Šç®€åŒ–äº†DBAå¯¹äºæ®µçš„ç®¡ç†ã€‚</p><p>æ®µå…¶å®ä¸å¯¹åº”è¡¨ç©ºé—´ä¸­çš„æŸä¸€ä¸ªè¿ç»­çš„ç‰©ç†åŒºåŸŸï¼Œè€Œæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œç”±è‹¥å¹²ä¸ªé›¶æ•£çš„é¡µé¢ä»¥åŠä¸€äº›å®Œæ•´çš„åŒºç»„æˆã€‚</p><h5 id="4-3-ä¸ºä»€ä¹ˆè¦æœ‰ç¢ç‰‡åŒºï¼Ÿ">4.3 ä¸ºä»€ä¹ˆè¦æœ‰ç¢ç‰‡åŒºï¼Ÿ</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“çš„è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œè€Œæ®µæ˜¯ä»¥åŒºä¸ºå•ä½ç”³è¯·å­˜å‚¨ç©ºé—´çš„ï¼Œä¸€ä¸ªåŒºé»˜è®¤å ç”¨1Mï¼ˆ64*16KB=1024KBï¼‰å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥**é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªåªå­˜åœ¨å‡ æ¡è®°å½•çš„å°è¡¨ä¹Ÿéœ€è¦2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿ**ä»¥åæ¯æ¬¡æ·»åŠ ä¸€ä¸ªç´¢å¼•éƒ½è¦å¤šç”³è¯·2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿè¿™å¯¹äºå­˜å‚¨è®°å½•æ¯”è¾ƒå°‘çš„è¡¨ç®€ç›´æ˜¯å¤©å¤§çš„æµªè´¹ã€‚è¿™ä¸ªé—®é¢˜çš„ç—‡ç»“åœ¨äºåˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬ä»‹ç»çš„åŒºéƒ½æ˜¯éå¸¸<code>çº¯ç²¹</code>çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªåŒºè¢«æ•´ä¸ªåˆ†é…ç»™æŸä¸€ä¸ªæ®µï¼Œæˆ–è€…è¯´åŒºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œå³ä½¿æ®µçš„æ•°æ®å¡«ä¸æ»¡åŒºä¸­æ‰€æœ‰çš„é¡µé¢ï¼Œé‚£ä½™ä¸‹çš„é¡µé¢ä¹Ÿä¸èƒ½æŒªä½œä»–ç”¨ã€‚</p><p>ä¸ºäº†è€ƒè™‘ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½åˆ†é…ç»™æŸä¸ªæ®µå¯¹äº<code>æ•°æ®é‡è¾ƒå°</code>çš„è¡¨å¤ªæµªè´¹å­˜å‚¨ç©ºé—´çš„è¿™ç§æƒ…å†µï¼ŒInnoDBæå‡ºäº†ä¸€ä¸ª<code>ç¢ç‰‡ï¼ˆfragmentï¼‰åŒº</code>çš„æ¦‚å¿µã€‚åœ¨ä¸€ä¸ªç¢ç‰‡åŒºä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡µéƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œè€Œæ˜¯ç¢ç‰‡åŒºä¸­çš„é¡µå¯ä»¥ç”¨äºä¸åŒçš„ç›®çš„ï¼Œæ¯”å¦‚æœ‰äº›é¡µé¢ç”¨äºæ®µAï¼Œæœ‰äº›é¡µé¢ç”¨äºæ®µBï¼Œæœ‰äº›é¡µç”šè‡³å“ªä¸ªæ®µéƒ½ä¸å±äºã€‚<code>ç¢ç‰‡åŒºç›´å±äºè¡¨ç©ºé—´</code>ï¼Œå¹¶ä¸å±äºä»»ä½•ä¸€ä¸ªæ®µã€‚</p><p>æ‰€ä»¥æ­¤åä¸ºæŸä¸ªæ®µåˆ†é…å­˜å‚¨ç©ºé—´çš„ç­–ç•¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>åœ¨åˆšå¼€å§‹å‘è¡¨ä¸­æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæ®µæ˜¯ä»æŸä¸ªç¢ç‰‡åŒºä»¥å•ä¸ªé¡µé¢ä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„ã€‚</li><li>å½“æŸä¸ªæ®µå·²ç»å ç”¨äº†<code>32ä¸ªç¢ç‰‡åŒº</code>é¡µé¢ä¹‹åï¼Œå°±ä¼šç”³è¯·ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´ã€‚</li></ul><p>æ‰€ä»¥ç°åœ¨æ®µä¸èƒ½ä»…å®šä¹‰ä¸ºæ˜¯æŸäº›åŒºçš„é›†åˆï¼Œæ›´ç²¾ç¡®çš„åº”è¯¥æ˜¯<code>æŸäº›é›¶æ•£çš„é¡µé¢</code>å·²ç»<code>ä¸€äº›å®Œæ•´çš„åŒº</code>çš„é›†åˆã€‚</p><h5 id="4-4-åŒºçš„åˆ†ç±»">4.4 åŒºçš„åˆ†ç±»</h5><p>åŒºå¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸º4ç§ç±»å‹ï¼š</p><ul><li><code>ç©ºé—²çš„åŒº(FREE)</code>ï¼šç°åœ¨è¿˜æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªåŒºä¸­çš„ä»»ä½•é¡µé¢ã€‚</li><li><code>æœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº(FREE_FRAG)</code>ï¼šè¡¨ç¤ºç¢ç‰‡åŒºä¸­è¿˜æœ‰å¯ç”¨çš„é¡µé¢ã€‚</li><li><code>æ²¡æœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº(FULL_FRAG)</code>ï¼šè¡¨ç¤ºç¢ç‰‡åŒºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½è¢«ä½¿ç”¨ï¼Œæ²¡æœ‰ç©ºé—²é¡µé¢ã€‚</li><li><code>é™„å±äºæŸä¸ªæ®µçš„åŒº(FSEG)</code>ï¼šæ¯ä¸€ç´¢å¼•éƒ½å¯ä»¥åˆ†ä¸ºå¶å­èŠ‚ç‚¹æ®µå’Œéå¶å­èŠ‚ç‚¹æ®µ</li></ul><p>å¤„äº<code>FREE</code>ã€<code>FREE_FRAG</code>ä»¥åŠ<code>FULL_FRAG</code>è¿™ä¸‰ç§çŠ¶æ€çš„åŒºéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç›´å±äºè¡¨ç©ºé—´ã€‚è€Œå¤„äº<code>FSEG</code>çŠ¶æ€çš„åŒºæ˜¯é™„å±äºæŸä¸ªæ®µçš„ã€‚</p>]]></content>
    
    
    <summary type="html">ã€ æ•°æ®åº“çš„å­˜å‚¨ç»“æ„ï¼šé¡µã€é¡µçš„å†…éƒ¨ç»“æ„ã€InnoDBè¡Œæ ¼å¼ï¼ˆæˆ–è®°å½•æ ¼å¼ï¼‰ã€åŒºã€æ®µå’Œç¢ç‰‡åŒºã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬06ç«  ç´¢å¼•çš„æ•°æ®ç»“æ„</title>
    <link href="https://angus9823.github.io/posts/27a3f94b.html"/>
    <id>https://angus9823.github.io/posts/27a3f94b.html</id>
    <published>2023-04-18T07:35:24.000Z</published>
    <updated>2023-04-18T08:25:56.572Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬06ç« -ç´¢å¼•çš„æ•°æ®ç»“æ„">ç¬¬06ç«  ç´¢å¼•çš„æ•°æ®ç»“æ„</h3><h4 id="1-ç´¢å¼•åŠå…¶ä¼˜ç¼ºç‚¹"><strong>1.</strong> <strong>ç´¢å¼•åŠå…¶ä¼˜ç¼ºç‚¹</strong></h4><h5 id="1-1-ç´¢å¼•æ¦‚è¿°"><strong>1.1</strong> <strong>ç´¢å¼•æ¦‚è¿°</strong></h5><p>MySQLå®˜æ–¹å¯¹ç´¢å¼•çš„å®šä¹‰ä¸ºï¼š<strong>ç´¢å¼•ï¼ˆIndexï¼‰æ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„</strong>ã€‚</p><p>**ç´¢å¼•çš„æœ¬è´¨ï¼š**ç´¢å¼•æ˜¯æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ’å¥½åºçš„å¿«é€ŸæŸ¥æ‰¾æ•°æ®ç»“æ„â€ï¼Œæ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•ã€‚è¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼æŒ‡å‘æ•°æ®ï¼Œ è¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šå®ç°<code>é«˜çº§æŸ¥æ‰¾ç®—æ³•</code>ã€‚</p><h5 id="1-2-ä¼˜ç‚¹"><strong>1.2</strong> <strong>ä¼˜ç‚¹</strong></h5><p>ï¼ˆ1ï¼‰ç±»ä¼¼å¤§å­¦å›¾ä¹¦é¦†å»ºä¹¦ç›®ç´¢å¼•ï¼Œæé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡ï¼Œé™ä½<code>æ•°æ®åº“çš„IOæˆæœ¬</code>ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•æœ€ä¸»è¦çš„åŸå› ã€‚</p><p>ï¼ˆ2ï¼‰é€šè¿‡åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œ<code>æ•°æ®çš„å”¯ä¸€æ€§</code>ã€‚</p><p>ï¼ˆ3ï¼‰åœ¨å®ç°æ•°æ®çš„å‚è€ƒå®Œæ•´æ€§æ–¹é¢ï¼Œå¯ä»¥<code>åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥</code>ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äºæœ‰ä¾èµ–å…³ç³»çš„å­è¡¨å’Œçˆ¶è¡¨è”åˆæŸ¥è¯¢æ—¶ï¼Œå¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p>ï¼ˆ4ï¼‰åœ¨ä½¿ç”¨åˆ†ç»„å’Œæ’åºå­å¥è¿›è¡Œæ•°æ®æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥æ˜¾è‘—<code>å‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´</code>ï¼Œé™ä½äº†CPUçš„æ¶ˆè€—ã€‚</p><h5 id="1-3-ç¼ºç‚¹"><strong>1.3</strong> <strong>ç¼ºç‚¹</strong></h5><p>ï¼ˆ1ï¼‰åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦<code>è€—è´¹æ—¶é—´</code>ï¼Œå¹¶ä¸”éšç€æ•°æ®é‡çš„å¢åŠ ï¼Œæ‰€è€—è´¹çš„æ—¶é—´ä¹Ÿä¼šå¢åŠ ã€‚</p><p>ï¼ˆ2ï¼‰ç´¢å¼•éœ€è¦å <code>ç£ç›˜ç©ºé—´</code>ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´<code>å­˜å‚¨åœ¨ç£ç›˜ä¸Š</code>ï¼Œå¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œç´¢å¼•æ–‡ä»¶å°±å¯èƒ½æ¯”æ•°æ®æ–‡ä»¶æ›´å¿«è¾¾åˆ°æœ€å¤§æ–‡ä»¶å°ºå¯¸ã€‚</p><p>ï¼ˆ3ï¼‰è™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼š<code>é™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦</code>ã€‚å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€åœ°ç»´æŠ¤ï¼Œè¿™æ ·å°±é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚</p><h4 id="2-InnoDBä¸­ç´¢å¼•çš„æ¨æ¼”"><strong>2. InnoDBä¸­ç´¢å¼•çš„æ¨æ¼”</strong></h4><h5 id="2-1-ç´¢å¼•ä¹‹å‰çš„æŸ¥æ‰¾"><strong>2.1</strong> <strong>ç´¢å¼•ä¹‹å‰çš„æŸ¥æ‰¾</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT [åˆ—ååˆ—è¡¨] FROM è¡¨å WHERE åˆ—å = xxx;</span><br></pre></td></tr></table></figure><p><strong>1.åœ¨ä¸€ä¸ªé¡µä¸­çš„æŸ¥æ‰¾</strong></p><p>å‡è®¾ç›®å‰è¡¨ä¸­çš„è®°å½•æ¯”è¾ƒå°‘ï¼Œæ‰€æœ‰çš„è®°å½•éƒ½å¯ä»¥è¢«å­˜æ”¾åœ¨ä¸€ä¸ªé¡µä¸­ï¼Œåœ¨æŸ¥æ‰¾è®°å½•çš„æ—¶å€™å¯ä»¥æ ¹æ®æœç´¢æ¡ä»¶çš„ä¸åŒåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><ul><li>ä»¥ä¸»é”®ä¸ºæœç´¢æ¡ä»¶<ul><li>å¯ä»¥åœ¨é¡µç›®å½•ä¸­ä½¿ç”¨<code>äºŒåˆ†æ³•</code>å¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„æ§½ï¼Œç„¶åå†éå†è¯¥æ§½å¯¹åº”åˆ†ç»„ä¸­çš„è®°å½•å³å¯å¿«é€Ÿæ‰¾åˆ°æŒ‡å®šçš„è®°å½•ã€‚</li></ul></li><li>ä»¥å…¶ä»–åˆ—ä½œä¸ºæœç´¢æ¡ä»¶<ul><li>å› ä¸ºåœ¨æ•°æ®é¡µä¸­å¹¶æ²¡æœ‰å¯¹éä¸»é”®å»ºç«‹æ‰€è°“çš„é¡µç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡äºŒåˆ†æ³•å¿«é€Ÿå®šä½ç›¸åº”çš„æ§½ã€‚è¿™ç§æƒ…å†µä¸‹åªèƒ½ä»æœ€å°è®°å½•å¼€å§‹ä¾æ¬¡éå†å•é“¾è¡¨ä¸­çš„æ¯æ¡è®°å½•ï¼Œç„¶åå¯¹æ¯”æ¯æ¡è®°å½•æ˜¯ä¸æ˜¯ç¬¦åˆæœç´¢æ¡ä»¶ã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§æŸ¥æ‰¾çš„æ•ˆç‡æ˜¯éå¸¸ä½çš„ã€‚</li></ul></li></ul><p><strong>2.åœ¨å¾ˆå¤šé¡µä¸­æŸ¥æ‰¾</strong></p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬è¡¨ä¸­å­˜æ”¾çš„è®°å½•éƒ½æ˜¯éå¸¸å¤šçš„ï¼Œéœ€è¦å¥½å¤šçš„æ•°æ®é¡µæ¥å­˜å‚¨è¿™äº›è®°å½•ã€‚åœ¨å¾ˆå¤šé¡µä¸­æŸ¥æ‰¾è®°å½•çš„è¯å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li>å®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µã€‚</li><li>ä»æ‰€åœ¨çš„é¡µå†…æŸ¥æ‰¾ç›¸åº”çš„è®°å½•ã€‚</li></ol><p>åœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œä¸è®ºæ˜¯æ ¹æ®ä¸»é”®åˆ—æˆ–è€…å…¶ä»–åˆ—çš„å€¼è¿›è¡ŒæŸ¥æ‰¾ï¼Œç”±äºæˆ‘ä»¬å¹¶ä¸èƒ½å¿«é€Ÿçš„å®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µï¼Œæ‰€ä»¥åªèƒ½<code>ä»ç¬¬ä¸€ä¸ªé¡µ</code>æ²¿ç€<code>åŒå‘é“¾è¡¨</code>ä¸€ç›´å¾€ä¸‹æ‰¾ï¼Œåœ¨æ¯ä¸€ä¸ªé¡µä¸­æ ¹æ®æˆ‘ä»¬ä¸Šé¢çš„æŸ¥æ‰¾æ–¹å¼å»æŸ¥æ‰¾æŒ‡å®šçš„è®°å½•ã€‚å› ä¸ºè¦éå†æ‰€æœ‰çš„æ•°æ®é¡µï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¾ç„¶æ˜¯<code>è¶…çº§è€—æ—¶</code>çš„ã€‚</p><h5 id="2-2-è®¾è®¡ç´¢å¼•"><strong>2.2</strong> <strong>è®¾è®¡ç´¢å¼•</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE index_demo(</span><br><span class="line">    -&gt; c1 INT,</span><br><span class="line">    -&gt; c2 INT,</span><br><span class="line">    -&gt; c3 CHAR(1),</span><br><span class="line">    -&gt; PRIMARY KEY(c1)</span><br><span class="line">    -&gt; ) ROW_FORMAT = Compact;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–°å»ºçš„<code>index_demo</code>è¡¨ä¸­æœ‰2ä¸ªINTç±»å‹çš„åˆ—ï¼Œ1ä¸ªCHAR(1)ç±»å‹çš„åˆ—ï¼Œè€Œä¸”æˆ‘ä»¬è§„å®šäº†c1åˆ—ä¸ºä¸»é”®ï¼Œè¿™ä¸ªè¡¨ä½¿ç”¨<code>Compact</code>è¡Œæ ¼å¼æ¥å®é™…å­˜å‚¨è®°å½•çš„ã€‚è¿™é‡Œæˆ‘ä»¬ç®€åŒ–äº†index_demoè¡¨çš„è¡Œæ ¼å¼ç¤ºæ„å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203300956080.png" alt="image-20220330095642965"></p><ul><li><code>record_type</code>ï¼šè®°å½•å¤´ä¿¡æ¯çš„ä¸€é¡¹å±æ€§ï¼Œè¡¨ç¤ºè®°å½•çš„ç±»å‹ï¼Œ<code>0</code>è¡¨ç¤ºæ™®é€šè®°å½•ã€<code>1</code>è¡¨ç¤ºç›®å½•é¡¹è®°å½•ã€<code>2</code>è¡¨ç¤ºæœ€å°è®°å½•ã€<code>3</code>è¡¨ç¤ºæœ€å¤§è®°å½•ã€‚</li><li><code>next_record</code>ï¼šè®°å½•å¤´ä¿¡æ¯çš„ä¸€é¡¹å±æ€§ï¼Œè¡¨ç¤ºä¸‹ä¸€æ¡åœ°å€ç›¸å¯¹äºæœ¬æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œæˆ‘ä»¬ç”¨ç®­å¤´æ¥è¡¨æ˜ä¸‹ä¸€æ¡è®°å½•æ˜¯è°ã€‚</li><li><code>å„ä¸ªåˆ—çš„å€¼</code>ï¼šè¿™é‡Œåªè®°å½•åœ¨<code>index_demo</code>è¡¨ä¸­çš„ä¸‰ä¸ªåˆ—ï¼Œåˆ†åˆ«æ˜¯<code>c1</code>ã€<code>c2</code>å’Œ<code>c3</code>ã€‚</li><li><code>å…¶ä»–ä¿¡æ¯</code>ï¼šé™¤äº†ä¸Šè¿°3ç§ä¿¡æ¯ä»¥å¤–çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶ä»–éšè—åˆ—çš„å€¼ä»¥åŠè®°å½•çš„é¢å¤–ä¿¡æ¯ã€‚</li></ul><p>å°†è®°å½•æ ¼å¼ç¤ºæ„å›¾çš„å…¶ä»–ä¿¡æ¯é¡¹æš‚æ—¶å»æ‰å¹¶æŠŠå®ƒç«–èµ·æ¥çš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301000365.png" alt="image-20220330100053271"></p><p>æŠŠä¸€äº›è®°å½•æ”¾åˆ°é¡µé‡Œçš„ç¤ºæ„å›¾å°±æ˜¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301001377.png" alt="image-20220330100150297"></p><p><strong>1.</strong> <strong>ä¸€ä¸ªç®€å•çš„ç´¢å¼•è®¾è®¡æ–¹æ¡ˆ</strong></p><p>æˆ‘ä»¬åœ¨æ ¹æ®æŸä¸ªæœç´¢æ¡ä»¶æŸ¥æ‰¾ä¸€äº›è®°å½•æ—¶ä¸ºä»€ä¹ˆè¦éå†æ‰€æœ‰çš„æ•°æ®é¡µå‘¢ï¼Ÿå› ä¸ºå„ä¸ªé¡µä¸­çš„è®°å½•å¹¶æ²¡æœ‰è§„å¾‹ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“æˆ‘ä»¬çš„æœç´¢æ¡ä»¶åŒ¹é…å“ªäº›é¡µä¸­çš„è®°å½•ï¼Œæ‰€ä»¥ä¸å¾—ä¸ä¾æ¬¡éå†æ‰€æœ‰çš„æ•°æ®é¡µã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬<code>æƒ³å¿«é€Ÿçš„å®šä½åˆ°éœ€è¦æŸ¥æ‰¾çš„è®°å½•åœ¨å“ªäº›æ•°æ®é¡µ</code>ä¸­è¯¥å’‹åŠï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸ºå¿«é€Ÿå®šä½è®°å½•æ‰€åœ¨çš„æ•°æ®é¡µè€Œ<code>å»ºç«‹ä¸€ä¸ªç›®å½•</code>ï¼Œå»ºè¿™ä¸ªç›®å½•å¿…é¡»å®Œæˆä¸‹è¾¹è¿™äº›äº‹ï¼š</p><ul><li><strong>ä¸‹ä¸€ä¸ªæ•°æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼å¿…é¡»å¤§äºä¸Šä¸€ä¸ªé¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼ã€‚</strong></li><li><strong>ç»™æ‰€æœ‰çš„é¡µå»ºç«‹ä¸€ä¸ªç›®å½•é¡¹ã€‚</strong></li></ul><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301004386.png" alt="image-20220330100409306"></p><p>ä»¥<code>é¡µ28</code>ä¸ºä¾‹ï¼Œå®ƒå¯¹åº”<code>ç›®å½•é¡¹2</code>ï¼Œè¿™ä¸ªç›®å½•é¡¹ä¸­åŒ…å«ç€è¯¥é¡µçš„é¡µå·<code>28</code>ä»¥åŠè¯¥é¡µä¸­ç”¨æˆ·è®°å½•çš„æœ€å°ä¸»é”®å€¼<code>5</code>ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠå‡ ä¸ªç›®å½•é¡¹åœ¨ç‰©ç†å­˜å‚¨å™¨ä¸Šè¿ç»­å­˜å‚¨ï¼ˆæ¯”å¦‚ï¼šæ•°ç»„ï¼‰ï¼Œå°±å¯ä»¥å®ç°æ ¹æ®ä¸»é”®å€¼å¿«é€ŸæŸ¥æ‰¾æŸæ¡è®°å½•çš„åŠŸèƒ½äº†ã€‚æ¯”å¦‚ï¼šæŸ¥æ‰¾ä¸»é”®å€¼ä¸º<code>20</code>çš„è®°å½•ï¼Œå…·ä½“æŸ¥æ‰¾è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼š</p><ol><li><p>å…ˆä»ç›®å½•é¡¹ä¸­æ ¹æ®<code>äºŒåˆ†æ³•</code>å¿«é€Ÿç¡®å®šå‡ºä¸»é”®å€¼ä¸º<code>20</code>çš„è®°å½•åœ¨<code>ç›®å½•é¡¹3</code>ä¸­ï¼ˆå› ä¸º 12 &lt; 20 &lt; 209 ï¼‰ï¼Œå®ƒå¯¹åº”çš„é¡µæ˜¯<code>é¡µ9</code>ã€‚</p></li><li><p>å†æ ¹æ®å‰è¾¹è¯´çš„åœ¨é¡µä¸­æŸ¥æ‰¾è®°å½•çš„æ–¹å¼å»<code>é¡µ9</code>ä¸­å®šä½å…·ä½“çš„è®°å½•ã€‚</p></li></ol><p>è‡³æ­¤ï¼Œé’ˆå¯¹æ•°æ®é¡µåšçš„ç®€æ˜“ç›®å½•å°±æå®šäº†ã€‚è¿™ä¸ªç›®å½•æœ‰ä¸€ä¸ªåˆ«åï¼Œç§°ä¸º<code>ç´¢å¼•</code>ã€‚</p><p><strong>2. InnoDBä¸­çš„ç´¢å¼•æ–¹æ¡ˆ</strong></p><p><strong>â‘  è¿­ä»£1æ¬¡ï¼šç›®å½•é¡¹çºªå½•çš„é¡µ</strong></p><p>æˆ‘ä»¬æŠŠå‰è¾¹ä½¿ç”¨åˆ°çš„ç›®å½•é¡¹æ”¾åˆ°æ•°æ®é¡µä¸­çš„æ ·å­å°±æ˜¯è¿™æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301028743.png" alt="image-20220330102834658"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ–°åˆ†é…äº†ä¸€ä¸ªç¼–å·ä¸º30çš„é¡µæ¥ä¸“é—¨å­˜å‚¨ç›®å½•é¡¹è®°å½•ã€‚è¿™é‡Œå†æ¬¡å¼ºè°ƒ<code>ç›®å½•é¡¹è®°å½•</code>å’Œæ™®é€šçš„<code>ç”¨æˆ·è®°å½•</code>çš„<strong>ä¸åŒç‚¹</strong>ï¼š</p><ul><li><code>ç›®å½•é¡¹è®°å½•</code>çš„<code>record_type</code>å€¼æ˜¯1ï¼Œè€Œ<code>æ™®é€šç”¨æˆ·è®°å½•</code>çš„<code>record_type</code>å€¼æ˜¯0ã€‚</li><li>ç›®å½•é¡¹è®°å½•åªæœ‰<code>ä¸»é”®å€¼å’Œé¡µçš„ç¼–å·</code>ä¸¤ä¸ªåˆ—ï¼Œè€Œæ™®é€šçš„ç”¨æˆ·è®°å½•çš„åˆ—æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œå¯èƒ½åŒ…å«<code>å¾ˆå¤šåˆ—</code>ï¼Œå¦å¤–è¿˜æœ‰InnoDBè‡ªå·±æ·»åŠ çš„éšè—åˆ—ã€‚</li><li>äº†è§£ï¼šè®°å½•å¤´ä¿¡æ¯é‡Œè¿˜æœ‰ä¸€ä¸ªå«<code>min_rec_mask</code>çš„å±æ€§ï¼Œåªæœ‰åœ¨å­˜å‚¨<code>ç›®å½•é¡¹è®°å½•</code>çš„é¡µä¸­çš„ä¸»é”®å€¼æœ€å°çš„<code>ç›®å½•é¡¹è®°å½•</code>çš„<code>min_rec_mask</code>å€¼ä¸º<code>1</code>ï¼Œå…¶ä»–åˆ«çš„è®°å½•çš„<code>min_rec_mask</code>å€¼éƒ½æ˜¯<code>0</code>ã€‚</li></ul><p>**ç›¸åŒç‚¹ï¼š**ä¸¤è€…ç”¨çš„æ˜¯ä¸€æ ·çš„æ•°æ®é¡µï¼Œéƒ½ä¼šä¸ºä¸»é”®å€¼ç”Ÿæˆ<code>Page Directory</code>ï¼ˆé¡µç›®å½•ï¼‰ï¼Œä»è€Œåœ¨æŒ‰ç…§ä¸»é”®å€¼è¿›è¡ŒæŸ¥æ‰¾æ—¶å¯ä»¥ä½¿ç”¨<code>äºŒåˆ†æ³•</code>æ¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p>ç°åœ¨ä»¥æŸ¥æ‰¾ä¸»é”®ä¸º<code>20</code>çš„è®°å½•ä¸ºä¾‹ï¼Œæ ¹æ®æŸä¸ªä¸»é”®å€¼å»æŸ¥æ‰¾è®°å½•çš„æ­¥éª¤å°±å¯ä»¥å¤§è‡´æ‹†åˆ†æˆä¸‹è¾¹ä¸¤æ­¥ï¼š</p><ol><li><p>å…ˆåˆ°å­˜å‚¨<code>ç›®å½•é¡¹è®°å½•</code>çš„é¡µï¼Œä¹Ÿå°±æ˜¯é¡µ30ä¸­é€šè¿‡<code>äºŒåˆ†æ³•</code>å¿«é€Ÿå®šä½åˆ°å¯¹åº”ç›®å½•é¡¹ï¼Œå› ä¸º 12 &lt; 20 &lt; 209 ï¼Œæ‰€ä»¥å®šä½åˆ°å¯¹åº”çš„è®°å½•æ‰€åœ¨çš„é¡µå°±æ˜¯é¡µ9ã€‚</p></li><li><p>å†åˆ°å­˜å‚¨ç”¨æˆ·è®°å½•çš„é¡µ9ä¸­æ ¹æ®<code>äºŒåˆ†æ³•</code>å¿«é€Ÿå®šä½åˆ°ä¸»é”®å€¼ä¸º<code>20</code>çš„ç”¨æˆ·è®°å½•ã€‚</p></li></ol><p><strong>â‘¡ è¿­ä»£2æ¬¡ï¼šå¤šä¸ªç›®å½•é¡¹çºªå½•çš„é¡µ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301034997.png" alt="image-20220330103442914"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ’å…¥äº†ä¸€æ¡ä¸»é”®å€¼ä¸º320çš„ç”¨æˆ·è®°å½•ä¹‹åéœ€è¦ä¸¤ä¸ªæ–°çš„æ•°æ®é¡µï¼š</p><ul><li>ä¸ºå­˜å‚¨è¯¥ç”¨æˆ·è®°å½•è€Œæ–°ç”Ÿæˆäº†<code>é¡µ31</code>ã€‚</li><li>å› ä¸ºåŸå…ˆå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„<code>é¡µ30çš„å®¹é‡å·²æ»¡</code>ï¼ˆæˆ‘ä»¬å‰è¾¹å‡è®¾åªèƒ½å­˜å‚¨4æ¡ç›®å½•é¡¹è®°å½•ï¼‰ï¼Œæ‰€ä»¥ä¸å¾—ä¸éœ€è¦ä¸€ä¸ªæ–°çš„<code>é¡µ32</code>æ¥å­˜æ”¾<code>é¡µ31</code>å¯¹åº”çš„ç›®å½•é¡¹ã€‚</li></ul><p>ç°åœ¨å› ä¸ºå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µä¸æ­¢ä¸€ä¸ªï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ®ä¸»é”®å€¼æŸ¥æ‰¾ä¸€æ¡ç”¨æˆ·è®°å½•å¤§è‡´éœ€è¦3ä¸ªæ­¥éª¤ï¼Œä»¥æŸ¥æ‰¾ä¸»é”®å€¼ä¸º<code>20</code>çš„è®°å½•ä¸ºä¾‹ï¼š</p><ol><li><p>ç¡®å®š<code>ç›®å½•é¡¹è®°å½•é¡µ</code>æˆ‘ä»¬ç°åœ¨çš„å­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µæœ‰ä¸¤ä¸ªï¼Œå³<code>é¡µ30</code>å’Œ<code>é¡µ32</code>ï¼Œåˆå› ä¸ºé¡µ30è¡¨ç¤ºçš„ç›®å½•é¡¹çš„ä¸»é”®å€¼çš„èŒƒå›´æ˜¯ [1, 320) ï¼Œé¡µ32è¡¨ç¤ºçš„ç›®å½•é¡¹çš„ä¸»é”®å€¼ä¸å°äº 320 ï¼Œæ‰€ä»¥ä¸»é”®å€¼ä¸º<code>20</code>çš„è®°å½•å¯¹åº”çš„ç›®å½•é¡¹è®°å½•åœ¨<code>é¡µ30</code>ä¸­ã€‚</p></li><li><p>é€šè¿‡ç›®å½•é¡¹è®°å½•é¡µ<code>ç¡®å®šç”¨æˆ·è®°å½•çœŸå®æ‰€åœ¨çš„é¡µ</code>ã€‚åœ¨ä¸€ä¸ªå­˜å‚¨<code>ç›®å½•é¡¹è®°å½•</code>çš„é¡µä¸­é€šè¿‡ä¸»é”®å€¼å®šä½ä¸€æ¡ç›®å½•é¡¹è®°å½•çš„æ–¹å¼è¯´è¿‡äº†ã€‚</p></li><li><p>åœ¨çœŸå®å­˜å‚¨ç”¨æˆ·è®°å½•çš„é¡µä¸­å®šä½åˆ°å…·ä½“çš„è®°å½•ã€‚</p></li></ol><p><strong>â‘¢ è¿­ä»£3æ¬¡ï¼šç›®å½•é¡¹è®°å½•é¡µçš„ç›®å½•é¡µ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301038376.png" alt="image-20220330103847284"></p><p>å¦‚å›¾ï¼Œæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªå­˜å‚¨æ›´é«˜çº§ç›®å½•é¡¹çš„<code>é¡µ33</code>ï¼Œè¿™ä¸ªé¡µä¸­çš„ä¸¤æ¡è®°å½•åˆ†åˆ«ä»£è¡¨é¡µ30å’Œé¡µ32ï¼Œå¦‚æœç”¨æˆ·è®°å½•çš„ä¸»é”®å€¼åœ¨<code>[1, 320)</code>ä¹‹é—´ï¼Œåˆ™åˆ°é¡µ30ä¸­æŸ¥æ‰¾æ›´è¯¦ç»†çš„ç›®å½•é¡¹è®°å½•ï¼Œå¦‚æœä¸»é”®å€¼<code>ä¸å°äº320</code>çš„è¯ï¼Œå°±åˆ°é¡µ32ä¸­æŸ¥æ‰¾æ›´è¯¦ç»†çš„ç›®å½•é¡¹è®°å½•ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹è¾¹è¿™ä¸ªå›¾æ¥æè¿°å®ƒï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301040190.png" alt="image-20220330104012108"></p><p>è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒçš„åç§°æ˜¯<code>B+æ ‘</code>ã€‚</p><p><strong>â‘£</strong> <strong>B+Tree</strong></p><p>ä¸€ä¸ªB+æ ‘çš„èŠ‚ç‚¹å…¶å®å¯ä»¥åˆ†æˆå¥½å¤šå±‚ï¼Œè§„å®šæœ€ä¸‹è¾¹çš„é‚£å±‚ï¼Œä¹Ÿå°±æ˜¯å­˜æ”¾æˆ‘ä»¬ç”¨æˆ·è®°å½•çš„é‚£å±‚ä¸ºç¬¬<code>0</code>å±‚ï¼Œä¹‹åä¾æ¬¡å¾€ä¸ŠåŠ ã€‚ä¹‹å‰æˆ‘ä»¬åšäº†ä¸€ä¸ªéå¸¸æç«¯çš„å‡è®¾ï¼šå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µ<code>æœ€å¤šå­˜æ”¾3æ¡è®°å½•</code>ï¼Œå­˜æ”¾ç›®å½•é¡¹è®°å½•çš„é¡µ<code>æœ€å¤šå­˜æ”¾4æ¡è®°å½•</code>ã€‚å…¶å®çœŸå®ç¯å¢ƒä¸­ä¸€ä¸ªé¡µå­˜æ”¾çš„è®°å½•æ•°é‡æ˜¯éå¸¸å¤§çš„ï¼Œå‡è®¾æ‰€æœ‰å­˜æ”¾ç”¨æˆ·è®°å½•çš„å¶å­èŠ‚ç‚¹ä»£è¡¨çš„æ•°æ®é¡µå¯ä»¥å­˜æ”¾<code>100æ¡ç”¨æˆ·è®°å½•</code>ï¼Œæ‰€æœ‰å­˜æ”¾ç›®å½•é¡¹è®°å½•çš„å†…èŠ‚ç‚¹ä»£è¡¨çš„æ•°æ®é¡µå¯ä»¥å­˜æ”¾<code>1000æ¡ç›®å½•é¡¹è®°å½•</code>ï¼Œé‚£ä¹ˆï¼š</p><ul><li>å¦‚æœB+æ ‘åªæœ‰1å±‚ï¼Œä¹Ÿå°±æ˜¯åªæœ‰1ä¸ªç”¨äºå­˜æ”¾ç”¨æˆ·è®°å½•çš„èŠ‚ç‚¹ï¼Œæœ€å¤šèƒ½å­˜æ”¾<code>100</code>æ¡è®°å½•ã€‚</li><li>å¦‚æœB+æ ‘æœ‰2å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾<code>1000Ã—100=10,0000</code>æ¡è®°å½•ã€‚</li><li>å¦‚æœB+æ ‘æœ‰3å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾<code>1000Ã—1000Ã—100=1,0000,0000</code>æ¡è®°å½•ã€‚</li><li>å¦‚æœB+æ ‘æœ‰4å±‚ï¼Œæœ€å¤šèƒ½å­˜æ”¾<code>1000Ã—1000Ã—1000Ã—100=1000,0000,0000</code>æ¡è®°å½•ã€‚ç›¸å½“å¤šçš„è®°å½•ï¼ï¼ï¼</li></ul><p>ä½ çš„è¡¨é‡Œèƒ½å­˜æ”¾<code>100000000000</code>æ¡è®°å½•å—ï¼Ÿæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬<code>ç”¨åˆ°çš„B+æ ‘éƒ½ä¸ä¼šè¶…è¿‡4å±‚</code>ï¼Œé‚£æˆ‘ä»¬é€šè¿‡ä¸»é”®å€¼å»æŸ¥æ‰¾æŸæ¡è®°å½•æœ€å¤šåªéœ€è¦åš4ä¸ªé¡µé¢å†…çš„æŸ¥æ‰¾ï¼ˆæŸ¥æ‰¾3ä¸ªç›®å½•é¡¹é¡µå’Œä¸€ä¸ªç”¨æˆ·è®°å½•é¡µï¼‰ï¼Œåˆå› ä¸ºåœ¨æ¯ä¸ªé¡µé¢å†…æœ‰æ‰€è°“çš„<code>Page Directory</code>ï¼ˆé¡µç›®å½•ï¼‰ï¼Œæ‰€ä»¥åœ¨é¡µé¢å†…ä¹Ÿå¯ä»¥é€šè¿‡<code>äºŒåˆ†æ³•</code>å®ç°å¿«é€Ÿå®šä½è®°å½•ã€‚</p><h5 id="2-3-å¸¸è§ç´¢å¼•æ¦‚å¿µ"><strong>2.3</strong> <strong>å¸¸è§ç´¢å¼•æ¦‚å¿µ</strong></h5><p><strong>1.</strong> <strong>èšç°‡ç´¢å¼•</strong></p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ol><li><p>ä½¿ç”¨è®°å½•ä¸»é”®å€¼çš„å¤§å°è¿›è¡Œè®°å½•å’Œé¡µçš„æ’åºï¼Œè¿™åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢çš„å«ä¹‰ï¼š</p><ul><li><p><code>é¡µå†…</code>çš„è®°å½•æ˜¯æŒ‰ç…§ä¸»é”®çš„å¤§å°é¡ºåºæ’æˆä¸€ä¸ª<code>å•å‘é“¾è¡¨</code>ã€‚</p></li><li><p>å„ä¸ªå­˜æ”¾<code>ç”¨æˆ·è®°å½•çš„é¡µ</code>ä¹Ÿæ˜¯æ ¹æ®é¡µä¸­ç”¨æˆ·è®°å½•çš„ä¸»é”®å¤§å°é¡ºåºæ’æˆä¸€ä¸ª<code>åŒå‘é“¾è¡¨</code>ã€‚</p></li><li><p>å­˜æ”¾<code>ç›®å½•é¡¹è®°å½•çš„é¡µ</code>åˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼Œåœ¨åŒä¸€å±‚æ¬¡ä¸­çš„é¡µä¹Ÿæ˜¯æ ¹æ®é¡µä¸­ç›®å½•é¡¹è®°å½•çš„ä¸»é”®å¤§å°é¡ºåºæ’æˆä¸€ä¸ª<code>åŒå‘é“¾è¡¨</code>ã€‚</p></li></ul></li><li><p>B+æ ‘çš„<code>å¶å­èŠ‚ç‚¹</code>å­˜å‚¨çš„æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•ã€‚</p><p>æ‰€è°“å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œå°±æ˜¯æŒ‡è¿™ä¸ªè®°å½•ä¸­å­˜å‚¨äº†æ‰€æœ‰åˆ—çš„å€¼ï¼ˆåŒ…æ‹¬éšè—åˆ—ï¼‰ã€‚</p></li></ol><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li><code>æ•°æ®è®¿é—®æ›´å¿«</code>ï¼Œå› ä¸ºèšç°‡ç´¢å¼•å°†ç´¢å¼•å’Œæ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªB+æ ‘ä¸­ï¼Œå› æ­¤ä»èšç°‡ç´¢å¼•ä¸­è·å–æ•°æ®æ¯”éèšç°‡ç´¢å¼•æ›´å¿«</li><li>èšç°‡ç´¢å¼•å¯¹äºä¸»é”®çš„<code>æ’åºæŸ¥æ‰¾</code>å’Œ<code>èŒƒå›´æŸ¥æ‰¾</code>é€Ÿåº¦éå¸¸å¿«</li><li>æŒ‰ç…§èšç°‡ç´¢å¼•æ’åˆ—é¡ºåºï¼ŒæŸ¥è¯¢æ˜¾ç¤ºä¸€å®šèŒƒå›´æ•°æ®çš„æ—¶å€™ï¼Œç”±äºæ•°æ®éƒ½æ˜¯ç´§å¯†ç›¸è¿ï¼Œæ•°æ®åº“ä¸ç”¨ä»å¤šä¸ªæ•°æ®å—ä¸­æå–æ•°æ®ï¼Œæ‰€ä»¥<code>èŠ‚çœäº†å¤§é‡çš„ioæ“ä½œ</code>ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li><code>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåº</code>ï¼ŒæŒ‰ç…§ä¸»é”®çš„é¡ºåºæ’å…¥æ˜¯æœ€å¿«çš„æ–¹å¼ï¼Œå¦åˆ™å°†ä¼šå‡ºç°é¡µåˆ†è£‚ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚å› æ­¤ï¼Œå¯¹äºInnoDBè¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šå®šä¹‰ä¸€ä¸ª<strong>è‡ªå¢IDåˆ—ä¸ºä¸»é”®</strong></li><li><code>æ›´æ–°ä¸»é”®çš„ä»£ä»·å¾ˆé«˜</code>ï¼Œå› ä¸ºå°†ä¼šå¯¼è‡´è¢«æ›´æ–°çš„è¡Œç§»åŠ¨ã€‚å› æ­¤ï¼Œå¯¹äºInnoDBè¡¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬å®šä¹‰<strong>ä¸»é”®ä¸ºä¸å¯æ›´æ–°</strong></li><li><code>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡ç´¢å¼•æŸ¥æ‰¾</code>ï¼Œç¬¬ä¸€æ¬¡æ‰¾åˆ°ä¸»é”®å€¼ï¼Œç¬¬äºŒæ¬¡æ ¹æ®ä¸»é”®å€¼æ‰¾åˆ°è¡Œæ•°æ®</li></ul><p><strong>2.</strong> <strong>äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ã€éèšç°‡ç´¢å¼•ï¼‰</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301050055.png" alt="image-20220330105018965"></p><p><strong>æ¦‚å¿µï¼šå›è¡¨</strong> æˆ‘ä»¬æ ¹æ®è¿™ä¸ªä»¥c2åˆ—å¤§å°æ’åºçš„B+æ ‘åªèƒ½ç¡®å®šæˆ‘ä»¬è¦æŸ¥æ‰¾è®°å½•çš„ä¸»é”®å€¼ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³æ ¹æ®c2åˆ—çš„å€¼æŸ¥æ‰¾åˆ°å®Œæ•´çš„ç”¨æˆ·è®°å½•çš„è¯ï¼Œä»ç„¶éœ€è¦åˆ°<code>èšç°‡ç´¢å¼•</code>ä¸­å†æŸ¥ä¸€éï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<code>å›è¡¨</code>ã€‚ä¹Ÿå°±æ˜¯æ ¹æ®c2åˆ—çš„å€¼æŸ¥è¯¢ä¸€æ¡å®Œæ•´çš„ç”¨æˆ·è®°å½•éœ€è¦ä½¿ç”¨åˆ°<code>2</code>æ£µB+æ ‘ï¼</p><p><strong>3.</strong> <strong>è”åˆç´¢å¼•</strong></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶ä»¥å¤šä¸ªåˆ—çš„å¤§å°ä½œä¸ºæ’åºè§„åˆ™ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶ä¸ºå¤šä¸ªåˆ—å»ºç«‹ç´¢å¼•ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬æƒ³è®©B+æ ‘æŒ‰ç…§<code>c2å’Œc3åˆ—</code>çš„å¤§å°è¿›è¡Œæ’åºï¼Œè¿™ä¸ªåŒ…å«ä¸¤å±‚å«ä¹‰ï¼š</p><ul><li><p>å…ˆæŠŠå„ä¸ªè®°å½•å’Œé¡µæŒ‰ç…§c2åˆ—è¿›è¡Œæ’åºã€‚</p></li><li><p>åœ¨è®°å½•çš„c2åˆ—ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨c3åˆ—è¿›è¡Œæ’åº</p></li></ul><p>æ³¨æ„ä¸€ç‚¹ï¼Œä»¥c2å’Œc3åˆ—çš„å¤§å°ä¸ºæ’åºè§„åˆ™å»ºç«‹çš„B+æ ‘ç§°ä¸º<code>è”åˆç´¢å¼•</code>ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªäºŒçº§ç´¢å¼•ã€‚å®ƒçš„æ„æ€ä¸åˆ†åˆ«ä¸ºc2å’Œc3åˆ—åˆ†åˆ«å»ºç«‹ç´¢å¼•çš„è¡¨è¿°æ˜¯ä¸åŒçš„ï¼Œä¸åŒç‚¹å¦‚ä¸‹ï¼š</p><ul><li><p>å»ºç«‹<code>è”åˆç´¢å¼•</code>åªä¼šå»ºç«‹å¦‚ä¸Šå›¾ä¸€æ ·çš„1æ£µB+æ ‘ã€‚</p></li><li><p>ä¸ºc2å’Œc3åˆ—åˆ†åˆ«å»ºç«‹ç´¢å¼•ä¼šåˆ†åˆ«ä»¥c2å’Œc3åˆ—çš„å¤§å°ä¸ºæ’åºè§„åˆ™å»ºç«‹2æ£µB+æ ‘ã€‚</p></li></ul><h5 id="2-4-InnoDBçš„B-æ ‘ç´¢å¼•çš„æ³¨æ„äº‹é¡¹"><strong>2.4 InnoDBçš„B+æ ‘ç´¢å¼•çš„æ³¨æ„äº‹é¡¹</strong></h5><p><strong>1.</strong> <strong>æ ¹é¡µé¢ä½ç½®ä¸‡å¹´ä¸åŠ¨</strong></p><p>æˆ‘ä»¬å‰è¾¹ä»‹ç»B+ç´¢å¼•çš„æ—¶å€™ï¼Œä¸ºäº†å¤§å®¶ç†è§£ä¸Šçš„æ–¹ä¾¿ï¼Œå…ˆæŠŠå­˜å‚¨ç”¨æˆ·è®°å½•çš„å¶å­èŠ‚ç‚¹éƒ½ç”»å‡ºæ¥ï¼Œç„¶åæ¥ç€ç”»å­˜å‚¨ç›®å½•é¡¹è®°å½•çš„å†…èŠ‚ç‚¹ï¼Œå®é™…ä¸ŠB+æ ‘çš„å½¢æˆè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æ¯å½“ä¸ºæŸä¸ªè¡¨åˆ›å»ºä¸€ä¸ªB+æ ‘ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ä¸æ˜¯äººä¸ºåˆ›å»ºçš„ï¼Œé»˜è®¤å°±æœ‰ï¼‰çš„æ—¶å€™ï¼Œéƒ½ä¼šä¸ºè¿™ä¸ªç´¢å¼•åˆ›å»ºä¸€ä¸ª<code>æ ¹èŠ‚ç‚¹</code>é¡µé¢ã€‚æœ€å¼€å§‹è¡¨ä¸­æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ¯ä¸ªB+æ ‘ç´¢å¼•å¯¹åº”çš„<code>æ ¹èŠ‚ç‚¹</code>ä¸­æ—¢æ²¡æœ‰ç”¨æˆ·è®°å½•ï¼Œä¹Ÿæ²¡æœ‰ç›®å½•é¡¹è®°å½•ã€‚</li><li>éšåå‘è¡¨ä¸­æ’å…¥ç”¨æˆ·è®°å½•æ—¶ï¼Œå…ˆæŠŠç”¨æˆ·è®°å½•å­˜å‚¨åˆ°è¿™ä¸ª<code>æ ¹èŠ‚ç‚¹</code>ä¸­ã€‚</li><li>å½“æ ¹èŠ‚ç‚¹ä¸­çš„å¯ç”¨<code>ç©ºé—´ç”¨å®Œæ—¶</code>ç»§ç»­æ’å…¥è®°å½•ï¼Œæ­¤æ—¶ä¼šå°†æ ¹èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰è®°å½•å¤åˆ¶åˆ°ä¸€ä¸ªæ–°åˆ†é…çš„é¡µï¼Œæ¯”å¦‚<code>é¡µa</code>ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªæ–°é¡µè¿›è¡Œ<code>é¡µåˆ†è£‚</code>çš„æ“ä½œï¼Œå¾—åˆ°å¦ä¸€ä¸ªæ–°é¡µï¼Œæ¯”å¦‚<code>é¡µb</code>ã€‚è¿™æ—¶æ–°æ’å…¥çš„è®°å½•æ ¹æ®é”®å€¼ï¼ˆä¹Ÿå°±æ˜¯èšç°‡ç´¢å¼•ä¸­çš„ä¸»é”®å€¼ï¼ŒäºŒçº§ç´¢å¼•ä¸­å¯¹åº”çš„ç´¢å¼•åˆ—çš„å€¼ï¼‰çš„å¤§å°å°±ä¼šè¢«åˆ†é…åˆ°<code>é¡µa</code>æˆ–è€…<code>é¡µb</code>ä¸­ï¼Œè€Œ<code>æ ¹èŠ‚ç‚¹</code>ä¾¿å‡çº§ä¸ºå­˜å‚¨ç›®å½•é¡¹è®°å½•çš„é¡µã€‚</li></ul><p>è¿™ä¸ªè¿‡ç¨‹ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šä¸€ä¸ªB+æ ‘ç´¢å¼•çš„æ ¹èŠ‚ç‚¹è‡ªè¯ç”Ÿä¹‹æ—¥èµ·ï¼Œä¾¿ä¸ä¼šå†ç§»åŠ¨ã€‚è¿™æ ·åªè¦æˆ‘ä»¬å¯¹æŸä¸ªè¡¨å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆå®ƒçš„æ ¹èŠ‚ç‚¹çš„é¡µå·ä¾¿ä¼šè¢«è®°å½•åˆ°æŸä¸ªåœ°æ–¹ï¼Œç„¶åå‡¡æ˜¯<code>InnoDB</code>å­˜å‚¨å¼•æ“éœ€è¦ç”¨åˆ°è¿™ä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œéƒ½ä¼šä»é‚£ä¸ªå›ºå®šçš„åœ°æ–¹å–å‡ºæ ¹èŠ‚ç‚¹çš„é¡µå·ï¼Œä»è€Œæ¥è®¿é—®è¿™ä¸ªç´¢å¼•ã€‚</p><p><strong>2.</strong> <strong>å†…èŠ‚ç‚¹ä¸­ç›®å½•é¡¹è®°å½•çš„å”¯ä¸€æ€§</strong></p><p>æˆ‘ä»¬çŸ¥é“B+æ ‘ç´¢å¼•çš„å†…èŠ‚ç‚¹ä¸­ç›®å½•é¡¹è®°å½•çš„å†…å®¹æ˜¯<code>ç´¢å¼•åˆ—+é¡µå·</code>çš„æ­é…ï¼Œä½†æ˜¯è¿™ä¸ªæ­é…å¯¹äºäºŒçº§ç´¢å¼•æ¥è¯´æœ‰ç‚¹ä¸ä¸¥è°¨ã€‚è¿˜æ‹¿<code>index_demo</code>è¡¨ä¸ºä¾‹ï¼Œå‡è®¾è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</p><table><thead><tr><th>c1</th><th>c2</th><th>c3</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>â€˜uâ€™</td></tr><tr><td>3</td><td>1</td><td>â€˜dâ€™</td></tr><tr><td>5</td><td>1</td><td>â€˜yâ€™</td></tr><tr><td>7</td><td>1</td><td>â€˜aâ€™</td></tr></tbody></table><p>å¦‚æœäºŒçº§ç´¢å¼•ä¸­ç›®å½•é¡¹çš„å†…å®¹åªæ˜¯<code>ç´¢å¼•å·+é¡µå·</code>çš„æ­é…çš„è¯ï¼Œé‚£ä¹ˆä¸º<code>c2</code>åˆ—å»ºç«‹ç´¢å¼•åçš„B+æ ‘åº”è¯¥é•¿è¿™æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301110222.png" alt="image-20220330111029120"></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ–°æ’å…¥ä¸€è¡Œè®°å½•ï¼Œå…¶ä¸­<code>c1</code>ã€<code>c2</code>ã€<code>c3</code>çš„å€¼åˆ†åˆ«æ˜¯ï¼š<code>9</code>ã€<code>1</code>ã€<code>c</code>ï¼Œé‚£ä¹ˆåœ¨ä¿®æ”¹è¿™ä¸ªä¸ºc2åˆ—å»ºç«‹çš„äºŒçº§ç´¢å¼•å¯¹åº”çš„B+æ ‘æ—¶ä¾¿ç¢°åˆ°äº†ä¸ªå¤§é—®é¢˜ï¼šç”±äº<code>é¡µ3</code>ä¸­å­˜å‚¨çš„ç›®å½•é¡¹è®°å½•æ˜¯ç”±<code>c2åˆ—+é¡µå·</code>çš„å€¼æ„æˆçš„ï¼Œ<code>é¡µ3</code>ä¸­çš„ä¸¤æ¡ç›®å½•é¡¹è®°å½•å¯¹åº”çš„c2åˆ—çš„å€¼éƒ½æ˜¯<code>1</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿™æ¡æ–°æ’å…¥çš„è®°å½•åˆ°åº•åº”è¯¥æ”¾åœ¨<code>é¡µ4</code>ä¸­ï¼Œè¿˜æ˜¯åº”è¯¥æ”¾åœ¨<code>é¡µ5</code>ä¸­å•Šï¼Ÿç­”æ¡ˆæ˜¯ï¼šå¯¹ä¸èµ·ï¼Œæ‡µäº†ã€‚</p><p>ä¸ºäº†è®©æ–°æ’å…¥è®°å½•èƒ½æ‰¾åˆ°è‡ªå·±åœ¨å“ªä¸ªé¡µé‡Œï¼Œæˆ‘ä»¬éœ€è¦**ä¿è¯åœ¨B+æ ‘çš„åŒä¸€å±‚å†…èŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•é™¤é¡µå·è¿™ä¸ªå­—æ®µä»¥å¤–æ˜¯å”¯ä¸€çš„ã€‚**æ‰€ä»¥å¯¹äºäºŒçº§ç´¢å¼•çš„å†…èŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•çš„å†…å®¹å®é™…ä¸Šæ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆçš„ï¼š</p><ul><li>ç´¢å¼•åˆ—çš„å€¼</li><li>ä¸»é”®å€¼</li><li>é¡µå·</li></ul><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬æŠŠä¸»é”®å€¼ä¹Ÿæ·»åŠ åˆ°äºŒçº§ç´¢å¼•å†…èŠ‚ç‚¹ä¸­çš„ç›®å½•é¡¹è®°å½•äº†ï¼Œè¿™æ ·å°±èƒ½ä¿è¯B+æ ‘æ¯ä¸€å±‚èŠ‚ç‚¹ä¸­å„æ¡ç›®å½•é¡¹è®°å½•é™¤é¡µå·è¿™ä¸ªå­—æ®µå¤–æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºc2åˆ—å»ºç«‹äºŒçº§ç´¢å¼•åçš„ç¤ºæ„å›¾å®é™…ä¸Šåº”è¯¥æ˜¯è¿™æ ·å­çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301120304.png" alt="image-20220330112018199"></p><p>è¿™æ ·æˆ‘ä»¬å†æ’å…¥è®°å½•<code>(9, 1, 'c')</code>æ—¶ï¼Œç”±äº<code>é¡µ3</code>ä¸­å­˜å‚¨çš„ç›®å½•é¡¹è®°å½•æ˜¯ç”±<code>c2åˆ—+ä¸»é”®+é¡µå·</code>çš„å€¼æ„æˆçš„ï¼Œå¯ä»¥å…ˆæŠŠæ–°è®°å½•çš„<code>c2</code>åˆ—çš„å€¼å’Œ<code>é¡µ3</code>ä¸­å„ç›®å½•é¡¹è®°å½•çš„<code>c2</code>åˆ—çš„å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœ<code>c2</code>åˆ—çš„å€¼ç›¸åŒçš„è¯ï¼Œå¯ä»¥æ¥ç€æ¯”è¾ƒä¸»é”®å€¼ï¼Œå› ä¸ºB+æ ‘åŒä¸€å±‚ä¸­ä¸åŒç›®å½•é¡¹è®°å½•çš„<code>c2åˆ—+ä¸»é”®</code>çš„å€¼è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ€åè‚¯å®šèƒ½å®šä½å”¯ä¸€çš„ä¸€æ¡ç›®å½•é¡¹è®°å½•ï¼Œåœ¨æœ¬ä¾‹ä¸­æœ€åç¡®å®šæ–°è®°å½•åº”è¯¥è¢«æ’å…¥åˆ°<code>é¡µ5</code>ä¸­ã€‚</p><p><strong>3.</strong> <strong>ä¸€ä¸ªé¡µé¢æœ€å°‘å¯ä»¥å­˜å‚¨2æ¡è®°å½•</strong></p><p>ä¸€ä¸ªB+æ ‘åªéœ€è¦å¾ˆå°‘çš„å±‚çº§å°±å¯ä»¥è½»æ¾å­˜å‚¨æ•°äº¿æ¡è®°å½•ï¼ŒæŸ¥è¯¢é€Ÿåº¦ç›¸å½“ä¸é”™ï¼è¿™æ˜¯å› ä¸ºB+æ ‘æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¤§çš„å¤šå±‚çº§ç›®å½•ï¼Œæ¯ç»è¿‡ä¸€ä¸ªç›®å½•æ—¶éƒ½ä¼šè¿‡æ»¤æ‰è®¸å¤šæ— æ•ˆçš„å­ç›®å½•ï¼Œç›´åˆ°æœ€åè®¿é—®çš„å­˜å‚¨çœŸå®æ•°æ®çš„ç›®å½•ã€‚é‚£å¦‚æœä¸€ä¸ªå¤§çš„ç›®å½•ä¸­åªå­˜æ”¾ä¸€ä¸ªå­ç›®å½•æ˜¯ä¸ªå•¥æ•ˆæœå‘¢ï¼Ÿé‚£å°±æ˜¯ç›®å½•å±‚çº§éå¸¸éå¸¸éå¸¸å¤šï¼Œè€Œä¸”æœ€åçš„é‚£ä¸ªå­˜æ”¾çœŸå®æ•°æ®çš„ç›®å½•ä¸­å­˜æ”¾ä¸€æ¡è®°å½•ã€‚è´¹äº†åŠå¤©åŠ²åªèƒ½å­˜æ”¾ä¸€æ¡çœŸå®çš„ç”¨æˆ·è®°å½•ï¼Ÿæ‰€ä»¥<code>InnoDBçš„ä¸€ä¸ªæ•°æ®é¡µè‡³å°‘å¯ä»¥å­˜æ”¾ä¸¤æ¡è®°å½•</code></p><h4 id="3-MyISAMä¸­çš„ç´¢å¼•æ–¹æ¡ˆ"><strong>3. MyISAMä¸­çš„ç´¢å¼•æ–¹æ¡ˆ</strong></h4><p><strong>Bæ ‘ç´¢å¼•é€‚ç”¨å­˜å‚¨å¼•æ“å¦‚è¡¨æ‰€ç¤ºï¼š</strong></p><table><thead><tr><th>ç´¢å¼•/å­˜å‚¨å¼•æ“</th><th>MyISAM</th><th>InnoDB</th><th>Memory</th></tr></thead><tbody><tr><td>B-Treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><p>å³ä½¿å¤šä¸ªå­˜å‚¨å¼•æ“æ”¯æŒåŒä¸€ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ˜¯ä»–ä»¬çš„å®ç°åŸç†ä¹Ÿæ˜¯ä¸åŒçš„ã€‚Innodbå’ŒMyISAMé»˜è®¤çš„ç´¢å¼•æ˜¯Btreeç´¢å¼•ï¼›è€ŒMemoryé»˜è®¤çš„ç´¢å¼•æ˜¯Hashç´¢å¼•ã€‚</p><p>MyISAMå¼•æ“ä½¿ç”¨<code>B+Tree</code>ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶å­èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯<code>æ•°æ®è®°å½•çš„åœ°å€</code>ã€‚</p><h5 id="3-1-MyISAMç´¢å¼•çš„åŸç†"><strong>3.1 MyISAMç´¢å¼•çš„åŸç†</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301133907.png" alt="image-20220330113307813"></p><h5 id="3-2-MyISAM-ä¸-InnoDBå¯¹æ¯”"><strong>3.2 MyISAM</strong> <strong>ä¸</strong> <strong>InnoDBå¯¹æ¯”</strong></h5><p><strong>MyISAMçš„ç´¢å¼•æ–¹å¼éƒ½æ˜¯â€œéèšç°‡â€çš„ï¼Œä¸InnoDBåŒ…å«1ä¸ªèšç°‡ç´¢å¼•æ˜¯ä¸åŒçš„ã€‚</strong></p><p><strong>å°ç»“ä¸¤ç§å¼•æ“ä¸­ç´¢å¼•çš„åŒºåˆ«ï¼š</strong></p><p>â‘  åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¸»é”®å€¼å¯¹<code>èšç°‡ç´¢å¼•</code>è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œè€Œåœ¨<code>MyISAM</code>ä¸­å´éœ€è¦è¿›è¡Œä¸€æ¬¡<code>å›è¡¨</code>æ“ä½œï¼Œæ„å‘³ç€MyISAMä¸­å»ºç«‹çš„ç´¢å¼•ç›¸å½“äºå…¨éƒ¨éƒ½æ˜¯<code>äºŒçº§ç´¢å¼•</code>ã€‚</p><p>â‘¡ InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œè€ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯<code>åˆ†ç¦»çš„</code>ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚</p><p>â‘¢ InnoDBçš„éèšç°‡ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•<code>ä¸»é”®çš„å€¼</code>ï¼Œè€ŒMyISAMç´¢å¼•è®°å½•çš„æ˜¯<code>åœ°å€</code>ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDBçš„æ‰€æœ‰éèšç°‡ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚</p><p>â‘£ MyISAMçš„å›è¡¨æ“ä½œæ˜¯ååˆ†<code>å¿«é€Ÿ</code>çš„ï¼Œå› ä¸ºæ˜¯æ‹¿ç€åœ°å€åç§»é‡ç›´æ¥åˆ°æ–‡ä»¶ä¸­å–æ•°æ®çš„ï¼Œåè§‚InnoDBæ˜¯é€šè¿‡è·å–ä¸»é”®ä¹‹åå†å»èšç°‡ç´¢å¼•é‡Œæ‰¾è®°å½•ï¼Œè™½ç„¶è¯´ä¹Ÿä¸æ…¢ï¼Œä½†è¿˜æ˜¯æ¯”ä¸ä¸Šç›´æ¥ç”¨åœ°å€å»è®¿é—®ã€‚</p><p>â‘¤ InnoDBè¦æ±‚è¡¨<code>å¿…é¡»æœ‰ä¸»é”®</code>ï¼ˆ<code>MyISAMå¯ä»¥æ²¡æœ‰</code>ï¼‰ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥éç©ºä¸”å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ã€‚å¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å‹ã€‚</p><h4 id="4-ç´¢å¼•çš„ä»£ä»·"><strong>4.</strong> <strong>ç´¢å¼•çš„ä»£ä»·</strong></h4><p>ç´¢å¼•æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œå¯ä¸èƒ½ä¹±å»ºï¼Œå®ƒåœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½ä¼šæœ‰æ¶ˆè€—ï¼š</p><ul><li><strong>ç©ºé—´ä¸Šçš„ä»£ä»·</strong></li></ul><p>æ¯å»ºç«‹ä¸€ä¸ªç´¢å¼•éƒ½è¦ä¸ºå®ƒå»ºç«‹ä¸€æ£µB+æ ‘ï¼Œæ¯ä¸€æ£µB+æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªæ•°æ®é¡µï¼Œä¸€ä¸ªé¡µé»˜è®¤ä¼šå ç”¨<code>16KB</code>çš„å­˜å‚¨ç©ºé—´ï¼Œä¸€æ£µå¾ˆå¤§çš„B+æ ‘ç”±è®¸å¤šæ•°æ®é¡µç»„æˆï¼Œé‚£å°±æ˜¯å¾ˆå¤§çš„ä¸€ç‰‡å­˜å‚¨ç©ºé—´ã€‚</p><ul><li><strong>æ—¶é—´ä¸Šçš„ä»£ä»·</strong></li></ul><p>æ¯æ¬¡å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œ<code>å¢ã€åˆ ã€æ”¹</code>æ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å»ä¿®æ”¹å„ä¸ªB+æ ‘ç´¢å¼•ã€‚è€Œä¸”æˆ‘ä»¬è®²è¿‡ï¼ŒB+æ ‘æ¯å±‚èŠ‚ç‚¹éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼<code>ä»å°åˆ°å¤§çš„é¡ºåºæ’åº</code>è€Œç»„æˆäº†<code>åŒå‘é“¾è¡¨</code>ã€‚ä¸è®ºæ˜¯å¶å­èŠ‚ç‚¹ä¸­çš„è®°å½•ï¼Œè¿˜æ˜¯å†…èŠ‚ç‚¹ä¸­çš„è®°å½•ï¼ˆä¹Ÿå°±æ˜¯ä¸è®ºæ˜¯ç”¨æˆ·è®°å½•è¿˜æ˜¯ç›®å½•é¡¹è®°å½•ï¼‰éƒ½æ˜¯æŒ‰ç…§ç´¢å¼•åˆ—çš„å€¼ä»å°åˆ°å¤§çš„é¡ºåºè€Œå½¢æˆäº†ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚è€Œå¢ã€åˆ ã€æ”¹æ“ä½œå¯èƒ½ä¼šå¯¹èŠ‚ç‚¹å’Œè®°å½•çš„æ’åºé€ æˆç ´åï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“éœ€è¦é¢å¤–çš„æ—¶é—´è¿›è¡Œä¸€äº›<code>è®°å½•ç§»ä½</code>ï¼Œ<code>é¡µé¢åˆ†è£‚</code>ã€<code>é¡µé¢å›æ”¶</code>ç­‰æ“ä½œæ¥ç»´æŠ¤å¥½èŠ‚ç‚¹å’Œè®°å½•çš„æ’åºã€‚å¦‚æœæˆ‘ä»¬å»ºäº†è®¸å¤šç´¢å¼•ï¼Œæ¯ä¸ªç´¢å¼•å¯¹åº”çš„B+æ ‘éƒ½è¦è¿›è¡Œç›¸å…³çš„ç»´æŠ¤æ“ä½œï¼Œä¼šç»™æ€§èƒ½æ‹–åè…¿ã€‚</p><h4 id="5-MySQLæ•°æ®ç»“æ„é€‰æ‹©çš„åˆç†æ€§"><strong>5. MySQLæ•°æ®ç»“æ„é€‰æ‹©çš„åˆç†æ€§</strong></h4><h5 id="5-1-äºŒå‰æœç´¢æ ‘"><strong>5.1</strong> <strong>äºŒå‰æœç´¢æ ‘</strong></h5><p>å¦‚æœæˆ‘ä»¬åˆ©ç”¨äºŒå‰æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œé‚£ä¹ˆç£ç›˜çš„IOæ¬¡æ•°å’Œç´¢å¼•æ ‘çš„é«˜åº¦æ˜¯ç›¸å…³çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301636830.png" alt="image-20220330163602743"></p><p>ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå°±éœ€è¦<code>å‡å°‘ç£ç›˜IOæ•°</code>ã€‚ä¸ºäº†å‡å°‘ç£ç›˜IOçš„æ¬¡æ•°ï¼Œå°±éœ€è¦å°½é‡<code>é™ä½æ ‘çš„é«˜åº¦</code>ï¼Œéœ€è¦æŠŠåŸæ¥â€œç˜¦é«˜â€çš„æ ‘ç»“æ„å˜çš„â€œçŸ®èƒ–â€ï¼Œæ ‘çš„æ¯å±‚çš„åˆ†å‰è¶Šå¤šè¶Šå¥½ã€‚</p><h5 id="5-2-AVLæ ‘"><strong>5.2 AVLæ ‘</strong></h5><p>å¦‚æœæˆ‘ä»¬åˆ©ç”¨äºŒå‰æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œé‚£ä¹ˆç£ç›˜çš„IOæ¬¡æ•°å’Œç´¢å¼•æ ‘çš„é«˜åº¦æ˜¯ç›¸å…³çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301635653.png" alt="image-20220330163506536"></p><p>é’ˆå¯¹åŒæ ·çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬æŠŠäºŒå‰æ ‘æ”¹æˆ<code>M å‰æ ‘</code>ï¼ˆM&gt;2ï¼‰å‘¢ï¼Ÿå½“ M=3 æ—¶ï¼ŒåŒæ ·çš„ 31 ä¸ªèŠ‚ç‚¹å¯ä»¥ç”±ä¸‹é¢çš„ä¸‰å‰æ ‘æ¥è¿›è¡Œå­˜å‚¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301637104.png" alt="image-20220330163709022"></p><h5 id="5-3-B-Tree"><strong>5.3 B-Tree</strong></h5><p>B æ ‘çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301638995.png" alt="image-20220330163803905"></p><p>ä¸€ä¸ª M é˜¶çš„ B æ ‘ï¼ˆM&gt;2ï¼‰æœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š</p><ol><li><p>æ ¹èŠ‚ç‚¹çš„å„¿å­æ•°çš„èŒƒå›´æ˜¯ [2,M]ã€‚</p></li><li><p>æ¯ä¸ªä¸­é—´èŠ‚ç‚¹åŒ…å« k-1 ä¸ªå…³é”®å­—å’Œ k ä¸ªå­©å­ï¼Œå­©å­çš„æ•°é‡ = å…³é”®å­—çš„æ•°é‡ +1ï¼Œk çš„å–å€¼èŒƒå›´ä¸º[ceil(M/2), M]ã€‚</p></li><li><p>å¶å­èŠ‚ç‚¹åŒ…æ‹¬ k-1 ä¸ªå…³é”®å­—ï¼ˆå¶å­èŠ‚ç‚¹æ²¡æœ‰å­©å­ï¼‰ï¼Œk çš„å–å€¼èŒƒå›´ä¸º [ceil(M/2), M]ã€‚</p></li><li><p>å‡è®¾ä¸­é—´èŠ‚ç‚¹èŠ‚ç‚¹çš„å…³é”®å­—ä¸ºï¼šKey[1], Key[2], â€¦, Key[k-1]ï¼Œä¸”å…³é”®å­—æŒ‰ç…§å‡åºæ’åºï¼Œå³ Key[i] &lt;Key[i+1]ã€‚æ­¤æ—¶ k-1 ä¸ªå…³é”®å­—ç›¸å½“äºåˆ’åˆ†äº† k ä¸ªèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”ç€ k ä¸ªæŒ‡é’ˆï¼Œå³ä¸ºï¼šP[1], P[2], â€¦,P[k]ï¼Œå…¶ä¸­ P[1] æŒ‡å‘å…³é”®å­—å°äº Key[1] çš„å­æ ‘ï¼ŒP[i] æŒ‡å‘å…³é”®å­—å±äº (Key[i-1], Key[i]) çš„å­æ ‘ï¼ŒP[k]æŒ‡å‘å…³é”®å­—å¤§äº Key[k-1] çš„å­æ ‘ã€‚</p></li><li><p>æ‰€æœ‰å¶å­èŠ‚ç‚¹ä½äºåŒä¸€å±‚ã€‚</p></li></ol><p>ä¸Šé¢é‚£å¼ å›¾æ‰€è¡¨ç¤ºçš„ B æ ‘å°±æ˜¯ä¸€æ£µ 3 é˜¶çš„ B æ ‘ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ç£ç›˜å— 2ï¼Œé‡Œé¢çš„å…³é”®å­—ä¸ºï¼ˆ8ï¼Œ12ï¼‰ï¼Œå®ƒæœ‰ 3 ä¸ªå­©å­ (3ï¼Œ5)ï¼Œ(9ï¼Œ10) å’Œ (13ï¼Œ15)ï¼Œä½ èƒ½çœ‹åˆ° (3ï¼Œ5) å°äº 8ï¼Œ(9ï¼Œ10) åœ¨ 8 å’Œ 12 ä¹‹é—´ï¼Œè€Œ (13ï¼Œ15)å¤§äº 12ï¼Œåˆšå¥½ç¬¦åˆåˆšæ‰æˆ‘ä»¬ç»™å‡ºçš„ç‰¹å¾ã€‚</p><p>ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ç”¨ B æ ‘è¿›è¡ŒæŸ¥æ‰¾ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦<code>æŸ¥æ‰¾çš„å…³é”®å­—æ˜¯ 9</code>ï¼Œé‚£ä¹ˆæ­¥éª¤å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ol><li><p>æˆ‘ä»¬ä¸æ ¹èŠ‚ç‚¹çš„å…³é”®å­— (17ï¼Œ35ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œ9 å°äº 17 é‚£ä¹ˆå¾—åˆ°æŒ‡é’ˆ P1ï¼›</p></li><li><p>æŒ‰ç…§æŒ‡é’ˆ P1 æ‰¾åˆ°ç£ç›˜å— 2ï¼Œå…³é”®å­—ä¸ºï¼ˆ8ï¼Œ12ï¼‰ï¼Œå› ä¸º 9 åœ¨ 8 å’Œ 12 ä¹‹é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°æŒ‡é’ˆ P2ï¼›</p></li><li><p>æŒ‰ç…§æŒ‡é’ˆ P2 æ‰¾åˆ°ç£ç›˜å— 6ï¼Œå…³é”®å­—ä¸ºï¼ˆ9ï¼Œ10ï¼‰ï¼Œç„¶åæˆ‘ä»¬æ‰¾åˆ°äº†å…³é”®å­— 9ã€‚</p></li></ol><p>ä½ èƒ½çœ‹å‡ºæ¥åœ¨ B æ ‘çš„æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒçš„æ¬¡æ•°å¹¶ä¸å°‘ï¼Œä½†å¦‚æœæŠŠæ•°æ®è¯»å–å‡ºæ¥ç„¶ååœ¨å†…å­˜ä¸­è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªæ—¶é—´å°±æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚è€Œè¯»å–ç£ç›˜å—æœ¬èº«éœ€è¦è¿›è¡Œ I/O æ“ä½œï¼Œæ¶ˆè€—çš„æ—¶é—´æ¯”åœ¨å†…å­˜ä¸­è¿›è¡Œæ¯”è¾ƒæ‰€éœ€è¦çš„æ—¶é—´è¦å¤šï¼Œæ˜¯æ•°æ®æŸ¥æ‰¾ç”¨æ—¶çš„é‡è¦å› ç´ ã€‚<code>B æ ‘ç›¸æ¯”äºå¹³è¡¡äºŒå‰æ ‘æ¥è¯´ç£ç›˜ I/O æ“ä½œè¦å°‘</code>ï¼Œåœ¨æ•°æ®æŸ¥è¯¢ä¸­æ¯”å¹³è¡¡äºŒå‰æ ‘æ•ˆç‡è¦é«˜ã€‚æ‰€ä»¥<code>åªè¦æ ‘çš„é«˜åº¦è¶³å¤Ÿä½ï¼ŒIOæ¬¡æ•°è¶³å¤Ÿå°‘ï¼Œå°±å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½</code>ã€‚</p><p><strong>å†ä¸¾ä¾‹1ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203301644761.png" alt="image-20220330164411665"></p><h5 id="5-4-B-Tree"><strong>5.4 B+Tree</strong></h5><p><strong>B+</strong> <strong>æ ‘å’Œ</strong> <strong>B</strong> <strong>æ ‘çš„å·®å¼‚ï¼š</strong></p><ol><li><p>æœ‰ k ä¸ªå­©å­çš„èŠ‚ç‚¹å°±æœ‰ k ä¸ªå…³é”®å­—ã€‚ä¹Ÿå°±æ˜¯å­©å­æ•°é‡ = å…³é”®å­—æ•°ï¼Œè€Œ B æ ‘ä¸­ï¼Œå­©å­æ•°é‡ = å…³é”®å­—æ•°+1ã€‚</p></li><li><p>éå¶å­èŠ‚ç‚¹çš„å…³é”®å­—ä¹Ÿä¼šåŒæ—¶å­˜åœ¨åœ¨å­èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ˜¯åœ¨å­èŠ‚ç‚¹ä¸­æ‰€æœ‰å…³é”®å­—çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰ã€‚</p></li><li><p>éå¶å­èŠ‚ç‚¹ä»…ç”¨äºç´¢å¼•ï¼Œä¸ä¿å­˜æ•°æ®è®°å½•ï¼Œè·Ÿè®°å½•æœ‰å…³çš„ä¿¡æ¯éƒ½æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­ã€‚è€Œ B æ ‘ä¸­ï¼Œ <code>éå¶å­èŠ‚ç‚¹æ—¢ä¿å­˜ç´¢å¼•ï¼Œä¹Ÿä¿å­˜æ•°æ®è®°å½•</code>ã€‚</p></li><li><p>æ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­èŠ‚ç‚¹å‡ºç°ï¼Œå¶å­èŠ‚ç‚¹æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œè€Œä¸”å¶å­èŠ‚ç‚¹æœ¬èº«æŒ‰ç…§å…³é”®å­—çš„å¤§å°ä»å°åˆ°å¤§é¡ºåºé“¾æ¥ã€‚</p></li></ol><blockquote><p>B æ ‘å’Œ B+ æ ‘éƒ½å¯ä»¥ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œåœ¨ MySQL ä¸­é‡‡ç”¨çš„æ˜¯ B+ æ ‘ã€‚</p><p>ä½†Bæ ‘å’ŒB+æ ‘å„æœ‰è‡ªå·±çš„åº”ç”¨åœºæ™¯ï¼Œä¸èƒ½è¯´B+æ ‘å®Œå…¨æ¯”Bæ ‘å¥½ï¼Œåä¹‹äº¦ç„¶ã€‚</p></blockquote><p><strong>æ€è€ƒé¢˜ï¼šä¸ºäº†å‡å°‘IOï¼Œç´¢å¼•æ ‘ä¼šä¸€æ¬¡æ€§åŠ è½½å—ï¼Ÿ</strong></p><blockquote><p>1ã€æ•°æ®åº“ç´¢å¼•æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œå¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¿…ç„¶å¯¼è‡´ç´¢å¼•çš„å¤§å°ä¹Ÿä¼šå¾ˆå¤§ï¼Œè¶…è¿‡å‡ ä¸ªGã€‚</p><p>2ã€å½“æˆ‘ä»¬åˆ©ç”¨ç´¢å¼•æŸ¥è¯¢æ—¶å€™ï¼Œæ˜¯ä¸å¯èƒ½å°†å…¨éƒ¨å‡ ä¸ªGçš„ç´¢å¼•éƒ½åŠ è½½è¿›å†…å­˜çš„ï¼Œæˆ‘ä»¬èƒ½åšçš„åªèƒ½æ˜¯ï¼šé€ä¸€åŠ è½½æ¯ä¸€ä¸ªç£ç›˜é¡µï¼Œå› ä¸ºç£ç›˜é¡µå¯¹åº”ç€ç´¢å¼•æ ‘çš„èŠ‚ç‚¹ã€‚</p></blockquote><p><strong>æ€è€ƒé¢˜ï¼šB+æ ‘çš„å­˜å‚¨èƒ½åŠ›å¦‚ä½•ï¼Ÿä¸ºä½•è¯´ä¸€èˆ¬æŸ¥æ‰¾è¡Œè®°å½•ï¼Œæœ€å¤šåªéœ€1~3æ¬¡ç£ç›˜IO</strong></p><blockquote><p>InnoDBå­˜å‚¨å¼•æ“ä¸­é¡µçš„å¤§å°ä¸º16KBï¼Œä¸€èˆ¬è¡¨çš„ä¸»é”®ç±»å‹ä¸ºINT(å ç”¨4ä¸ªå­—èŠ‚)æˆ–BIGINT(å ç”¨8ä¸ªå­—èŠ‚)ï¼ŒæŒ‡é’ˆç±»å‹ä¹Ÿä¸€èˆ¬ä¸º4æˆ–8ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªé¡µï¼ˆB+Treeä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ä¸­å¤§æ¦‚å­˜å‚¨16KB/(8B+8B)=1Kä¸ªé”®å€¼ï¼Œå› ä¸ºæ˜¯ä¼°ç®—ï¼Œä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œè¿™é‡Œçš„Kå–å€¼ä¸º10^3ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæ·±åº¦ä¸º3çš„B+Treeç´¢å¼•å¯ä»¥ç»´æŠ¤10^3 * 10^3 * 10^3 = 10äº¿æ¡è®°å½•ã€‚ï¼ˆè¿™é‡Œå‡å®šä¸€ä¸ªæ•°æ®é¡µä¹Ÿå­˜å‚¨10^3æ¡è¡Œè®°å½•æ•°æ®äº†ï¼‰</p><p>å®é™…æƒ…å†µä¸­æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½ä¸èƒ½å¡«å……æ»¡ï¼Œå› æ­¤åœ¨æ•°æ®åº“ä¸­ï¼Œ<code>B+Treeçš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨2~4å±‚</code>ã€‚MySQLçš„InnoDBå­˜å‚¨å¼•æ“åœ¨è®¾è®¡æ—¶æ˜¯å°†æ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸä¸€é”®å€¼çš„è¡Œè®°å½•æ—¶æœ€å¤šåªéœ€è¦1~3æ¬¡ç£ç›˜I/Oæ“ä½œ</p></blockquote><p><strong>æ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆè¯´B+æ ‘æ¯”B-æ ‘æ›´é€‚åˆå®é™…åº”ç”¨ä¸­æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç´¢å¼•å’Œæ•°æ®åº“ç´¢å¼•ï¼Ÿ</strong></p><blockquote><p>1.B+æ ‘çš„ç£ç›˜è¯»å†™ä»£ä»·æ›´ä½</p><p>B+æ ‘çš„å†…éƒ¨ç»“ç‚¹å¹¶æ²¡æœ‰æŒ‡å‘å…³é”®å­—å…·ä½“ä¿¡æ¯çš„æŒ‡é’ˆã€‚å› æ­¤å…¶å†…éƒ¨ç»“ç‚¹ç›¸å¯¹äºBæ ‘æ›´å°ã€‚å¦‚æœæŠŠæ‰€æœ‰åŒä¸€å†…éƒ¨ç»“ç‚¹çš„å…³é”®å­—å­˜æ”¾åœ¨åŒä¸€ç›˜å—ä¸­ï¼Œé‚£ä¹ˆç›˜å—æ‰€èƒ½å®¹çº³çš„å…³é”®å­—æ•°é‡ä¹Ÿè¶Šå¤šã€‚ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­çš„éœ€è¦æŸ¥æ‰¾çš„å…³é”®å­—ä¹Ÿå°±è¶Šå¤šã€‚ç›¸å¯¹æ¥è¯´IOè¯»å†™æ¬¡æ•°ä¹Ÿå°±é™ä½äº†ã€‚</p><p>2ã€B+æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®š</p><p>ç”±äºéç»ˆç»“ç‚¹å¹¶ä¸æ˜¯æœ€ç»ˆæŒ‡å‘æ–‡ä»¶å†…å®¹çš„èŠ‚ç‚¹ï¼Œè€Œåªæ˜¯å¶å­ç»“ç‚¹ä¸­å…³é”®å­—çš„ç´¢å¼•ã€‚æ‰€æœ‰ä»»ä½•å…³é”®å­—çš„æŸ¥æ‰¾å¿…é¡»èµ°ä¸€æ¡ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯ã€‚æ‰€æœ‰å…³é”®å­—æŸ¥è¯¢çš„è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå¯¼è‡´æ¯ä¸€ä¸ªæ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ç›¸å½“ã€‚</p></blockquote><p><strong>æ€è€ƒé¢˜ï¼šHashç´¢å¼•ä¸B+æ ‘ç´¢å¼•çš„åŒºåˆ«</strong></p><blockquote><p>1ã€Hashç´¢å¼•<code>ä¸èƒ½è¿›è¡ŒèŒƒå›´æŸ¥è¯¢</code>ï¼Œè€ŒB+æ ‘å¯ä»¥ã€‚è¿™æ˜¯å› ä¸ºHashç´¢å¼•æŒ‡å‘çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œè€ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸ªæœ‰åºçš„é“¾è¡¨ã€‚</p><p>2ã€Hashç´¢å¼•<code>ä¸æ”¯æŒè”åˆç´¢å¼•çš„æœ€å·¦ä¾§åŸåˆ™</code>ï¼ˆå³è”åˆç´¢å¼•çš„éƒ¨åˆ†ç´¢å¼•æ— æ³•ä½¿ç”¨ï¼‰ï¼Œè€ŒB+æ ‘å¯ä»¥ã€‚å¯¹äºè”åˆç´¢å¼•æ¥è¯´ï¼ŒHashç´¢å¼•åœ¨è®¡ç®—Hashå€¼çš„æ—¶å€™æ˜¯å°†ç´¢å¼•é”®åˆå¹¶åå†ä¸€èµ·è®¡ç®—Hashå€¼ï¼Œæ‰€ä»¥ä¸ä¼šé’ˆå¯¹æ¯ä¸ªç´¢å¼•å•ç‹¬è®¡ç®—Hashå€¼ã€‚å› æ­¤å¦‚æœç”¨åˆ°è”åˆç´¢å¼•çš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªç´¢å¼•æ—¶ï¼Œè”åˆç´¢å¼•æ— æ³•è¢«åˆ©ç”¨ã€‚</p><p>3ã€Hashç´¢å¼•<code>ä¸æ”¯æŒ ORDER BY æ’åº</code>ï¼Œå› ä¸ºHashç´¢å¼•æŒ‡å‘çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå› æ­¤æ— æ³•èµ·åˆ°æ’åºä¼˜åŒ–çš„ä½œç”¨ï¼Œè€ŒB+æ ‘ç´¢å¼•æ•°æ®æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥èµ·åˆ°å¯¹è¯¥å­—æ®µORDER BY æ’åºä¼˜åŒ–çš„ä½œç”¨ã€‚åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç”¨Hashç´¢å¼•è¿›è¡Œ<code>æ¨¡ç³ŠæŸ¥è¯¢</code>ï¼Œè€ŒB+æ ‘ä½¿ç”¨LIKEè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼ŒLIKEåé¢åæ¨¡ç³ŠæŸ¥è¯¢ï¼ˆæ¯”å¦‚%ç»“å°¾ï¼‰çš„è¯å°±å¯ä»¥èµ·åˆ°ä¼˜åŒ–ä½œç”¨ã€‚</p><p>4ã€<code>InnoDBä¸æ”¯æŒå“ˆå¸Œç´¢å¼•</code></p></blockquote><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€ç´¢å¼•åŠå…¶ä¼˜ç¼ºç‚¹ã€InnoDBä¸­ç´¢å¼•çš„æ¨æ¼”ã€MyISAMä¸­çš„ç´¢å¼•æ–¹æ¡ˆã€ç´¢å¼•çš„ä»£ä»·ã€MySQLæ•°æ®ç»“æ„é€‰æ‹©çš„åˆç†æ€§ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬05ç«  å­˜å‚¨å¼•æ“</title>
    <link href="https://angus9823.github.io/posts/d29d02e3.html"/>
    <id>https://angus9823.github.io/posts/d29d02e3.html</id>
    <published>2023-04-18T07:35:11.000Z</published>
    <updated>2023-04-18T08:25:56.519Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬05ç« -å­˜å‚¨å¼•æ“">ç¬¬05ç«  å­˜å‚¨å¼•æ“</h3><h4 id="1-æŸ¥çœ‹å­˜å‚¨å¼•æ“"><strong>1.</strong> <strong>æŸ¥çœ‹å­˜å‚¨å¼•æ“</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show engines;</span><br><span class="line"># æˆ–</span><br><span class="line">show engines\G</span><br></pre></td></tr></table></figure><h4 id="2-è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„å­˜å‚¨å¼•æ“"><strong>2.</strong> <strong>è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„å­˜å‚¨å¼•æ“</strong></h4><ul><li>æŸ¥çœ‹é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;%storage_engine%&#x27;; </span><br><span class="line">#æˆ–</span><br><span class="line">SELECT @@default_storage_engine;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹é»˜è®¤çš„å­˜å‚¨å¼•æ“</li></ul><p>å¦‚æœåœ¨åˆ›å»ºè¡¨çš„è¯­å¥ä¸­æ²¡æœ‰æ˜¾å¼æŒ‡å®šè¡¨çš„å­˜å‚¨å¼•æ“çš„è¯ï¼Œé‚£å°±ä¼šé»˜è®¤ä½¿ç”¨<code>InnoDB</code>ä½œä¸ºè¡¨çš„å­˜å‚¨å¼•æ“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET DEFAULT_STORAGE_ENGINE=MyISAM;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä¿®æ”¹<code>my.cnf</code>æ–‡ä»¶ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default-storage-engine</span>=MyISAM </span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡</span> </span><br><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure><h4 id="3-è®¾ç½®è¡¨çš„å­˜å‚¨å¼•æ“"><strong>3.</strong> <strong>è®¾ç½®è¡¨çš„å­˜å‚¨å¼•æ“</strong></h4><p>å­˜å‚¨å¼•æ“æ˜¯è´Ÿè´£å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæå–å’Œå†™å…¥å·¥ä½œçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º<code>ä¸åŒçš„è¡¨è®¾ç½®ä¸åŒçš„å­˜å‚¨å¼•æ“</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„è¡¨å¯ä»¥æœ‰ä¸åŒçš„ç‰©ç†å­˜å‚¨ç»“æ„ï¼Œä¸åŒçš„æå–å’Œå†™å…¥æ–¹å¼ã€‚</p><h5 id="3-1-åˆ›å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“"><strong>3.1</strong> <strong>åˆ›å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE è¡¨å(</span><br><span class="line">    å»ºè¡¨è¯­å¥; </span><br><span class="line">) ENGINE = å­˜å‚¨å¼•æ“åç§°;</span><br></pre></td></tr></table></figure><h5 id="3-2-ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“"><strong>3.2</strong> <strong>ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE è¡¨å ENGINE = å­˜å‚¨å¼•æ“åç§°;</span><br></pre></td></tr></table></figure><h4 id="4-å¼•æ“ä»‹ç»"><strong>4.</strong> <strong>å¼•æ“ä»‹ç»</strong></h4><h5 id="4-1-InnoDB-å¼•æ“ï¼šå…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å­˜å‚¨å¼•æ“"><strong>4.1 InnoDB</strong> <strong>å¼•æ“ï¼šå…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å­˜å‚¨å¼•æ“</strong></h5><ul><li>MySQLä»3.23.34aå¼€å§‹å°±åŒ…å«InnoDBå­˜å‚¨å¼•æ“ã€‚<code>å¤§äºç­‰äº5.5ä¹‹åï¼Œé»˜è®¤é‡‡ç”¨InnoDBå¼•æ“</code>ã€‚</li><li>InnoDBæ˜¯MySQLçš„<code>é»˜è®¤äº‹åŠ¡å‹å¼•æ“</code>ï¼Œå®ƒè¢«è®¾è®¡ç”¨æ¥å¤„ç†å¤§é‡çš„çŸ­æœŸ(short-lived)äº‹åŠ¡ã€‚å¯ä»¥ç¡®ä¿äº‹åŠ¡çš„å®Œæ•´æäº¤(Commit)å’Œå›æ»š(Rollback)ã€‚</li><li>é™¤äº†å¢åŠ å’ŒæŸ¥è¯¢å¤–ï¼Œè¿˜éœ€è¦æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œé‚£ä¹ˆï¼Œåº”ä¼˜å…ˆé€‰æ‹©InnoDBå­˜å‚¨å¼•æ“ã€‚</li><li><strong>é™¤éæœ‰éå¸¸ç‰¹åˆ«çš„åŸå› éœ€è¦ä½¿ç”¨å…¶ä»–çš„å­˜å‚¨å¼•æ“ï¼Œå¦åˆ™åº”è¯¥ä¼˜å…ˆè€ƒè™‘InnoDBå¼•æ“ã€‚</strong></li><li>æ•°æ®æ–‡ä»¶ç»“æ„ï¼š<ul><li>è¡¨å.frm å­˜å‚¨è¡¨ç»“æ„ï¼ˆMySQL8.0æ—¶ï¼Œåˆå¹¶åœ¨è¡¨å.ibdä¸­ï¼‰</li><li>è¡¨å.ibd å­˜å‚¨æ•°æ®å’Œç´¢å¼•</li></ul></li><li>InnoDBæ˜¯<code>ä¸ºå¤„ç†å·¨å¤§æ•°æ®é‡çš„æœ€å¤§æ€§èƒ½è®¾è®¡</code>ã€‚<ul><li>åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå­—å…¸æ•°æ®ä»¥å…ƒæ•°æ®æ–‡ä»¶ã€éäº‹åŠ¡è¡¨ç­‰æ¥å­˜å‚¨ã€‚ç°åœ¨è¿™äº›å…ƒæ•°æ®æ–‡ä»¶è¢«åˆ é™¤äº†ã€‚æ¯”å¦‚ï¼š<code>.frm</code>ï¼Œ<code>.par</code>ï¼Œ<code>.trn</code>ï¼Œ<code>.isl</code>ï¼Œ<code>.db.opt</code>ç­‰éƒ½åœ¨MySQL8.0ä¸­ä¸å­˜åœ¨äº†ã€‚</li></ul></li><li>å¯¹æ¯”MyISAMçš„å­˜å‚¨å¼•æ“ï¼Œ<code>InnoDBå†™çš„å¤„ç†æ•ˆç‡å·®ä¸€äº›</code>ï¼Œå¹¶ä¸”ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ä»¥ä¿å­˜æ•°æ®å’Œç´¢å¼•ã€‚</li><li>MyISAMåªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜çœŸå®æ•°æ®ï¼›InnoDBä¸ä»…ç¼“å­˜ç´¢å¼•è¿˜è¦ç¼“å­˜çœŸå®æ•°æ®ï¼Œ<code>å¯¹å†…å­˜è¦æ±‚è¾ƒé«˜</code>ï¼Œè€Œä¸”å†…å­˜å¤§å°å¯¹æ€§èƒ½æœ‰å†³å®šæ€§çš„å½±å“ã€‚</li></ul><h5 id="4-2-MyISAM-å¼•æ“ï¼šä¸»è¦çš„éäº‹åŠ¡å¤„ç†å­˜å‚¨å¼•æ“"><strong>4.2 MyISAM</strong> <strong>å¼•æ“ï¼šä¸»è¦çš„éäº‹åŠ¡å¤„ç†å­˜å‚¨å¼•æ“</strong></h5><ul><li>MyISAMæä¾›äº†å¤§é‡çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å…¨æ–‡ç´¢å¼•ã€å‹ç¼©ã€ç©ºé—´å‡½æ•°(GIS)ç­‰ï¼Œä½†MyISAM<code>ä¸æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”ã€å¤–é”®</code>ï¼Œæœ‰ä¸€ä¸ªæ¯«æ— ç–‘é—®çš„ç¼ºé™·å°±æ˜¯<code>å´©æºƒåæ— æ³•å®‰å…¨æ¢å¤</code>ã€‚</li><li><code>5.5ä¹‹å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“</code></li><li>ä¼˜åŠ¿æ˜¯è®¿é—®çš„<code>é€Ÿåº¦å¿«</code>ï¼Œå¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥SELECTã€INSERTä¸ºä¸»çš„åº”ç”¨</li><li>é’ˆå¯¹æ•°æ®ç»Ÿè®¡æœ‰é¢å¤–çš„å¸¸æ•°å­˜å‚¨ã€‚æ•…è€Œ count(*) çš„æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜</li><li>æ•°æ®æ–‡ä»¶ç»“æ„ï¼š<ul><li>è¡¨å.frm å­˜å‚¨è¡¨ç»“æ„</li><li>è¡¨å.MYD å­˜å‚¨æ•°æ® (MYData)</li><li>è¡¨å.MYI å­˜å‚¨ç´¢å¼• (MYIndex)</li></ul></li><li>åº”ç”¨åœºæ™¯ï¼šåªè¯»åº”ç”¨æˆ–è€…ä»¥è¯»ä¸ºä¸»çš„ä¸šåŠ¡</li></ul><h5 id="4-3-Archive-å¼•æ“ï¼šç”¨äºæ•°æ®å­˜æ¡£"><strong>4.3 Archive</strong> <strong>å¼•æ“ï¼šç”¨äºæ•°æ®å­˜æ¡£</strong></h5><h5 id="4-4-Blackhole-å¼•æ“ï¼šä¸¢å¼ƒå†™æ“ä½œï¼Œè¯»æ“ä½œä¼šè¿”å›ç©ºå†…å®¹"><strong>4.4 Blackhole</strong> <strong>å¼•æ“ï¼šä¸¢å¼ƒå†™æ“ä½œï¼Œè¯»æ“ä½œä¼šè¿”å›ç©ºå†…å®¹</strong></h5><h5 id="4-5-CSV-å¼•æ“ï¼šå­˜å‚¨æ•°æ®æ—¶ï¼Œä»¥é€—å·åˆ†éš”å„ä¸ªæ•°æ®é¡¹"><strong>4.5 CSV</strong> <strong>å¼•æ“ï¼šå­˜å‚¨æ•°æ®æ—¶ï¼Œä»¥é€—å·åˆ†éš”å„ä¸ªæ•°æ®é¡¹</strong></h5><h5 id="4-6-Memory-å¼•æ“ï¼šç½®äºå†…å­˜çš„è¡¨"><strong>4.6 Memory</strong> <strong>å¼•æ“ï¼šç½®äºå†…å­˜çš„è¡¨</strong></h5><h5 id="4-7-Federated-å¼•æ“ï¼šè®¿é—®è¿œç¨‹è¡¨"><strong>4.7 Federated</strong> <strong>å¼•æ“ï¼šè®¿é—®è¿œç¨‹è¡¨</strong></h5><h5 id="4-8-Mergeå¼•æ“ï¼šç®¡ç†å¤šä¸ªMyISAMè¡¨æ„æˆçš„è¡¨é›†åˆ"><strong>4.8 Mergeå¼•æ“ï¼šç®¡ç†å¤šä¸ªMyISAMè¡¨æ„æˆçš„è¡¨é›†åˆ</strong></h5><h5 id="4-9-NDBå¼•æ“ï¼šMySQLé›†ç¾¤ä¸“ç”¨å­˜å‚¨å¼•æ“"><strong>4.9 NDBå¼•æ“ï¼šMySQLé›†ç¾¤ä¸“ç”¨å­˜å‚¨å¼•æ“</strong></h5><h4 id="5-MyISAMå’ŒInnoDB"><strong>5. MyISAMå’ŒInnoDB</strong></h4><table><thead><tr><th>å¯¹æ¯”é¡¹</th><th><strong>MyISAM</strong></th><th><strong>InnoDB</strong></th></tr></thead><tbody><tr><td>å¤–é”®</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>äº‹åŠ¡</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>è¡Œè¡¨é”</td><td>è¡¨é”ï¼Œå³ä½¿æ“ä½œä¸€æ¡è®°å½•ä¹Ÿä¼šé”ä½æ•´ä¸ªè¡¨ï¼Œä¸é€‚åˆé«˜å¹¶å‘çš„æ“ä½œ</td><td>è¡Œé”ï¼Œæ“ä½œæ—¶åªé”æŸä¸€è¡Œï¼Œä¸å¯¹å…¶å®ƒè¡Œæœ‰å½±å“ï¼Œé€‚åˆé«˜å¹¶å‘çš„æ“ä½œ</td></tr><tr><td>ç¼“å­˜</td><td>åªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜çœŸå®æ•°æ®</td><td>ä¸ä»…ç¼“å­˜ç´¢å¼•è¿˜è¦ç¼“å­˜çœŸå®æ•°æ®ï¼Œå¯¹å†…å­˜è¦æ±‚è¾ƒé«˜ï¼Œè€Œä¸”å†…å­˜å¤§å°å¯¹æ€§èƒ½æœ‰å†³å®šæ€§çš„å½±å“</td></tr><tr><td>è‡ªå¸¦ç³»ç»Ÿè¡¨ä½¿ç”¨</td><td>Y</td><td>N</td></tr><tr><td>å…³æ³¨ç‚¹</td><td>æ€§èƒ½ï¼šèŠ‚çœèµ„æºã€æ¶ˆè€—å°‘ã€ç®€å•ä¸šåŠ¡</td><td>äº‹åŠ¡ï¼šå¹¶å‘å†™ã€äº‹åŠ¡ã€æ›´å¤§èµ„æº</td></tr><tr><td>é»˜è®¤å®‰è£…</td><td>Y</td><td>Y</td></tr><tr><td>é»˜è®¤ä½¿ç”¨</td><td>N</td><td>Y</td></tr></tbody></table><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€æŸ¥çœ‹å­˜å‚¨å¼•æ“ã€è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„å­˜å‚¨å¼•æ“ã€è®¾ç½®è¡¨çš„å­˜å‚¨å¼•æ“ã€å¼•æ“ä»‹ç»ã€MyISAMå’ŒInnoDBã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>mysqlé«˜çº§ç¬¬04ç«  é€»è¾‘æ¶æ„</title>
    <link href="https://angus9823.github.io/posts/7dec268f.html"/>
    <id>https://angus9823.github.io/posts/7dec268f.html</id>
    <published>2023-04-18T07:33:51.000Z</published>
    <updated>2023-04-18T08:25:56.515Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¬¬04ç« -é€»è¾‘æ¶æ„">ç¬¬04ç«  é€»è¾‘æ¶æ„</h3><h4 id="1-é€»è¾‘æ¶æ„å‰–æ"><strong>1.</strong> <strong>é€»è¾‘æ¶æ„å‰–æ</strong></h4><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291130782.png" alt="MySQLæœåŠ¡å™¨ç«¯çš„é€»è¾‘æ¶æ„è¯´æ˜"></p><h5 id="1-1-ç¬¬1å±‚ï¼šè¿æ¥å±‚"><strong>1.1</strong> <strong>ç¬¬1å±‚ï¼šè¿æ¥å±‚</strong></h5><p>ç³»ç»Ÿï¼ˆå®¢æˆ·ç«¯ï¼‰è®¿é—®<code>MySQL</code>æœåŠ¡å™¨å‰ï¼Œåšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»ºç«‹<code>TCP</code>è¿æ¥ã€‚</p><p>ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥æˆåŠŸåï¼Œ<code>MySQL</code>æœåŠ¡å™¨å¯¹<code>TCP</code>ä¼ è¾“è¿‡æ¥çš„è´¦å·å¯†ç åšèº«ä»½è®¤è¯ã€æƒé™è·å–ã€‚</p><ul><li><strong>ç”¨æˆ·åæˆ–å¯†ç ä¸å¯¹ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªAccess denied for useré”™è¯¯ï¼Œå®¢æˆ·ç«¯ç¨‹åºç»“æŸæ‰§è¡Œ</strong></li><li><strong>ç”¨æˆ·åå¯†ç è®¤è¯é€šè¿‡ï¼Œä¼šä»æƒé™è¡¨æŸ¥å‡ºè´¦å·æ‹¥æœ‰çš„æƒé™ä¸è¿æ¥å…³è”ï¼Œä¹‹åçš„æƒé™åˆ¤æ–­é€»è¾‘ï¼Œéƒ½å°†ä¾èµ–äºæ­¤æ—¶è¯»åˆ°çš„æƒé™</strong></li></ul><p><code>TCP</code>è¿æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¿…é¡»è¦åˆ†é…ç»™ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„äº¤äº’ã€‚æ‰€ä»¥è¿˜ä¼šæœ‰ä¸ªçº¿ç¨‹æ± ï¼Œå»èµ°åé¢çš„æµç¨‹ã€‚æ¯ä¸€ä¸ªè¿æ¥ä»çº¿ç¨‹æ± ä¸­è·å–çº¿ç¨‹ï¼Œçœå»äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚</p><h5 id="1-2-ç¬¬2å±‚ï¼šæœåŠ¡å±‚"><strong>1.2</strong> <strong>ç¬¬2å±‚ï¼šæœåŠ¡å±‚</strong></h5><ul><li><p><strong>SQL Interface: SQLæ¥å£</strong></p><ul><li>æ¥æ”¶ç”¨æˆ·çš„SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›ç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„ç»“æœã€‚æ¯”å¦‚SELECT â€¦ FROMå°±æ˜¯è°ƒç”¨SQL Interface</li><li>MySQLæ”¯æŒDMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰ã€DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰ã€å­˜å‚¨è¿‡ç¨‹ã€è§†å›¾ã€è§¦å‘å™¨ã€è‡ªå®šä¹‰å‡½æ•°ç­‰å¤šç§SQLè¯­è¨€æ¥å£</li></ul></li><li><p><strong>Parser:</strong> <strong>è§£æå™¨</strong></p><ul><li>åœ¨è§£æå™¨ä¸­å¯¹ SQL è¯­å¥è¿›è¡Œè¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€‚å°†SQLè¯­å¥åˆ†è§£æˆæ•°æ®ç»“æ„ï¼Œå¹¶å°†è¿™ä¸ªç»“æ„ä¼ é€’åˆ°åç»­æ­¥éª¤ï¼Œä»¥åSQLè¯­å¥çš„ä¼ é€’å’Œå¤„ç†å°±æ˜¯åŸºäºè¿™ä¸ªç»“æ„çš„ã€‚å¦‚æœåœ¨åˆ†è§£æ„æˆä¸­é‡åˆ°é”™è¯¯ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¿™ä¸ªSQLè¯­å¥æ˜¯ä¸åˆç†çš„ã€‚</li><li>åœ¨SQLå‘½ä»¤ä¼ é€’åˆ°è§£æå™¨çš„æ—¶å€™ä¼šè¢«è§£æå™¨éªŒè¯å’Œè§£æï¼Œå¹¶ä¸ºå…¶åˆ›å»º<code>è¯­æ³•æ ‘</code>ï¼Œå¹¶æ ¹æ®æ•°æ®å­—å…¸ä¸°å¯ŒæŸ¥è¯¢è¯­æ³•æ ‘ï¼Œä¼š<code>éªŒè¯è¯¥å®¢æˆ·ç«¯æ˜¯å¦å…·æœ‰æ‰§è¡Œè¯¥æŸ¥è¯¢çš„æƒé™</code>ã€‚åˆ›å»ºå¥½è¯­æ³•æ ‘åï¼ŒMySQLè¿˜ä¼šå¯¹SQLæŸ¥è¯¢è¿›è¡Œè¯­æ³•ä¸Šçš„ä¼˜åŒ–ï¼Œè¿›è¡ŒæŸ¥è¯¢é‡å†™ã€‚</li></ul></li><li><p><strong>Optimizer:</strong> <strong>æŸ¥è¯¢ä¼˜åŒ–å™¨</strong></p><ul><li>SQLè¯­å¥åœ¨è¯­æ³•è§£æä¹‹åã€æŸ¥è¯¢ä¹‹å‰ä¼šä½¿ç”¨æŸ¥è¯¢ä¼˜åŒ–å™¨ç¡®å®š SQL è¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œç”Ÿæˆä¸€ä¸ª<code>æ‰§è¡Œè®¡åˆ’</code>ã€‚</li><li>è¿™ä¸ªæ‰§è¡Œè®¡åˆ’è¡¨æ˜åº”è¯¥<code>ä½¿ç”¨å“ªäº›ç´¢å¼•</code>è¿›è¡ŒæŸ¥è¯¢ï¼ˆå…¨è¡¨æ£€ç´¢è¿˜æ˜¯ä½¿ç”¨ç´¢å¼•æ£€ç´¢ï¼‰ï¼Œè¡¨ä¹‹é—´çš„è¿æ¥é¡ºåºå¦‚ä½•ï¼Œæœ€åä¼šæŒ‰ç…§æ‰§è¡Œè®¡åˆ’ä¸­çš„æ­¥éª¤è°ƒç”¨å­˜å‚¨å¼•æ“æä¾›çš„æ–¹æ³•æ¥çœŸæ­£çš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</li><li>å®ƒä½¿ç”¨â€œ<code>é€‰å–-æŠ•å½±-è¿æ¥</code>â€ç­–ç•¥è¿›è¡ŒæŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id,name FROM student WHERE gender = &#x27;å¥³&#x27;;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®WHEREè¯­å¥è¿›è¡Œ<code>é€‰å–</code>ï¼Œè€Œä¸æ˜¯å°†è¡¨å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ä»¥åå†è¿›è¡Œgenderè¿‡æ»¤ã€‚ è¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®idå’Œnameè¿›è¡Œå±æ€§<code>æŠ•å½±</code>ï¼Œè€Œä¸æ˜¯å°†å±æ€§å…¨éƒ¨å–å‡ºä»¥åå†è¿›è¡Œè¿‡æ»¤ï¼Œå°†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶<code>è¿æ¥</code>èµ·æ¥ç”Ÿæˆæœ€ç»ˆæŸ¥è¯¢ç»“æœã€‚</p></li><li><p><strong>Caches &amp; Buffersï¼š æŸ¥è¯¢ç¼“å­˜ç»„ä»¶</strong></p><ul><li>MySQLå†…éƒ¨ç»´æŒç€ä¸€äº›Cacheå’ŒBufferï¼Œæ¯”å¦‚Query Cacheç”¨æ¥ç¼“å­˜ä¸€æ¡SELECTè¯­å¥çš„æ‰§è¡Œç»“æœï¼Œå¦‚æœèƒ½å¤Ÿåœ¨å…¶ä¸­æ‰¾åˆ°å¯¹åº”çš„æŸ¥è¯¢ç»“æœï¼Œé‚£ä¹ˆå°±ä¸å¿…å†è¿›è¡ŒæŸ¥è¯¢è§£æã€ä¼˜åŒ–å’Œæ‰§è¡Œçš„æ•´ä¸ªè¿‡ç¨‹äº†ï¼Œç›´æ¥å°†ç»“æœåé¦ˆç»™å®¢æˆ·ç«¯ã€‚</li><li>è¿™ä¸ªç¼“å­˜æœºåˆ¶æ˜¯ç”±ä¸€ç³»åˆ—å°ç¼“å­˜ç»„æˆçš„ã€‚æ¯”å¦‚è¡¨ç¼“å­˜ï¼Œè®°å½•ç¼“å­˜ï¼Œkeyç¼“å­˜ï¼Œæƒé™ç¼“å­˜ç­‰ ã€‚</li><li>è¿™ä¸ªæŸ¥è¯¢ç¼“å­˜å¯ä»¥åœ¨<code>ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´å…±äº«</code>ã€‚</li><li>ä»MySQL 5.7.20å¼€å§‹ï¼Œä¸æ¨èä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶åœ¨<code>MySQL 8.0ä¸­åˆ é™¤</code>ã€‚</li></ul></li></ul><h5 id="1-3-ç¬¬3å±‚ï¼šå¼•æ“å±‚"><strong>1.3</strong> <strong>ç¬¬3å±‚ï¼šå¼•æ“å±‚</strong></h5><p>æ’ä»¶å¼å­˜å‚¨å¼•æ“å±‚ï¼ˆ Storage Enginesï¼‰ï¼Œ<strong>çœŸæ­£çš„è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–ï¼Œå¯¹ç‰©ç†æœåŠ¡å™¨çº§åˆ«ç»´æŠ¤çš„åº•å±‚æ•°æ®æ‰§è¡Œæ“ä½œ</strong>ï¼ŒæœåŠ¡å±‚é€šè¿‡APIä¸å­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ã€‚</p><h5 id="1-4-å°ç»“"><strong>1.4</strong> <strong>å°ç»“</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291131321.png" alt="image-20220329113126234"></p><p>ç®€åŒ–ä¸ºä¸‰å±‚ç»“æ„ï¼š</p><ol><li><p>è¿æ¥å±‚ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€ SQL è‡³æœåŠ¡å™¨ç«¯ï¼›</p></li><li><p>SQL å±‚ï¼ˆæœåŠ¡å±‚ï¼‰ï¼šå¯¹ SQL è¯­å¥è¿›è¡ŒæŸ¥è¯¢å¤„ç†ï¼›ä¸æ•°æ®åº“æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼æ— å…³ï¼›</p></li><li><p>å­˜å‚¨å¼•æ“å±‚ï¼šä¸æ•°æ®åº“æ–‡ä»¶æ‰“äº¤é“ï¼Œè´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œè¯»å–ã€‚</p></li></ol><h4 id="2-SQLæ‰§è¡Œæµç¨‹"><strong>2. SQLæ‰§è¡Œæµç¨‹</strong></h4><h5 id="2-1-MySQL-ä¸­çš„-SQLæ‰§è¡Œæµç¨‹"><strong>2.1 MySQL</strong> <strong>ä¸­çš„</strong> <strong>SQLæ‰§è¡Œæµç¨‹</strong></h5><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291133116.png" alt="image-20220329113337008"></p><p><strong>MySQLçš„æŸ¥è¯¢æµç¨‹ï¼š</strong></p><p><strong>1.</strong> <strong>æŸ¥è¯¢ç¼“å­˜</strong>ï¼šServer å¦‚æœåœ¨æŸ¥è¯¢ç¼“å­˜ä¸­å‘ç°äº†è¿™æ¡ SQL è¯­å¥ï¼Œå°±ä¼šç›´æ¥å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±è¿›å…¥åˆ°è§£æå™¨é˜¶æ®µã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥åœ¨ MySQL8.0 ä¹‹åå°±æŠ›å¼ƒäº†è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>æŸ¥è¯¢ç¼“å­˜æ˜¯æå‰æŠŠæŸ¥è¯¢ç»“æœç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·ä¸‹æ¬¡ä¸éœ€è¦æ‰§è¡Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°ç»“æœã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨MySQL ä¸­çš„æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æ˜¯ç¼“å­˜æŸ¥è¯¢è®¡åˆ’ï¼Œè€Œæ˜¯æŸ¥è¯¢å¯¹åº”çš„ç»“æœã€‚è¿™å°±æ„å‘³ç€æŸ¥è¯¢åŒ¹é…çš„<code>é²æ£’æ€§å¤§å¤§é™ä½</code>ï¼Œåªæœ‰<code>ç›¸åŒçš„æŸ¥è¯¢æ“ä½œæ‰ä¼šå‘½ä¸­æŸ¥è¯¢ç¼“å­˜</code>ã€‚ä¸¤ä¸ªæŸ¥è¯¢è¯·æ±‚åœ¨ä»»ä½•å­—ç¬¦ä¸Šçš„ä¸åŒï¼ˆä¾‹å¦‚ï¼šç©ºæ ¼ã€æ³¨é‡Šã€å¤§å°å†™ï¼‰ï¼Œéƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸ä¼šå‘½ä¸­ã€‚å› æ­¤ MySQL çš„ æŸ¥è¯¢ç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ ã€‚</p><p>åŒæ—¶ï¼Œå¦‚æœæŸ¥è¯¢è¯·æ±‚ä¸­åŒ…å«æŸäº›ç³»ç»Ÿå‡½æ•°ã€ç”¨æˆ·è‡ªå®šä¹‰å˜é‡å’Œå‡½æ•°ã€ä¸€äº›ç³»ç»Ÿè¡¨ï¼Œå¦‚ mysqlã€ information_schemaã€ performance_schema æ•°æ®åº“ä¸­çš„è¡¨ï¼Œé‚£è¿™ä¸ªè¯·æ±‚å°±ä¸ä¼šè¢«ç¼“å­˜ã€‚</p><p>æ­¤å¤–ï¼Œæ—¢ç„¶æ˜¯ç¼“å­˜ï¼Œé‚£å°±æœ‰å®ƒ<code>ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™</code>ã€‚MySQLçš„ç¼“å­˜ç³»ç»Ÿä¼šç›‘æµ‹æ¶‰åŠåˆ°çš„æ¯å¼ è¡¨ï¼Œåªè¦è¯¥è¡¨çš„ç»“æ„æˆ–è€…æ•°æ®è¢«ä¿®æ”¹ï¼Œå¦‚å¯¹è¯¥è¡¨ä½¿ç”¨äº†<code>INSERT</code>ã€<code>UPDATE</code>ã€<code>DELETE</code>ã€<code>TRUNCATE TABLE</code>ã€<code>ALTER TABLE</code>ã€<code>DROP TABLE</code>æˆ–<code>DROP DATABASE</code>è¯­å¥ï¼Œé‚£ä½¿ç”¨è¯¥è¡¨çš„æ‰€æœ‰é«˜é€Ÿç¼“å­˜æŸ¥è¯¢éƒ½å°†å˜ä¸ºæ— æ•ˆå¹¶ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤ï¼å¯¹äº<code>æ›´æ–°å‹åŠ›å¤§çš„æ•°æ®åº“</code>æ¥è¯´ï¼ŒæŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­ç‡ä¼šéå¸¸ä½ã€‚</p><p><strong>2.</strong> <strong>è§£æå™¨</strong>ï¼šåœ¨è§£æå™¨ä¸­å¯¹ SQL è¯­å¥è¿›è¡Œè¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€‚</p><p>åˆ†æå™¨å…ˆåšâ€œ<code>è¯æ³•åˆ†æ</code>â€ã€‚ä½ è¾“å…¥çš„æ˜¯ç”±å¤šä¸ªå­—ç¬¦ä¸²å’Œç©ºæ ¼ç»„æˆçš„ä¸€æ¡ SQL è¯­å¥ï¼ŒMySQL éœ€è¦è¯†åˆ«å‡ºé‡Œé¢çš„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œä»£è¡¨ä»€ä¹ˆã€‚ MySQL ä»ä½ è¾“å…¥çš„&quot;select&quot;è¿™ä¸ªå…³é”®å­—è¯†åˆ«å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å®ƒä¹Ÿè¦æŠŠå­—ç¬¦ä¸²â€œTâ€è¯†åˆ«æˆâ€œè¡¨å Tâ€ï¼ŒæŠŠå­—ç¬¦ä¸²â€œIDâ€è¯†åˆ«æˆâ€œåˆ— IDâ€ã€‚</p><p>æ¥ç€ï¼Œè¦åšâ€œ<code>è¯­æ³•åˆ†æ</code>â€ã€‚æ ¹æ®è¯æ³•åˆ†æçš„ç»“æœï¼Œè¯­æ³•åˆ†æå™¨ï¼ˆæ¯”å¦‚ï¼šBisonï¼‰ä¼šæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåˆ¤æ–­ä½ è¾“å…¥çš„è¿™ä¸ª SQL è¯­å¥æ˜¯å¦<code>æ»¡è¶³ MySQL è¯­æ³•</code>ã€‚å¦‚æœSQLè¯­å¥æ­£ç¡®ï¼Œåˆ™ä¼šç”Ÿæˆä¸€ä¸ªè¯­æ³•æ ‘ã€‚</p><p><strong>3.</strong> <strong>ä¼˜åŒ–å™¨</strong>ï¼šåœ¨ä¼˜åŒ–å™¨ä¸­ä¼šç¡®å®š SQL è¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œæ¯”å¦‚æ˜¯æ ¹æ®<code>å…¨è¡¨æ£€ç´¢</code>ï¼Œè¿˜æ˜¯æ ¹æ®<code>ç´¢å¼•æ£€ç´¢</code>ç­‰ã€‚åœ¨æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸­ï¼Œå¯ä»¥åˆ†ä¸º<code>é€»è¾‘æŸ¥è¯¢</code>ä¼˜åŒ–é˜¶æ®µå’Œ<code>ç‰©ç†æŸ¥è¯¢</code>ä¼˜åŒ–é˜¶æ®µã€‚</p><p><strong>4.</strong> <strong>æ‰§è¡Œå™¨</strong>ï¼šåœ¨æ‰§è¡Œä¹‹å‰éœ€è¦åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦<code>å…·å¤‡æƒé™</code>ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šè¿”å›æƒé™é”™è¯¯ã€‚å¦‚æœå…·å¤‡æƒé™ï¼Œå°±æ‰§è¡Œ SQLæŸ¥è¯¢å¹¶è¿”å›ç»“æœã€‚åœ¨ MySQL8.0 ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œå¦‚æœè®¾ç½®äº†æŸ¥è¯¢ç¼“å­˜ï¼Œè¿™æ—¶ä¼šå°†æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291145074.png" alt="image-20220329114541991"></p><p>SQL è¯­å¥åœ¨ MySQL ä¸­çš„æµç¨‹æ˜¯ï¼š SQLè¯­å¥â†’æŸ¥è¯¢ç¼“å­˜â†’è§£æå™¨â†’ä¼˜åŒ–å™¨â†’æ‰§è¡Œå™¨ ã€‚</p><h4 id="3-æ•°æ®åº“ç¼“å†²æ± -buffer-pool"><strong>3.</strong> <strong>æ•°æ®åº“ç¼“å†²æ± (buffer pool)</strong></h4><p><code>InnoDB</code>å­˜å‚¨å¼•æ“æ˜¯ä»¥é¡µä¸ºå•ä½æ¥ç®¡ç†å­˜å‚¨ç©ºé—´çš„ï¼Œæˆ‘ä»¬è¿›è¡Œçš„å¢åˆ æ”¹æŸ¥æ“ä½œå…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è®¿é—®é¡µé¢ï¼ˆåŒ…æ‹¬è¯»é¡µé¢ã€å†™é¡µé¢ã€åˆ›å»ºæ–°é¡µé¢ç­‰æ“ä½œï¼‰ã€‚è€Œç£ç›˜ I/O éœ€è¦æ¶ˆè€—çš„æ—¶é—´å¾ˆå¤šï¼Œè€Œåœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œæ•ˆç‡åˆ™ä¼šé«˜å¾ˆå¤šï¼Œä¸ºäº†èƒ½è®©æ•°æ®è¡¨æˆ–è€…ç´¢å¼•ä¸­çš„æ•°æ®éšæ—¶è¢«æˆ‘ä»¬æ‰€ç”¨ï¼ŒDBMS ä¼šç”³è¯·<code>å ç”¨å†…å­˜æ¥ä½œä¸ºæ•°æ®ç¼“å†²æ± </code>ï¼Œåœ¨çœŸæ­£è®¿é—®é¡µé¢ä¹‹å‰ï¼Œéœ€è¦æŠŠåœ¨ç£ç›˜ä¸Šçš„é¡µç¼“å­˜åˆ°å†…å­˜ä¸­çš„<code>Buffer Pool</code>ä¹‹åæ‰å¯ä»¥è®¿é—®ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥è®©ç£ç›˜æ´»åŠ¨æœ€å°åŒ–ï¼Œä»è€Œ<code>å‡å°‘ä¸ç£ç›˜ç›´æ¥è¿›è¡Œ I/O çš„æ—¶é—´</code>ã€‚è¦çŸ¥é“ï¼Œè¿™ç§ç­–ç•¥å¯¹æå‡ SQL è¯­å¥çš„æŸ¥è¯¢æ€§èƒ½æ¥è¯´è‡³å…³é‡è¦ã€‚å¦‚æœç´¢å¼•çš„æ•°æ®åœ¨ç¼“å†²æ± é‡Œï¼Œé‚£ä¹ˆè®¿é—®çš„æˆæœ¬å°±ä¼šé™ä½å¾ˆå¤šã€‚</p><h5 id="3-1-ç¼“å†²æ± -vs-æŸ¥è¯¢ç¼“å­˜"><strong>3.1</strong> <strong>ç¼“å†²æ± </strong> <strong>vs</strong> <strong>æŸ¥è¯¢ç¼“å­˜</strong></h5><p><strong>1.</strong> <strong>ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰</strong></p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291155004.png" alt="image-20220329115517901"></p><p>ä»å›¾ä¸­ï¼Œä½ èƒ½çœ‹åˆ° InnoDB ç¼“å†²æ± åŒ…æ‹¬äº†æ•°æ®é¡µã€ç´¢å¼•é¡µã€æ’å…¥ç¼“å†²ã€é”ä¿¡æ¯ã€è‡ªé€‚åº” Hash å’Œæ•°æ®å­—å…¸ä¿¡æ¯ç­‰ã€‚</p><p><strong>ç¼“å­˜åŸåˆ™ï¼š</strong></p><p>â€œ<code>ä½ç½® * é¢‘æ¬¡</code>â€è¿™ä¸ªåŸåˆ™ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å¯¹ I/O è®¿é—®æ•ˆç‡è¿›è¡Œä¼˜åŒ–ã€‚</p><p>é¦–å…ˆï¼Œä½ç½®å†³å®šæ•ˆç‡ï¼Œæä¾›ç¼“å†²æ± å°±æ˜¯ä¸ºäº†åœ¨å†…å­˜ä¸­å¯ä»¥ç›´æ¥è®¿é—®æ•°æ®ã€‚</p><p>å…¶æ¬¡ï¼Œé¢‘æ¬¡å†³å®šä¼˜å…ˆçº§é¡ºåºã€‚å› ä¸ºç¼“å†²æ± çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œæ¯”å¦‚ç£ç›˜æœ‰ 200Gï¼Œä½†æ˜¯å†…å­˜åªæœ‰ 16Gï¼Œç¼“å†²æ± å¤§å°åªæœ‰ 1Gï¼Œå°±æ— æ³•å°†æ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°ç¼“å†²æ± é‡Œï¼Œè¿™æ—¶å°±æ¶‰åŠåˆ°ä¼˜å…ˆçº§é¡ºåºï¼Œä¼š<code>ä¼˜å…ˆå¯¹ä½¿ç”¨é¢‘æ¬¡é«˜çš„çƒ­æ•°æ®è¿›è¡ŒåŠ è½½</code>ã€‚</p><p><strong>2.</strong> <strong>æŸ¥è¯¢ç¼“å­˜</strong></p><p>æŸ¥è¯¢ç¼“å­˜æ˜¯æå‰æŠŠ<code>æŸ¥è¯¢ç»“æœç¼“å­˜</code>èµ·æ¥ï¼Œè¿™æ ·ä¸‹æ¬¡ä¸éœ€è¦æ‰§è¡Œå°±å¯ä»¥ç›´æ¥æ‹¿åˆ°ç»“æœã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨MySQL ä¸­çš„æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æ˜¯ç¼“å­˜æŸ¥è¯¢è®¡åˆ’ï¼Œè€Œæ˜¯æŸ¥è¯¢å¯¹åº”çš„ç»“æœã€‚å› ä¸ºå‘½ä¸­æ¡ä»¶è‹›åˆ»ï¼Œè€Œä¸”åªè¦æ•°æ®è¡¨å‘ç”Ÿå˜åŒ–ï¼ŒæŸ¥è¯¢ç¼“å­˜å°±ä¼šå¤±æ•ˆï¼Œå› æ­¤å‘½ä¸­ç‡ä½ã€‚</p><h5 id="3-2-ç¼“å†²æ± å¦‚ä½•è¯»å–æ•°æ®"><strong>3.2</strong> <strong>ç¼“å†²æ± å¦‚ä½•è¯»å–æ•°æ®</strong></h5><p>ç¼“å†²æ± ç®¡ç†å™¨ä¼šå°½é‡å°†ç»å¸¸ä½¿ç”¨çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œåœ¨æ•°æ®åº“è¿›è¡Œé¡µé¢è¯»æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåˆ¤æ–­è¯¥é¡µé¢æ˜¯å¦åœ¨ç¼“å†²æ± ä¸­ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥è¯»å–ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šé€šè¿‡å†…å­˜æˆ–ç£ç›˜å°†é¡µé¢å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­å†è¿›è¡Œè¯»å–ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202203291159111.png" alt="image-20220329115958009"></p><h5 id="3-3-æŸ¥çœ‹-è®¾ç½®ç¼“å†²æ± çš„å¤§å°"><strong>3.3</strong> <strong>æŸ¥çœ‹/è®¾ç½®ç¼“å†²æ± çš„å¤§å°</strong></h5><p>æŸ¥çœ‹ç¼“å†²æ± çš„å¤§å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;innodb_buffer_pool_size&#x27;;</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¼“å†²æ± çš„å¤§å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global innodb_buffer_pool_size = 268435456;</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server]</span> </span><br><span class="line"><span class="attr">innodb_buffer_pool_size</span> = <span class="number">268435456</span></span><br></pre></td></tr></table></figure><h5 id="3-4-å¤šä¸ªBuffer-Poolå®ä¾‹"><strong>3.4</strong> <strong>å¤šä¸ªBuffer Poolå®ä¾‹</strong></h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server]</span> </span><br><span class="line"><span class="attr">innodb_buffer_pool_instances</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure><p>ä½•æŸ¥çœ‹ç¼“å†²æ± çš„ä¸ªæ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;innodb_buffer_pool_instances&#x27;;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ª<code>Buffer Pool</code>å®ä¾‹å®é™…å å†…å­˜ç©ºé—´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">innodb_buffer_pool_size/innodb_buffer_pool_instances</span><br></pre></td></tr></table></figure><h3 id=""></h3>]]></content>
    
    
    <summary type="html">ã€é€»è¾‘æ¶æ„å‰–æã€SQLæ‰§è¡Œæµç¨‹ã€æ•°æ®åº“ç¼“å†²æ± (buffer pool)ã€‘</summary>
    
    
    
    <category term="MySQLé«˜çº§ç¬”è®°" scheme="https://angus9823.github.io/categories/MySQL%E9%AB%98%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="MySQL" scheme="https://angus9823.github.io/tags/MySQL/"/>
    
  </entry>
  
</feed>
